<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Energy Leak Locator | Quantum Merlin</title>
    <meta name="description" content="Discover where your vital energy is draining and how to reclaim it. Identify energy vampires, incomplete tasks, and unconscious patterns.">
    <meta name="keywords" content="energy leak, vitality, energy vampires, emotional drain, energy recovery, quantum merlin">
    <meta name="author" content="Quantum Merlin">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://quantummerlin.com/energyleak">
    
    <!-- PWA -->
    <meta name="theme-color" content="#9333ea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Favicon -->
    <link rel="icon" href="https://quantummerlin.com/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="https://quantummerlin.com/apple-touch-icon.png">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Energy Leak Locator - Find Your Energy Drains">
    <meta property="og:description" content="Discover where your vital energy is draining and get recovery protocols.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://quantummerlin.com/energyleak">
    <meta property="og:site_name" content="Quantum Merlin">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Energy Leak Locator | Quantum Merlin">
    <meta name="twitter:description" content="Discover where your vital energy is draining.">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VW4LGE7L1T"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-VW4LGE7L1T');
    </script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Exo+2:wght@300;400;500;600;700&family=Cinzel:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Shared Quantum Styles -->
    <link rel="stylesheet" href="shared/css/quantum-variables.css">
    <link rel="stylesheet" href="shared/css/quantum-base.css">
    <link rel="stylesheet" href="shared/css/quantum-backgrounds.css">
    <link rel="stylesheet" href="shared/css/quantum-intro.css">
    
    <style>
        /* ========================================
           QUANTUM INTRO ANIMATION - INLINE
           ======================================== */
        #intro-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, #1a0033 0%, #0a0015 70%, #000000 100%);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        #lines-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .emoji-layer {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .intro-emoji {
            position: absolute;
            font-size: 80px;
            opacity: 0;
            filter: drop-shadow(0 0 20px currentColor);
        }

        #singularity {
            position: absolute;
            width: 400px;
            height: 400px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(147, 51, 234, 0.8) 0%, transparent 70%);
            opacity: 0;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        #intro-title {
            font-family: 'Orbitron', monospace;
            font-size: clamp(2rem, 8vw, 5rem);
            font-weight: 900;
            background: linear-gradient(135deg, #00f5ff 0%, #ff00ff 50%, #ffd700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0;
            letter-spacing: 8px;
            text-align: center;
            z-index: 10;
            position: relative;
        }

        .skip-intro {
            position: absolute;
            bottom: 40px;
            right: 40px;
            padding: 12px 30px;
            background: rgba(147, 51, 234, 0.3);
            border: 2px solid rgba(147, 51, 234, 0.5);
            color: #c4b5fd;
            font-family: 'Orbitron', monospace;
            font-size: 14px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .skip-intro:hover {
            background: rgba(147, 51, 234, 0.5);
            border-color: #9333ea;
        }

        #app-content {
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        #app-content.visible {
            opacity: 1;
        }

        /* ========================================
           CORE STYLES
           ======================================== */
        *, *::before, *::after {
            box-sizing: border-box;
        }
        
        html {
            overflow-x: hidden;
            max-width: 100vw;
            scroll-behavior: smooth;
        }
        
        body {
            background: #0a0a0f;
            color: #fff;
            overflow-x: hidden;
            max-width: 100vw;
            width: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Exo 2', sans-serif;
            line-height: 1.6;
        }

        /* ========================================
           FLOATING PARTICLES
           ======================================== */
        .particles-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, rgba(147, 51, 234, 0.8), transparent);
            border-radius: 50%;
            animation: floatParticle 15s infinite linear;
        }

        @keyframes floatParticle {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulseGlow {
            0%, 100% { 
                opacity: 1; 
                transform: scale(1); 
            }
            50% { 
                opacity: 0.8; 
                transform: scale(1.05); 
            }
        }

        /* ========================================
           HEADER
           ======================================== */
        .qm-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 18px 40px;
            background: rgba(10, 10, 15, 0.92);
            backdrop-filter: blur(25px) saturate(180%);
            border-bottom: 1px solid rgba(0, 245, 255, 0.15);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.4);
        }

        .qm-header-inner {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1600px;
            margin: 0 auto;
        }

        .qm-logo {
            display: flex;
            align-items: center;
            gap: 16px;
            text-decoration: none;
        }

        .qm-logo-icon {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #00f5ff 0%, #9d00ff 100%);
            border-radius: 14px;
            font-size: 1.8rem;
            box-shadow: 0 0 25px rgba(0, 245, 255, 0.5);
            animation: logoGlow 3s ease-in-out infinite;
        }

        @keyframes logoGlow {
            0%, 100% { box-shadow: 0 0 25px rgba(0, 245, 255, 0.5); }
            50% { box-shadow: 0 0 35px rgba(0, 245, 255, 0.7); }
        }

        .qm-logo-text {
            font-family: 'Orbitron', monospace;
            font-size: 1.4rem;
            font-weight: 800;
            background: linear-gradient(135deg, #00f5ff 0%, #ff00ff 50%, #ffd700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .qm-coffee-btn {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #FFDD00, #FFA500);
            color: #000;
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            border-radius: 14px;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 221, 0, 0.3);
        }

        .qm-coffee-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(255, 221, 0, 0.5);
            background: linear-gradient(135deg, #FFE44D, #FFB84D);
        }

        /* ========================================
           MAIN CONTENT
           ======================================== */
        main {
            padding: 120px 20px 60px;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        h1 {
            font-family: 'Orbitron', monospace;
            font-size: clamp(1.8rem, 5vw, 3.8rem);
            text-align: center;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #9333ea, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeInUp 0.8s ease-out;
            padding: 0 15px;
            word-wrap: break-word;
        }

        .subtitle {
            text-align: center;
            color: rgba(196, 181, 253, 0.9);
            margin-bottom: 50px;
            font-size: 1.3rem;
            animation: fadeInUp 0.8s ease-out 0.1s backwards;
        }

        .intro-section {
            background: linear-gradient(145deg, rgba(147, 51, 234, 0.15), rgba(236, 72, 153, 0.1));
            border: 2px solid rgba(147, 51, 234, 0.4);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 50px;
            line-height: 1.9;
            color: #c4b5fd;
            animation: fadeInUp 0.8s ease-out 0.2s backwards;
            position: relative;
            overflow: hidden;
        }

        .intro-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #9333ea, #ec4899, #ffd700);
        }

        .intro-section p {
            margin-bottom: 15px;
            font-size: clamp(1em, 2.5vw, 1.1em);
            text-align: center;
        }

        .intro-section strong {
            color: #ec4899;
        }

        .question-section {
            background: linear-gradient(145deg, rgba(30, 25, 45, 0.9), rgba(20, 20, 30, 0.8));
            border: 2px solid rgba(147, 51, 234, 0.3);
            border-radius: 20px;
            padding: 25px 20px;
            margin-bottom: 25px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            animation: fadeInUp 0.6s ease-out backwards;
            text-align: center;
            display: none; /* Hide old style */
        }

        /* Progress Bar */
        .progress-container {
            background: rgba(147, 51, 234, 0.1);
            border: 1px solid rgba(147, 51, 234, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .progress-bar {
            height: 8px;
            background: rgba(147, 51, 234, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #9333ea, #ec4899);
            border-radius: 10px;
            transition: width 0.4s ease;
            width: 0%;
        }

        .progress-text {
            text-align: center;
            color: #c4b5fd;
            font-size: 0.9em;
            font-family: 'Orbitron', monospace;
        }

        /* Accordion Questions */
        .questions-accordion {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .question-accordion-item {
            background: linear-gradient(145deg, rgba(30, 25, 45, 0.9), rgba(20, 20, 30, 0.8));
            border: 2px solid rgba(147, 51, 234, 0.3);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .question-accordion-item:hover {
            border-color: rgba(147, 51, 234, 0.5);
        }

        .question-accordion-item.active {
            border-color: #9333ea;
            box-shadow: 0 5px 25px rgba(147, 51, 234, 0.3);
        }

        .question-accordion-item.answered {
            border-color: rgba(52, 211, 153, 0.5);
        }

        .question-accordion-item.answered .question-header {
            background: rgba(52, 211, 153, 0.1);
        }

        .question-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 18px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            gap: 15px;
        }

        .question-header:hover {
            background: rgba(147, 51, 234, 0.1);
        }

        .question-header-left {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
            min-width: 0;
        }

        .question-num {
            background: linear-gradient(135deg, #9333ea, #7c3aed);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9em;
            flex-shrink: 0;
        }

        .question-accordion-item.answered .question-num {
            background: linear-gradient(135deg, #10b981, #34d399);
        }

        .question-preview {
            color: #c4b5fd;
            font-size: 0.95em;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .question-accordion-item.answered .question-preview {
            color: #34d399;
        }

        .accordion-icon {
            color: #9333ea;
            font-size: 1.2em;
            transition: transform 0.3s ease;
            flex-shrink: 0;
        }

        .question-accordion-item.active .accordion-icon {
            transform: rotate(180deg);
        }

        .question-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, padding 0.3s ease;
            padding: 0 20px;
        }

        .question-accordion-item.active .question-body {
            max-height: 400px;
            padding: 0 20px 25px;
        }

        .question-full-text {
            font-size: clamp(1.1em, 3vw, 1.3em);
            color: #e0d4f7;
            margin-bottom: 20px;
            line-height: 1.5;
            font-family: 'Cinzel', serif;
            text-align: center;
            padding-top: 5px;
        }

        .question-section:hover {
            border-color: #9333ea;
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(147, 51, 234, 0.2);
        }

        .question-section:nth-child(1) { animation-delay: 0.3s; }
        .question-section:nth-child(2) { animation-delay: 0.35s; }
        .question-section:nth-child(3) { animation-delay: 0.4s; }
        .question-section:nth-child(4) { animation-delay: 0.45s; }
        .question-section:nth-child(5) { animation-delay: 0.5s; }

        .question-number {
            color: #9333ea;
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 15px;
            font-family: 'Orbitron', monospace;
            text-align: center;
        }

        .question-text {
            font-size: clamp(1.1em, 3.5vw, 1.4em);
            color: #e0d4f7;
            margin-bottom: 25px;
            line-height: 1.6;
            font-family: 'Cinzel', serif;
            text-align: center;
            padding: 0 10px;
        }

        .scale-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 12px;
            margin-top: 25px;
            width: 100%;
        }

        .scale-label {
            font-size: 0.95em;
            color: #ec4899;
            text-align: center;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            letter-spacing: 0.5px;
            width: 100%;
        }

        .scale-options {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 6px;
            justify-content: center;
            width: 100%;
            max-width: 280px;
        }

        .scale-option {
            aspect-ratio: 1;
            max-width: 38px;
            width: 100%;
            border: 2px solid rgba(147, 51, 234, 0.3);
            border-radius: 12px;
            background: rgba(147, 51, 234, 0.1);
            color: #c4b5fd;
            font-size: 1.3em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            flex-shrink: 0;
        }

        .scale-option:hover {
            border-color: #9333ea;
            background: rgba(147, 51, 234, 0.2);
            transform: translateY(-3px) scale(1.05);
        }

        .scale-option.selected {
            background: linear-gradient(135deg, #9333ea 0%, #ec4899 100%);
            border-color: transparent;
            color: white;
            transform: scale(1.15);
            box-shadow: 0 8px 30px rgba(147, 51, 234, 0.6);
        }

        .submit-btn {
            width: 100%;
            max-width: 500px;
            display: block;
            margin: 40px auto;
            padding: 20px;
            background: linear-gradient(135deg, #9333ea 0%, #ec4899 100%);
            color: white;
            border: none;
            border-radius: 35px;
            font-size: 1.4em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-family: 'Orbitron', monospace;
            box-shadow: 0 10px 35px rgba(147, 51, 234, 0.4);
            position: relative;
            overflow: hidden;
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .submit-btn:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 50px rgba(147, 51, 234, 0.6);
        }

        .submit-btn:hover::before {
            left: 100%;
        }

        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .submit-btn:disabled:hover {
            transform: none;
            box-shadow: 0 10px 35px rgba(147, 51, 234, 0.4);
        }

        /* ========================================
           RESULTS SECTION
           ======================================== */
        .results-section {
            display: none;
            animation: fadeInUp 0.8s ease-out;
        }

        .results-section.active {
            display: block;
        }

        .result-title {
            font-size: 2.5em;
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            margin-bottom: 40px;
            font-family: 'Orbitron', monospace;
        }

        .insight-box {
            background: linear-gradient(145deg, rgba(147, 51, 234, 0.15), rgba(236, 72, 153, 0.1));
            border: 2px solid rgba(147, 51, 234, 0.4);
            border-radius: 20px;
            padding: 35px;
            margin: 30px 0;
            position: relative;
            overflow: hidden;
        }

        .insight-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #9333ea, #ec4899, #ffd700);
        }

        .insight-title {
            font-size: 1.6em;
            color: #9333ea;
            margin-bottom: 20px;
            font-family: 'Orbitron', monospace;
            text-align: center;
        }

        .insight-text {
            color: #c4b5fd;
            line-height: 1.9;
            font-size: 1.1em;
            text-align: center;
        }

        .insight-text strong {
            color: #ec4899;
        }

        .leak-visualization {
            background: linear-gradient(145deg, rgba(30, 25, 45, 0.9), rgba(20, 20, 30, 0.8));
            border: 2px solid rgba(147, 51, 234, 0.3);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 35px;
        }

        .leak-item {
            margin-bottom: 35px;
            padding-bottom: 35px;
            border-bottom: 1px solid rgba(147, 51, 234, 0.2);
        }

        .leak-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
            margin-bottom: 0;
        }

        .leak-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .leak-name {
            font-size: 1.6em;
            color: #ec4899;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
        }

        .leak-severity {
            padding: 8px 18px;
            border-radius: 25px;
            font-size: 0.9em;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
        }

        .severity-critical {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 2px solid #ef4444;
            animation: pulseGlow 2s infinite;
        }

        .severity-high {
            background: rgba(249, 115, 22, 0.2);
            color: #f97316;
            border: 2px solid #f97316;
        }

        .severity-moderate {
            background: rgba(234, 179, 8, 0.2);
            color: #eab308;
            border: 2px solid #eab308;
        }

        .leak-description {
            color: #c4b5fd;
            line-height: 1.8;
            margin-bottom: 20px;
            font-size: 1.05em;
        }

        .leak-bar {
            height: 35px;
            background: rgba(147, 51, 234, 0.2);
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 20px;
            border: 1px solid rgba(147, 51, 234, 0.3);
        }

        .leak-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #9333ea 0%, #ec4899 100%);
            transition: width 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 20px;
            color: white;
            font-weight: 700;
            font-size: 1.1em;
            box-shadow: 0 0 20px rgba(147, 51, 234, 0.5);
        }

        .recovery-tip {
            background: rgba(147, 51, 234, 0.1);
            border-left: 4px solid #9333ea;
            padding: 20px;
            border-radius: 8px;
            color: #c4b5fd;
            font-size: 1em;
            line-height: 1.8;
        }

        .recovery-tip strong {
            color: #ffd700;
        }

        .action-buttons {
            display: flex;
            gap: 20px;
            margin-top: 40px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .action-btn {
            flex: 1;
            min-width: 200px;
            padding: 18px 35px;
            border-radius: 30px;
            border: 2px solid rgba(147, 51, 234, 0.4);
            background: rgba(147, 51, 234, 0.15);
            color: #c4b5fd;
            text-decoration: none;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            font-weight: 600;
            font-size: 1.05em;
            display: inline-block;
        }

        .action-btn:hover {
            background: rgba(147, 51, 234, 0.3);
            border-color: #9333ea;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(147, 51, 234, 0.4);
        }

        /* ========================================
           SCROLL TO TOP BUTTON
           ======================================== */
        #scrollTopBtn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #9333ea, #ec4899);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 1000;
            box-shadow: 0 5px 25px rgba(147, 51, 234, 0.4);
        }

        #scrollTopBtn.visible {
            opacity: 1;
            visibility: visible;
        }

        #scrollTopBtn:hover {
            transform: scale(1.1) translateY(-3px);
        }

        /* ========================================
           MOBILE RESPONSIVE
           ======================================== */
        @media (max-width: 768px) {
            .qm-header {
                padding: 15px 20px;
            }

            .qm-logo-text {
                font-size: 1rem;
            }

            h1 {
                font-size: 1.6rem;
                padding: 0 10px;
            }

            .subtitle {
                font-size: 1rem;
                padding: 0 15px;
            }

            .intro-section {
                padding: 20px 15px;
            }

            .question-section {
                padding: 20px 15px;
            }

            .scale-option {
                width: 48px;
                height: 48px;
                font-size: 1.2em;
            }

            .action-buttons {
                flex-direction: column;
            }

            .action-btn {
                min-width: 100%;
            }

            .leak-header {
                flex-direction: column;
                align-items: center;
            }

            .skip-intro {
                bottom: 20px;
                right: 20px;
                font-size: 12px;
                padding: 10px 20px;
            }

            #intro-title {
                font-size: 2rem;
                letter-spacing: 4px;
            }

            .insight-box {
                padding: 25px 15px;
            }

            .insight-title {
                font-size: 1.3em;
                text-align: center;
            }

            .insight-text {
                font-size: 1em;
                text-align: center;
            }

            .leak-visualization {
                padding: 25px 15px;
            }

            main {
                padding: 100px 15px 40px;
            }
        }

        /* ========================================
           LOADING STATE
           ======================================== */
        .loading-pulse {
            animation: pulseGlow 1.5s infinite;
        }
    </style>
</head>
<body>
    <!-- ========================================
         QUANTUM INTRO ANIMATION
         ======================================== -->
    <div id="intro-container">
        <canvas id="lines-canvas"></canvas>
        <div class="emoji-layer">
            <div class="intro-emoji" id="intro-quantum">‚öõÔ∏è</div>
            <div class="intro-emoji" id="intro-wizard">üßô‚Äç‚ôÇÔ∏è</div>
            <div class="intro-emoji" id="intro-rose">üåπ</div>
        </div>
        <div id="singularity"></div>
        <div id="intro-title">QUANTUM MERLIN</div>
        <button class="skip-intro" onclick="skipIntro()">Skip Intro</button>
    </div>
    
    <div id="app-content">
        <!-- Floating Particles Background -->
        <div class="particles-bg" id="particlesBg"></div>

        <!-- Header -->
        <header class="qm-header">
            <div class="qm-header-inner">
                <a href="/index.html" class="qm-logo" target="_blank">
                    <div class="qm-logo-icon">üßô‚Äç‚ôÇÔ∏è</div>
                    <div class="qm-logo-text">Quantum Merlin</div>
                </a>
                <a href="https://buymeacoffee.com/quantummerlin" target="_blank" class="qm-coffee-btn" title="Buy Me a Coffee">
                    <span style="font-size: 1.8rem;">‚òï</span>
                </a>
            </div>
        </header>

        <!-- Main Content -->
        <main>
            <h1>Energy Leak Locator</h1>
            <p class="subtitle">Discover where your vital energy is draining and how to reclaim it</p>

            <div class="intro-section">
                <p><strong>You have a finite amount of energy each day.</strong></p>
                <p>Most people unknowingly leak 60-80% of their vital energy through invisible drains: toxic relationships, unfinished tasks, suppressed emotions, misaligned commitments, and unconscious patterns.</p>
                <p><strong>This tool identifies your top 3 energy leaks and provides recovery protocols.</strong></p>
            </div>

            <div id="questionsContainer">
                <!-- Progress Bar -->
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text"><span id="answeredCount">0</span> of 5 questions answered</div>
                </div>

                <!-- Accordion Questions -->
                <div class="questions-accordion">
                    <!-- Question 1 -->
                    <div class="question-accordion-item active" id="accordion-q1">
                        <div class="question-header" onclick="toggleAccordion('q1')">
                            <div class="question-header-left">
                                <div class="question-num">1</div>
                                <div class="question-preview">Unfinished tasks or projects</div>
                            </div>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="question-body">
                            <div class="question-full-text">I have unfinished tasks or projects that weigh on my mind</div>
                            <div class="scale-container">
                                <span class="scale-label">&#9664; Not at all</span>
                                <div class="scale-options">
                                    <div class="scale-option" data-question="q1" data-value="0" onclick="selectAnswer('q1', 0)">0</div>
                                    <div class="scale-option" data-question="q1" data-value="1" onclick="selectAnswer('q1', 1)">1</div>
                                    <div class="scale-option" data-question="q1" data-value="2" onclick="selectAnswer('q1', 2)">2</div>
                                    <div class="scale-option" data-question="q1" data-value="3" onclick="selectAnswer('q1', 3)">3</div>
                                    <div class="scale-option" data-question="q1" data-value="4" onclick="selectAnswer('q1', 4)">4</div>
                                    <div class="scale-option" data-question="q1" data-value="5" onclick="selectAnswer('q1', 5)">5</div>
                                </div>
                                <span class="scale-label">Constantly &#9654;</span>
                            </div>
                        </div>
                    </div>

                    <!-- Question 2 -->
                    <div class="question-accordion-item" id="accordion-q2">
                        <div class="question-header" onclick="toggleAccordion('q2')">
                            <div class="question-header-left">
                                <div class="question-num">2</div>
                                <div class="question-preview">People who drain rather than energize</div>
                            </div>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="question-body">
                            <div class="question-full-text">I spend time with people who drain rather than energize me</div>
                            <div class="scale-container">
                                <span class="scale-label">&#9664; Never</span>
                                <div class="scale-options">
                                    <div class="scale-option" data-question="q2" data-value="0" onclick="selectAnswer('q2', 0)">0</div>
                                    <div class="scale-option" data-question="q2" data-value="1" onclick="selectAnswer('q2', 1)">1</div>
                                    <div class="scale-option" data-question="q2" data-value="2" onclick="selectAnswer('q2', 2)">2</div>
                                    <div class="scale-option" data-question="q2" data-value="3" onclick="selectAnswer('q2', 3)">3</div>
                                    <div class="scale-option" data-question="q2" data-value="4" onclick="selectAnswer('q2', 4)">4</div>
                                    <div class="scale-option" data-question="q2" data-value="5" onclick="selectAnswer('q2', 5)">5</div>
                                </div>
                                <span class="scale-label">Frequently &#9654;</span>
                            </div>
                        </div>
                    </div>

                    <!-- Question 3 -->
                    <div class="question-accordion-item" id="accordion-q3">
                        <div class="question-header" onclick="toggleAccordion('q3')">
                            <div class="question-header-left">
                                <div class="question-num">3</div>
                                <div class="question-preview">Suppress emotions rather than processing</div>
                            </div>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="question-body">
                            <div class="question-full-text">I suppress emotions rather than processing them</div>
                            <div class="scale-container">
                                <span class="scale-label">&#9664; Rarely</span>
                                <div class="scale-options">
                                    <div class="scale-option" data-question="q3" data-value="0" onclick="selectAnswer('q3', 0)">0</div>
                                    <div class="scale-option" data-question="q3" data-value="1" onclick="selectAnswer('q3', 1)">1</div>
                                    <div class="scale-option" data-question="q3" data-value="2" onclick="selectAnswer('q3', 2)">2</div>
                                    <div class="scale-option" data-question="q3" data-value="3" onclick="selectAnswer('q3', 3)">3</div>
                                    <div class="scale-option" data-question="q3" data-value="4" onclick="selectAnswer('q3', 4)">4</div>
                                    <div class="scale-option" data-question="q3" data-value="5" onclick="selectAnswer('q3', 5)">5</div>
                                </div>
                                <span class="scale-label">Always &#9654;</span>
                            </div>
                        </div>
                    </div>

                    <!-- Question 4 -->
                    <div class="question-accordion-item" id="accordion-q4">
                        <div class="question-header" onclick="toggleAccordion('q4')">
                            <div class="question-header-left">
                                <div class="question-num">4</div>
                                <div class="question-preview">Say yes to unwanted commitments</div>
                            </div>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="question-body">
                            <div class="question-full-text">I say yes to commitments I don't actually want to do</div>
                            <div class="scale-container">
                                <span class="scale-label">&#9664; Never</span>
                                <div class="scale-options">
                                    <div class="scale-option" data-question="q4" data-value="0" onclick="selectAnswer('q4', 0)">0</div>
                                    <div class="scale-option" data-question="q4" data-value="1" onclick="selectAnswer('q4', 1)">1</div>
                                    <div class="scale-option" data-question="q4" data-value="2" onclick="selectAnswer('q4', 2)">2</div>
                                    <div class="scale-option" data-question="q4" data-value="3" onclick="selectAnswer('q4', 3)">3</div>
                                    <div class="scale-option" data-question="q4" data-value="4" onclick="selectAnswer('q4', 4)">4</div>
                                    <div class="scale-option" data-question="q4" data-value="5" onclick="selectAnswer('q4', 5)">5</div>
                                </div>
                                <span class="scale-label">Often &#9654;</span>
                            </div>
                        </div>
                    </div>

                    <!-- Question 5 -->
                    <div class="question-accordion-item" id="accordion-q5">
                        <div class="question-header" onclick="toggleAccordion('q5')">
                            <div class="question-header-left">
                                <div class="question-num">5</div>
                                <div class="question-preview">Ruminate on past or worry about future</div>
                            </div>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="question-body">
                            <div class="question-full-text">I ruminate on past events or worry about the future</div>
                            <div class="scale-container">
                                <span class="scale-label">&#9664; Rarely</span>
                                <div class="scale-options">
                                    <div class="scale-option" data-question="q5" data-value="0" onclick="selectAnswer('q5', 0)">0</div>
                                    <div class="scale-option" data-question="q5" data-value="1" onclick="selectAnswer('q5', 1)">1</div>
                                    <div class="scale-option" data-question="q5" data-value="2" onclick="selectAnswer('q5', 2)">2</div>
                                    <div class="scale-option" data-question="q5" data-value="3" onclick="selectAnswer('q5', 3)">3</div>
                                    <div class="scale-option" data-question="q5" data-value="4" onclick="selectAnswer('q5', 4)">4</div>
                                    <div class="scale-option" data-question="q5" data-value="5" onclick="selectAnswer('q5', 5)">5</div>
                                </div>
                                <span class="scale-label">Constantly &#9654;</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <button class="submit-btn" id="submitBtn" onclick="generateResults()" disabled>
                üîç Locate My Energy Leaks
            </button>

            <div class="results-section" id="resultsSection">
                <!-- Results will be generated here -->
            </div>
        </main>

        <!-- Footer -->
        <footer style="text-align: center; padding: 40px 20px; margin-top: 60px; border-top: 1px solid rgba(147, 51, 234, 0.15); position: relative; z-index: 1;">
            <p style="color: rgba(255, 255, 255, 0.7);">&copy; 2024 Quantum Merlin. Bridging ancient wisdom with quantum possibilities.</p>
            <p style="margin-top: 15px;">
                <a href="./genesis/privacy.html" target="_blank" style="color: #9333ea; text-decoration: none; margin: 0 15px;">Privacy Policy</a>
                <a href="./genesis/terms.html" target="_blank" style="color: #9333ea; text-decoration: none; margin: 0 15px;">Terms of Service</a>
                <a href="./genesis/disclaimer.html" target="_blank" style="color: #9333ea; text-decoration: none; margin: 0 15px;">Disclaimer</a>
            </p>
            <p style="margin-top: 15px;">
                <a href="https://buymeacoffee.com/quantummerlin" target="_blank" style="color: #9333ea; text-decoration: none;">‚òï Support This Project</a>
            </p>
        </footer>
    </div>
    
    <!-- Scroll to Top Button -->
    <button id="scrollTopBtn">‚Üë</button>

    <script>
        // ========================================
        // QUANTUM INTRO ANIMATION
        // ========================================
        function skipIntro() {
            localStorage.setItem('qm_intro_watched', 'true');
            document.getElementById('intro-container').style.display = 'none';
            document.getElementById('app-content').classList.add('visible');
        }

        (function initIntro() {
            const introWatched = localStorage.getItem('qm_intro_watched');
            
            if (introWatched === 'true') {
                document.getElementById('intro-container').style.display = 'none';
                document.getElementById('app-content').classList.add('visible');
                return;
            }

            const canvas = document.getElementById('lines-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const quantum = document.getElementById('intro-quantum');
            const wizard = document.getElementById('intro-wizard');
            const rose = document.getElementById('intro-rose');
            const singularity = document.getElementById('singularity');
            const title = document.getElementById('intro-title');

            const timeline = [
                { t: 0, action: () => { quantum.style.cssText = 'top: 50%; left: 50%; transform: translate(-50%, -50%); opacity: 1;'; } },
                { t: 1000, action: () => { wizard.style.cssText = 'top: 50%; left: 30%; transform: translate(-50%, -50%); opacity: 1;'; } },
                { t: 2000, action: () => { rose.style.cssText = 'top: 50%; left: 70%; transform: translate(-50%, -50%); opacity: 1;'; } },
                { t: 3000, action: () => { quantum.style.cssText += 'transition: all 1s ease; top: 40%; left: 50%;'; } },
                { t: 3500, action: () => { wizard.style.cssText += 'transition: all 1s ease; top: 55%; left: 35%;'; } },
                { t: 4000, action: () => { rose.style.cssText += 'transition: all 1s ease; top: 55%; left: 65%;'; } },
                { t: 5000, action: () => { singularity.style.opacity = '1'; } },
                { t: 6000, action: () => { 
                    quantum.style.cssText += 'transform: translate(-50%, -50%) scale(0); opacity: 0;';
                    wizard.style.cssText += 'transform: translate(-50%, -50%) scale(0); opacity: 0;';
                    rose.style.cssText += 'transform: translate(-50%, -50%) scale(0); opacity: 0;';
                } },
                { t: 7500, action: () => { title.style.cssText = 'opacity: 1; transform: scale(1);'; } },
                { t: 11000, action: () => { skipIntro(); } }
            ];

            timeline.forEach(({ t, action }) => setTimeout(action, t));

            let particles = [];
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2
                });
            }

            function animate() {
                ctx.fillStyle = 'rgba(10, 0, 21, 0.1)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(147, 51, 234, 0.5)';
                    ctx.fill();

                    particles.forEach(p2 => {
                        const dist = Math.hypot(p.x - p2.x, p.y - p2.y);
                        if (dist < 100) {
                            ctx.beginPath();
                            ctx.moveTo(p.x, p.y);
                            ctx.lineTo(p2.x, p2.y);
                            ctx.strokeStyle = `rgba(147, 51, 234, ${0.15 * (1 - dist / 100)})`;
                            ctx.stroke();
                        }
                    });
                });

                requestAnimationFrame(animate);
            }
            animate();
        })();

        // ========================================
        // FLOATING PARTICLES SYSTEM
        // ========================================
        function createParticles() {
            const container = document.getElementById('particlesBg');
            if (!container) return;
            
            const particleCount = 30;
            const colors = ['rgba(147, 51, 234, 0.6)', 'rgba(236, 72, 153, 0.5)', 'rgba(255, 215, 0, 0.4)'];
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particle.style.width = (Math.random() * 4 + 2) + 'px';
                particle.style.height = particle.style.width;
                particle.style.background = `radial-gradient(circle, ${colors[Math.floor(Math.random() * colors.length)]}, transparent)`;
                container.appendChild(particle);
            }
        }
        createParticles();

        // ========================================
        // SCROLL TO TOP BUTTON
        // ========================================
        const scrollBtn = document.getElementById('scrollTopBtn');
        
        scrollBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        window.addEventListener('scroll', () => {
            if (window.scrollY > 500) {
                scrollBtn.classList.add('visible');
            } else {
                scrollBtn.classList.remove('visible');
            }
        });

        // ========================================
        // ENERGY LEAK ASSESSMENT
        // ========================================
        let answers = {};
        const totalQuestions = 5;

        // Toggle accordion - open one, close others
        function toggleAccordion(questionId) {
            const allItems = document.querySelectorAll('.question-accordion-item');
            const clickedItem = document.getElementById('accordion-' + questionId);
            const isActive = clickedItem.classList.contains('active');
            
            // Close all
            allItems.forEach(item => item.classList.remove('active'));
            
            // Open clicked if it wasn't already open
            if (!isActive) {
                clickedItem.classList.add('active');
            }
        }

        // Update progress bar
        function updateProgress() {
            const answered = Object.keys(answers).length;
            const percentage = (answered / totalQuestions) * 100;
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('answeredCount').textContent = answered;
        }

        function selectAnswer(question, value) {
            answers[question] = value;
            
            // Update UI
            document.querySelectorAll(`[data-question="${question}"]`).forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`[data-question="${question}"][data-value="${value}"]`).classList.add('selected');
            
            // Mark accordion as answered
            const accordionItem = document.getElementById('accordion-' + question);
            accordionItem.classList.add('answered');
            
            // Update progress
            updateProgress();
            
            // Auto-advance to next unanswered question
            setTimeout(() => {
                const questionNum = parseInt(question.replace('q', ''));
                let nextQuestion = null;
                
                // Find next unanswered question
                for (let i = 1; i <= totalQuestions; i++) {
                    if (!answers['q' + i]) {
                        nextQuestion = 'q' + i;
                        break;
                    }
                }
                
                if (nextQuestion) {
                    toggleAccordion(nextQuestion);
                } else {
                    // All answered - close current
                    accordionItem.classList.remove('active');
                }
            }, 300);
            
            // Enable submit button when all questions answered
            if (Object.keys(answers).length === 5) {
                document.getElementById('submitBtn').disabled = false;
            }

            // Track in analytics
            if (typeof gtag !== 'undefined') {
                gtag('event', 'question_answered', {
                    question_id: question,
                    value: value
                });
            }
        }

        function generateResults() {
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.textContent = '‚ö° Analyzing Energy Patterns...';
            submitBtn.disabled = true;
            submitBtn.classList.add('loading-pulse');
            
            // Track in analytics
            if (typeof gtag !== 'undefined') {
                gtag('event', 'assessment_completed', {
                    total_questions: 5
                });
            }
            
            setTimeout(() => {
                const leaks = [
                    {
                        name: 'Unfinished Business',
                        score: answers.q1,
                        description: 'Incomplete tasks and projects create mental loops that drain energy even when you\'re not actively working on them. Your brain keeps these items in active memory, consuming processing power.',
                        recovery: 'Complete or consciously abandon. Make a list of all unfinished items. For each: complete it, schedule it, delegate it, or officially abandon it. The key is closure‚Äîyour brain needs to know the loop is closed.'
                    },
                    {
                        name: 'Toxic Relationships',
                        score: answers.q2,
                        description: 'Energy vampires‚Äîpeople who consistently take more than they give. After interactions with them, you feel depleted, anxious, or emotionally drained.',
                        recovery: 'Implement strategic distance. You don\'t need to cut people off dramatically. Reduce frequency, shorten duration, and create boundaries. Notice who energizes you and prioritize those connections.'
                    },
                    {
                        name: 'Emotional Suppression',
                        score: answers.q3,
                        description: 'Unfelt emotions don\'t disappear‚Äîthey go underground and leak energy continuously. Suppression requires constant effort, like holding a beach ball underwater.',
                        recovery: 'Feel to heal. Set aside 10 minutes daily to feel whatever emotions are present without judgment or story. Let them move through you. Emotions are energy in motion‚Äîthey only get stuck when suppressed.'
                    },
                    {
                        name: 'Misaligned Commitments',
                        score: answers.q4,
                        description: 'Every "yes" to something you don\'t want is a "no" to something you do want. These misaligned commitments create internal resistance that drains energy.',
                        recovery: 'Practice authentic no. Start small‚Äîdecline one thing this week that you would normally accept out of obligation. Notice that the world doesn\'t end. Your energy is too valuable to spend on things that don\'t align.'
                    },
                    {
                        name: 'Mental Time Travel',
                        score: answers.q5,
                        description: 'Ruminating on the past or worrying about the future pulls you out of the present moment, where your actual power resides. This mental time travel is exhausting.',
                        recovery: 'Anchor to now. When you notice rumination, bring attention to physical sensations‚Äîyour breath, your feet on the ground, sounds around you. The present moment requires no energy to maintain.'
                    }
                ];

                // Sort by score and get top 3
                leaks.sort((a, b) => b.score - a.score);
                const topLeaks = leaks.slice(0, 3);
                
                const totalLeak = topLeaks.reduce((sum, leak) => sum + leak.score, 0);
                const avgLeak = totalLeak / 3;
                const energyDrainPct = Math.round((totalLeak / 15) * 100);
                
                const resultsHTML = `
                    <div class="result-title">Your Energy Leak Analysis</div>
                    
                    <div class="insight-box">
                        <div class="insight-title">üîã Overall Energy Status</div>
                        <div class="insight-text">
                            Your top 3 energy leaks are draining approximately <strong>${energyDrainPct}%</strong> of your available energy. 
                            ${avgLeak >= 4 ? '<br><br>‚ö†Ô∏è <strong>This is a CRITICAL level requiring immediate attention.</strong> You\'re operating on reserve power.' : 
                              avgLeak >= 3 ? '<br><br>‚ö° This is significantly impacting your vitality and performance. Recovery protocols are essential.' : 
                              '<br><br>‚úÖ You have moderate leaks that can be optimized for better energy flow. You\'re doing better than most.'}
                        </div>
                    </div>

                    <div class="leak-visualization">
                        ${topLeaks.map((leak, index) => `
                            <div class="leak-item">
                                <div class="leak-header">
                                    <div class="leak-name">#${index + 1} ${leak.name}</div>
                                    <div class="leak-severity ${leak.score >= 4 ? 'severity-critical' : leak.score >= 3 ? 'severity-high' : 'severity-moderate'}">
                                        ${leak.score >= 4 ? 'CRITICAL' : leak.score >= 3 ? 'HIGH' : 'MODERATE'}
                                    </div>
                                </div>
                                <div class="leak-bar">
                                    <div class="leak-bar-fill" style="width: ${(leak.score / 5) * 100}%">
                                        ${leak.score}/5
                                    </div>
                                </div>
                                <div class="leak-description">${leak.description}</div>
                                <div class="recovery-tip">
                                    <strong>üí° Recovery Protocol:</strong> ${leak.recovery}
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="insight-box">
                        <div class="insight-title">üéØ Your 2-Week Energy Recovery Plan</div>
                        <div class="insight-text">
                            <strong>Focus on your #1 leak first.</strong> Trying to fix everything at once will drain more energy. 
                            <br><br>
                            <strong>Week 1-2:</strong> Implement the recovery protocol for <strong>${topLeaks[0].name}</strong> daily.
                            <br><br>
                            <strong>Week 3-4:</strong> Once you have momentum, add the protocol for <strong>${topLeaks[1].name}</strong>.
                            <br><br>
                            Small consistent actions compound into massive energy gains. Track your energy levels each day and notice the improvements.
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button class="action-btn" onclick="saveToLibrary()">üíæ Save to Library</button>
                        <a href="/library.html" target="_blank" class="action-btn">üìö View Library</a>
                    </div>
                    
                    ${getPersonalizedRecommendation(topLeaks)}
                    
                    <div style="margin-top: 40px; padding: 35px; background: linear-gradient(145deg, rgba(236, 72, 153, 0.15), rgba(147, 51, 234, 0.15)); border: 2px solid rgba(236, 72, 153, 0.5); border-radius: 20px; text-align: center;">
                        <div style="font-size: 2.5em; margin-bottom: 15px;">‚ú®</div>
                        <h3 style="color: #ec4899; margin-bottom: 15px; font-family: 'Cinzel', serif; font-size: 1.5em;">This Reading May Have Astounded You...</h3>
                        <p style="color: #e0d4f7; font-size: 1.1em; line-height: 1.7; margin-bottom: 25px;">
                            But your <strong style="color: #ec4899;">birth numbers</strong> alongside this energy analysis will deepen the reading exponentially. 
                            Combine your Energy Leak insights with your personal numerology for a truly transformative experience.
                        </p>
                        <button onclick="goToEnhanced()" style="
                            padding: 18px 40px;
                            background: linear-gradient(135deg, #ec4899, #9333ea);
                            color: white;
                            border: none;
                            border-radius: 30px;
                            font-size: 1.2em;
                            font-weight: 700;
                            font-family: 'Orbitron', monospace;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            box-shadow: 0 8px 25px rgba(236, 72, 153, 0.4);
                        " onmouseover="this.style.transform='translateY(-3px) scale(1.05)'; this.style.boxShadow='0 12px 35px rgba(236, 72, 153, 0.6)'" onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 8px 25px rgba(236, 72, 153, 0.4)'">
                            üåü Get Enhanced Reading
                        </button>
                    </div>
                    
                    <div class="next-tools-section" style="margin-top: 40px; padding: 30px; background: rgba(147, 51, 234, 0.1); border: 2px solid rgba(147, 51, 234, 0.3); border-radius: 20px;">
                        <h3 style="color: #9333ea; text-align: center; margin-bottom: 20px; font-family: 'Orbitron', monospace;">Continue Your Journey</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px;">
                            <a href="/contract.html" style="display: block; padding: 20px 15px; background: rgba(147, 51, 234, 0.15); border: 1px solid rgba(147, 51, 234, 0.3); border-radius: 12px; text-decoration: none; text-align: center; transition: all 0.3s ease;" onmouseover="this.style.borderColor='#9333ea'; this.style.transform='translateY(-3px)'" onmouseout="this.style.borderColor='rgba(147, 51, 234, 0.3)'; this.style.transform='translateY(0)'">
                                <div style="font-size: 2em; margin-bottom: 8px;">üìú</div>
                                <div style="color: #c4b5fd; font-weight: 600; font-size: 0.9em;">Unconscious Contract</div>
                                <div style="color: #a78bfa; font-size: 0.75em; margin-top: 5px;">Hidden beliefs</div>
                            </a>
                            <a href="/manifest.html" style="display: block; padding: 20px 15px; background: rgba(147, 51, 234, 0.15); border: 1px solid rgba(147, 51, 234, 0.3); border-radius: 12px; text-decoration: none; text-align: center; transition: all 0.3s ease;" onmouseover="this.style.borderColor='#9333ea'; this.style.transform='translateY(-3px)'" onmouseout="this.style.borderColor='rgba(147, 51, 234, 0.3)'; this.style.transform='translateY(0)'">
                                <div style="font-size: 2em; margin-bottom: 8px;">‚ú®</div>
                                <div style="color: #c4b5fd; font-weight: 600; font-size: 0.9em;">Manifestation</div>
                                <div style="color: #a78bfa; font-size: 0.75em; margin-top: 5px;">Readiness check</div>
                            </a>
                            <a href="/identity-split-detector.html" style="display: block; padding: 20px 15px; background: rgba(147, 51, 234, 0.15); border: 1px solid rgba(147, 51, 234, 0.3); border-radius: 12px; text-decoration: none; text-align: center; transition: all 0.3s ease;" onmouseover="this.style.borderColor='#9333ea'; this.style.transform='translateY(-3px)'" onmouseout="this.style.borderColor='rgba(147, 51, 234, 0.3)'; this.style.transform='translateY(0)'">
                                <div style="font-size: 2em; margin-bottom: 8px;">üé≠</div>
                                <div style="color: #c4b5fd; font-weight: 600; font-size: 0.9em;">Identity Split</div>
                                <div style="color: #a78bfa; font-size: 0.75em; margin-top: 5px;">Reveal masks</div>
                            </a>
                            <a href="/trust-radar.html" style="display: block; padding: 20px 15px; background: rgba(147, 51, 234, 0.15); border: 1px solid rgba(147, 51, 234, 0.3); border-radius: 12px; text-decoration: none; text-align: center; transition: all 0.3s ease;" onmouseover="this.style.borderColor='#9333ea'; this.style.transform='translateY(-3px)'" onmouseout="this.style.borderColor='rgba(147, 51, 234, 0.3)'; this.style.transform='translateY(0)'">
                                <div style="font-size: 2em; margin-bottom: 8px;">üéØ</div>
                                <div style="color: #c4b5fd; font-weight: 600; font-size: 0.9em;">Trust Radar</div>
                                <div style="color: #a78bfa; font-size: 0.75em; margin-top: 5px;">Trust patterns</div>
                            </a>
                            <a href="/hidden-strengths-revealer.html" style="display: block; padding: 20px 15px; background: rgba(147, 51, 234, 0.15); border: 1px solid rgba(147, 51, 234, 0.3); border-radius: 12px; text-decoration: none; text-align: center; transition: all 0.3s ease;" onmouseover="this.style.borderColor='#9333ea'; this.style.transform='translateY(-3px)'" onmouseout="this.style.borderColor='rgba(147, 51, 234, 0.3)'; this.style.transform='translateY(0)'">
                                <div style="font-size: 2em; margin-bottom: 8px;">üíé</div>
                                <div style="color: #c4b5fd; font-weight: 600; font-size: 0.9em;">Hidden Strengths</div>
                                <div style="color: #a78bfa; font-size: 0.75em; margin-top: 5px;">Superpowers</div>
                            </a>
                            <a href="/power-avoidance-pattern.html" style="display: block; padding: 20px 15px; background: rgba(147, 51, 234, 0.15); border: 1px solid rgba(147, 51, 234, 0.3); border-radius: 12px; text-decoration: none; text-align: center; transition: all 0.3s ease;" onmouseover="this.style.borderColor='#9333ea'; this.style.transform='translateY(-3px)'" onmouseout="this.style.borderColor='rgba(147, 51, 234, 0.3)'; this.style.transform='translateY(0)'">
                                <div style="font-size: 2em; margin-bottom: 8px;">üëë</div>
                                <div style="color: #c4b5fd; font-weight: 600; font-size: 0.9em;">Power Patterns</div>
                                <div style="color: #a78bfa; font-size: 0.75em; margin-top: 5px;">Success blocks</div>
                            </a>
                        </div>
                    </div>
                `;

                document.getElementById('resultsSection').innerHTML = resultsHTML;
                document.getElementById('resultsSection').classList.add('active');
                
                submitBtn.textContent = '‚úÖ Analysis Complete';
                submitBtn.classList.remove('loading-pulse');
                
                // Auto-save to library
                saveToLibraryAuto(topLeaks, totalLeak, energyDrainPct);
                
                // Smooth scroll to results
                setTimeout(() => {
                    document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 300);
            }, 1500);
        }

        function saveToLibraryAuto(leaks, totalLeak, energyDrainPct) {
            try {
                const result = {
                    id: Date.now(),
                    type: 'energy-leak',
                    name: 'Energy Leak Analysis',
                    timestamp: Date.now(),
                    savedAt: new Date().toISOString(),
                    data: {
                        energyDrain: energyDrainPct,
                        topLeaks: leaks,
                        totalScore: totalLeak,
                        answers: answers
                    },
                    title: `Energy Leak Analysis - ${energyDrainPct}% Drain`,
                    description: `Top leaks: ${leaks.map(l => l.name).join(', ')}`,
                    content: `Energy Drain: ${energyDrainPct}%\n\nTop 3 Leaks:\n${leaks.map((l, i) => `${i + 1}. ${l.name} (${l.score}/5)\n${l.description}\n\nRecovery: ${l.recovery}`).join('\n\n')}`
                };

                let library = localStorage.getItem('qm_library');
                library = library ? JSON.parse(library) : [];
                library.unshift(result);
                localStorage.setItem('qm_library', JSON.stringify(library));
                
                console.log('‚úÖ Results auto-saved to library');
                
                // Track in analytics
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'saved_to_library', {
                        tool: 'energy-leak-locator',
                        energy_drain: energyDrainPct
                    });
                }
            } catch (error) {
                console.error('Error saving to library:', error);
            }
        }

        function saveToLibrary() {
            // Show confirmation
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = '‚úÖ Saved!';
            btn.style.background = 'linear-gradient(135deg, #22c55e, #16a34a)';
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = '';
            }, 2000);
        }

        function goToEnhanced() {
            // Store current answers and results in sessionStorage
            const enhancedData = {
                tool: 'energy-leak-locator',
                answers: answers,
                timestamp: Date.now()
            };
            sessionStorage.setItem('qm_enhanced_data', JSON.stringify(enhancedData));
            
            // Navigate to enhanced page
            window.location.href = '/energyleak-enhanced.html';
            
            // Track in analytics
            if (typeof gtag !== 'undefined') {
                gtag('event', 'enhanced_reading_clicked', {
                    tool: 'energy-leak-locator'
                });
            }
        }

        // ========================================
        // PERSONALIZED RECOMMENDATIONS
        // ========================================
        function getPersonalizedRecommendation(topLeaks) {
            const topLeak = topLeaks[0].name;
            let rec = { icon: '', tool: '', link: '', reason: '' };
            
            // Based on top energy leak, recommend specific tool
            if (topLeak === 'Emotional Suppression') {
                rec = { icon: 'üìú', tool: 'Unconscious Contract Reveal', link: '/contract.html', reason: 'Emotional suppression often stems from unconscious agreements about what feelings are "allowed." Discovering your hidden contract can reveal why you learned to suppress emotions in the first place.' };
            } else if (topLeak === 'Toxic Relationships') {
                rec = { icon: 'üí´', tool: 'Compatibility Calculator', link: '/compatibility.html', reason: 'Understanding relationship dynamics can help you identify which connections drain you and why. Seeing the energetic patterns can make boundaries clearer.' };
            } else if (topLeak === 'Unfinished Business') {
                rec = { icon: 'üéØ', tool: 'Manifestation Readiness', link: '/manifest.html', reason: 'Unfinished business often signals a deeper pattern of not completing what you start. Check your manifestation readiness to understand what\'s blocking your ability to follow through.' };
            } else if (topLeak === 'Misaligned Commitments') {
                rec = { icon: 'üìú', tool: 'Unconscious Contract Reveal', link: '/contract.html', reason: 'Saying yes when you mean no often comes from an unconscious contract about your worth or what you\'re allowed to have. Find the hidden agreement driving these patterns.' };
            } else if (topLeak === 'Mental Time Travel') {
                rec = { icon: 'üîÆ', tool: 'Quantum Forecaster', link: '/forecasts', reason: 'If you\'re constantly in the past or future, understanding your cosmic timing can help anchor you to what\'s actually relevant NOW. See what the universe has in store.' };
            } else {
                rec = { icon: 'üåô', tool: 'Birth Sigil Generator', link: '/birth-sigil.html', reason: 'Reconnecting with your cosmic blueprint can help you remember your inherent energy signature‚Äîthe natural flow state you were born with.' };
            }
            
            return `
                <div class="insight-box" style="border-left-color: #ec4899;">
                    <div class="insight-title">‚ö° Personalized Recommendation</div>
                    <div class="insight-text">
                        <strong>Based on your #1 leak (${topLeak}):</strong> ${rec.reason}
                        <div style="margin-top: 20px; text-align: center;">
                            <a href="${rec.link}" target="_blank" style="display: inline-flex; align-items: center; gap: 10px; padding: 15px 30px; background: linear-gradient(135deg, #9333ea, #ec4899); color: white; text-decoration: none; border-radius: 25px; font-weight: 600; transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 25px rgba(147, 51, 234, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                <span style="font-size: 1.3em;">${rec.icon}</span> Try ${rec.tool}
                            </a>
                        </div>
                    </div>
                </div>
            `;
        }

        // ========================================
        // KEYBOARD SHORTCUTS
        // ========================================
        document.addEventListener('keydown', (e) => {
            // Press 'h' to go home
            if (e.key === 'h' && !e.ctrlKey && !e.metaKey) {
                if (!document.activeElement || document.activeElement.tagName !== 'INPUT') {
                    window.open('/index.html', '_blank');
                }
            }

            // Press 'l' to go to library
            if (e.key === 'l' && !e.ctrlKey && !e.metaKey) {
                if (!document.activeElement || document.activeElement.tagName !== 'INPUT') {
                    window.open('/library.html', '_blank');
                }
            }
        });
    </script>
    
    <!-- Shared Quantum Scripts -->
    <script src="shared/js/quantum-effects.js"></script>
    <script src="shared/js/quantum-intro.js"></script>
    <script src="shared/js/quantum-analytics.js"></script>
</body>
</html>


