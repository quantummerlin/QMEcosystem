<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Identity Reading | Quantum Merlin</title>
    <meta name="description" content="Your complete identity integration blueprint with birth numerology, cosmic patterns, and personalized unification protocols.">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VW4LGE7L1T"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-VW4LGE7L1T');
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Orbitron:wght@400;600;700&family=Exo+2:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: linear-gradient(135deg, #0a0a0f 0%, #1a0a2e 50%, #0a0a0f 100%);
            color: #e0d4f7;
            font-family: 'Exo 2', sans-serif;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        .container { max-width: 800px; margin: 0 auto; padding-top: 80px; }
        
        .qm-header {
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            background: rgba(10, 10, 15, 0.95); backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(139, 92, 246, 0.3); padding: 15px 20px;
        }
        .qm-header-inner { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        .qm-logo { display: flex; align-items: center; gap: 10px; text-decoration: none; }
        .qm-logo-icon { font-size: 1.5rem; }
        .qm-logo-text { font-family: 'Orbitron', monospace; font-size: 1.1rem; font-weight: 700; background: linear-gradient(135deg, #8b5cf6, #f59e0b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .qm-support { background: linear-gradient(135deg, #FFDD00, #FFA500); color: #000; padding: 8px 16px; border-radius: 20px; text-decoration: none; font-weight: 600; font-size: 0.85rem; }
        
        .page-header { text-align: center; margin-bottom: 40px; }
        .page-icon { font-size: 4rem; margin-bottom: 20px; }
        .page-title { font-family: 'Cinzel', serif; font-size: 2.2rem; background: linear-gradient(135deg, #8b5cf6, #f59e0b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 15px; }
        .page-subtitle { color: #f59e0b; font-size: 1.1rem; max-width: 500px; margin: 0 auto; }
        
        .previous-reading { background: linear-gradient(145deg, rgba(139, 92, 246, 0.1), rgba(245, 158, 11, 0.15)); border: 2px solid rgba(139, 92, 246, 0.4); border-radius: 20px; padding: 25px; margin-bottom: 30px; text-align: center; }
        .split-count { font-size: 3rem; font-weight: 800; font-family: 'Orbitron', monospace; background: linear-gradient(135deg, #8b5cf6, #f59e0b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .dominant-split { color: #8b5cf6; font-family: 'Orbitron', monospace; font-size: 1.1rem; letter-spacing: 1px; }
        
        .profile-section { background: rgba(139, 92, 246, 0.1); border: 2px solid rgba(139, 92, 246, 0.3); border-radius: 20px; padding: 30px; margin-bottom: 30px; }
        .section-title { font-family: 'Orbitron', monospace; color: #8b5cf6; font-size: 1.2rem; margin-bottom: 20px; text-align: center; }
        
        .profile-options { display: flex; gap: 15px; margin-bottom: 25px; flex-wrap: wrap; }
        .profile-option { flex: 1; min-width: 200px; padding: 20px; background: rgba(139, 92, 246, 0.15); border: 2px solid rgba(139, 92, 246, 0.3); border-radius: 15px; cursor: pointer; transition: all 0.3s ease; text-align: center; }
        .profile-option:hover { border-color: #8b5cf6; transform: translateY(-3px); }
        .profile-option.selected { border-color: #f59e0b; background: rgba(245, 158, 11, 0.2); }
        .profile-option-icon { font-size: 2rem; margin-bottom: 10px; }
        .profile-option-title { color: #c4b5fd; font-weight: 600; }
        .profile-option-desc { color: #8b5cf6; font-size: 0.85rem; margin-top: 5px; }
        
        .birth-form, .saved-profiles { display: none; }
        .birth-form.active, .saved-profiles.active { display: block; }
        
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; color: #c4b5fd; margin-bottom: 8px; font-weight: 500; }
        .form-input { width: 100%; padding: 15px; background: rgba(139, 92, 246, 0.1); border: 2px solid rgba(139, 92, 246, 0.3); border-radius: 12px; color: #e0d4f7; font-size: 1rem; font-family: 'Exo 2', sans-serif; }
        .form-input:focus { outline: none; border-color: #8b5cf6; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        
        .profile-card { padding: 20px; background: rgba(139, 92, 246, 0.15); border: 2px solid rgba(139, 92, 246, 0.3); border-radius: 15px; margin-bottom: 15px; cursor: pointer; transition: all 0.3s ease; }
        .profile-card:hover { border-color: #8b5cf6; transform: translateY(-2px); }
        .profile-card.selected { border-color: #22c55e; background: rgba(34, 197, 94, 0.15); }
        .profile-name { color: #8b5cf6; font-weight: 600; font-size: 1.1rem; }
        .profile-details { color: #9ca3af; font-size: 0.9rem; margin-top: 5px; }
        .no-profiles { text-align: center; color: #8b5cf6; padding: 30px; }
        
        .generate-btn { width: 100%; padding: 20px; background: linear-gradient(135deg, #8b5cf6, #f59e0b); color: white; border: none; border-radius: 30px; font-size: 1.3rem; font-weight: 700; font-family: 'Orbitron', monospace; cursor: pointer; transition: all 0.3s ease; margin-top: 20px; }
        .generate-btn:hover:not(:disabled) { transform: scale(1.02); box-shadow: 0 10px 40px rgba(139, 92, 246, 0.5); }
        .generate-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .results-section { display: none; }
        .results-section.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .reading-card { background: linear-gradient(145deg, rgba(139, 92, 246, 0.1), rgba(245, 158, 11, 0.1)); border: 2px solid rgba(139, 92, 246, 0.4); border-radius: 20px; padding: 30px; margin-bottom: 25px; }
        .card-header { text-align: center; margin-bottom: 25px; }
        .card-icon { font-size: 3rem; margin-bottom: 10px; }
        .card-title { font-family: 'Cinzel', serif; font-size: 1.5rem; color: #8b5cf6; }
        
        .forecast-section { background: rgba(0,0,0,0.2); border-radius: 15px; padding: 20px; margin-bottom: 20px; }
        .forecast-label { font-weight: 700; font-size: 0.9em; letter-spacing: 1px; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .forecast-text { color: #e0d4f7; line-height: 1.8; }
        
        .action-buttons { display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; margin: 30px 0; }
        .action-btn { padding: 15px 25px; border-radius: 25px; border: 2px solid rgba(139, 92, 246, 0.3); background: rgba(139, 92, 246, 0.2); color: #c4b5fd; text-decoration: none; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .action-btn:hover { border-color: #8b5cf6; transform: translateY(-2px); }
        
        .next-tools { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; margin-top: 30px; }
        .tool-link { display: block; padding: 20px 15px; background: rgba(139, 92, 246, 0.15); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 12px; text-decoration: none; text-align: center; transition: all 0.3s ease; }
        .tool-link:hover { border-color: #8b5cf6; transform: translateY(-3px); }
        .tool-icon { font-size: 2rem; margin-bottom: 8px; }
        .tool-name { color: #c4b5fd; font-weight: 600; font-size: 0.9rem; }
    </style>
</head>
<body>
    <header class="qm-header">
        <div class="qm-header-inner">
            <a href="/index.html" class="qm-logo">
                <div class="qm-logo-icon">üßô‚Äç‚ôÇÔ∏è</div>
                <span class="qm-logo-text">Quantum Merlin</span>
            </a>
            <a href="https://www.buymeacoffee.com/quantummerlin" target="_blank" class="qm-support">‚òï Support</a>
        </div>
    </header>

    <div class="container">
        <div class="page-header">
            <div class="page-icon">üé≠</div>
            <h1 class="page-title">Full Identity Reading</h1>
            <p class="page-subtitle">Add your birth details for a complete identity integration blueprint</p>
        </div>

        <div class="previous-reading" id="previousReading">
            <div style="color: #8b5cf6; font-size: 0.9rem; margin-bottom: 10px;">YOUR DOMINANT SPLIT</div>
            <div class="dominant-split" id="dominantSplit">Loading...</div>
            <div class="split-count" id="splitCount">--</div>
        </div>

        <div id="inputSection">
            <div class="profile-section">
                <div class="section-title">Choose Your Path</div>
                
                <div class="profile-options">
                    <div class="profile-option" onclick="selectOption('saved')" id="optionSaved">
                        <div class="profile-option-icon">üìö</div>
                        <div class="profile-option-title">Load from Library</div>
                        <div class="profile-option-desc">Use a saved profile</div>
                    </div>
                    <div class="profile-option" onclick="selectOption('new')" id="optionNew">
                        <div class="profile-option-icon">‚úèÔ∏è</div>
                        <div class="profile-option-title">Enter Details</div>
                        <div class="profile-option-desc">Input birth information</div>
                    </div>
                </div>

                <div class="saved-profiles" id="savedProfiles">
                    <div id="profilesList"></div>
                </div>

                <div class="birth-form" id="birthForm">
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-input" id="fullName" placeholder="Enter your name">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Birth Date</label>
                        <input type="date" class="form-input" id="birthDate">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Birth Time (optional)</label>
                            <input type="time" class="form-input" id="birthTime">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Birth Place (optional)</label>
                            <input type="text" class="form-input" id="birthPlace" placeholder="City, Country">
                        </div>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="saveProfile" checked>
                            <span class="form-label" style="margin: 0;">Save this profile to Library</span>
                        </label>
                    </div>
                </div>

                <button class="generate-btn" id="generateBtn" onclick="generateFullReading()" disabled>
                    üé≠ Generate Integration Blueprint
                </button>
            </div>
        </div>

        <div class="results-section" id="resultsSection"></div>
    </div>

    <script>
        let previousData = null;
        let selectedProfile = null;
        let selectedOption = null;
        let detectedSplits = [];

        const splitNames = ['Public vs Private Self', 'Family Expectations vs True Desires', 'Past Self vs Present Self', 'Fear Self vs Confident Self', 'Digital vs Authentic Self'];

        document.addEventListener('DOMContentLoaded', () => {
            const storedData = sessionStorage.getItem('qm_enhanced_data');
            if (storedData) {
                previousData = JSON.parse(storedData);
                displayPreviousReading();
            } else {
                document.getElementById('previousReading').innerHTML = `
                    <div style="color: #fbbf24;">‚ö†Ô∏è No previous reading found</div>
                    <p style="color: #8b5cf6; margin-top: 10px;">
                        <a href="/identity-split-detector.html" style="color: #8b5cf6;">Take the Identity Split test</a> first for the complete experience.
                    </p>
                `;
            }
            loadSavedProfiles();
        });

        function displayPreviousReading() {
            if (!previousData || !previousData.answers) return;
            const answers = previousData.answers;
            
            detectedSplits = splitNames.map((name, i) => ({
                name: name,
                score: answers['q' + (i + 1)] || 0
            })).sort((a, b) => b.score - a.score);
            
            const dominantSplit = detectedSplits[0];
            const totalFragmentation = detectedSplits.filter(s => s.score >= 3).length;
            
            document.getElementById('dominantSplit').textContent = dominantSplit.name;
            document.getElementById('splitCount').textContent = totalFragmentation + ' Active Splits';
        }

        function selectOption(option) {
            selectedOption = option;
            document.querySelectorAll('.profile-option').forEach(el => el.classList.remove('selected'));
            document.getElementById('option' + option.charAt(0).toUpperCase() + option.slice(1)).classList.add('selected');
            
            if (option === 'saved') {
                document.getElementById('savedProfiles').classList.add('active');
                document.getElementById('birthForm').classList.remove('active');
            } else {
                document.getElementById('savedProfiles').classList.remove('active');
                document.getElementById('birthForm').classList.add('active');
                checkFormValidity();
            }
        }

        function loadSavedProfiles() {
            const library = JSON.parse(localStorage.getItem('qm_library') || '[]');
            const profiles = library.filter(item => item.type === 'profile' || item.birthDate);
            const container = document.getElementById('profilesList');
            
            if (profiles.length === 0) {
                container.innerHTML = `<div class="no-profiles"><div style="font-size: 2rem; margin-bottom: 10px;">üì≠</div><div>No saved profiles found</div></div>`;
                return;
            }
            
            container.innerHTML = profiles.map((profile, index) => `
                <div class="profile-card" onclick="selectProfile(${index})" id="profile-${index}">
                    <div class="profile-name">${profile.name || profile.fullName || 'Unnamed'}</div>
                    <div class="profile-details">${profile.birthDate ? new Date(profile.birthDate).toLocaleDateString() : 'No birth date'}</div>
                </div>
            `).join('');
        }

        function selectProfile(index) {
            const library = JSON.parse(localStorage.getItem('qm_library') || '[]');
            const profiles = library.filter(item => item.type === 'profile' || item.birthDate);
            selectedProfile = profiles[index];
            document.querySelectorAll('.profile-card').forEach(el => el.classList.remove('selected'));
            document.getElementById('profile-' + index).classList.add('selected');
            document.getElementById('generateBtn').disabled = false;
        }

        function checkFormValidity() {
            const name = document.getElementById('fullName').value;
            const birthDate = document.getElementById('birthDate').value;
            document.getElementById('generateBtn').disabled = !(name && birthDate);
        }

        document.getElementById('fullName')?.addEventListener('input', checkFormValidity);
        document.getElementById('birthDate')?.addEventListener('change', checkFormValidity);

        function generateFullReading() {
            let profileData;
            if (selectedOption === 'saved' && selectedProfile) {
                profileData = selectedProfile;
            } else {
                profileData = {
                    fullName: document.getElementById('fullName').value,
                    birthDate: document.getElementById('birthDate').value,
                    birthTime: document.getElementById('birthTime').value,
                    birthPlace: document.getElementById('birthPlace').value
                };
                if (document.getElementById('saveProfile').checked) saveProfileToLibrary(profileData);
            }
            
            const birthDate = new Date(profileData.birthDate);
            const lifePath = calculateLifePath(birthDate);
            const zodiac = getZodiacSign(birthDate);
            const element = getElement(zodiac);
            
            generateResultsHTML(profileData, lifePath, zodiac, element);
        }

        function calculateLifePath(date) {
            const dateStr = date.toISOString().split('T')[0].replace(/-/g, '');
            let sum = dateStr.split('').reduce((acc, digit) => acc + parseInt(digit), 0);
            while (sum > 9 && sum !== 11 && sum !== 22 && sum !== 33) {
                sum = sum.toString().split('').reduce((acc, digit) => acc + parseInt(digit), 0);
            }
            return sum;
        }

        function getZodiacSign(date) {
            const month = date.getMonth() + 1, day = date.getDate();
            if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) return 'Aries';
            if ((month === 4 && day >= 20) || (month === 5 && day <= 20)) return 'Taurus';
            if ((month === 5 && day >= 21) || (month === 6 && day <= 20)) return 'Gemini';
            if ((month === 6 && day >= 21) || (month === 7 && day <= 22)) return 'Cancer';
            if ((month === 7 && day >= 23) || (month === 8 && day <= 22)) return 'Leo';
            if ((month === 8 && day >= 23) || (month === 9 && day <= 22)) return 'Virgo';
            if ((month === 9 && day >= 23) || (month === 10 && day <= 22)) return 'Libra';
            if ((month === 10 && day >= 23) || (month === 11 && day <= 21)) return 'Scorpio';
            if ((month === 11 && day >= 22) || (month === 12 && day <= 21)) return 'Sagittarius';
            if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) return 'Capricorn';
            if ((month === 1 && day >= 20) || (month === 2 && day <= 18)) return 'Aquarius';
            return 'Pisces';
        }

        function getElement(zodiac) {
            const elements = { Aries: 'Fire', Leo: 'Fire', Sagittarius: 'Fire', Taurus: 'Earth', Virgo: 'Earth', Capricorn: 'Earth', Gemini: 'Air', Libra: 'Air', Aquarius: 'Air', Cancer: 'Water', Scorpio: 'Water', Pisces: 'Water' };
            return elements[zodiac] || 'Fire';
        }

        function getIntegrationFrequency(splitType) {
            const frequencies = {
                'Public vs Private Self': '396 Hz',
                'Family Expectations vs True Desires': '417 Hz',
                'Past Self vs Present Self': '528 Hz',
                'Fear Self vs Confident Self': '639 Hz',
                'Digital vs Authentic Self': '741 Hz'
            };
            return frequencies[splitType] || '528 Hz';
        }

        function getSplitOrigin(lifePath, splitType, element) {
            const origins = {
                'Public vs Private Self': `As Life Path ${lifePath}, you learned early that parts of you were "unacceptable" to show. ${element === 'Fire' ? 'Your fire was too intense for others.' : element === 'Earth' ? 'Your practical needs clashed with emotional expectations.' : element === 'Air' ? 'Your ideas threatened the status quo.' : 'Your depths frightened those around you.'}`,
                'Family Expectations vs True Desires': `Life Path ${lifePath} often carries heavy ancestral programming. Your soul chose this family specifically to transcend their limitations, but the weight of "should" has created a split between who they need you to be and who you actually are.`,
                'Past Self vs Present Self': `Life Path ${lifePath} souls often resist releasing past versions of themselves. You may still identify with who you were during trauma, success, or pivotal life moments‚Äîeven though that version has served its purpose.`,
                'Fear Self vs Confident Self': `Life Path ${lifePath} has unique fears. ${element === 'Fire' ? 'Fear of irrelevance.' : element === 'Earth' ? 'Fear of instability.' : element === 'Air' ? 'Fear of being misunderstood.' : 'Fear of vulnerability.'} This created a "safe" version of you that runs when the real you wants to shine.`,
                'Digital vs Authentic Self': `As a ${element} sign, your digital persona may have become a mask. Life Path ${lifePath} naturally seeks validation, and the curated online self has slowly replaced spontaneous authenticity.`
            };
            return origins[splitType] || origins['Public vs Private Self'];
        }

        function generateResultsHTML(profile, lifePath, zodiac, element) {
            document.getElementById('inputSection').style.display = 'none';
            const dominantSplit = detectedSplits[0] || { name: 'Identity Fragmentation', score: 3 };
            const frequency = getIntegrationFrequency(dominantSplit.name);
            const origin = getSplitOrigin(lifePath, dominantSplit.name, element);
            const activeSplits = detectedSplits.filter(s => s.score >= 3).length;

            const resultsHTML = `
                <div class="reading-card">
                    <div class="card-header">
                        <div class="card-icon">üé≠</div>
                        <h2 class="card-title">Your Complete Integration Blueprint</h2>
                        <div style="color: #8b5cf6; margin-top: 10px;">For ${profile.fullName || profile.name}</div>
                    </div>
                    
                    <div class="forecast-section" style="border-left: 3px solid #8b5cf6;">
                        <div class="forecast-label" style="color: #8b5cf6;">üìø THE ORIGIN OF YOUR SPLIT</div>
                        <div class="forecast-text">
                            <p>${origin}</p>
                            <p style="margin-top: 15px;">This split was a <em>survival mechanism</em>‚Äîyour psyche's brilliant solution to an impossible situation. But what once protected you now fragments your power. Integration doesn't mean erasing these parts; it means <strong style="color: #f59e0b;">inviting all versions of you to the same table</strong>.</p>
                        </div>
                    </div>
                    
                    <div class="forecast-section" style="border-left: 3px solid #22c55e;">
                        <div class="forecast-label" style="color: #22c55e;">üéµ YOUR INTEGRATION FREQUENCY</div>
                        <div class="forecast-text">
                            <p>Your unification frequency is <strong style="color: #22c55e;">${frequency}</strong></p>
                            <p style="margin-top: 10px;">${
                                frequency === '396 Hz' ? 'The "Liberation Frequency" - releases guilt and fear that keeps parts of you hidden.' :
                                frequency === '417 Hz' ? 'The "Change Frequency" - facilitates transformation and breaks old patterns.' :
                                frequency === '528 Hz' ? 'The "DNA Repair Frequency" - heals the core wounds that created the split.' :
                                frequency === '639 Hz' ? 'The "Connection Frequency" - harmonizes relationships including your relationship with yourself.' :
                                'The "Awakening Frequency" - illuminates blind spots and brings awareness to shadow aspects.'
                            }</p>
                            <p style="margin-top: 10px;">As a ${zodiac}, listen while ${element === 'Fire' ? 'moving‚Äîwalking, dancing, or stretching' : element === 'Earth' ? 'in physical stillness, perhaps holding crystals' : element === 'Air' ? 'doing breathwork or gentle journaling' : 'near water or in a bath/shower'} for maximum integration.</p>
                        </div>
                        <div style="display: flex; gap: 10px; justify-content: center; margin-top: 15px; flex-wrap: wrap;">
                            <a href="/genesis" style="padding: 10px 20px; background: linear-gradient(135deg, #22c55e, #059669); color: white; text-decoration: none; border-radius: 20px; font-weight: 600;">üéµ Play in Genesis</a>
                            <button onclick="saveFrequencyToLibrary('${frequency}')" style="padding: 10px 20px; background: rgba(34, 197, 94, 0.2); border: 1px solid #22c55e; color: #22c55e; border-radius: 20px; font-weight: 600; cursor: pointer;">üíæ Save Frequency</button>
                        </div>
                    </div>
                    
                    <div class="forecast-section" style="border-left: 3px solid #f59e0b;">
                        <div class="forecast-label" style="color: #f59e0b;">üßò YOUR INTEGRATION RITUAL</div>
                        <div class="forecast-text">
                            <p><strong>21-Day Integration Practice for ${zodiac}:</strong></p>
                            <p style="margin: 10px 0;"><strong>Week 1 - Meeting the Selves:</strong> ${
                                element === 'Fire' ? 'Write a letter from your hidden self to your public self. No filter. Let the fire burn the pretense.' :
                                element === 'Earth' ? 'Create a physical representation (drawing, sculpture, collage) of both selves. Place them facing each other.' :
                                element === 'Air' ? 'Speak both voices aloud in dialogue. Let them argue. Let them negotiate. Record it.' :
                                'Journal from the feeling space of each self. Let emotions flow without editing.'
                            }</p>
                            <p style="margin: 10px 0;"><strong>Week 2 - Finding Common Ground:</strong> Ask: "What do both versions of me want?" Usually it's the same thing‚Äîsafety, love, purpose‚Äîjust different strategies. Write the shared goal.</p>
                            <p style="margin: 10px 0;"><strong>Week 3 - The Unified Act:</strong> Each day, take ONE action that honors both selves simultaneously. Show one piece of your private self publicly (safely). Reclaim one authentic need from old expectations.</p>
                            <p style="margin: 10px 0;"><strong>Daily Anchor:</strong> Morning mirror work‚Äîlook at yourself and say: "I welcome all of me. Nothing needs to be hidden. Nothing needs to be fixed. I am whole."</p>
                        </div>
                    </div>
                    
                    <div class="forecast-section" style="border-left: 3px solid #3b82f6;">
                        <div class="forecast-label" style="color: #3b82f6;">üÉè TAROT GUIDANCE</div>
                        <div class="forecast-text">
                            ${getTarotGuidance(dominantSplit.name, element)}
                        </div>
                    </div>
                    
                    <div class="forecast-section" style="border-left: 3px solid #a855f7;">
                        <div class="forecast-label" style="color: #a855f7;">üìÖ YOUR POWER TIMING</div>
                        <div class="forecast-text">
                            <p><strong>Best Days for Integration Work:</strong> ${getPowerDays(lifePath)}</p>
                            <p style="margin-top: 10px;"><strong>Moon Phase:</strong> Dark Moon for shadow work, Full Moon for illumination and integration.</p>
                            <p style="margin-top: 10px;"><strong>Power Hours:</strong> ${
                                element === 'Fire' ? 'Noon when the sun is highest and shadows are shortest' :
                                element === 'Earth' ? 'Dusk when day meets night‚Äîthreshold times' :
                                element === 'Air' ? 'Dawn when consciousness bridges sleep and waking' :
                                'Midnight when the veil between selves is thinnest'
                            }</p>
                        </div>
                    </div>
                    
                    <div class="forecast-section" style="border-left: 3px solid #fbbf24;">
                        <div class="forecast-label" style="color: #fbbf24;">üí° KEY INSIGHT</div>
                        <div class="forecast-text" style="font-size: 1.2em; font-style: italic; color: #fde68a; text-align: center;">
                            "${getKeyInsight(dominantSplit.name, activeSplits)}"
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <a href="/index.html" class="action-btn">üè† Hub</a>
                    <a href="/genesis" class="action-btn">üéµ Frequencies</a>
                    <a href="/library.html" class="action-btn">üìö Library</a>
                    <button class="action-btn" onclick="saveFullReading()" style="background: rgba(34, 197, 94, 0.2); border-color: #22c55e; color: #22c55e;">üíæ Save Reading</button>
                </div>
                
                <div style="background: rgba(139, 92, 246, 0.1); border: 2px solid rgba(139, 92, 246, 0.3); border-radius: 20px; padding: 30px; margin-top: 30px;">
                    <h3 style="color: #8b5cf6; text-align: center; margin-bottom: 20px; font-family: 'Orbitron', monospace;">Continue Your Journey</h3>
                    <div class="next-tools">
                        <a href="/manifest.html" class="tool-link"><div class="tool-icon">‚ú®</div><div class="tool-name">Manifestation</div></a>
                        <a href="/contract.html" class="tool-link"><div class="tool-icon">üìú</div><div class="tool-name">Unconscious Contract</div></a>
                        <a href="/energyleak.html" class="tool-link"><div class="tool-icon">üîã</div><div class="tool-name">Energy Leak</div></a>
                        <a href="/quantum-merlin-hub/forecasts.html" class="tool-link"><div class="tool-icon">üîÆ</div><div class="tool-name">Cosmic Forecast</div></a>
                    </div>
                </div>
            `;

            document.getElementById('resultsSection').innerHTML = resultsHTML;
            document.getElementById('resultsSection').classList.add('active');
            autoSaveReading(profile, dominantSplit, lifePath, activeSplits);
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        function getTarotGuidance(splitType, element) {
            const guidance = {
                'Public vs Private Self': 'The High Priestess and The Magician guide your integration. The High Priestess is your hidden self‚Äîintuitive, deep, mysterious. The Magician is your public self‚Äîcapable, visible, performative. Together they say: "What I know inside, I can express outside."',
                'Family Expectations vs True Desires': 'The Hierophant and The Fool appear for you. The Hierophant represents ancestral programming. The Fool is your authentic path. Integration comes when you honor the lessons without repeating the limitations.',
                'Past Self vs Present Self': 'The Hanged Man and The World bless your journey. The Hanged Man is stuck in the past. The World is your evolved self. Let what was become compost for what is becoming.',
                'Fear Self vs Confident Self': 'Strength and The Tower guide you. Strength says: "True confidence isn\'t the absence of fear but the integration of it." The Tower reminds you that sometimes the fearful self needs to crumble for the confident self to emerge.',
                'Digital vs Authentic Self': 'The Moon and The Sun appear. The Moon is your curated mystery. The Sun is your unfiltered truth. Integration means being as warm and real online as you are in person‚Äîor logging off entirely.'
            };
            return guidance[splitType] || guidance['Public vs Private Self'];
        }

        function getPowerDays(lifePath) {
            const days = { 1: 'Sundays', 2: 'Mondays', 3: 'Thursdays', 4: 'Saturdays', 5: 'Wednesdays', 6: 'Fridays', 7: 'Mondays', 8: 'Saturdays', 9: 'Tuesdays', 11: 'The 11th of each month', 22: 'The 22nd of each month' };
            return days[lifePath] || 'Sundays';
        }

        function getKeyInsight(splitType, activeSplits) {
            if (activeSplits >= 4) return `You're living multiple lives simultaneously‚Äîno wonder you're exhausted. Integration isn't about choosing one self; it's about letting them all breathe in the same body without fighting.`;
            if (activeSplits >= 2) return `Your main split is manageable, but the fragmentation is real. The good news: awareness is 80% of integration. You've already begun the reunion.`;
            return `With focused attention on your primary split, you can achieve remarkable wholeness. You're closer to integration than you think.`;
        }

        function saveProfileToLibrary(profile) {
            const item = { id: Date.now(), type: 'profile', name: profile.fullName, fullName: profile.fullName, birthDate: profile.birthDate, birthTime: profile.birthTime, birthPlace: profile.birthPlace, timestamp: Date.now(), savedAt: new Date().toISOString() };
            let library = JSON.parse(localStorage.getItem('qm_library') || '[]');
            library.unshift(item);
            localStorage.setItem('qm_library', JSON.stringify(library));
        }

        function saveFrequencyToLibrary(frequency) {
            const item = { id: Date.now(), type: 'frequency', name: frequency + ' - Integration Frequency', frequency: frequency, source: 'Full Identity Reading', timestamp: Date.now(), savedAt: new Date().toISOString() };
            let library = JSON.parse(localStorage.getItem('qm_library') || '[]');
            library.unshift(item);
            localStorage.setItem('qm_library', JSON.stringify(library));
            showNotification('Frequency saved to Library!');
        }

        function autoSaveReading(profile, dominantSplit, lifePath, activeSplits) {
            const item = { id: Date.now(), type: 'identity-full', name: 'Full Identity Reading', title: `Integration Blueprint: ${dominantSplit.name}`, dominantSplit: dominantSplit.name, activeSplits: activeSplits, lifePath: lifePath, profile: profile.fullName || profile.name, timestamp: Date.now(), savedAt: new Date().toISOString() };
            let library = JSON.parse(localStorage.getItem('qm_library') || '[]');
            library.unshift(item);
            localStorage.setItem('qm_library', JSON.stringify(library));
        }

        function saveFullReading() { showNotification('Reading saved to Library!'); }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = 'position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #22c55e, #059669); color: white; padding: 15px 30px; border-radius: 30px; font-weight: 600; z-index: 9999; box-shadow: 0 10px 30px rgba(34, 197, 94, 0.5);';
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }
    </script>
    <script src="shared/js/quantum-analytics.js"></script>
</body>
</html>
