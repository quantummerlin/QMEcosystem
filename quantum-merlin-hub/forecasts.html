<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Forecaster | Your Personalized Cosmic Forecast</title>
    <meta name="description" content="Get your personalized cosmic forecast using Western astrology, Chinese zodiac, numerology, and gematria. Multi-system forecasting for daily, weekly, monthly, and yearly insights.">
    <meta name="keywords" content="quantum forecaster, daily horoscope, personalized forecast, astrology, numerology, chinese zodiac, gematria, cosmic guidance">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Quantum Forecaster | Multi-System Cosmic Guidance">
    <meta property="og:description" content="The only forecaster that uses 8 mystical systems. From surface to soul: forecasts that go as deep as you want.">
    <meta property="og:url" content="https://quantummerlin.com/forecasts">
    <meta property="og:type" content="website">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --cosmic-bg: #000000;
            --neon-cyan: #00f5ff;
            --neon-purple: #9d00ff;
            --neon-gold: #ffd700;
            --neon-pink: #ff0066;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.8);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            background: var(--cosmic-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Cosmic Background */
        .cosmic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background: radial-gradient(ellipse at center, #1a0033 0%, #000000 100%);
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 10;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            margin-bottom: 60px;
            padding: 40px 20px;
        }

        .hero h1 {
            font-family: 'Orbitron', monospace;
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple), var(--neon-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 30px rgba(0, 245, 255, 0.6));
            animation: glow-pulse 3s ease-in-out infinite;
        }

        @keyframes glow-pulse {
            0%, 100% { filter: drop-shadow(0 0 20px rgba(0, 245, 255, 0.4)); }
            50% { filter: drop-shadow(0 0 40px rgba(0, 245, 255, 0.8)); }
        }

        .hero .tagline {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
        }

        .hero .systems {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .system-badge {
            background: rgba(0, 245, 255, 0.1);
            border: 2px solid rgba(0, 245, 255, 0.3);
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            color: var(--neon-cyan);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .system-badge:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 30px rgba(0, 245, 255, 0.5);
            border-color: var(--neon-cyan);
        }

        /* Input Section */
        .input-section {
            background: linear-gradient(135deg, rgba(0, 245, 255, 0.08) 0%, rgba(157, 0, 255, 0.08) 100%);
            backdrop-filter: blur(30px);
            border: 2px solid rgba(0, 245, 255, 0.4);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 8px 32px rgba(0, 245, 255, 0.2);
        }

        .input-section h2 {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            color: var(--neon-gold);
            margin-bottom: 30px;
            text-align: center;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--neon-cyan);
            margin-bottom: 10px;
        }

        .input-group input,
        .input-group select,
        .input-group textarea {
            width: 100%;
            padding: 15px;
            font-size: 1rem;
            font-family: 'Rajdhani', sans-serif;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(0, 245, 255, 0.3);
            border-radius: 12px;
            color: white;
            transition: all 0.3s ease;
        }

        .input-group input:focus,
        .input-group select:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: var(--neon-cyan);
            box-shadow: 0 0 20px rgba(0, 245, 255, 0.3);
        }

        .input-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .optional-badge {
            display: inline-block;
            font-size: 0.8rem;
            color: rgba(255, 215, 0, 0.7);
            margin-left: 8px;
        }

        .help-text {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 5px;
        }

        /* Expandable Sections */
        .expandable {
            margin-top: 30px;
        }

        .expand-btn {
            background: rgba(157, 0, 255, 0.2);
            border: 2px solid rgba(157, 0, 255, 0.4);
            color: var(--neon-purple);
            padding: 12px 30px;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
        }

        .expand-btn:hover {
            background: rgba(157, 0, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(157, 0, 255, 0.4);
        }

        .expanded-content {
            display: none;
            margin-top: 25px;
            padding-top: 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .expanded-content.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Accuracy Indicator */
        .accuracy-indicator {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .accuracy-indicator h3 {
            font-family: 'Orbitron', monospace;
            font-size: 1.2rem;
            color: var(--neon-gold);
            margin-bottom: 15px;
        }

        .accuracy-bar {
            background: rgba(255, 255, 255, 0.1);
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .accuracy-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neon-cyan), var(--neon-gold));
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .data-checklist {
            list-style: none;
        }

        .data-checklist li {
            padding: 8px 0;
            font-size: 1rem;
        }

        .data-checklist li:before {
            content: "‚úÖ ";
            margin-right: 10px;
        }

        .data-checklist li.missing:before {
            content: "‚ö†Ô∏è ";
        }

        /* Generate Button */
        .generate-btn {
            background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple));
            border: none;
            color: white;
            padding: 18px 50px;
            font-size: 1.3rem;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
            box-shadow: 0 0 30px rgba(0, 245, 255, 0.4);
        }

        .generate-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 50px rgba(0, 245, 255, 0.6);
        }

        .generate-btn:active {
            transform: scale(0.98);
        }

        /* Timeframe Selector */
        .timeframe-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 30px 0;
        }

        .timeframe-btn {
            background: rgba(0, 245, 255, 0.1);
            border: 2px solid rgba(0, 245, 255, 0.3);
            color: var(--neon-cyan);
            padding: 12px 30px;
            border-radius: 20px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .timeframe-btn:hover,
        .timeframe-btn.active {
            background: rgba(0, 245, 255, 0.2);
            border-color: var(--neon-cyan);
            box-shadow: 0 0 20px rgba(0, 245, 255, 0.4);
        }

        /* Forecast Output */
        .forecast-output {
            display: none;
        }

        .forecast-output.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .forecast-header {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 0, 102, 0.1) 100%);
            border: 2px solid rgba(255, 215, 0, 0.4);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
        }

        .forecast-header h2 {
            font-family: 'Orbitron', monospace;
            font-size: 2rem;
            background: linear-gradient(135deg, var(--neon-gold), var(--neon-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }

        .forecast-meta {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        /* Overview Section */
        .overview-section {
            background: linear-gradient(135deg, rgba(0, 245, 255, 0.15) 0%, rgba(157, 0, 255, 0.15) 100%);
            border: 2px solid var(--neon-cyan);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .overview-section h3 {
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            color: var(--neon-cyan);
            margin-bottom: 20px;
        }

        .overview-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--text-secondary);
        }

        /* System Sections */
        .system-section {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 18px;
            margin-bottom: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .system-section:hover {
            border-color: rgba(0, 245, 255, 0.3);
        }

        .system-header {
            padding: 20px 25px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 245, 255, 0.05);
        }

        .system-header h3 {
            font-family: 'Orbitron', monospace;
            font-size: 1.3rem;
            color: var(--neon-cyan);
        }

        .system-toggle {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .system-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 25px;
        }

        .system-section.expanded .system-content {
            max-height: 2000px;
            padding: 25px;
        }

        .system-section.expanded .system-toggle {
            transform: rotate(180deg);
        }

        .system-item {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .system-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .system-item h4 {
            color: var(--neon-gold);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .system-item p {
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* Action Item */
        .action-section {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.15) 0%, rgba(255, 0, 102, 0.15) 100%);
            border: 2px solid var(--neon-gold);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
        }

        .action-section h3 {
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            color: var(--neon-gold);
            margin-bottom: 20px;
        }

        .action-item {
            background: rgba(0, 0, 0, 0.4);
            border-left: 4px solid var(--neon-gold);
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
        }

        .action-item h4 {
            color: var(--neon-cyan);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .action-item p {
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* Save Button */
        .save-btn {
            background: rgba(255, 215, 0, 0.2);
            border: 2px solid var(--neon-gold);
            color: var(--neon-gold);
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px auto;
            display: block;
        }

        .save-btn:hover {
            background: rgba(255, 215, 0, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }

            .hero .tagline {
                font-size: 1.1rem;
            }

            .input-section {
                padding: 25px 20px;
            }

            .input-row {
                grid-template-columns: 1fr;
            }

            .timeframe-selector {
                flex-direction: column;
            }

            .timeframe-btn {
                width: 100%;
            }
        }

        /* Loading Animation */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 60px;
            height: 60px;
            margin: 0 auto 20px;
            border: 4px solid rgba(0, 245, 255, 0.2);
            border-top: 4px solid var(--neon-cyan);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ========================================
           PHASE 2: Enhanced Forecast Styles
           ======================================== */

        /* Cosmic Timing Section */
        .cosmic-timing-section {
            background: linear-gradient(135deg, rgba(157, 0, 255, 0.15) 0%, rgba(255, 0, 102, 0.15) 100%);
            border: 2px solid var(--neon-purple);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .cosmic-timing-section h3 {
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            color: var(--neon-purple);
            margin-bottom: 20px;
        }

        .timing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .timing-item {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(157, 0, 255, 0.4);
            border-radius: 15px;
            padding: 20px;
        }

        .timing-item strong {
            display: block;
            color: var(--neon-gold);
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .timing-item p {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .timing-item em {
            color: var(--neon-cyan);
            font-style: normal;
        }

        /* Cross-Reference Sections */
        .cross-reference-section {
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .cross-reference-section.agreement {
            background: linear-gradient(135deg, rgba(0, 255, 100, 0.1) 0%, rgba(0, 245, 255, 0.1) 100%);
            border: 2px solid rgba(0, 255, 100, 0.4);
        }

        .cross-reference-section.tension {
            background: linear-gradient(135deg, rgba(255, 100, 0, 0.1) 0%, rgba(255, 0, 102, 0.1) 100%);
            border: 2px solid rgba(255, 100, 0, 0.4);
        }

        .cross-reference-section h3 {
            font-family: 'Orbitron', monospace;
            font-size: 1.4rem;
            margin-bottom: 20px;
        }

        .cross-reference-section.agreement h3 {
            color: #00ff64;
        }

        .cross-reference-section.tension h3 {
            color: #ff6400;
        }

        .cross-item {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .cross-item:last-child {
            margin-bottom: 0;
        }

        .system-badges {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 12px;
        }

        .system-badges .badge {
            background: rgba(0, 245, 255, 0.2);
            border: 1px solid rgba(0, 245, 255, 0.5);
            color: var(--neon-cyan);
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .system-badges .badge.tension {
            background: rgba(255, 100, 0, 0.2);
            border-color: rgba(255, 100, 0, 0.5);
            color: #ff9040;
        }

        /* Weekly/Monthly/Yearly Breakdowns */
        .weekly-breakdown,
        .monthly-breakdown,
        .yearly-breakdown {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(0, 245, 255, 0.3);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .weekly-breakdown h3,
        .monthly-breakdown h3,
        .yearly-breakdown h3 {
            font-family: 'Orbitron', monospace;
            font-size: 1.4rem;
            color: var(--neon-cyan);
            margin-bottom: 25px;
        }

        .days-grid,
        .weeks-grid,
        .quarters-grid {
            display: grid;
            gap: 15px;
        }

        .days-grid {
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        }

        .weeks-grid {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        .quarters-grid {
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        }

        .day-item,
        .week-item,
        .quarter-item {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 18px;
            transition: all 0.3s ease;
        }

        .day-item:hover,
        .week-item:hover,
        .quarter-item:hover {
            border-color: rgba(0, 245, 255, 0.4);
            transform: translateY(-2px);
        }

        .day-item.today {
            border-color: var(--neon-gold);
            background: rgba(255, 215, 0, 0.1);
        }

        .day-item h4,
        .week-item h4,
        .quarter-item h4 {
            color: var(--neon-gold);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .day-item p,
        .week-item p,
        .quarter-item p {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 5px;
            font-size: 0.95rem;
        }

        /* Key Dates Section */
        .key-dates-section {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(157, 0, 255, 0.1) 100%);
            border: 2px solid rgba(255, 215, 0, 0.4);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .key-dates-section h3 {
            font-family: 'Orbitron', monospace;
            font-size: 1.4rem;
            color: var(--neon-gold);
            margin-bottom: 20px;
        }

        .key-dates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .key-date-item {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 20px;
        }

        .key-date-item h4 {
            color: var(--neon-cyan);
            margin-bottom: 12px;
        }

        .key-date-item p {
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* Major Transits Section */
        .major-transits-section {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(157, 0, 255, 0.4);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .major-transits-section h3 {
            font-family: 'Orbitron', monospace;
            font-size: 1.4rem;
            color: var(--neon-purple);
            margin-bottom: 20px;
        }

        .transit-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 20px;
        }

        .transit-item {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(157, 0, 255, 0.3);
            border-radius: 12px;
            padding: 20px;
        }

        .transit-item h4 {
            color: var(--neon-gold);
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        .transit-item p {
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* Enhanced Action Items */
        .action-item.cosmic-timing {
            background: linear-gradient(135deg, rgba(157, 0, 255, 0.2) 0%, rgba(0, 245, 255, 0.2) 100%);
            border-left: 4px solid var(--neon-purple);
        }

        .action-item.challenge {
            background: linear-gradient(135deg, rgba(255, 100, 0, 0.2) 0%, rgba(255, 0, 102, 0.2) 100%);
            border-left: 4px solid #ff6400;
        }

        .action-item.moon-ritual {
            background: linear-gradient(135deg, rgba(157, 0, 255, 0.15) 0%, rgba(0, 0, 80, 0.3) 100%);
            border-left: 4px solid #9d00ff;
        }

        /* Mobile Responsive Enhancements */
        @media (max-width: 768px) {
            .timing-grid,
            .days-grid,
            .weeks-grid,
            .quarters-grid,
            .transit-grid,
            .key-dates-grid {
                grid-template-columns: 1fr;
            }

            .cosmic-timing-section,
            .cross-reference-section,
            .weekly-breakdown,
            .monthly-breakdown,
            .yearly-breakdown,
            .key-dates-section,
            .major-transits-section {
                padding: 20px;
            }

            .system-badges {
                flex-direction: column;
            }

            .day-item,
            .week-item,
            .quarter-item,
            .timing-item,
            .transit-item,
            .key-date-item {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="cosmic-bg"></div>
    <div class="stars" id="stars"></div>

    <div class="container">
        <!-- Hero Section -->
        <div class="hero">
            <h1>üåå QUANTUM FORECASTER</h1>
            <p class="tagline">Your personalized cosmic forecast based on ALL your data</p>
            <div class="systems">
                <div class="system-badge">‚≠ê Western Astrology</div>
                <div class="system-badge">üêâ Chinese Zodiac</div>
                <div class="system-badge">üî¢ Numerology</div>
                <div class="system-badge">üìú Gematria</div>
            </div>
        </div>

        <!-- Input Section -->
        <div class="input-section" id="inputSection">
            <h2>Generate Your Forecast</h2>
            
            <!-- Accuracy Indicator -->
            <div class="accuracy-indicator" id="accuracyIndicator">
                <h3>Forecast Accuracy</h3>
                <div class="accuracy-bar">
                    <div class="accuracy-fill" id="accuracyFill" style="width: 25%;">25%</div>
                </div>
                <ul class="data-checklist" id="dataChecklist">
                    <li class="missing">Birth date not provided</li>
                    <li class="missing">Birth time not provided</li>
                    <li class="missing">Birth location not provided</li>
                    <li class="missing">Name not provided</li>
                </ul>
            </div>

            <!-- Tier 1: Required -->
            <div class="input-group">
                <label for="birthDate">Birth Date *</label>
                <input type="date" id="birthDate" required>
                <p class="help-text">Required - determines your sun sign, life path, and Chinese zodiac</p>
            </div>

            <!-- Tier 2: Enhanced Accuracy -->
            <button class="expand-btn" id="expandEnhanced">
                ‚ñº Add Birth Time & Location for More Accuracy
            </button>
            
            <div class="expanded-content" id="enhancedContent">
                <div class="input-group">
                    <label for="birthTime">Birth Time <span class="optional-badge">(optional)</span></label>
                    <input type="time" id="birthTime">
                    <p class="help-text">Used for rising sign and moon sign calculations</p>
                </div>

                <div class="input-group">
                    <label for="birthLocation">Birth Location <span class="optional-badge">(optional)</span></label>
                    <input type="text" id="birthLocation" placeholder="City, Country">
                    <p class="help-text">Used for birth chart houses and local time calculations</p>
                </div>

                <div class="input-group">
                    <label for="currentLocation">Current Location <span class="optional-badge">(optional)</span></label>
                    <input type="text" id="currentLocation" placeholder="City, Country">
                    <p class="help-text">Used for current transits and local planetary hours</p>
                </div>
            </div>

            <!-- Tier 3: Deep Personalization -->
            <button class="expand-btn" id="expandAdvanced" style="display: none;">
                ‚ñº Add Name & Focus for Deep Personalization
            </button>
            
            <div class="expanded-content" id="advancedContent">
                <div class="input-group">
                    <label for="fullName">Full Name <span class="optional-badge">(optional)</span></label>
                    <div class="input-row">
                        <input type="text" id="firstName" placeholder="First">
                        <input type="text" id="middleName" placeholder="Middle">
                        <input type="text" id="lastName" placeholder="Last">
                    </div>
                    <p class="help-text">Used for gematria and name numerology calculations</p>
                </div>

                <div class="input-group">
                    <label for="focus">Current Focus <span class="optional-badge">(optional)</span></label>
                    <select id="focus">
                        <option value="">Select a focus area...</option>
                        <option value="career">Career & Success</option>
                        <option value="love">Love & Relationships</option>
                        <option value="health">Health & Wellness</option>
                        <option value="spiritual">Spiritual Growth</option>
                        <option value="finances">Finances & Abundance</option>
                    </select>
                    <p class="help-text">Tailors guidance to your specific needs</p>
                </div>

                <div class="input-group">
                    <label for="challenge">Current Challenge <span class="optional-badge">(optional)</span></label>
                    <textarea id="challenge" rows="3" placeholder="Brief description of what you're working through..."></textarea>
                    <p class="help-text">Provides obstacle-specific advice and shadow work</p>
                </div>
            </div>

            <!-- Generate Button -->
            <button class="generate-btn" id="generateBtn">‚ú® Generate Forecast</button>
        </div>

        <!-- Loading Animation -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="color: var(--neon-cyan); font-size: 1.2rem;">Calculating your cosmic forecast...</p>
        </div>

        <!-- Timeframe Selector -->
        <div class="timeframe-selector" id="timeframeSelector" style="display: none;">
            <button class="timeframe-btn active" data-timeframe="daily">üìÖ Daily</button>
            <button class="timeframe-btn" data-timeframe="weekly">üìÜ Weekly</button>
            <button class="timeframe-btn" data-timeframe="monthly">üóìÔ∏è Monthly</button>
            <button class="timeframe-btn" data-timeframe="yearly">üìä Yearly</button>
        </div>

        <!-- Forecast Output -->
        <div class="forecast-output" id="forecastOutput">
            <!-- Content will be dynamically generated -->
        </div>
    </div>

    <script>
        // Generate stars background
        function generateStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = star.style.height = Math.random() * 3 + 'px';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }
        generateStars();

        // Expandable sections
        document.getElementById('expandEnhanced').addEventListener('click', function() {
            const content = document.getElementById('enhancedContent');
            content.classList.toggle('show');
            this.textContent = content.classList.contains('show') 
                ? '‚ñ≤ Hide Enhanced Options' 
                : '‚ñº Add Birth Time & Location for More Accuracy';
            
            if (content.classList.contains('show')) {
                document.getElementById('expandAdvanced').style.display = 'block';
            }
        });

        document.getElementById('expandAdvanced').addEventListener('click', function() {
            const content = document.getElementById('advancedContent');
            content.classList.toggle('show');
            this.textContent = content.classList.contains('show') 
                ? '‚ñ≤ Hide Advanced Options' 
                : '‚ñº Add Name & Focus for Deep Personalization';
        });

        // Update accuracy indicator
        function updateAccuracy() {
            const birthDate = document.getElementById('birthDate').value;
            const birthTime = document.getElementById('birthTime').value;
            const birthLocation = document.getElementById('birthLocation').value;
            const firstName = document.getElementById('firstName').value;
            
            let accuracy = 0;
            const checklist = [];
            
            if (birthDate) {
                accuracy += 25;
                checklist.push('Birth date provided');
            } else {
                checklist.push({ text: 'Birth date not provided', missing: true });
            }
            
            if (birthTime) {
                accuracy += 25;
                checklist.push('Birth time provided');
            } else {
                checklist.push({ text: 'Birth time not provided', missing: true });
            }
            
            if (birthLocation) {
                accuracy += 25;
                checklist.push('Birth location provided');
            } else {
                checklist.push({ text: 'Birth location not provided', missing: true });
            }
            
            if (firstName) {
                accuracy += 25;
                checklist.push('Name provided');
            } else {
                checklist.push({ text: 'Name not provided', missing: true });
            }
            
            document.getElementById('accuracyFill').style.width = accuracy + '%';
            document.getElementById('accuracyFill').textContent = accuracy + '%';
            
            const checklistHTML = checklist.map(item => {
                if (typeof item === 'string') {
                    return `<li>‚úÖ ${item}</li>`;
                } else {
                    return `<li class="missing">‚ö†Ô∏è ${item.text}</li>`;
                }
            }).join('');
            
            document.getElementById('dataChecklist').innerHTML = checklistHTML;
        }

        // Listen for input changes
        ['birthDate', 'birthTime', 'birthLocation', 'firstName'].forEach(id => {
            document.getElementById(id).addEventListener('input', updateAccuracy);
        });

        // Calculation functions
        function getZodiacSign(month, day) {
            const signs = [
                { name: 'Capricorn', symbol: '‚ôë', dates: [[12, 22], [1, 19]] },
                { name: 'Aquarius', symbol: '‚ôí', dates: [[1, 20], [2, 18]] },
                { name: 'Pisces', symbol: '‚ôì', dates: [[2, 19], [3, 20]] },
                { name: 'Aries', symbol: '‚ôà', dates: [[3, 21], [4, 19]] },
                { name: 'Taurus', symbol: '‚ôâ', dates: [[4, 20], [5, 20]] },
                { name: 'Gemini', symbol: '‚ôä', dates: [[5, 21], [6, 20]] },
                { name: 'Cancer', symbol: '‚ôã', dates: [[6, 21], [7, 22]] },
                { name: 'Leo', symbol: '‚ôå', dates: [[7, 23], [8, 22]] },
                { name: 'Virgo', symbol: '‚ôç', dates: [[8, 23], [9, 22]] },
                { name: 'Libra', symbol: '‚ôé', dates: [[9, 23], [10, 22]] },
                { name: 'Scorpio', symbol: '‚ôè', dates: [[10, 23], [11, 21]] },
                { name: 'Sagittarius', symbol: '‚ôê', dates: [[11, 22], [12, 21]] }
            ];
            
            for (let sign of signs) {
                const [[m1, d1], [m2, d2]] = sign.dates;
                if ((month === m1 && day >= d1) || (month === m2 && day <= d2)) {
                    return sign;
                }
            }
            return signs[0];
        }

        function getChineseZodiac(year) {
            const animals = [
                'Rat', 'Ox', 'Tiger', 'Rabbit', 'Dragon', 'Snake',
                'Horse', 'Goat', 'Monkey', 'Rooster', 'Dog', 'Pig'
            ];
            const elements = ['Metal', 'Water', 'Wood', 'Fire', 'Earth'];
            
            const animalIndex = (year - 4) % 12;
            const elementIndex = Math.floor(((year - 4) % 10) / 2);
            
            return {
                animal: animals[animalIndex],
                element: elements[elementIndex],
                year: year
            };
        }

        function getLifePathNumber(birthDate) {
            const dateStr = birthDate.replace(/-/g, '');
            let sum = 0;
            for (let char of dateStr) {
                sum += parseInt(char);
            }
            while (sum > 9 && sum !== 11 && sum !== 22 && sum !== 33) {
                sum = sum.toString().split('').reduce((a, b) => parseInt(a) + parseInt(b), 0);
            }
            return sum;
        }

        function getPersonalYear(birthDate) {
            const birth = new Date(birthDate);
            const today = new Date();
            const month = birth.getMonth() + 1;
            const day = birth.getDate();
            const year = today.getFullYear();
            
            let sum = month + day + year;
            while (sum > 9) {
                sum = sum.toString().split('').reduce((a, b) => parseInt(a) + parseInt(b), 0);
            }
            return sum;
        }

        function calculateGematria(name) {
            if (!name) return 0;
            let sum = 0;
            for (let char of name.toUpperCase()) {
                if (char >= 'A' && char <= 'Z') {
                    sum += char.charCodeAt(0) - 64;
                }
            }
            return sum;
        }

        // PHASE 2: Rising Sign Calculator (based on birth time)
        function getRisingSign(birthDate, birthTime) {
            if (!birthTime) return null;
            const birth = new Date(birthDate);
            const month = birth.getMonth() + 1;
            const day = birth.getDate();
            const sunSign = getZodiacSign(month, day);
            const sunSignIndex = ['Aries', 'Taurus', 'Gemini', 'Cancer', 'Leo', 'Virgo', 
                                  'Libra', 'Scorpio', 'Sagittarius', 'Capricorn', 'Aquarius', 'Pisces'].indexOf(sunSign.name);
            
            // Parse birth time
            const [hours, minutes] = birthTime.split(':').map(Number);
            const totalMinutes = hours * 60 + minutes;
            
            // Rising sign changes approximately every 2 hours (120 minutes)
            // 6 AM = Ascendant aligns with Sun sign
            const sunriseMinutes = 6 * 60; // 6 AM baseline
            const minutesSinceSunrise = (totalMinutes - sunriseMinutes + 1440) % 1440;
            const risingOffset = Math.floor(minutesSinceSunrise / 120);
            const risingIndex = (sunSignIndex + risingOffset) % 12;
            
            const signs = [
                { name: 'Aries', symbol: '‚ôà' },
                { name: 'Taurus', symbol: '‚ôâ' },
                { name: 'Gemini', symbol: '‚ôä' },
                { name: 'Cancer', symbol: '‚ôã' },
                { name: 'Leo', symbol: '‚ôå' },
                { name: 'Virgo', symbol: '‚ôç' },
                { name: 'Libra', symbol: '‚ôé' },
                { name: 'Scorpio', symbol: '‚ôè' },
                { name: 'Sagittarius', symbol: '‚ôê' },
                { name: 'Capricorn', symbol: '‚ôë' },
                { name: 'Aquarius', symbol: '‚ôí' },
                { name: 'Pisces', symbol: '‚ôì' }
            ];
            return signs[risingIndex];
        }

        // PHASE 2: Moon Sign Calculator
        function getMoonSign(birthDate) {
            const birth = new Date(birthDate);
            // Moon moves through all 12 signs in ~29.5 days = ~2.46 days per sign
            const epoch = new Date('2000-01-06'); // New Moon in Capricorn reference
            const daysSinceEpoch = Math.floor((birth - epoch) / (1000 * 60 * 60 * 24));
            const moonCyclePosition = daysSinceEpoch % 29.5;
            const moonSignIndex = Math.floor((moonCyclePosition / 29.5) * 12) % 12;
            
            const signs = [
                { name: 'Capricorn', symbol: '‚ôë', element: 'Earth' },
                { name: 'Aquarius', symbol: '‚ôí', element: 'Air' },
                { name: 'Pisces', symbol: '‚ôì', element: 'Water' },
                { name: 'Aries', symbol: '‚ôà', element: 'Fire' },
                { name: 'Taurus', symbol: '‚ôâ', element: 'Earth' },
                { name: 'Gemini', symbol: '‚ôä', element: 'Air' },
                { name: 'Cancer', symbol: '‚ôã', element: 'Water' },
                { name: 'Leo', symbol: '‚ôå', element: 'Fire' },
                { name: 'Virgo', symbol: '‚ôç', element: 'Earth' },
                { name: 'Libra', symbol: '‚ôé', element: 'Air' },
                { name: 'Scorpio', symbol: '‚ôè', element: 'Water' },
                { name: 'Sagittarius', symbol: '‚ôê', element: 'Fire' }
            ];
            return signs[moonSignIndex];
        }

        // PHASE 2: Planetary Hour Calculator
        function getPlanetaryHour() {
            const now = new Date();
            const dayOfWeek = now.getDay(); // 0=Sunday, 1=Monday...
            const hour = now.getHours();
            
            // Chaldean order of planets
            const planets = ['Saturn', 'Jupiter', 'Mars', 'Sun', 'Venus', 'Mercury', 'Moon'];
            // Day rulers
            const dayRulers = ['Sun', 'Moon', 'Mars', 'Mercury', 'Jupiter', 'Venus', 'Saturn'];
            
            const dayRulerIndex = planets.indexOf(dayRulers[dayOfWeek]);
            // Sunrise assumed at 6 AM for simplicity
            const hoursFromSunrise = (hour - 6 + 24) % 24;
            const planetaryHourIndex = (dayRulerIndex + hoursFromSunrise) % 7;
            
            const planetData = {
                'Saturn': { symbol: '‚ôÑ', energy: 'discipline, structure, karmic lessons', color: 'Black/Gray', activity: 'organization, boundary-setting, long-term planning' },
                'Jupiter': { symbol: '‚ôÉ', energy: 'expansion, luck, wisdom', color: 'Blue/Purple', activity: 'learning, travel planning, abundance work' },
                'Mars': { symbol: '‚ôÇ', energy: 'action, courage, initiative', color: 'Red', activity: 'physical exercise, assertive conversations, starting projects' },
                'Sun': { symbol: '‚òâ', energy: 'vitality, creativity, self-expression', color: 'Gold/Yellow', activity: 'creative work, leadership, visibility' },
                'Venus': { symbol: '‚ôÄ', energy: 'love, beauty, harmony', color: 'Green/Pink', activity: 'art, relationships, self-care, beautification' },
                'Mercury': { symbol: '‚òø', energy: 'communication, intellect, travel', color: 'Orange', activity: 'writing, studying, conversations, commerce' },
                'Moon': { symbol: '‚òΩ', energy: 'intuition, emotions, nurturing', color: 'Silver/White', activity: 'rest, reflection, family, psychic work' }
            };
            
            return { planet: planets[planetaryHourIndex], ...planetData[planets[planetaryHourIndex]] };
        }

        // PHASE 2: Cross-System Analysis
        function getCrossSystemAnalysis(zodiac, rising, moon, chinese, lifePath, personalYear) {
            let agreements = [];
            let tensions = [];
            let badges = [];
            
            // Element mapping for Western signs
            const fireSignals = ['Aries', 'Leo', 'Sagittarius'];
            const earthSigns = ['Taurus', 'Virgo', 'Capricorn'];
            const airSigns = ['Gemini', 'Libra', 'Aquarius'];
            const waterSigns = ['Cancer', 'Scorpio', 'Pisces'];
            
            function getWesternElement(sign) {
                if (fireSignals.includes(sign)) return 'Fire';
                if (earthSigns.includes(sign)) return 'Earth';
                if (airSigns.includes(sign)) return 'Air';
                if (waterSigns.includes(sign)) return 'Water';
                return 'Unknown';
            }
            
            const sunElement = getWesternElement(zodiac.name);
            const moonElement = moon ? getWesternElement(moon.name) : null;
            const risingElement = rising ? getWesternElement(rising.name) : null;
            
            // Chinese element compatibility with Western element
            const elementHarmony = {
                'Fire': ['Fire', 'Wood'],
                'Earth': ['Earth', 'Metal'],
                'Air': ['Metal', 'Water'],
                'Water': ['Water', 'Wood']
            };
            
            // Check Western-Chinese element harmony
            if (elementHarmony[sunElement] && elementHarmony[sunElement].includes(chinese.element)) {
                agreements.push({
                    systems: ['Western Astrology', 'Chinese Zodiac'],
                    insight: `Your ${zodiac.name} ${sunElement} energy harmonizes beautifully with your ${chinese.element} ${chinese.animal}. Both systems point toward ${sunElement === 'Fire' ? 'passionate action and leadership' : sunElement === 'Earth' ? 'stability and manifestation' : sunElement === 'Air' ? 'intellectual pursuits and communication' : 'emotional depth and intuition'}.`
                });
                badges.push('‚≠êüêâ');
            } else {
                tensions.push({
                    systems: ['Western Astrology', 'Chinese Zodiac'],
                    insight: `Your ${zodiac.name} ${sunElement} energy creates dynamic tension with your ${chinese.element} ${chinese.animal}. This isn't negative‚Äîit provides depth and complexity, pushing you to integrate seemingly opposing forces.`
                });
            }
            
            // Life Path alignment with Sun Sign
            const leaderPaths = [1, 8];
            const creativePaths = [3, 6];
            const seekerPaths = [7, 11];
            const builderPaths = [4, 22];
            
            const leaderSigns = ['Aries', 'Leo', 'Capricorn'];
            const creativeSigns = ['Taurus', 'Leo', 'Libra', 'Pisces'];
            const seekerSigns = ['Sagittarius', 'Aquarius', 'Pisces', 'Scorpio'];
            const builderSigns = ['Taurus', 'Virgo', 'Capricorn'];
            
            if ((leaderPaths.includes(lifePath) && leaderSigns.includes(zodiac.name)) ||
                (creativePaths.includes(lifePath) && creativeSigns.includes(zodiac.name)) ||
                (seekerPaths.includes(lifePath) && seekerSigns.includes(zodiac.name)) ||
                (builderPaths.includes(lifePath) && builderSigns.includes(zodiac.name))) {
                agreements.push({
                    systems: ['Western Astrology', 'Numerology'],
                    insight: `Your Life Path ${lifePath} amplifies your ${zodiac.name} nature‚Äîboth systems confirm your core purpose. This alignment gives you natural confidence in your path.`
                });
                badges.push('‚≠êüî¢');
            }
            
            // Moon and Chinese element harmony (emotional depth)
            if (moon && moonElement) {
                if ((moonElement === 'Water' && ['Water', 'Wood'].includes(chinese.element)) ||
                    (moonElement === 'Fire' && ['Fire', 'Wood'].includes(chinese.element)) ||
                    (moonElement === 'Earth' && ['Earth', 'Metal'].includes(chinese.element)) ||
                    (moonElement === 'Air' && ['Metal', 'Water'].includes(chinese.element))) {
                    agreements.push({
                        systems: ['Moon Sign', 'Chinese Zodiac'],
                        insight: `Your ${moon.name} Moon resonates with your ${chinese.element} element, suggesting deep emotional alignment with your ancestral wisdom. Your intuitive responses are trustworthy.`
                    });
                }
            }
            
            // Personal Year and Chinese Year harmony
            const currentYear = new Date().getFullYear();
            const currentChinese = getChineseZodiac(currentYear);
            if (chinese.element === currentChinese.element) {
                agreements.push({
                    systems: ['Chinese Zodiac', 'Temporal'],
                    insight: `This is your element year! Your ${chinese.element} energy is amplified by the current ${currentChinese.element} ${currentChinese.animal} year‚Äîopportunities align more easily.`
                });
                badges.push('üêâ‚è∞');
            }
            
            return { agreements, tensions, badges };
        }

        // PHASE 2: Moon Phase Calculator
        function getCurrentMoonPhase() {
            const now = new Date();
            const epoch = new Date('2000-01-06'); // Known new moon
            const daysSince = (now - epoch) / (1000 * 60 * 60 * 24);
            const lunation = daysSince % 29.53;
            
            if (lunation < 1.85) return { phase: 'New Moon', symbol: 'üåë', energy: 'New beginnings, setting intentions, planting seeds', action: 'Meditate on new goals and write detailed intentions' };
            if (lunation < 7.38) return { phase: 'Waxing Crescent', symbol: 'üåí', energy: 'Taking first steps, courage, commitment', action: 'Take the first concrete action toward your intentions' };
            if (lunation < 9.23) return { phase: 'First Quarter', symbol: 'üåì', energy: 'Decision time, overcoming obstacles, momentum', action: 'Push through resistance and commit to your path' };
            if (lunation < 14.77) return { phase: 'Waxing Gibbous', symbol: 'üåî', energy: 'Refinement, patience, trust the process', action: 'Fine-tune your approach and stay the course' };
            if (lunation < 16.62) return { phase: 'Full Moon', symbol: 'üåï', energy: 'Manifestation, clarity, celebration, release', action: 'Celebrate progress and release what no longer serves' };
            if (lunation < 22.15) return { phase: 'Waning Gibbous', symbol: 'üåñ', energy: 'Gratitude, sharing wisdom, giving back', action: 'Share what you\'ve learned and express gratitude' };
            if (lunation < 23.99) return { phase: 'Last Quarter', symbol: 'üåó', energy: 'Release, forgiveness, letting go', action: 'Release old patterns and forgive past mistakes' };
            return { phase: 'Waning Crescent', symbol: 'üåò', energy: 'Rest, surrender, preparation for renewal', action: 'Rest deeply and prepare for the new cycle' };
        }

        // Generate forecast
        document.getElementById('generateBtn').addEventListener('click', function() {
            const birthDate = document.getElementById('birthDate').value;
            
            if (!birthDate) {
                alert('Please enter your birth date');
                return;
            }
            
            // Show loading
            document.getElementById('loading').classList.add('show');
            document.getElementById('inputSection').style.display = 'none';
            
            // Simulate calculation time
            setTimeout(() => {
                generateForecast();
                document.getElementById('loading').classList.remove('show');
                document.getElementById('timeframeSelector').style.display = 'flex';
                document.getElementById('forecastOutput').classList.add('show');
                document.getElementById('forecastOutput').scrollIntoView({ behavior: 'smooth' });
            }, 2000);
        });

        function generateForecast(timeframe = 'daily') {
            const birthDate = document.getElementById('birthDate').value;
            const birthTime = document.getElementById('birthTime').value;
            const birthLocation = document.getElementById('birthLocation').value;
            const firstName = document.getElementById('firstName').value;
            const middleName = document.getElementById('middleName').value;
            const lastName = document.getElementById('lastName').value;
            const focus = document.getElementById('focus').value;
            const challenge = document.getElementById('challenge').value;
            
            const birth = new Date(birthDate);
            const month = birth.getMonth() + 1;
            const day = birth.getDate();
            const year = birth.getFullYear();
            
            // Calculate all systems
            const zodiac = getZodiacSign(month, day);
            const chinese = getChineseZodiac(year);
            const lifePath = getLifePathNumber(birthDate);
            const personalYear = getPersonalYear(birthDate);
            const fullName = [firstName, middleName, lastName].filter(n => n).join(' ');
            const gematria = calculateGematria(fullName);
            
            // PHASE 2: Advanced calculations
            const risingSign = getRisingSign(birthDate, birthTime);
            const moonSign = getMoonSign(birthDate);
            const planetaryHour = getPlanetaryHour();
            const moonPhase = getCurrentMoonPhase();
            const crossAnalysis = getCrossSystemAnalysis(zodiac, risingSign, moonSign, chinese, lifePath, personalYear);
            
            // Get today's date
            const today = new Date();
            const todayStr = today.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            
            // Generate forecast content based on timeframe
            let forecastHTML = '';
            
            if (timeframe === 'daily') {
                forecastHTML = generateDailyForecast(zodiac, risingSign, moonSign, chinese, lifePath, personalYear, 
                    gematria, fullName, birthTime, birthLocation, planetaryHour, moonPhase, crossAnalysis, 
                    focus, challenge, birth, todayStr);
            } else if (timeframe === 'weekly') {
                forecastHTML = generateWeeklyForecast(zodiac, risingSign, moonSign, chinese, lifePath, personalYear,
                    gematria, fullName, birthTime, moonPhase, crossAnalysis, focus, challenge, birth);
            } else if (timeframe === 'monthly') {
                forecastHTML = generateMonthlyForecast(zodiac, risingSign, moonSign, chinese, lifePath, personalYear,
                    gematria, fullName, crossAnalysis, focus, challenge, birth);
            } else {
                forecastHTML = generateYearlyForecast(zodiac, risingSign, moonSign, chinese, lifePath, personalYear,
                    gematria, fullName, crossAnalysis, focus, challenge, birth);
            }
            
            document.getElementById('forecastOutput').innerHTML = forecastHTML;
        }

        // PHASE 2: Daily Forecast Generator
        function generateDailyForecast(zodiac, risingSign, moonSign, chinese, lifePath, personalYear, 
            gematria, fullName, birthTime, birthLocation, planetaryHour, moonPhase, crossAnalysis, 
            focus, challenge, birth, todayStr) {
            
            return `
                <div class="forecast-header">
                    <h2>YOUR QUANTUM FORECAST</h2>
                    <div class="forecast-meta">
                        <p>Generated for: ${fullName || 'Seeker'}</p>
                        <p>‚òâ Sun: ${zodiac.name} ${zodiac.symbol} ${risingSign ? `| ‚Üë Rising: ${risingSign.name} ${risingSign.symbol}` : ''} ${moonSign ? `| ‚òΩ Moon: ${moonSign.name} ${moonSign.symbol}` : ''}</p>
                        <p>üêâ ${chinese.element} ${chinese.animal} | üî¢ Life Path ${lifePath} | Personal Year ${personalYear}</p>
                        <p>Timeframe: Daily | ${todayStr}</p>
                    </div>
                </div>

                <div class="cosmic-timing-section">
                    <h3>‚è∞ COSMIC TIMING - Right Now</h3>
                    <div class="timing-grid">
                        <div class="timing-item">
                            <strong>${moonPhase.symbol} ${moonPhase.phase}</strong>
                            <p>${moonPhase.energy}</p>
                            <p><em>Action: ${moonPhase.action}</em></p>
                        </div>
                        <div class="timing-item">
                            <strong>${planetaryHour.symbol} Hour of ${planetaryHour.planet}</strong>
                            <p>Energy: ${planetaryHour.energy}</p>
                            <p><em>Best for: ${planetaryHour.activity}</em></p>
                        </div>
                    </div>
                </div>

                ${crossAnalysis.agreements.length > 0 ? `
                <div class="cross-reference-section agreement">
                    <h3>‚ú® SYSTEM AGREEMENTS - Where Your Cosmic DNA Aligns</h3>
                    ${crossAnalysis.agreements.map(a => `
                        <div class="cross-item">
                            <div class="system-badges">${a.systems.map(s => `<span class="badge">${s}</span>`).join(' + ')}</div>
                            <p>${a.insight}</p>
                        </div>
                    `).join('')}
                </div>
                ` : ''}

                ${crossAnalysis.tensions.length > 0 ? `
                <div class="cross-reference-section tension">
                    <h3>‚ö° DYNAMIC TENSIONS - Your Growth Edges</h3>
                    ${crossAnalysis.tensions.map(t => `
                        <div class="cross-item">
                            <div class="system-badges">${t.systems.map(s => `<span class="badge tension">${s}</span>`).join(' ‚ü∑ ')}</div>
                            <p>${t.insight}</p>
                        </div>
                    `).join('')}
                </div>
                ` : ''}

                <div class="overview-section">
                    <h3>üåü TODAY'S OVERVIEW</h3>
                    <div class="overview-content">
                        <p><strong>Core Energy:</strong> ${getEnhancedOverviewEnergy(zodiac, risingSign, moonSign, chinese, personalYear, moonPhase)}</p>
                        <p><strong>Primary Focus:</strong> ${getEnhancedOverviewFocus(lifePath, personalYear, focus, moonPhase)}</p>
                        <p><strong>Shadow Work:</strong> ${getEnhancedOverviewCaution(zodiac, moonSign, chinese)}</p>
                    </div>
                </div>

                <div class="system-section expanded">
                    <div class="system-header" onclick="toggleSystem(this)">
                        <h3>‚≠ê WESTERN ASTROLOGY</h3>
                        <span class="system-toggle">‚ñº</span>
                    </div>
                    <div class="system-content">
                        ${getEnhancedWesternAstrologyForecast(zodiac, risingSign, moonSign, birthTime, birthLocation, moonPhase)}
                    </div>
                </div>

                <div class="system-section">
                    <div class="system-header" onclick="toggleSystem(this)">
                        <h3>üêâ CHINESE ZODIAC</h3>
                        <span class="system-toggle">‚ñº</span>
                    </div>
                    <div class="system-content">
                        ${getEnhancedChineseZodiacForecast(chinese, moonPhase)}
                    </div>
                </div>

                <div class="system-section">
                    <div class="system-header" onclick="toggleSystem(this)">
                        <h3>üî¢ NUMEROLOGY</h3>
                        <span class="system-toggle">‚ñº</span>
                    </div>
                    <div class="system-content">
                        ${getEnhancedNumerologyForecast(lifePath, personalYear, birth)}
                    </div>
                </div>

                ${fullName ? `
                <div class="system-section">
                    <div class="system-header" onclick="toggleSystem(this)">
                        <h3>üìú GEMATRIA</h3>
                        <span class="system-toggle">‚ñº</span>
                    </div>
                    <div class="system-content">
                        ${getEnhancedGematriaForecast(fullName, gematria, birth)}
                    </div>
                </div>
                ` : ''}

                <div class="action-section">
                    <h3>üí° YOUR DAILY ACTION PLAN</h3>
                    ${getEnhancedActionItems(zodiac, risingSign, moonSign, chinese, lifePath, personalYear, planetaryHour, moonPhase, focus, challenge)}
                </div>

                <button class="save-btn" onclick="saveForecast()">üì• Save to Library</button>
                <button class="generate-btn" onclick="location.reload()">üîÑ Generate New Forecast</button>
            `;
        }

        // PHASE 2: Weekly Forecast Generator
        function generateWeeklyForecast(zodiac, risingSign, moonSign, chinese, lifePath, personalYear,
            gematria, fullName, birthTime, moonPhase, crossAnalysis, focus, challenge, birth) {
            
            const today = new Date();
            const weekStart = new Date(today);
            weekStart.setDate(today.getDate() - today.getDay());
            const weekEnd = new Date(weekStart);
            weekEnd.setDate(weekStart.getDate() + 6);
            
            const weekStartStr = weekStart.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            const weekEndStr = weekEnd.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
            
            // Generate 7-day breakdown
            let dailyBreakdown = '';
            const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const dayEnergies = ['reflection & rest', 'initiative & new beginnings', 'assertive action', 'communication & learning', 'expansion & opportunity', 'love & harmony', 'discipline & structure'];
            const planetRulers = ['Sun', 'Moon', 'Mars', 'Mercury', 'Jupiter', 'Venus', 'Saturn'];
            
            for (let i = 0; i < 7; i++) {
                const dayDate = new Date(weekStart);
                dayDate.setDate(weekStart.getDate() + i);
                const isToday = dayDate.toDateString() === today.toDateString();
                
                dailyBreakdown += `
                    <div class="day-item ${isToday ? 'today' : ''}">
                        <h4>${dayNames[i]}${isToday ? ' (Today)' : ''} - ${dayDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</h4>
                        <p><strong>Ruler:</strong> ${planetRulers[i]} | <strong>Energy:</strong> ${dayEnergies[i]}</p>
                        <p>${getDaySpecificGuidance(zodiac, chinese, lifePath, i, focus)}</p>
                    </div>
                `;
            }
            
            return `
                <div class="forecast-header">
                    <h2>YOUR WEEKLY QUANTUM FORECAST</h2>
                    <div class="forecast-meta">
                        <p>Generated for: ${fullName || 'Seeker'}</p>
                        <p>‚òâ Sun: ${zodiac.name} ${zodiac.symbol} ${risingSign ? `| ‚Üë Rising: ${risingSign.name} ${risingSign.symbol}` : ''}</p>
                        <p>üêâ ${chinese.element} ${chinese.animal} | üî¢ Life Path ${lifePath} | Personal Year ${personalYear}</p>
                        <p>Week: ${weekStartStr} - ${weekEndStr}</p>
                    </div>
                </div>

                <div class="overview-section">
                    <h3>üåü WEEK AT A GLANCE</h3>
                    <div class="overview-content">
                        <p><strong>Theme:</strong> ${getWeeklyTheme(zodiac, chinese, personalYear, moonPhase)}</p>
                        <p><strong>Opportunity:</strong> ${getWeeklyOpportunity(lifePath, personalYear, focus)}</p>
                        <p><strong>Challenge:</strong> ${getWeeklyChallenge(zodiac, chinese, challenge)}</p>
                        <p><strong>Key Day:</strong> ${getKeyDayOfWeek(zodiac, lifePath)}</p>
                    </div>
                </div>

                ${crossAnalysis.agreements.length > 0 ? `
                <div class="cross-reference-section agreement">
                    <h3>‚ú® THIS WEEK'S COSMIC ALIGNMENTS</h3>
                    ${crossAnalysis.agreements.slice(0, 2).map(a => `
                        <div class="cross-item">
                            <div class="system-badges">${a.systems.map(s => `<span class="badge">${s}</span>`).join(' + ')}</div>
                            <p>${a.insight}</p>
                        </div>
                    `).join('')}
                </div>
                ` : ''}

                <div class="weekly-breakdown">
                    <h3>üìÖ 7-DAY BREAKDOWN</h3>
                    <div class="days-grid">
                        ${dailyBreakdown}
                    </div>
                </div>

                <div class="system-section expanded">
                    <div class="system-header" onclick="toggleSystem(this)">
                        <h3>‚≠ê WESTERN ASTROLOGY - Weekly Transits</h3>
                        <span class="system-toggle">‚ñº</span>
                    </div>
                    <div class="system-content">
                        ${getWeeklyWesternForecast(zodiac, risingSign, moonSign)}
                    </div>
                </div>

                <div class="system-section">
                    <div class="system-header" onclick="toggleSystem(this)">
                        <h3>üî¢ NUMEROLOGY - Weekly Vibration</h3>
                        <span class="system-toggle">‚ñº</span>
                    </div>
                    <div class="system-content">
                        ${getWeeklyNumerologyForecast(lifePath, personalYear, weekStart)}
                    </div>
                </div>

                <div class="action-section">
                    <h3>üí° WEEKLY PRIORITIES</h3>
                    ${getWeeklyActionItems(zodiac, chinese, lifePath, focus)}
                </div>

                <button class="save-btn" onclick="saveForecast()">üì• Save to Library</button>
                <button class="generate-btn" onclick="location.reload()">üîÑ Generate New Forecast</button>
            `;
        }

        // PHASE 2: Monthly Forecast Generator
        function generateMonthlyForecast(zodiac, risingSign, moonSign, chinese, lifePath, personalYear,
            gematria, fullName, crossAnalysis, focus, challenge, birth) {
            
            const today = new Date();
            const monthName = today.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            const daysInMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0).getDate();
            
            // Calculate personal month
            const personalMonth = ((today.getMonth() + 1) + personalYear) % 9 || 9;
            
            // Four week themes
            const weekThemes = getMonthlyWeekThemes(zodiac, chinese, personalMonth, focus);
            
            return `
                <div class="forecast-header">
                    <h2>YOUR MONTHLY QUANTUM FORECAST</h2>
                    <div class="forecast-meta">
                        <p>Generated for: ${fullName || 'Seeker'}</p>
                        <p>‚òâ Sun: ${zodiac.name} ${zodiac.symbol} ${risingSign ? `| ‚Üë Rising: ${risingSign.name} ${risingSign.symbol}` : ''}</p>
                        <p>üêâ ${chinese.element} ${chinese.animal} | üî¢ Life Path ${lifePath} | Personal Year ${personalYear}</p>
                        <p>Month: ${monthName} | Personal Month: ${personalMonth}</p>
                    </div>
                </div>

                <div class="overview-section">
                    <h3>üåü ${monthName.toUpperCase()} OVERVIEW</h3>
                    <div class="overview-content">
                        <p><strong>Month Theme:</strong> ${getMonthlyTheme(personalMonth, zodiac, chinese)}</p>
                        <p><strong>Primary Energy:</strong> ${getMonthlyEnergy(zodiac, chinese, personalMonth)}</p>
                        <p><strong>Growth Area:</strong> ${getMonthlyGrowth(lifePath, personalMonth, focus)}</p>
                        <p><strong>Watch For:</strong> ${getMonthlyCaution(zodiac, moonSign, personalMonth)}</p>
                    </div>
                </div>

                ${crossAnalysis.agreements.length > 0 ? `
                <div class="cross-reference-section agreement">
                    <h3>‚ú® MONTHLY COSMIC ALIGNMENTS</h3>
                    ${crossAnalysis.agreements.map(a => `
                        <div class="cross-item">
                            <div class="system-badges">${a.systems.map(s => `<span class="badge">${s}</span>`).join(' + ')}</div>
                            <p>${a.insight}</p>
                        </div>
                    `).join('')}
                </div>
                ` : ''}

                <div class="monthly-breakdown">
                    <h3>üìÖ 4-WEEK BREAKDOWN</h3>
                    <div class="weeks-grid">
                        ${weekThemes.map((theme, i) => `
                            <div class="week-item">
                                <h4>Week ${i + 1}: ${theme.title}</h4>
                                <p><strong>Focus:</strong> ${theme.focus}</p>
                                <p><strong>Action:</strong> ${theme.action}</p>
                                <p><strong>Key Days:</strong> ${theme.keyDays}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="key-dates-section">
                    <h3>üîë KEY DATES THIS MONTH</h3>
                    ${getMonthlyKeyDates(zodiac, chinese, lifePath, today)}
                </div>

                <div class="system-section expanded">
                    <div class="system-header" onclick="toggleSystem(this)">
                        <h3>‚≠ê ASTROLOGICAL TRANSITS</h3>
                        <span class="system-toggle">‚ñº</span>
                    </div>
                    <div class="system-content">
                        ${getMonthlyWesternForecast(zodiac, risingSign, moonSign, today)}
                    </div>
                </div>

                <div class="system-section">
                    <div class="system-header" onclick="toggleSystem(this)">
                        <h3>üî¢ NUMEROLOGY - Personal Month ${personalMonth}</h3>
                        <span class="system-toggle">‚ñº</span>
                    </div>
                    <div class="system-content">
                        ${getMonthlyNumerologyForecast(lifePath, personalYear, personalMonth)}
                    </div>
                </div>

                <div class="action-section">
                    <h3>üí° MONTHLY INTENTIONS</h3>
                    ${getMonthlyActionItems(zodiac, chinese, lifePath, personalMonth, focus)}
                </div>

                <button class="save-btn" onclick="saveForecast()">üì• Save to Library</button>
                <button class="generate-btn" onclick="location.reload()">üîÑ Generate New Forecast</button>
            `;
        }

        // PHASE 2: Yearly Forecast Generator  
        function generateYearlyForecast(zodiac, risingSign, moonSign, chinese, lifePath, personalYear,
            gematria, fullName, crossAnalysis, focus, challenge, birth) {
            
            const currentYear = new Date().getFullYear();
            const currentChinese = getChineseZodiac(currentYear);
            
            // Quarterly breakdown
            const quarters = getYearlyQuarters(zodiac, chinese, lifePath, personalYear, focus);
            
            return `
                <div class="forecast-header">
                    <h2>YOUR ${currentYear} QUANTUM FORECAST</h2>
                    <div class="forecast-meta">
                        <p>Generated for: ${fullName || 'Seeker'}</p>
                        <p>‚òâ Sun: ${zodiac.name} ${zodiac.symbol} ${risingSign ? `| ‚Üë Rising: ${risingSign.name} ${risingSign.symbol}` : ''}</p>
                        <p>üêâ ${chinese.element} ${chinese.animal} in Year of ${currentChinese.element} ${currentChinese.animal}</p>
                        <p>üî¢ Life Path ${lifePath} | Personal Year ${personalYear}</p>
                    </div>
                </div>

                <div class="overview-section">
                    <h3>üåü ${currentYear} - YOUR YEAR OF ${getYearlyThemeTitle(personalYear).toUpperCase()}</h3>
                    <div class="overview-content">
                        <p><strong>Year Theme:</strong> ${getYearlyTheme(personalYear, zodiac, chinese)}</p>
                        <p><strong>Core Lesson:</strong> ${getYearlyLesson(lifePath, personalYear)}</p>
                        <p><strong>Major Opportunity:</strong> ${getYearlyOpportunity(zodiac, chinese, personalYear, focus)}</p>
                        <p><strong>Growth Edge:</strong> ${getYearlyChallenge(zodiac, moonSign, lifePath)}</p>
                    </div>
                </div>

                ${crossAnalysis.agreements.length > 0 ? `
                <div class="cross-reference-section agreement">
                    <h3>‚ú® ${currentYear} COSMIC ALIGNMENTS</h3>
                    ${crossAnalysis.agreements.map(a => `
                        <div class="cross-item">
                            <div class="system-badges">${a.systems.map(s => `<span class="badge">${s}</span>`).join(' + ')}</div>
                            <p>${a.insight}</p>
                        </div>
                    `).join('')}
                </div>
                ` : ''}

                <div class="yearly-breakdown">
                    <h3>üìÖ QUARTERLY ROADMAP</h3>
                    <div class="quarters-grid">
                        ${quarters.map((q, i) => `
                            <div class="quarter-item">
                                <h4>Q${i + 1}: ${q.title}</h4>
                                <p><strong>Months:</strong> ${q.months}</p>
                                <p><strong>Theme:</strong> ${q.theme}</p>
                                <p><strong>Focus:</strong> ${q.focus}</p>
                                <p><strong>Peak Time:</strong> ${q.peak}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="major-transits-section">
                    <h3>ü™ê MAJOR TRANSITS & EVENTS</h3>
                    ${getYearlyTransits(zodiac, currentYear)}
                </div>

                <div class="system-section expanded">
                    <div class="system-header" onclick="toggleSystem(this)">
                        <h3>‚≠ê WESTERN ASTROLOGY - ${currentYear} Overview</h3>
                        <span class="system-toggle">‚ñº</span>
                    </div>
                    <div class="system-content">
                        ${getYearlyWesternForecast(zodiac, risingSign, moonSign, currentYear)}
                    </div>
                </div>

                <div class="system-section">
                    <div class="system-header" onclick="toggleSystem(this)">
                        <h3>üêâ CHINESE ZODIAC - Year of ${currentChinese.element} ${currentChinese.animal}</h3>
                        <span class="system-toggle">‚ñº</span>
                    </div>
                    <div class="system-content">
                        ${getYearlyChineseForecast(chinese, currentChinese)}
                    </div>
                </div>

                <div class="system-section">
                    <div class="system-header" onclick="toggleSystem(this)">
                        <h3>üî¢ NUMEROLOGY - Personal Year ${personalYear}</h3>
                        <span class="system-toggle">‚ñº</span>
                    </div>
                    <div class="system-content">
                        ${getYearlyNumerologyForecast(lifePath, personalYear)}
                    </div>
                </div>

                <div class="action-section">
                    <h3>üí° ${currentYear} STRATEGIC PRIORITIES</h3>
                    ${getYearlyActionItems(zodiac, chinese, lifePath, personalYear, focus)}
                </div>

                <button class="save-btn" onclick="saveForecast()">üì• Save to Library</button>
                <button class="generate-btn" onclick="location.reload()">üîÑ Generate New Forecast</button>
            `;
        }

        function toggleSystem(header) {
            const section = header.parentElement;
            section.classList.toggle('expanded');
        }

        // PHASE 2: Enhanced Forecast Content Generators
        function getEnhancedOverviewEnergy(zodiac, risingSign, moonSign, chinese, personalYear, moonPhase) {
            const baseEnergy = `${zodiac.name} determination meets ${chinese.element} ${chinese.animal} wisdom`;
            const moonInfluence = moonSign ? `, filtered through ${moonSign.name} emotional lens` : '';
            const risingInfluence = risingSign ? `. Your ${risingSign.name} rising presents this energy to the world with characteristic ${getRisingStyle(risingSign.name)}` : '';
            const phaseInfluence = `. The ${moonPhase.phase} amplifies ${moonPhase.energy.split(',')[0].toLowerCase()}`;
            return baseEnergy + moonInfluence + risingInfluence + phaseInfluence + '.';
        }

        function getRisingStyle(sign) {
            const styles = {
                'Aries': 'boldness and directness',
                'Taurus': 'steadiness and sensuality',
                'Gemini': 'wit and adaptability',
                'Cancer': 'nurturing warmth',
                'Leo': 'charisma and presence',
                'Virgo': 'precision and helpfulness',
                'Libra': 'grace and diplomacy',
                'Scorpio': 'intensity and mystery',
                'Sagittarius': 'optimism and adventure',
                'Capricorn': 'authority and composure',
                'Aquarius': 'uniqueness and vision',
                'Pisces': 'empathy and dreaminess'
            };
            return styles[sign] || 'unique expression';
        }

        function getEnhancedOverviewFocus(lifePath, personalYear, focus, moonPhase) {
            const lifePathFocus = getLifePathFocus(lifePath);
            const yearFocus = getPersonalYearFocus(personalYear);
            const phaseFocus = moonPhase.action;
            
            if (focus) {
                const focusMap = {
                    'career': `Professional advancement through ${lifePathFocus}. ${yearFocus}`,
                    'love': `Heart-centered connections aligned with your ${lifePathFocus}. ${yearFocus}`,
                    'health': `Physical vitality supporting your ${lifePathFocus}. ${yearFocus}`,
                    'spiritual': `Inner wisdom development through ${lifePathFocus}. ${yearFocus}`,
                    'finances': `Abundance manifestation via ${lifePathFocus}. ${yearFocus}`
                };
                return focusMap[focus] || `${lifePathFocus}. ${yearFocus}`;
            }
            return `${lifePathFocus}. ${yearFocus} Action: ${phaseFocus}`;
        }

        function getLifePathFocus(lifePath) {
            const focuses = {
                1: 'pioneering innovation and independent leadership',
                2: 'collaborative partnerships and diplomatic balance',
                3: 'creative expression and inspiring communication',
                4: 'building solid foundations and practical systems',
                5: 'embracing change and freedom-seeking exploration',
                6: 'nurturing responsibility and service to community',
                7: 'deep analysis and spiritual understanding',
                8: 'material mastery and authoritative achievement',
                9: 'humanitarian vision and compassionate completion',
                11: 'intuitive illumination and inspirational guidance',
                22: 'visionary building and large-scale manifestation',
                33: 'master teaching and healing transformation'
            };
            return focuses[lifePath] || 'purposeful growth';
        }

        function getPersonalYearFocus(personalYear) {
            const focuses = {
                1: 'This is your year to initiate‚Äîplant seeds boldly.',
                2: 'Patience and partnership are your tools‚Äîcultivate relationships.',
                3: 'Express yourself creatively‚Äîyour voice matters now.',
                4: 'Build systematically‚Äîfoundations created now last.',
                5: 'Embrace transformation‚Äîfreedom awaits the adaptable.',
                6: 'Nurture what matters‚Äîhome and heart call.',
                7: 'Go within‚Äîspiritual depth is available.',
                8: 'Manifest materially‚Äîyour power is visible.',
                9: 'Complete and release‚Äîclearing creates space.'
            };
            return focuses[personalYear] || 'Transformative growth unfolds.';
        }

        function getEnhancedOverviewCaution(zodiac, moonSign, chinese) {
            const sunShadow = getZodiacShadow(zodiac.name);
            const moonShadow = moonSign ? getZodiacShadow(moonSign.name) : '';
            const chineseShadow = getChineseShadow(chinese.animal);
            
            return `Watch for ${sunShadow} (sun shadow)${moonSign ? ` and ${moonShadow} (emotional trigger)` : ''}. Your ${chinese.animal} nature may amplify ${chineseShadow}. Awareness transforms shadow into strength.`;
        }

        function getZodiacShadow(sign) {
            const shadows = {
                'Aries': 'impatience and impulsive reactions',
                'Taurus': 'stubbornness and resistance to change',
                'Gemini': 'scattered focus and superficiality',
                'Cancer': 'emotional overwhelm and clinginess',
                'Leo': 'ego attachment and need for validation',
                'Virgo': 'perfectionism and self-criticism',
                'Libra': 'people-pleasing and indecision',
                'Scorpio': 'obsessive control and jealousy',
                'Sagittarius': 'overcommitment and restlessness',
                'Capricorn': 'workaholism and emotional suppression',
                'Aquarius': 'detachment and rebelliousness',
                'Pisces': 'escapism and boundary dissolution'
            };
            return shadows[sign] || 'unconscious patterns';
        }

        function getChineseShadow(animal) {
            const shadows = {
                'Rat': 'anxiety about resources',
                'Ox': 'inflexibility under pressure',
                'Tiger': 'reckless aggression',
                'Rabbit': 'avoidance of conflict',
                'Dragon': 'arrogance and overreach',
                'Snake': 'manipulation tendencies',
                'Horse': 'commitment fears',
                'Goat': 'dependency patterns',
                'Monkey': 'trickster energy',
                'Rooster': 'critical perfectionism',
                'Dog': 'pessimistic worry',
                'Pig': 'overindulgence'
            };
            return shadows[animal] || 'habitual reactions';
        }

        // PHASE 2: Enhanced Western Astrology Forecast
        function getEnhancedWesternAstrologyForecast(zodiac, risingSign, moonSign, birthTime, birthLocation, moonPhase) {
            let html = `
                <div class="system-item">
                    <h4>‚òâ Sun in ${zodiac.name} ${zodiac.symbol}</h4>
                    <p>${getDetailedZodiacDescription(zodiac.name)}</p>
                    <p><strong>Today's Solar Activation:</strong> ${getSolarActivation(zodiac.name)}</p>
                </div>
            `;
            
            if (risingSign) {
                html += `
                    <div class="system-item">
                        <h4>‚Üë Rising Sign: ${risingSign.name} ${risingSign.symbol}</h4>
                        <p>${getRisingSignDescription(risingSign.name)}</p>
                        <p><strong>Public Presence Today:</strong> ${getRisingActivation(risingSign.name)}</p>
                    </div>
                `;
            }
            
            if (moonSign) {
                html += `
                    <div class="system-item">
                        <h4>‚òΩ Moon Sign: ${moonSign.name} ${moonSign.symbol}</h4>
                        <p>${getMoonSignDescription(moonSign.name)}</p>
                        <p><strong>Emotional Navigation:</strong> ${getMoonActivation(moonSign.name, moonPhase)}</p>
                    </div>
                `;
            }
            
            html += `
                <div class="system-item">
                    <h4>üåô Current Moon Phase: ${moonPhase.symbol} ${moonPhase.phase}</h4>
                    <p>${moonPhase.energy}</p>
                    <p><strong>Moon Phase Guidance:</strong> ${moonPhase.action}</p>
                </div>
                <div class="system-item">
                    <h4>ü™ê Planetary Transits</h4>
                    <p>${getTransitForecast(zodiac.name)}</p>
                </div>
            `;
            
            return html;
        }

        function getDetailedZodiacDescription(sign) {
            const descriptions = {
                'Aries': 'As a Cardinal Fire sign ruled by Mars, you carry the spark of initiation and the courage to begin. Your soul\'s purpose involves pioneering new territory and inspiring others through bold action. Today, your natural leadership is activated.',
                'Taurus': 'As a Fixed Earth sign ruled by Venus, you embody stability, sensuality, and the art of building lasting value. Your soul\'s purpose involves creating beauty and security. Today, your grounding energy provides anchor for others.',
                'Gemini': 'As a Mutable Air sign ruled by Mercury, you are the cosmic messenger‚Äîcurious, adaptable, and intellectually vibrant. Your soul\'s purpose involves connecting ideas and people. Today, your communication gifts shine.',
                'Cancer': 'As a Cardinal Water sign ruled by the Moon, you carry deep emotional intelligence and nurturing wisdom. Your soul\'s purpose involves creating emotional safety and honoring the past. Today, your intuition speaks clearly.',
                'Leo': 'As a Fixed Fire sign ruled by the Sun, you radiate creative life force and natural authority. Your soul\'s purpose involves authentic self-expression and generous heart-leadership. Today, your light inspires others.',
                'Virgo': 'As a Mutable Earth sign ruled by Mercury, you hold the gift of discernment, service, and practical wisdom. Your soul\'s purpose involves healing through attention to detail. Today, your analytical gifts are needed.',
                'Libra': 'As a Cardinal Air sign ruled by Venus, you carry the scales of justice, beauty, and relational harmony. Your soul\'s purpose involves creating balance and beauty in the world. Today, your diplomatic skills mediate.',
                'Scorpio': 'As a Fixed Water sign ruled by Pluto and Mars, you hold transformative power and psychological depth. Your soul\'s purpose involves healing through facing shadow. Today, your intensity transforms.',
                'Sagittarius': 'As a Mutable Fire sign ruled by Jupiter, you carry the archer\'s vision‚Äîphilosophical, adventurous, and truth-seeking. Your soul\'s purpose involves expanding understanding. Today, your optimism lifts spirits.',
                'Capricorn': 'As a Cardinal Earth sign ruled by Saturn, you embody ambition, discipline, and mastery through time. Your soul\'s purpose involves building structures that serve the collective. Today, your authority is respected.',
                'Aquarius': 'As a Fixed Air sign ruled by Uranus and Saturn, you are the visionary revolutionary‚Äîinnovative, humanitarian, and future-oriented. Your soul\'s purpose involves awakening collective consciousness. Today, your uniqueness inspires.',
                'Pisces': 'As a Mutable Water sign ruled by Neptune and Jupiter, you hold the ocean of collective consciousness‚Äîmystical, compassionate, and boundless. Your soul\'s purpose involves channeling divine love. Today, your spiritual sensitivity peaks.'
            };
            return descriptions[sign] || 'Your unique cosmic signature speaks today.';
        }

        function getSolarActivation(sign) {
            const activations = {
                'Aries': 'Your initiative and courage are amplified. Take that first step you\'ve been contemplating. Leadership opportunities present themselves‚Äîstep forward with confidence.',
                'Taurus': 'Your senses are heightened. Pay attention to physical comfort, financial matters, and anything related to beauty or nature. Steady progress yields results today.',
                'Gemini': 'Your mind is electric. Conversations flow easily, ideas spark, and connections form naturally. Share your thoughts‚Äîthey carry more weight than usual.',
                'Cancer': 'Your emotional radar is finely tuned. Home and family matters take priority. Trust your gut feelings‚Äîthey\'re carrying important information today.',
                'Leo': 'Your creative heart opens wide. Express yourself boldly. Romance and creative projects flourish under today\'s energy. You\'re more magnetic than usual.',
                'Virgo': 'Your analytical abilities peak. Details that others miss are crystal clear to you. Health routines and organizational tasks flow with unusual ease.',
                'Libra': 'Your social grace is enhanced. Partnerships and negotiations favor you. Beauty matters more today‚Äîsurround yourself with aesthetically pleasing environments.',
                'Scorpio': 'Your transformative power intensifies. Deep conversations, research, and psychological insights come naturally. Trust your instincts about hidden matters.',
                'Sagittarius': 'Your adventurous spirit soars. Learning, travel planning, and philosophical discussions energize you. Your optimism is contagious‚Äîspread it generously.',
                'Capricorn': 'Your ambition finds clear expression. Career moves and long-term planning favor you. Your natural authority commands respect‚Äîuse it wisely.',
                'Aquarius': 'Your innovative mind activates. Original ideas flow, and group activities energize you. Your uniqueness is your superpower today‚Äîdon\'t dim it.',
                'Pisces': 'Your spiritual channels open wide. Intuitive downloads, creative inspiration, and compassionate connections define your day. Trust the mystical.'
            };
            return activations[sign] || 'Your unique gifts activate today.';
        }

        function getRisingSignDescription(sign) {
            return `Your ${sign} Rising shapes how you meet the world and how others first perceive you. This is your social armor and your automatic response system‚Äîit colors every first impression and every new situation.`;
        }

        function getRisingActivation(sign) {
            const activations = {
                'Aries': 'You appear more dynamic and assertive today. First impressions favor bold introductions. People see your courage clearly.',
                'Taurus': 'You radiate calm stability. Others seek your grounding presence. Your physical presence carries weight.',
                'Gemini': 'Your wit and adaptability shine in social situations. Networking flows naturally. Quick thinking impresses.',
                'Cancer': 'Your nurturing energy is visible. Others feel safe with you. Emotional availability opens doors.',
                'Leo': 'Your charisma is undeniable. You naturally command attention. Creative self-expression attracts opportunity.',
                'Virgo': 'Your competence is evident. Others trust your attention to detail. Helpful suggestions are well-received.',
                'Libra': 'Your charm and grace smooth every interaction. Partnership opportunities arise. Beauty and diplomacy win.',
                'Scorpio': 'Your intensity creates intrigue. Others sense your depth. Powerful presence commands respect.',
                'Sagittarius': 'Your optimism is infectious. Adventure calls and others want to follow. Enthusiasm opens doors.',
                'Capricorn': 'Your professionalism shines. Career-related first impressions succeed. Authority is recognized.',
                'Aquarius': 'Your uniqueness attracts the right people. Innovative ideas are welcomed. Originality distinguishes you.',
                'Pisces': 'Your empathy draws others in. Creative and spiritual connections form easily. Compassion is visible.'
            };
            return activations[sign] || 'Your presentation aligns with your authentic self.';
        }

        function getMoonSignDescription(sign) {
            return `Your ${sign} Moon governs your emotional nature, instinctive reactions, and innermost needs. This is your private self‚Äîhow you feel, what makes you secure, and how you nurture yourself and others.`;
        }

        function getMoonActivation(sign, moonPhase) {
            const baseActivation = {
                'Aries': 'Emotional energy runs high and fast. Process feelings through action. Don\'t let irritation fester‚Äîaddress it directly but kindly.',
                'Taurus': 'Seek comfort and security. Emotional stability comes through sensory pleasure. Take time for self-care rituals.',
                'Gemini': 'Talk through your feelings. Writing, conversations, and mental stimulation help process emotions. Avoid overthinking.',
                'Cancer': 'Emotions run deep and strong. Honor your need for nurturing‚Äîgive and receive. Home is your sanctuary.',
                'Leo': 'Express your feelings creatively. Recognition and appreciation feed your emotional well-being. Share your heart.',
                'Virgo': 'Organize your way to emotional clarity. Practical tasks soothe anxiety. Helpful service lifts your mood.',
                'Libra': 'Seek balance in relationships. Harmony in your environment supports emotional peace. Beautiful surroundings help.',
                'Scorpio': 'Emotional intensity needs healthy outlets. Deep conversations, creative expression, or physical release help. Transform feelings into power.',
                'Sagittarius': 'Optimism is your emotional default. Freedom and adventure lift your spirits. Don\'t let others limit your joy.',
                'Capricorn': 'Emotional strength comes through achievement. Structure supports your feelings. Allow yourself to feel beneath the composure.',
                'Aquarius': 'Process emotions through intellectual understanding. Space and freedom matter. Connect with friends who understand.',
                'Pisces': 'Emotional sensitivity is heightened. Boundaries matter. Creative and spiritual practices channel overwhelming feelings.'
            };
            return (baseActivation[sign] || 'Honor your emotional needs.') + ` The ${moonPhase.phase} especially supports ${moonPhase.energy.split(',')[0].toLowerCase()}.`;
        }

        function getTransitForecast(sign) {
            const today = new Date();
            const dayOfWeek = today.getDay();
            const transits = [
                `Mercury's current position enhances communication and mental clarity for ${sign}. Ideas flow and connections strengthen.`,
                `Venus brings harmony to relationships and finances. Beauty and pleasure are favored for ${sign} today.`,
                `Mars energizes action and assertion. ${sign} has extra physical and motivational energy available.`,
                `Jupiter expands opportunities and optimism. ${sign} may encounter luck and growth in unexpected areas.`,
                `Saturn calls for discipline and structure. ${sign} benefits from focused, long-term thinking today.`,
                `The current planetary alignment supports ${sign}'s creative expression and authentic self-presentation.`,
                `Neptune's influence enhances ${sign}'s intuition and spiritual sensitivity. Dreams may carry messages.`
            ];
            return transits[dayOfWeek] + ' Trust your instincts about timing‚Äîthe cosmic clock is working in your favor.';
        }

        // PHASE 2: Enhanced Chinese Zodiac Forecast
        function getEnhancedChineseZodiacForecast(chinese, moonPhase) {
            return `
                <div class="system-item">
                    <h4>Your Animal: ${chinese.animal}</h4>
                    <p>${getDetailedChineseDescription(chinese.animal)}</p>
                </div>
                <div class="system-item">
                    <h4>Your Element: ${chinese.element}</h4>
                    <p>${getDetailedElementDescription(chinese.element)}</p>
                </div>
                <div class="system-item">
                    <h4>Today's Animal Energy</h4>
                    <p>${getDailyAnimalEnergy(chinese.animal)}</p>
                </div>
                <div class="system-item">
                    <h4>Elemental Harmony</h4>
                    <p>${getElementalHarmony(chinese.element)}</p>
                </div>
                <div class="system-item">
                    <h4>Auspicious Directions & Colors</h4>
                    <p><strong>Lucky Direction:</strong> ${getLuckyDirection(chinese.animal)}<br>
                    <strong>Lucky Colors:</strong> ${getChineseColor(chinese.element)}<br>
                    <strong>Lucky Numbers:</strong> ${getLuckyNumbers(chinese.animal)}<br>
                    <strong>Avoid:</strong> ${getUnluckyElements(chinese.animal)}</p>
                </div>
            `;
        }

        function getDetailedChineseDescription(animal) {
            const descriptions = {
                'Rat': 'The Rat is first in the zodiac‚Äîclever, quick-witted, and resourceful. You possess natural charm and the ability to turn any situation to your advantage. Your instincts for opportunity are finely honed, and your social intelligence opens doors others don\'t even see.',
                'Ox': 'The Ox embodies diligence, dependability, and quiet strength. You are the foundation upon which great things are built. Your patience and persistence are legendary‚Äîyou accomplish through steady effort what others cannot achieve through force.',
                'Tiger': 'The Tiger is brave, competitive, and unpredictable. You are a natural leader who inspires others through sheer presence and courage. Your protective instincts are fierce, and your confidence can move mountains.',
                'Rabbit': 'The Rabbit brings elegance, sensitivity, and diplomatic skill. You navigate social situations with grace and possess artistic sensibility that enriches everything you touch. Your gentle strength should not be underestimated.',
                'Dragon': 'The Dragon is the most powerful and auspicious sign‚Äîambitious, energetic, and natural leaders. You carry imperial energy and the expectation of greatness. Your charisma is magnetic and your potential limitless.',
                'Snake': 'The Snake is wise, intuitive, and enigmatic. You possess deep intelligence and the patience to wait for perfect timing. Your insight into human nature and strategic mind make you formidable in any arena.',
                'Horse': 'The Horse embodies freedom, energy, and passionate independence. You need room to run and causes to champion. Your enthusiasm is infectious and your work ethic impressive when inspired.',
                'Goat': 'The Goat (or Sheep) brings creativity, gentleness, and artistic vision. You are the aesthetic heart of the zodiac‚Äîsensitive to beauty and harmony. Your compassion and imagination enrich the world.',
                'Monkey': 'The Monkey is clever, curious, and endlessly entertaining. You solve problems through wit and innovation, always finding the creative angle. Your intelligence is versatile and your charm disarming.',
                'Rooster': 'The Rooster is observant, hardworking, and confident. You speak your truth and honor your word. Your attention to detail and organizational skills are unmatched when focused.',
                'Dog': 'The Dog embodies loyalty, honesty, and a strong moral compass. You are the protector and the truth-teller‚Äîfiercely devoted to those you love. Your integrity is your greatest asset.',
                'Pig': 'The Pig brings generosity, sincerity, and good fortune. You enjoy life\'s pleasures without apology and share your abundance freely. Your kind heart and genuine nature attract lasting relationships.'
            };
            return descriptions[animal] || 'Your animal spirit carries unique wisdom.';
        }

        function getDetailedElementDescription(element) {
            const descriptions = {
                'Metal': 'Metal element brings determination, focus, and righteousness. You have strong will, clear values, and the ability to cut through confusion. Your precision and persistence make you formidable in achieving goals.',
                'Water': 'Water element brings wisdom, flexibility, and deep intuition. You adapt to circumstances while maintaining your essential nature. Your emotional intelligence and ability to flow around obstacles are your strengths.',
                'Wood': 'Wood element brings growth, creativity, and expansive vision. You are naturally optimistic and ethical, with a drive toward progress. Your generosity and idealism inspire others to reach higher.',
                'Fire': 'Fire element brings passion, charisma, and dynamic energy. You light up any room and inspire action in others. Your enthusiasm is contagious and your courage admirable.',
                'Earth': 'Earth element brings stability, patience, and practical wisdom. You are the reliable center around which others orbit. Your grounding presence and nurturing nature support everyone around you.'
            };
            return descriptions[element] || 'Your element adds unique qualities to your nature.';
        }

        function getDailyAnimalEnergy(animal) {
            const today = new Date();
            const dailyAnimals = ['Rat', 'Ox', 'Tiger', 'Rabbit', 'Dragon', 'Snake', 'Horse', 'Goat', 'Monkey', 'Rooster', 'Dog', 'Pig'];
            const todayAnimal = dailyAnimals[today.getDate() % 12];
            
            const compatibility = getAnimalCompatibility(animal, todayAnimal);
            return `Today carries ${todayAnimal} energy. ${compatibility} Your ${animal} wisdom ${getAnimalAdvice(animal, todayAnimal)}.`;
        }

        function getAnimalCompatibility(sign1, sign2) {
            // Simplified compatibility
            const allies = {
                'Rat': ['Dragon', 'Monkey'],
                'Ox': ['Snake', 'Rooster'],
                'Tiger': ['Horse', 'Dog'],
                'Rabbit': ['Goat', 'Pig'],
                'Dragon': ['Rat', 'Monkey'],
                'Snake': ['Ox', 'Rooster'],
                'Horse': ['Tiger', 'Dog'],
                'Goat': ['Rabbit', 'Pig'],
                'Monkey': ['Rat', 'Dragon'],
                'Rooster': ['Ox', 'Snake'],
                'Dog': ['Tiger', 'Horse'],
                'Pig': ['Rabbit', 'Goat']
            };
            
            if (sign1 === sign2) return 'This is a same-sign day‚Äîyour energy is doubled and amplified.';
            if (allies[sign1]?.includes(sign2)) return `This is a highly auspicious day for you‚Äî${sign2} energy harmonizes beautifully with your ${sign1} nature.`;
            return `Moderate energy blend‚Äî${sign2}\'s influence offers complementary lessons for your ${sign1} path.`;
        }

        function getAnimalAdvice(yourAnimal, todayAnimal) {
            return `suggests balancing ${yourAnimal} strengths with ${todayAnimal} qualities today`;
        }

        function getElementalHarmony(element) {
            const cycle = {
                'Metal': { generates: 'Water', generated: 'Earth', controls: 'Wood', controlled: 'Fire' },
                'Water': { generates: 'Wood', generated: 'Metal', controls: 'Fire', controlled: 'Earth' },
                'Wood': { generates: 'Fire', generated: 'Water', controls: 'Earth', controlled: 'Metal' },
                'Fire': { generates: 'Earth', generated: 'Wood', controls: 'Metal', controlled: 'Water' },
                'Earth': { generates: 'Metal', generated: 'Fire', controls: 'Water', controlled: 'Wood' }
            };
            
            const c = cycle[element];
            return `Your ${element} element generates ${c.generates} (supportive energy) and is generated by ${c.generated} (receiving energy). You naturally control ${c.controls} and are controlled by ${c.controlled}. Today, lean into ${c.generates} activities for flowing creation.`;
        }

        function getLuckyDirection(animal) {
            const directions = {
                'Rat': 'North, Northwest',
                'Ox': 'Southeast, North',
                'Tiger': 'South, East',
                'Rabbit': 'East, Southeast, South',
                'Dragon': 'North, West, Northwest',
                'Snake': 'South, Southwest',
                'Horse': 'South, East',
                'Goat': 'East, Southeast',
                'Monkey': 'North, West',
                'Rooster': 'West, Southwest',
                'Dog': 'East, South',
                'Pig': 'Southeast, Northeast'
            };
            return directions[animal] || 'All directions hold potential';
        }

        function getLuckyNumbers(animal) {
            const numbers = {
                'Rat': '2, 3, 7',
                'Ox': '1, 4, 9',
                'Tiger': '1, 3, 4',
                'Rabbit': '3, 4, 9',
                'Dragon': '1, 6, 7',
                'Snake': '2, 8, 9',
                'Horse': '2, 3, 7',
                'Goat': '2, 7, 8',
                'Monkey': '4, 9',
                'Rooster': '5, 7, 8',
                'Dog': '3, 4, 9',
                'Pig': '2, 5, 8'
            };
            return numbers[animal] || '1, 8, 9';
        }

        function getUnluckyElements(animal) {
            const avoid = {
                'Rat': 'Horse direction (South), number 5, yellow/brown colors',
                'Ox': 'Goat direction, number 6, green colors when in conflict',
                'Tiger': 'Monkey energy, Southwest direction',
                'Rabbit': 'Rooster energy, West direction',
                'Dragon': 'Dog energy, Southeast direction when in conflict',
                'Snake': 'Pig energy, Northwest direction',
                'Horse': 'Rat energy, North direction',
                'Goat': 'Ox energy, Northeast direction',
                'Monkey': 'Tiger energy, Northeast direction',
                'Rooster': 'Rabbit energy, East direction',
                'Dog': 'Dragon energy, Southeast direction',
                'Pig': 'Snake energy, Southeast direction'
            };
            return avoid[animal] || 'Nothing specific‚Äîremain balanced';
        }

        // PHASE 2: Enhanced Numerology Forecast
        function getEnhancedNumerologyForecast(lifePath, personalYear, birth) {
            const today = new Date();
            const personalMonth = ((today.getMonth() + 1) + personalYear) % 9 || 9;
            const personalDay = (birth.getDate() + today.getDate() + (today.getMonth() + 1)) % 9 || 9;
            
            return `
                <div class="system-item">
                    <h4>Life Path ${lifePath}</h4>
                    <p>${getDetailedLifePathDescription(lifePath)}</p>
                </div>
                <div class="system-item">
                    <h4>Personal Year ${personalYear}</h4>
                    <p>${getDetailedPersonalYearDescription(personalYear)}</p>
                </div>
                <div class="system-item">
                    <h4>Personal Month ${personalMonth}</h4>
                    <p>${getPersonalMonthDescription(personalMonth, personalYear)}</p>
                </div>
                <div class="system-item">
                    <h4>Personal Day ${personalDay}</h4>
                    <p>${getDetailedPersonalDayDescription(personalDay)}</p>
                </div>
                <div class="system-item">
                    <h4>Today's Universal Number</h4>
                    <p>${getUniversalDayGuidance(today)}</p>
                </div>
            `;
        }

        function getDetailedLifePathDescription(number) {
            const descriptions = {
                1: '<strong>The Pioneer & Leader</strong> - You are here to develop independence, individuality, and leadership. Your soul chose this path to learn self-reliance and to inspire others through original action. You are meant to be first‚Äîfirst to try, first to lead, first to stand alone when necessary. Success comes when you trust your innovative ideas and have the courage to implement them.',
                2: '<strong>The Diplomat & Peacemaker</strong> - You are here to develop cooperation, sensitivity, and harmony. Your soul chose this path to learn the art of partnership and the power of patience. You are meant to bring balance‚Äîto situations, relationships, and groups. Success comes when you trust your intuition and allow your natural healing presence to work.',
                3: '<strong>The Communicator & Creator</strong> - You are here to develop self-expression, creativity, and joy. Your soul chose this path to learn that your voice matters and your artistic vision enriches the world. You are meant to inspire‚Äîthrough words, art, performance, or simple presence. Success comes when you share your gifts without fear.',
                4: '<strong>The Builder & Organizer</strong> - You are here to develop discipline, stability, and practical mastery. Your soul chose this path to learn that lasting value is built step by step. You are meant to create foundations‚Äîsystems, structures, traditions that serve others. Success comes when you honor the process over the shortcut.',
                5: '<strong>The Freedom Seeker & Adventurer</strong> - You are here to develop versatility, freedom, and constructive change. Your soul chose this path to learn that variety is indeed the spice of life and stagnation is the enemy. You are meant to experience‚Äîtravel, taste, try everything. Success comes when you embrace change as the only constant.',
                6: '<strong>The Nurturer & Healer</strong> - You are here to develop responsibility, love, and service. Your soul chose this path to learn that home, family, and community are sacred. You are meant to nurture‚Äîpeople, places, beauty, harmony. Success comes when you balance giving with receiving.',
                7: '<strong>The Seeker & Mystic</strong> - You are here to develop wisdom, spirituality, and analytical depth. Your soul chose this path to look beneath the surface and trust the invisible. You are meant to understand‚Äîlife\'s mysteries, human nature, spiritual truth. Success comes when you trust your inner knowing over external validation.',
                8: '<strong>The Powerhouse & Manifestor</strong> - You are here to develop material mastery, authority, and abundance. Your soul chose this path to learn that power is responsibility and abundance is meant to be shared. You are meant to build empires‚Äîbusiness, financial, structural. Success comes when you use power for collective benefit.',
                9: '<strong>The Humanitarian & Wise One</strong> - You are here to develop universal love, completion, and letting go. Your soul chose this path to learn that giving without attachment is the highest form of receiving. You are meant to serve‚Äîcauses larger than yourself. Success comes when you release what has ended and trust the new.',
                11: '<strong>The Illuminator & Inspirational Leader</strong> - Master Number. You are here to channel higher wisdom and inspire through example. Your intuition is a direct line to spiritual truth. You are meant to light the way for others while managing heightened sensitivity. Success comes when you trust your visions and share them courageously.',
                22: '<strong>The Master Builder & Visionary</strong> - Master Number. You are here to turn dreams into reality on a grand scale. You combine the intuition of 11 with the practical power of 4. You are meant to build structures that serve humanity. Success comes when you think big while attending to details.',
                33: '<strong>The Master Teacher & Healer</strong> - Master Number. You are here to heal and teach through love. You combine the higher octaves of 6\'s nurturing with spiritual mastery. You are meant to be a channel for cosmic compassion. Success comes when you embody the love you teach.'
            };
            return descriptions[number] || 'Your life path carries unique purpose and lessons.';
        }

        function getDetailedPersonalYearDescription(number) {
            const descriptions = {
                1: '<strong>Year of New Beginnings</strong> - This is your launch year. Seeds planted now set the tone for the next 9-year cycle. Initiative is rewarded. Independence is necessary. It\'s time to start that project, make that change, step into that new identity. Don\'t wait for permission‚Äîpioneer forward.',
                2: '<strong>Year of Partnership</strong> - This is your year of patience, cooperation, and relationship focus. Growth comes through others. Rushing defeats you; waiting rewards you. Pay attention to the details and the partnerships‚Äîboth hold your keys.',
                3: '<strong>Year of Expression</strong> - This is your year to speak, create, and share. Your voice carries extra weight. Creative projects flourish. Joy is not optional‚Äîit\'s necessary medicine. Express yourself in every possible way.',
                4: '<strong>Year of Foundation</strong> - This is your year to build, organize, and establish. Hard work pays off. Structure matters. Create the systems and foundations that will support future dreams. This is a working year‚Äîembrace it.',
                5: '<strong>Year of Change</strong> - This is your year of freedom, adventure, and transformation. Expect the unexpected. Flexibility is survival. Travel, variety, and new experiences call. Don\'t cling to what needs to change.',
                6: '<strong>Year of Responsibility</strong> - This is your year of home, family, and service. Relationships demand attention. Beautify your environment. Take responsibility for what\'s yours. Love in action is your theme.',
                7: '<strong>Year of Inner Work</strong> - This is your year of reflection, study, and spiritual deepening. Solitude is productive. Analysis yields insight. Trust your inner wisdom over external advice. Rest is not laziness‚Äîit\'s essential.',
                8: '<strong>Year of Abundance</strong> - This is your year of power, manifestation, and material success. Financial and career opportunities peak. Authority increases. Use your power wisely‚Äîkarma is immediate this year.',
                9: '<strong>Year of Completion</strong> - This is your year of endings, release, and humanitarian service. Let go of what\'s finished. Clear the decks. Serve causes larger than yourself. What you release makes room for Year 1\'s new beginnings.'
            };
            return descriptions[number] || 'This year carries transformative potential.';
        }

        function getPersonalMonthDescription(month, year) {
            const base = month + year;
            const reduced = base > 9 ? (base.toString().split('').reduce((a, b) => parseInt(a) + parseInt(b), 0)) : base;
            
            const themes = {
                1: 'Initiation energy peaks this month. Start projects, assert yourself, lead.',
                2: 'Patience and partnership are this month\'s teachers. Collaborate, wait, receive.',
                3: 'Express and create this month. Your voice and vision matter now.',
                4: 'Build and organize this month. Structure supports your dreams.',
                5: 'Change accelerates this month. Adapt, explore, embrace variety.',
                6: 'Home and relationships need attention this month. Nurture what matters.',
                7: 'Go within this month. Study, reflect, trust your intuition.',
                8: 'Manifestation power peaks this month. Focus on career and finances.',
                9: 'Complete and release this month. Clear space for the new.'
            };
            
            return themes[reduced] || 'This month brings unique lessons and opportunities.';
        }

        function getDetailedPersonalDayDescription(number) {
            const descriptions = {
                1: '<strong>Initiative Day</strong> - Today favors bold action, new starts, and independent thinking. Lead with your ideas. Don\'t wait for group consensus‚Äîmove first.',
                2: '<strong>Partnership Day</strong> - Today favors cooperation, patience, and attention to others. Listen more than you speak. Relationships progress through small gestures.',
                3: '<strong>Expression Day</strong> - Today favors creativity, communication, and social activity. Share your ideas. Write, speak, create. Joy is productive today.',
                4: '<strong>Work Day</strong> - Today favors practical tasks, organization, and steady progress. Get things done. Details matter. Build systematically.',
                5: '<strong>Change Day</strong> - Today favors flexibility, variety, and embracing the unexpected. Routine is your enemy. Adventure calls. Adapt quickly.',
                6: '<strong>Service Day</strong> - Today favors helping others, beautifying spaces, and nurturing connections. Home and family take priority. Love in action.',
                7: '<strong>Reflection Day</strong> - Today favors solitude, study, and inner work. Quiet productivity beats social noise. Trust your intuition.',
                8: '<strong>Power Day</strong> - Today favors career moves, financial decisions, and authoritative action. Your influence is magnified. Use it wisely.',
                9: '<strong>Completion Day</strong> - Today favors finishing projects, releasing what\'s done, and humanitarian thinking. Clear the old to welcome the new.'
            };
            return descriptions[number] || 'Today brings unique numerological energy.';
        }

        function getUniversalDayGuidance(today) {
            const universalDay = (today.getDate() + (today.getMonth() + 1) + today.getFullYear()) % 9 || 9;
            const guidance = {
                1: `Universal Day ${universalDay}: Collective energy supports new beginnings and leadership. The world is ready for pioneers today.`,
                2: `Universal Day ${universalDay}: Collective energy supports partnership and peace. Diplomacy succeeds globally today.`,
                3: `Universal Day ${universalDay}: Collective energy supports expression and creativity. Communication flows worldwide today.`,
                4: `Universal Day ${universalDay}: Collective energy supports building and structure. Practical progress is favored today.`,
                5: `Universal Day ${universalDay}: Collective energy supports change and freedom. Expect surprises globally today.`,
                6: `Universal Day ${universalDay}: Collective energy supports service and family. Community matters today.`,
                7: `Universal Day ${universalDay}: Collective energy supports reflection and spirituality. Wisdom surfaces today.`,
                8: `Universal Day ${universalDay}: Collective energy supports power and abundance. Material matters progress today.`,
                9: `Universal Day ${universalDay}: Collective energy supports completion and compassion. Endings and humanitarian focus today.`
            };
            return guidance[universalDay] || 'Today carries unique universal energy.';
        }

        // PHASE 2: Enhanced Gematria Forecast
        function getEnhancedGematriaForecast(name, value, birth) {
            const today = new Date();
            const dateValue = today.getFullYear() + (today.getMonth() + 1) + today.getDate();
            const resonance = (value + dateValue) % 999;
            const reducedName = reduceToSingleDigit(value);
            const reducedDate = reduceToSingleDigit(dateValue);
            const combinedReduced = reduceToSingleDigit(resonance);
            
            return `
                <div class="system-item">
                    <h4>Your Name Value: ${value} (reduces to ${reducedName})</h4>
                    <p>${getNameValueInterpretation(value, reducedName, name)}</p>
                </div>
                <div class="system-item">
                    <h4>Today's Date Value: ${dateValue} (reduces to ${reducedDate})</h4>
                    <p>${getDateValueInterpretation(dateValue, reducedDate)}</p>
                </div>
                <div class="system-item">
                    <h4>Name + Date Resonance: ${resonance} (reduces to ${combinedReduced})</h4>
                    <p>${getResonanceInterpretation(resonance, combinedReduced)}</p>
                </div>
                <div class="system-item">
                    <h4>Today's Gematria Guidance</h4>
                    <p>${getGematriaGuidance(reducedName, reducedDate, combinedReduced)}</p>
                </div>
            `;
        }

        function reduceToSingleDigit(num) {
            while (num > 9 && num !== 11 && num !== 22 && num !== 33) {
                num = num.toString().split('').reduce((a, b) => parseInt(a) + parseInt(b), 0);
            }
            return num;
        }

        function getNameValueInterpretation(value, reduced, name) {
            const themes = {
                1: 'leadership, independence, and pioneering spirit',
                2: 'partnership, diplomacy, and receptive energy',
                3: 'creativity, expression, and joyful communication',
                4: 'stability, structure, and practical foundation',
                5: 'freedom, change, and dynamic experience',
                6: 'nurturing, responsibility, and harmonious service',
                7: 'wisdom, spirituality, and analytical depth',
                8: 'power, abundance, and material mastery',
                9: 'completion, humanitarianism, and universal love',
                11: 'illumination, intuition, and inspirational leadership',
                22: 'master building, practical vision, and large-scale impact',
                33: 'master teaching, healing presence, and cosmic love'
            };
            return `The name "${name}" carries a vibrational signature of ${themes[reduced] || 'unique purpose'}. This frequency is your energetic calling card‚Äîit influences how others perceive you and what you naturally attract.`;
        }

        function getDateValueInterpretation(value, reduced) {
            const themes = {
                1: 'initiation and new beginning energy',
                2: 'partnership and patience vibration',
                3: 'creative expression and communication flow',
                4: 'building and organization frequency',
                5: 'change and freedom vibration',
                6: 'service and harmony energy',
                7: 'reflection and spiritual depth',
                8: 'manifestation and power frequency',
                9: 'completion and release energy'
            };
            return `Today's date creates a field of ${themes[reduced] || 'transformative energy'}. This universal vibration colors everything that happens today‚Äîwork with it rather than against it.`;
        }

        function getResonanceInterpretation(resonance, reduced) {
            const quality = resonance % 7 === 0 ? 'exceptionally harmonious' : 
                           resonance % 3 === 0 ? 'creatively flowing' :
                           resonance % 2 === 0 ? 'balanced and receptive' : 'dynamically charged';
            return `Your name frequency meeting today's date frequency creates a ${quality} resonance field. This ${reduced}-energy combination supports activities aligned with ${getReducedTheme(reduced)}.`;
        }

        function getReducedTheme(num) {
            const themes = {
                1: 'leadership, starting projects, and individual initiative',
                2: 'teamwork, patience, and relational harmony',
                3: 'creative expression, communication, and joyful sharing',
                4: 'practical work, organization, and foundation building',
                5: 'adventure, flexibility, and embracing change',
                6: 'service, home, family, and nurturing connections',
                7: 'study, reflection, and spiritual development',
                8: 'career advancement, financial decisions, and manifestation',
                9: 'completion, generosity, and humanitarian service'
            };
            return themes[num] || 'transformative growth';
        }

        function getGematriaGuidance(nameNum, dateNum, combinedNum) {
            if (nameNum === dateNum) {
                return `Your name frequency perfectly matches today's date frequency‚Äîthis is an amplification day. Your natural gifts are doubled. Lean into your strengths with confidence.`;
            }
            if (combinedNum === 1) {
                return `Combined resonance points to initiation. Today is excellent for beginning new projects or asserting your leadership.`;
            }
            return `Today's combined ${combinedNum}-frequency suggests focusing on ${getReducedTheme(combinedNum)}. Let your natural ${getReducedTheme(nameNum)} meet the day's ${getReducedTheme(dateNum)} energy.`;
        }

        // PHASE 2: Enhanced Action Items
        function getEnhancedActionItems(zodiac, risingSign, moonSign, chinese, lifePath, personalYear, planetaryHour, moonPhase, focus, challenge) {
            let items = [];
            
            items.push(`
                <div class="action-item cosmic-timing">
                    <h4>‚è∞ Right Now: Hour of ${planetaryHour.planet} ${planetaryHour.symbol}</h4>
                    <p><strong>Best for:</strong> ${planetaryHour.activity}</p>
                    <p><strong>Energy:</strong> ${planetaryHour.energy}</p>
                    <p><strong>Wear/Use:</strong> ${planetaryHour.color} colors</p>
                </div>
            `);
            
            items.push(`
                <div class="action-item">
                    <h4>üåÖ Morning Power Hour (6-9 AM)</h4>
                    <p>${getEnhancedMorningAction(zodiac.name, risingSign, lifePath)}</p>
                </div>
            `);
            
            items.push(`
                <div class="action-item">
                    <h4>‚òÄÔ∏è Peak Productivity (10 AM - 2 PM)</h4>
                    <p>${getEnhancedAfternoonAction(zodiac.name, chinese, personalYear, focus)}</p>
                </div>
            `);
            
            items.push(`
                <div class="action-item">
                    <h4>üåô Evening Integration (6-9 PM)</h4>
                    <p>${getEnhancedEveningAction(moonSign, moonPhase, lifePath)}</p>
                </div>
            `);
            
            if (challenge) {
                items.push(`
                    <div class="action-item challenge">
                        <h4>‚ö° Challenge-Specific Guidance</h4>
                        <p><strong>Regarding:</strong> "${challenge}"</p>
                        <p>${getEnhancedChallengeGuidance(zodiac, chinese, moonSign, lifePath, moonPhase, challenge)}</p>
                    </div>
                `);
            }
            
            items.push(`
                <div class="action-item moon-ritual">
                    <h4>${moonPhase.symbol} Moon Phase Ritual</h4>
                    <p><strong>Phase:</strong> ${moonPhase.phase}</p>
                    <p><strong>Action:</strong> ${moonPhase.action}</p>
                </div>
            `);
            
            return items.join('');
        }

        function getEnhancedMorningAction(sun, rising, lifePath) {
            const sunAction = {
                'Aries': 'Start with physical movement‚Äîeven 10 minutes activates your fire',
                'Taurus': 'Begin with sensory pleasure‚Äîquality coffee, comfortable clothing, beauty',
                'Gemini': 'Read or journal first thing‚Äîyour mind needs morning stimulation',
                'Cancer': 'Check in emotionally‚Äîhow do you feel? Honor it before moving',
                'Leo': 'Set creative intentions‚Äîwhat do you want to express today?',
                'Virgo': 'Review your plan‚Äîorganization in the morning creates afternoon freedom',
                'Libra': 'Create beauty in your space‚Äîaesthetics affect your energy',
                'Scorpio': 'Deep meditation or shadow journaling‚Äîaccess your depths',
                'Sagittarius': 'Read something inspiring‚Äîphilosophy, adventure, wisdom',
                'Capricorn': 'Review goals and priorities‚Äîstrategic morning sets up success',
                'Aquarius': 'Brainstorm innovation‚Äîyour morning mind is most original',
                'Pisces': 'Spiritual practice or creativity‚Äîconnect to source first'
            };
            
            const risingBoost = rising ? ` Your ${rising.name} rising adds ${getRisingStyle(rising.name)} to how you present this energy.` : '';
            const lifePathBoost = ` Life Path ${lifePath} suggests focusing on ${getLifePathFocus(lifePath).split(' and ')[0]}.`;
            
            return (sunAction[sun] || 'Begin with centering practices') + risingBoost + lifePathBoost;
        }

        function getEnhancedAfternoonAction(sun, chinese, personalYear, focus) {
            let baseAction = `Peak ${sun} energy combines with ${chinese.element} ${chinese.animal} persistence. `;
            
            if (focus === 'career') baseAction += 'Schedule important meetings and career-advancing work now.';
            else if (focus === 'love') baseAction += 'Make meaningful connections‚Äîreach out with authentic intention.';
            else if (focus === 'health') baseAction += 'This is optimal workout time‚Äîyour energy supports physical achievement.';
            else if (focus === 'spiritual') baseAction += 'Practice presence in action‚Äîmake ordinary tasks sacred.';
            else if (focus === 'finances') baseAction += 'Financial decisions and income-generating activities favor you now.';
            else baseAction += 'Your most important work belongs here‚Äîgive it your peak energy.';
            
            baseAction += ` Personal Year ${personalYear} energy: ${getPersonalYearFocus(personalYear)}`;
            return baseAction;
        }

        function getEnhancedEveningAction(moonSign, moonPhase, lifePath) {
            const moonAction = moonSign ? `Your ${moonSign.name} Moon needs ${getMoonNeed(moonSign.name)} in the evening. ` : '';
            return moonAction + `The ${moonPhase.phase} supports ${moonPhase.energy.split(',')[0].toLowerCase()}. Life Path ${lifePath} benefits from evening reflection on ${getLifePathFocus(lifePath).split(' and ')[0]}.`;
        }

        function getMoonNeed(sign) {
            const needs = {
                'Aries': 'active unwinding‚Äîexercise or energetic activity',
                'Taurus': 'comfort rituals‚Äîgood food, soft textures, beauty',
                'Gemini': 'conversation or reading‚Äîmental processing time',
                'Cancer': 'nurturing environment‚Äîhome, family, emotional safety',
                'Leo': 'creative expression or appreciation‚Äîfeel special',
                'Virgo': 'organization and closure‚Äîtie up loose ends',
                'Libra': 'harmony and beauty‚Äîpeaceful environment',
                'Scorpio': 'depth and intimacy‚Äîmeaningful connection',
                'Sagittarius': 'inspiration and adventure‚Äîeven if just in books or plans',
                'Capricorn': 'achievement review‚Äîacknowledge what you accomplished',
                'Aquarius': 'freedom and friendship‚Äîsocial connection on your terms',
                'Pisces': 'creative or spiritual practice‚Äîtranscendence'
            };
            return needs[sign] || 'rest and integration';
        }

        function getEnhancedChallengeGuidance(zodiac, chinese, moonSign, lifePath, moonPhase, challenge) {
            return `Your ${zodiac.name} determination and ${chinese.animal} wisdom suggest approaching "${challenge}" through strategic patience rather than force. ` +
                   `${moonSign ? `Your ${moonSign.name} Moon may create emotional reactions‚Äîacknowledge them, then choose response over reaction. ` : ''}` +
                   `Life Path ${lifePath} indicates this challenge is teaching you something essential about ${getLifePathFocus(lifePath)}. ` +
                   `The ${moonPhase.phase} specifically supports ${moonPhase.action.toLowerCase()} as your approach.`;
        }
                    <p><strong>Direction:</strong> South<br>
                    <strong>Color:</strong> ${getChineseColor(chinese.element)}<br>
                    <strong>Activity:</strong> ${getChineseActivity(chinese.animal)}</p>
                </div>
            `;
        }

        function getNumerologyForecast(lifePath, personalYear, birthDate) {
            const today = new Date();
            const birth = new Date(birthDate);
            const personalDay = (birth.getDate() + today.getDate() + (today.getMonth() + 1)) % 9 || 9;
            
            return `
                <div class="system-item">
                    <h4>Life Path ${lifePath}</h4>
                    <p>${getLifePathDescription(lifePath)} This is your soul's purpose and natural operating frequency.</p>
                </div>
                <div class="system-item">
                    <h4>Personal Year ${personalYear}</h4>
                    <p>${getPersonalYearDescription(personalYear)} This year's theme shapes how today's energy manifests for you.</p>
                </div>
                <div class="system-item">
                    <h4>Personal Day ${personalDay}</h4>
                    <p>${getPersonalDayDescription(personalDay)} Today's specific vibration guides your actions and decisions.</p>
                </div>
            `;
        }

        function getGematriaForecast(name, value, birthDate) {
            const today = new Date();
            const dateValue = today.getFullYear() + (today.getMonth() + 1) + today.getDate();
            const resonance = (value + dateValue) % 999;
            
            return `
                <div class="system-item">
                    <h4>Your Name Value: ${value}</h4>
                    <p>The gematria value of "${name}" carries the frequency of ${getGematriaTheme(value)}. This is your vibrational signature.</p>
                </div>
                <div class="system-item">
                    <h4>Today's Date Value: ${dateValue}</h4>
                    <p>Today carries the frequency of ${getGematriaTheme(dateValue)}, creating a specific energetic field for manifestation.</p>
                </div>
                <div class="system-item">
                    <h4>Name + Date Resonance: ${resonance}</h4>
                    <p>The interaction between your name and today creates a ${resonance % 7 === 0 ? 'highly favorable' : 'supportive'} resonance field. This amplifies your natural abilities in ${getGematriaApplication(resonance % 7)}.</p>
                </div>
            `;
        }

        function getActionItems(zodiac, chinese, lifePath, personalYear, focus, challenge) {
            let items = [];
            
            items.push(`
                <div class="action-item">
                    <h4>Morning (6-9 AM)</h4>
                    <p>Begin with ${getMorningAction(zodiac.name, lifePath)}. Your ${zodiac.name} sun and Life Path ${lifePath} are most aligned during early hours.</p>
                </div>
            `);
            
            items.push(`
                <div class="action-item">
                    <h4>Afternoon (12-3 PM)</h4>
                    <p>${getAfternoonAction(chinese.animal, personalYear, focus)}. This is your peak creative/productive window.</p>
                </div>
            `);
            
            items.push(`
                <div class="action-item">
                    <h4>Evening (6-9 PM)</h4>
                    <p>${getEveningAction(zodiac.name, lifePath)}. Use this time for integration and reflection.</p>
                </div>
            `);
            
            if (challenge) {
                items.push(`
                    <div class="action-item">
                        <h4>Challenge-Specific Guidance</h4>
                        <p>Regarding "${challenge}": ${getChallengeGuidance(zodiac.name, chinese.animal, lifePath)}</p>
                    </div>
                `);
            }
            
            return items.join('');
        }

        // Helper functions for descriptions
        function getZodiacDescription(sign) {
            const descriptions = {
                'Aries': 'Bold and pioneering,',
                'Taurus': 'Grounded and persistent,',
                'Gemini': 'Curious and adaptable,',
                'Cancer': 'Nurturing and intuitive,',
                'Leo': 'Creative and confident,',
                'Virgo': 'Analytical and detail-oriented,',
                'Libra': 'Harmonious and diplomatic,',
                'Scorpio': 'Intense and transformative,',
                'Sagittarius': 'Philosophical and adventurous,',
                'Capricorn': 'Ambitious and disciplined,',
                'Aquarius': 'Innovative and humanitarian,',
                'Pisces': 'Compassionate and mystical,'
            };
            return descriptions[sign] || '';
        }

        function getZodiacTrait(sign) {
            const traits = {
                'Aries': 'bold action and leadership',
                'Taurus': 'stability and sensory pleasure',
                'Gemini': 'communication and learning',
                'Cancer': 'emotional depth and nurturing',
                'Leo': 'creative expression and recognition',
                'Virgo': 'service and practical improvement',
                'Libra': 'balance and partnership',
                'Scorpio': 'depth and transformation',
                'Sagittarius': 'expansion and wisdom-seeking',
                'Capricorn': 'achievement and structure',
                'Aquarius': 'innovation and collective progress',
                'Pisces': 'spirituality and compassion'
            };
            return traits[sign] || 'growth';
        }

        function getChineseDescription(animal) {
            const descriptions = {
                'Rat': 'Clever and resourceful,',
                'Ox': 'Diligent and dependable,',
                'Tiger': 'Brave and confident,',
                'Rabbit': 'Gentle and compassionate,',
                'Dragon': 'Ambitious and charismatic,',
                'Snake': 'Wise and intuitive,',
                'Horse': 'Energetic and free-spirited,',
                'Goat': 'Creative and gentle,',
                'Monkey': 'Intelligent and playful,',
                'Rooster': 'Confident and organized,',
                'Dog': 'Loyal and honest,',
                'Pig': 'Generous and sincere,'
            };
            return descriptions[animal] || '';
        }

        function getElementQuality(element) {
            const qualities = {
                'Metal': 'structure and precision',
                'Water': 'adaptability and depth',
                'Wood': 'growth and expansion',
                'Fire': 'passion and transformation',
                'Earth': 'stability and grounding'
            };
            return qualities[element] || 'balance';
        }

        function getChineseColor(element) {
            const colors = {
                'Metal': 'White, Gold, Silver',
                'Water': 'Black, Blue, Purple',
                'Wood': 'Green, Teal',
                'Fire': 'Red, Orange, Pink',
                'Earth': 'Yellow, Brown, Beige'
            };
            return colors[element] || 'Rainbow';
        }

        function getChineseActivity(animal) {
            const activities = {
                'Rat': 'networking and strategic planning',
                'Ox': 'focused work and building foundations',
                'Tiger': 'taking bold action and leadership',
                'Rabbit': 'creative projects and social connections',
                'Dragon': 'ambitious pursuits and public visibility',
                'Snake': 'deep thinking and strategic moves',
                'Horse': 'travel and freedom-seeking',
                'Goat': 'artistic expression and collaboration',
                'Monkey': 'problem-solving and innovation',
                'Rooster': 'organization and communication',
                'Dog': 'loyalty-building and community service',
                'Pig': 'generosity and celebration'
            };
            return activities[animal] || 'purposeful action';
        }

        function getLifePathDescription(number) {
            const descriptions = {
                1: 'The Leader - Independent and pioneering.',
                2: 'The Diplomat - Cooperative and harmonious.',
                3: 'The Communicator - Creative and expressive.',
                4: 'The Builder - Practical and grounded.',
                5: 'The Freedom Seeker - Adventurous and dynamic.',
                6: 'The Nurturer - Responsible and caring.',
                7: 'The Seeker - Analytical and spiritual.',
                8: 'The Powerhouse - Ambitious and authoritative.',
                9: 'The Humanitarian - Compassionate and wise.',
                11: 'The Illuminator - Intuitive and inspirational.',
                22: 'The Master Builder - Visionary and powerful.',
                33: 'The Master Teacher - Compassionate healer.'
            };
            return descriptions[number] || 'The Seeker';
        }

        function getPersonalYearDescription(number) {
            const descriptions = {
                1: 'New Beginnings - This is a year of fresh starts and initiative.',
                2: 'Partnership - Focus on cooperation and relationships.',
                3: 'Creative Expression - Time for communication and creativity.',
                4: 'Foundation Building - Establish stability and structure.',
                5: 'Change and Freedom - Embrace transformation and adventure.',
                6: 'Responsibility - Focus on home, family, and service.',
                7: 'Spiritual Growth - Deepen inner knowledge and reflection.',
                8: 'Power and Abundance - Manifest material success.',
                9: 'Completion - Release the old and prepare for new cycles.'
            };
            return descriptions[number] || 'Transformation';
        }

        function getPersonalDayDescription(number) {
            const descriptions = {
                1: 'Initiative and Leadership - Take charge of your day.',
                2: 'Cooperation - Work with others harmoniously.',
                3: 'Expression - Communicate your ideas creatively.',
                4: 'Organization - Focus on practical tasks.',
                5: 'Flexibility - Adapt to changing circumstances.',
                6: 'Service - Help others and nurture relationships.',
                7: 'Reflection - Spend time in contemplation.',
                8: 'Achievement - Focus on tangible results.',
                9: 'Completion - Finish what you started.'
            };
            return descriptions[number] || 'Balance';
        }

        function getGematriaTheme(value) {
            const reduced = value.toString().split('').reduce((a, b) => parseInt(a) + parseInt(b), 0) % 9 || 9;
            const themes = [
                '', 'leadership and new beginnings', 'partnership and balance', 
                'creative expression', 'stability and foundation', 'change and freedom',
                'nurturing and responsibility', 'wisdom and spirituality', 
                'power and manifestation', 'completion and humanitarianism'
            ];
            return themes[reduced] || 'transformation';
        }

        function getGematriaApplication(value) {
            const applications = [
                'manifesting new opportunities', 'building partnerships',
                'creative communication', 'establishing foundations',
                'embracing change', 'service to others',
                'spiritual insight', 'material success'
            ];
            return applications[value % applications.length];
        }

        function getMorningAction(sign, lifePath) {
            const morning = {
                'Aries': 'physical exercise or energetic movement',
                'Taurus': 'grounding meditation or sensory ritual',
                'Gemini': 'journaling or learning something new',
                'Cancer': 'emotional check-in or creative visualization',
                'Leo': 'affirmations or creative planning',
                'Virgo': 'organization or detailed planning',
                'Libra': 'beauty ritual or harmonizing your space',
                'Scorpio': 'deep meditation or shadow work',
                'Sagittarius': 'inspirational reading or goal-setting',
                'Capricorn': 'strategic planning or reviewing goals',
                'Aquarius': 'innovation brainstorming or future visioning',
                'Pisces': 'spiritual practice or artistic expression'
            };
            return morning[sign] || 'mindful meditation';
        }

        function getAfternoonAction(animal, personalYear, focus) {
            if (focus === 'career') return 'Focus on your most important work task or have that crucial conversation';
            if (focus === 'love') return 'Reach out to someone you care about with authentic vulnerability';
            if (focus === 'health') return 'Take a mindful movement break or prepare a nourishing meal';
            if (focus === 'spiritual') return 'Practice presence or study spiritual teachings';
            return 'Work on your highest priority project with focused energy';
        }

        function getEveningAction(sign, lifePath) {
            return 'Journal about today\'s insights and set intentions for tomorrow. Your ' + sign + ' nature benefits from reflection and conscious closure.';
        }

        function getChallengeGuidance(sign, animal, lifePath) {
            return 'Your ' + sign + ' determination combined with ' + animal + ' wisdom suggests approaching this challenge through patience and strategic action rather than force. Life Path ' + lifePath + ' indicates this obstacle is teaching you a specific soul lesson about your purpose.';
        }

        // ========================================
        // PHASE 2: WEEKLY/MONTHLY/YEARLY HELPERS
        // ========================================

        // Weekly Helpers
        function getWeeklyTheme(zodiac, chinese, personalYear, moonPhase) {
            return `Your ${zodiac.name} drive meets ${chinese.element} ${chinese.animal} persistence this week. Personal Year ${personalYear} energy shapes opportunities. The ${moonPhase.phase} sets the emotional tone for the week's beginning.`;
        }

        function getWeeklyOpportunity(lifePath, personalYear, focus) {
            const focusMap = {
                'career': 'Career advancement through strategic visibility',
                'love': 'Deepening existing connections or meeting new potentials',
                'health': 'Establishing sustainable wellness routines',
                'spiritual': 'Breakthrough insights through consistent practice',
                'finances': 'Identifying new income streams or reducing expenses'
            };
            return (focusMap[focus] || 'Multi-dimensional growth across life areas') + `. Life Path ${lifePath} in Year ${personalYear} creates momentum for ${getLifePathFocus(lifePath)}.`;
        }

        function getWeeklyChallenge(zodiac, chinese, challenge) {
            const base = `${zodiac.name} impatience meeting ${chinese.animal} intensity may create friction.`;
            return challenge ? `${base} Your stated challenge ("${challenge}") may surface for resolution this week.` : base;
        }

        function getKeyDayOfWeek(zodiac, lifePath) {
            const signDays = {
                'Aries': 'Tuesday (Mars day)', 'Taurus': 'Friday (Venus day)', 'Gemini': 'Wednesday (Mercury day)',
                'Cancer': 'Monday (Moon day)', 'Leo': 'Sunday (Sun day)', 'Virgo': 'Wednesday (Mercury day)',
                'Libra': 'Friday (Venus day)', 'Scorpio': 'Tuesday (Mars day)', 'Sagittarius': 'Thursday (Jupiter day)',
                'Capricorn': 'Saturday (Saturn day)', 'Aquarius': 'Saturday (Saturn day)', 'Pisces': 'Thursday (Jupiter day)'
            };
            return `${signDays[zodiac.name] || 'Wednesday'} - Your ${zodiac.name} energy peaks. Schedule important matters here.`;
        }

        function getDaySpecificGuidance(zodiac, chinese, lifePath, dayIndex, focus) {
            const dayGuidance = [
                // Sunday
                `Rest and reflect. ${zodiac.name} energy recharges through intentional pause. Set intentions for the week ahead.`,
                // Monday
                `New week energy. ${zodiac.name} initiative meets ${chinese.animal} determination. Launch new efforts.`,
                // Tuesday
                `Mars energy amplifies action. ${zodiac.name} assertiveness is supported. Address challenging tasks.`,
                // Wednesday
                `Mercury enhances communication. ${zodiac.name} ideas flow easily. Schedule important conversations.`,
                // Thursday
                `Jupiter expands opportunity. ${zodiac.name} optimism attracts luck. Think bigger today.`,
                // Friday
                `Venus brings harmony. ${zodiac.name} relationships are favored. Celebrate connections.`,
                // Saturday
                `Saturn rewards discipline. ${zodiac.name} structure-building succeeds. Handle responsibilities.`
            ];
            
            let guidance = dayGuidance[dayIndex];
            if (focus === 'career' && dayIndex < 5) guidance += ' Focus on career advancement.';
            if (focus === 'love' && dayIndex >= 5) guidance += ' Relationship opportunities peak.';
            return guidance;
        }

        function getWeeklyWesternForecast(zodiac, risingSign, moonSign) {
            return `
                <div class="system-item">
                    <h4>‚òâ ${zodiac.name} Sun - Weekly Activation</h4>
                    <p>This week emphasizes ${getZodiacTrait(zodiac.name)}. Your ${zodiac.name} energy is particularly strong mid-week when planetary alignments favor your natural tendencies.</p>
                </div>
                ${risingSign ? `
                <div class="system-item">
                    <h4>‚Üë ${risingSign.name} Rising - Social Dynamics</h4>
                    <p>Your public presentation carries extra ${getRisingStyle(risingSign.name)} this week. First impressions are impactful‚Äîuse this for important meetings or introductions.</p>
                </div>
                ` : ''}
                ${moonSign ? `
                <div class="system-item">
                    <h4>‚òΩ ${moonSign.name} Moon - Emotional Themes</h4>
                    <p>Your emotional landscape this week involves ${getMoonNeed(moonSign.name)}. Mood fluctuations are normal‚Äîhonor your inner rhythms.</p>
                </div>
                ` : ''}
            `;
        }

        function getWeeklyNumerologyForecast(lifePath, personalYear, weekStart) {
            const weekNum = Math.ceil((weekStart.getDate() + weekStart.getMonth() * 31) / 7) % 9 || 9;
            return `
                <div class="system-item">
                    <h4>Weekly Vibration: ${weekNum}</h4>
                    <p>This week carries ${weekNum}-energy: ${getReducedTheme(weekNum)}. Combined with your Life Path ${lifePath} and Personal Year ${personalYear}, this creates conditions for ${getLifePathFocus(lifePath)}.</p>
                </div>
            `;
        }

        function getWeeklyActionItems(zodiac, chinese, lifePath, focus) {
            return `
                <div class="action-item">
                    <h4>Priority 1: Early Week (Mon-Tue)</h4>
                    <p>Launch initiatives. Your ${zodiac.name} pioneering energy is strongest. Set the week's trajectory through bold action.</p>
                </div>
                <div class="action-item">
                    <h4>Priority 2: Mid-Week (Wed-Thu)</h4>
                    <p>Communicate and expand. Mercury and Jupiter days favor ${chinese.animal} wisdom in conversations and growth opportunities.</p>
                </div>
                <div class="action-item">
                    <h4>Priority 3: Late Week (Fri-Sat)</h4>
                    <p>Harmonize and structure. Venus and Saturn days support relationship building and completing what you started.</p>
                </div>
                <div class="action-item">
                    <h4>Weekly Intention</h4>
                    <p>${focus ? `Focus on ${focus}: ` : ''}By week's end, aim to have made tangible progress in ${getLifePathFocus(lifePath)}. Your Life Path ${lifePath} is activated when you ${getLifePathAction(lifePath)}.</p>
                </div>
            `;
        }

        function getLifePathAction(lifePath) {
            const actions = {
                1: 'take independent initiative without waiting for permission',
                2: 'nurture partnerships and practice patience',
                3: 'express yourself creatively and share your joy',
                4: 'build systematic structures and complete practical tasks',
                5: 'embrace change and try something completely new',
                6: 'serve others and beautify your environment',
                7: 'spend time in contemplation and trust your intuition',
                8: 'make power moves and focus on material manifestation',
                9: 'give generously and release what\'s complete'
            };
            return actions[lifePath] || 'align with your authentic purpose';
        }

        // Monthly Helpers
        function getMonthlyTheme(personalMonth, zodiac, chinese) {
            const themes = {
                1: 'New Beginnings & Initiative',
                2: 'Partnership & Patience',
                3: 'Expression & Creativity',
                4: 'Foundation & Structure',
                5: 'Change & Freedom',
                6: 'Responsibility & Service',
                7: 'Reflection & Spirituality',
                8: 'Power & Manifestation',
                9: 'Completion & Release'
            };
            return `Personal Month ${personalMonth}: ${themes[personalMonth] || 'Transformation'}. Your ${zodiac.name} sun and ${chinese.element} ${chinese.animal} nature color how this theme manifests for you specifically.`;
        }

        function getMonthlyEnergy(zodiac, chinese, personalMonth) {
            return `${zodiac.name} determination meets ${chinese.animal} wisdom in a ${personalMonth}-month context. This creates ${personalMonth <= 3 ? 'initiating' : personalMonth <= 6 ? 'building' : 'completing'} energy for the weeks ahead.`;
        }

        function getMonthlyGrowth(lifePath, personalMonth, focus) {
            const growth = focus ? `Significant progress in ${focus} through ` : 'Primary development through ';
            return growth + getReducedTheme(personalMonth) + `. Life Path ${lifePath} finds expression through ${getLifePathFocus(lifePath).split(' and ')[0]}.`;
        }

        function getMonthlyCaution(zodiac, moonSign, personalMonth) {
            const caution = `Month ${personalMonth} tendency: ${personalMonth % 2 === 0 ? 'over-patience leading to stagnation' : 'over-initiative leading to burnout'}. `;
            return caution + `Your ${zodiac.name} nature${moonSign ? ` combined with ${moonSign.name} Moon emotions` : ''} may amplify this‚Äîstay aware.`;
        }

        function getMonthlyWeekThemes(zodiac, chinese, personalMonth, focus) {
            return [
                {
                    title: 'Initiation',
                    focus: `Launch this month's primary ${focus || 'growth'} projects`,
                    action: `Set clear intentions aligned with ${zodiac.name} nature`,
                    keyDays: 'Days 1-3 and 7 are most auspicious'
                },
                {
                    title: 'Development',
                    focus: `Build momentum in started projects`,
                    action: `Apply ${chinese.animal} patience to growing efforts`,
                    keyDays: 'Mid-week days favor expansion'
                },
                {
                    title: 'Cultivation',
                    focus: `Refine and adjust based on feedback`,
                    action: `Use ${chinese.element} wisdom for course corrections`,
                    keyDays: 'New Moon or Full Moon window'
                },
                {
                    title: 'Harvest & Preparation',
                    focus: `Complete what's ready, prepare for next month`,
                    action: `${zodiac.name} reflection on progress made`,
                    keyDays: 'Final 3 days for completion energy'
                }
            ];
        }

        function getMonthlyKeyDates(zodiac, chinese, lifePath, today) {
            const year = today.getFullYear();
            const month = today.getMonth();
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            // Find key numerological dates
            const powerDays = [];
            for (let d = 1; d <= daysInMonth; d++) {
                const dayEnergy = (d + (month + 1) + year) % 9 || 9;
                if (dayEnergy === lifePath || dayEnergy === 1 || dayEnergy === 8) {
                    powerDays.push({ day: d, energy: dayEnergy });
                }
            }
            
            const powerDaysStr = powerDays.slice(0, 5).map(p => 
                `<strong>${p.day}:</strong> Day ${p.energy} energy (${p.energy === lifePath ? 'Life Path alignment' : p.energy === 1 ? 'initiative' : 'manifestation'})`
            ).join('<br>');
            
            return `
                <div class="key-dates-grid">
                    <div class="key-date-item">
                        <h4>Power Days</h4>
                        <p>${powerDaysStr}</p>
                    </div>
                    <div class="key-date-item">
                        <h4>Your ${zodiac.name} Power Windows</h4>
                        <p>Early morning and late afternoon favor ${zodiac.name} initiatives. Schedule important decisions during your peak hours.</p>
                    </div>
                </div>
            `;
        }

        function getMonthlyWesternForecast(zodiac, risingSign, moonSign, today) {
            const monthName = today.toLocaleDateString('en-US', { month: 'long' });
            return `
                <div class="system-item">
                    <h4>‚òâ ${zodiac.name} Sun - ${monthName} Transits</h4>
                    <p>The Sun's current position activates themes of ${getZodiacTrait(zodiac.name)} throughout ${monthName}. Key planetary aspects support your natural ${zodiac.name} expression mid-month.</p>
                </div>
                ${risingSign ? `
                <div class="system-item">
                    <h4>‚Üë ${risingSign.name} Rising - Monthly Public Theme</h4>
                    <p>This month emphasizes your ${getRisingStyle(risingSign.name)} in public settings. Career and social opportunities align with authentic self-presentation.</p>
                </div>
                ` : ''}
            `;
        }

        function getMonthlyNumerologyForecast(lifePath, personalYear, personalMonth) {
            return `
                <div class="system-item">
                    <h4>Personal Month ${personalMonth} within Personal Year ${personalYear}</h4>
                    <p>${getPersonalMonthDescription(personalMonth, personalYear)}</p>
                    <p>This month's ${personalMonth}-energy combines with your Year ${personalYear} themes to create specific conditions for growth in ${getReducedTheme(personalMonth)}.</p>
                </div>
                <div class="system-item">
                    <h4>Life Path ${lifePath} Monthly Expression</h4>
                    <p>Your Life Path ${lifePath} finds this month's expression through ${getLifePathFocus(lifePath)}. Look for opportunities that align with your core purpose.</p>
                </div>
            `;
        }

        function getMonthlyActionItems(zodiac, chinese, lifePath, personalMonth, focus) {
            return `
                <div class="action-item">
                    <h4>Week 1 Intention</h4>
                    <p>Launch: Set clear goals for ${focus || 'personal growth'} this month. Your ${zodiac.name} initiative is supported.</p>
                </div>
                <div class="action-item">
                    <h4>Week 2 Intention</h4>
                    <p>Build: Apply ${chinese.element} ${chinese.animal} persistence to growing your initiatives. Patience pays off.</p>
                </div>
                <div class="action-item">
                    <h4>Week 3 Intention</h4>
                    <p>Refine: Make adjustments based on what's working. Life Path ${lifePath} wisdom guides decisions.</p>
                </div>
                <div class="action-item">
                    <h4>Week 4 Intention</h4>
                    <p>Complete: Harvest what's ready and prepare for next month. Personal Month ${personalMonth} energy supports ${personalMonth <= 4 ? 'initiating new cycles' : personalMonth <= 7 ? 'cultivating growth' : 'completing and releasing'}.</p>
                </div>
            `;
        }

        // Yearly Helpers
        function getYearlyThemeTitle(personalYear) {
            const titles = {
                1: 'New Beginnings', 2: 'Partnership', 3: 'Expression',
                4: 'Foundation', 5: 'Change', 6: 'Responsibility',
                7: 'Spirituality', 8: 'Manifestation', 9: 'Completion'
            };
            return titles[personalYear] || 'Transformation';
        }

        function getYearlyTheme(personalYear, zodiac, chinese) {
            return `Personal Year ${personalYear} activates ${getYearlyThemeTitle(personalYear).toLowerCase()} energy for you. Your ${zodiac.name} sun nature and ${chinese.element} ${chinese.animal} wisdom shape how this year unfolds. This is ${personalYear <= 3 ? 'a building phase' : personalYear <= 6 ? 'a development phase' : 'a completion phase'} in your 9-year cycle.`;
        }

        function getYearlyLesson(lifePath, personalYear) {
            return `Life Path ${lifePath} meeting Personal Year ${personalYear} creates specific soul curriculum around ${getLifePathFocus(lifePath)}. This year teaches you to ${getLifePathAction(lifePath)} with ${personalYear <= 5 ? 'active' : 'receptive'} energy.`;
        }

        function getYearlyOpportunity(zodiac, chinese, personalYear, focus) {
            const base = `Your ${zodiac.name} drive combined with ${chinese.animal} intuition in Year ${personalYear} creates unprecedented opportunity for `;
            if (focus === 'career') return base + 'professional advancement and recognition.';
            if (focus === 'love') return base + 'deep, meaningful relationship evolution.';
            if (focus === 'health') return base + 'sustainable vitality transformation.';
            if (focus === 'spiritual') return base + 'profound spiritual awakening.';
            if (focus === 'finances') return base + 'abundance breakthrough.';
            return base + 'multi-dimensional life transformation.';
        }

        function getYearlyChallenge(zodiac, moonSign, lifePath) {
            return `Your growth edge this year: integrating ${getZodiacShadow(zodiac.name)}${moonSign ? ` while managing ${getZodiacShadow(moonSign.name)} emotional patterns` : ''}. Life Path ${lifePath} asks you to ${getLifePathAction(lifePath)} even when it feels uncomfortable.`;
        }

        function getYearlyQuarters(zodiac, chinese, lifePath, personalYear, focus) {
            return [
                {
                    title: 'Foundation',
                    months: 'Jan - Mar',
                    theme: `Plant seeds for Year ${personalYear} themes`,
                    focus: `${zodiac.name} initiative launches new cycles`,
                    peak: 'Equinox window (mid-March)'
                },
                {
                    title: 'Growth',
                    months: 'Apr - Jun',
                    theme: 'Develop what was initiated in Q1',
                    focus: `${chinese.animal} persistence builds momentum`,
                    peak: 'Solstice window (mid-June)'
                },
                {
                    title: 'Harvest',
                    months: 'Jul - Sep',
                    theme: 'Reap results from H1 efforts',
                    focus: `Life Path ${lifePath} purpose becomes visible`,
                    peak: 'Equinox window (mid-September)'
                },
                {
                    title: 'Integration',
                    months: 'Oct - Dec',
                    theme: 'Complete year and prepare for next',
                    focus: `Personal Year ${personalYear} lessons crystallize`,
                    peak: 'Solstice window (mid-December)'
                }
            ];
        }

        function getYearlyTransits(zodiac, currentYear) {
            return `
                <div class="transit-grid">
                    <div class="transit-item">
                        <h4>Mercury Retrogrades (${currentYear})</h4>
                        <p>Three periods of review and revision. For ${zodiac.name}, these times favor completing old projects over starting new ones. Communication and technology need extra attention.</p>
                    </div>
                    <div class="transit-item">
                        <h4>Eclipse Season</h4>
                        <p>Two eclipse seasons bring powerful change. Watch for major life shifts during these windows. ${zodiac.name} experiences these as catalysts for authentic expression.</p>
                    </div>
                    <div class="transit-item">
                        <h4>Jupiter's Blessing</h4>
                        <p>Jupiter's position this year expands opportunity in specific life areas. For ${zodiac.name}, this brings growth through ${getZodiacTrait(zodiac.name)}.</p>
                    </div>
                    <div class="transit-item">
                        <h4>Saturn's Lessons</h4>
                        <p>Saturn demands maturity and responsibility. For ${zodiac.name}, this means developing discipline around your natural ${getZodiacTrait(zodiac.name)} tendencies.</p>
                    </div>
                </div>
            `;
        }

        function getYearlyWesternForecast(zodiac, risingSign, moonSign, currentYear) {
            return `
                <div class="system-item">
                    <h4>‚òâ ${zodiac.name} Sun - ${currentYear} Overview</h4>
                    <p>${getDetailedZodiacDescription(zodiac.name)}</p>
                    <p>This year's planetary configurations particularly support your ${getZodiacTrait(zodiac.name)}. Key windows of opportunity occur when planets transit compatible signs.</p>
                </div>
                ${risingSign ? `
                <div class="system-item">
                    <h4>‚Üë ${risingSign.name} Rising - Yearly Evolution</h4>
                    <p>Your public evolution this year involves refining your ${getRisingStyle(risingSign.name)}. Career and social positioning improve through authentic self-presentation.</p>
                </div>
                ` : ''}
                ${moonSign ? `
                <div class="system-item">
                    <h4>‚òΩ ${moonSign.name} Moon - Emotional Journey</h4>
                    <p>Your emotional landscape this year explores themes of ${getMoonNeed(moonSign.name)}. Monthly lunar cycles highlight different aspects of your inner world.</p>
                </div>
                ` : ''}
            `;
        }

        function getYearlyChineseForecast(yourChinese, currentChinese) {
            const isElementMatch = yourChinese.element === currentChinese.element;
            const compatibility = isElementMatch ? 'highly favorable‚Äîyour element is amplified!' : 'dynamic‚Äîblending your natural element with the year\'s energy.';
            
            return `
                <div class="system-item">
                    <h4>Your Sign in the Year of ${currentChinese.element} ${currentChinese.animal}</h4>
                    <p>As a ${yourChinese.element} ${yourChinese.animal}, this year's energy is ${compatibility}</p>
                    <p>${isElementMatch ? 'This is a power year for you‚Äîyour natural abilities are doubled.' : `Learn to integrate ${currentChinese.element} qualities with your ${yourChinese.element} nature for optimal results.`}</p>
                </div>
                <div class="system-item">
                    <h4>Year Animal Relationship</h4>
                    <p>${getAnimalCompatibility(yourChinese.animal, currentChinese.animal)}</p>
                </div>
                <div class="system-item">
                    <h4>Yearly Lucky Elements</h4>
                    <p><strong>Colors:</strong> ${getChineseColor(yourChinese.element)} (always), ${getChineseColor(currentChinese.element)} (this year)<br>
                    <strong>Numbers:</strong> ${getLuckyNumbers(yourChinese.animal)}<br>
                    <strong>Directions:</strong> ${getLuckyDirection(yourChinese.animal)}</p>
                </div>
            `;
        }

        function getYearlyNumerologyForecast(lifePath, personalYear) {
            return `
                <div class="system-item">
                    <h4>Life Path ${lifePath} - Core Purpose</h4>
                    <p>${getDetailedLifePathDescription(lifePath)}</p>
                </div>
                <div class="system-item">
                    <h4>Personal Year ${personalYear} - Annual Theme</h4>
                    <p>${getDetailedPersonalYearDescription(personalYear)}</p>
                </div>
                <div class="system-item">
                    <h4>Yearly Numerological Guidance</h4>
                    <p>Life Path ${lifePath} meeting Personal Year ${personalYear} creates a year focused on ${getReducedTheme(personalYear)}. Your purpose (${getLifePathFocus(lifePath)}) finds expression through this year's themes.</p>
                </div>
            `;
        }

        function getYearlyActionItems(zodiac, chinese, lifePath, personalYear, focus) {
            return `
                <div class="action-item">
                    <h4>Q1 Priority (Jan-Mar)</h4>
                    <p><strong>Theme:</strong> Plant Seeds<br>
                    Initiate key ${focus || 'life'} projects. Your ${zodiac.name} energy supports bold beginnings. Life Path ${lifePath} opens doors through ${getLifePathAction(lifePath)}.</p>
                </div>
                <div class="action-item">
                    <h4>Q2 Priority (Apr-Jun)</h4>
                    <p><strong>Theme:</strong> Cultivate Growth<br>
                    Nurture Q1 seeds with ${chinese.animal} patience. Avoid starting too many new things‚Äîdepth over breadth.</p>
                </div>
                <div class="action-item">
                    <h4>Q3 Priority (Jul-Sep)</h4>
                    <p><strong>Theme:</strong> Harvest Results<br>
                    Collect fruits of H1 labor. Year ${personalYear} rewards become visible. Celebrate progress while maintaining momentum.</p>
                </div>
                <div class="action-item">
                    <h4>Q4 Priority (Oct-Dec)</h4>
                    <p><strong>Theme:</strong> Complete & Prepare<br>
                    Finish Year ${personalYear} lessons. Clear space for next year's Year ${(personalYear % 9) + 1} themes. Honor what you've learned.</p>
                </div>
                <div class="action-item">
                    <h4>Year-Long Intention</h4>
                    <p>Personal Year ${personalYear} asks you to master ${getYearlyThemeTitle(personalYear).toLowerCase()}. Your ${zodiac.name} nature, ${chinese.element} ${chinese.animal} wisdom, and Life Path ${lifePath} purpose all converge this year. Trust the process.</p>
                </div>
            `;
        }

        // Timeframe switcher
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('timeframe-btn')) {
                document.querySelectorAll('.timeframe-btn').forEach(btn => btn.classList.remove('active'));
                e.target.classList.add('active');
                const timeframe = e.target.dataset.timeframe;
                generateForecast(timeframe);
            }
        });

        // Save forecast
        function saveForecast() {
            alert('‚úÖ Forecast saved to your library!\n\nThis feature will integrate with the Quantum Jukebox library system.');
        }
    </script>
</body>
</html>
