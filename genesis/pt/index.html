<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- SEO Meta Tags -->
    <title>Frequências Genesis: Tons de Cura Sagrados 37Hz 73Hz da Gematria Bíblica | App Gratuito de Meditação</title>
    <meta name="description" content="Transforme sua meditação com as frequências sagradas de Gênesis 1:1. Gerador online gratuito com 49 tons de cura bíblicos (37Hz, 73Hz, 2701Hz) mais frequências Solfeggio 432Hz, 528Hz. Desbloqueie relaxamento profundo, despertar espiritual e alinhamento divino. Experimente agora - sem download.">
    <meta name="keywords" content="gerador de frequências, 432Hz, frequência 432Hz, música 432Hz, 528Hz, frequência 528Hz, frequência de amor 528Hz, meditação 528Hz, frequências Solfeggio, 396Hz, 417Hz, 639Hz, 741Hz, 852Hz, 963Hz, batidas binaurais, gerador de batidas binaurais, gerador de Hz, gerador de tons, frequências de relaxamento, terapia sonora, música de meditação, frequências de sono, frequências de foco, frequências de meditação, sons de relaxamento, meditação de chakra, frequências espirituais, 7.83Hz, ressonância Schumann, frequência gênesis, frequências bíblicas, 37Hz, 73Hz, 2701Hz, frequências sagradas, gematria hebraica, sons de mindfulness, frequências calmantes, tons ambiente">
    <meta name="author" content="Quantum Merlin">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <link rel="canonical" href="https://genesis.quantummerlin.com/pt/">
    <link rel="alternate" hreflang="en" href="https://genesis.quantummerlin.com/">
    <link rel="alternate" hreflang="pt" href="https://genesis.quantummerlin.com/pt/">
    <link rel="alternate" hreflang="x-default" href="https://genesis.quantummerlin.com/">
    <meta name="language" content="Portuguese">
    <meta name="geo.region" content="US">
    <meta name="geo.placename" content="United States">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://genesis.quantummerlin.com/pt/">
    <meta property="og:title" content="Gerador de Frequências Genesis Bíblico | Frequências Sagradas de Cura">
    <meta property="og:description" content="🎵 Transforme sua meditação com frequências de cura bíblicas. 49 tons sagrados incluindo 37Hz, 73Hz, 528Hz Solfeggio. Gerador online gratuito baseado na gematria de Gênesis 1:1. Relaxamento profundo, despertar espiritual e alinhamento divino. Experimente agora!">
    <meta property="og:image" content="https://genesis.quantummerlin.com/Genesis.png">
    <meta property="og:site_name" content="Frequências Genesis por Quantum Merlin">
    <meta property="og:locale" content="pt_BR">
    <meta property="og:locale:alternate" content="en_US">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Frequências Gênesis - Gerador de Som Sagrado de Cura">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://genesis.quantummerlin.com/pt/">
    <meta name="twitter:title" content="Gerador de Frequências Genesis Bíblico | Frequências Sagradas de Cura">
    <meta name="twitter:description" content="🎵 Transforme a meditação com frequências de cura bíblicas. 49 tons sagrados (37Hz, 73Hz, 528Hz). Gerador online gratuito de Gênesis 1:1. Experimente agora!">
    <meta name="twitter:creator" content="@QuantumMerlin">
    <meta name="twitter:site" content="@QuantumMerlin">
    <meta name="twitter:image" content="https://genesis.quantummerlin.com/Genesis.png">
    
    <!-- Additional SEO -->
    <meta name="subject" content="Meditação de Frequências Bíblicas e Bem-Estar Espiritual">
    <meta name="classification" content="Wellness, Spirituality, Meditation, Relaxation">
    <meta name="rating" content="General">
    <meta name="referrer" content="origin-when-cross-origin">
    
    <!-- Structured Data for Google -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Frequências Gênesis - Gerador de Som Sagrado de Cura Bíblico",
        "alternateName": "Gerador de Frequências Gênesis",
        "description": "Transforme sua meditação com 49 frequências de cura sagradas derivadas da matemática bíblica de Gênesis 1:1 e da gematria hebraica. Recursos: frequências da Trindade 37Hz, 73Hz, 2701Hz, tons Solfeggio 432Hz, 528Hz, números de anjos e batidas binaurais para relaxamento profundo, despertar espiritual e alinhamento divino.",
        "url": "https://genesis.quantummerlin.com",
        "applicationCategory": "LifestyleApplication",
        "operatingSystem": "Any (Web Browser)",
        "browserRequirements": "Requires JavaScript. Requires HTML5.",
        "softwareVersion": "1.0",
        "datePublished": "2025-01-01",
        "inLanguage": "en-US",
        "isAccessibleForFree": true,
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD",
            "availability": "https://schema.org/InStock",
            "priceValidUntil": "2030-12-31"
        },
        "creator": {
            "@type": "Organization",
            "name": "Quantum Merlin",
            "url": "https://quantummerlin.com"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Quantum Merlin",
            "url": "https://quantummerlin.com"
        },
        "keywords": "frequências gênesis, frequências bíblicas, 37Hz, 73Hz, 2701Hz, gerador de frequências, música 432Hz, frequência de amor 528Hz, frequências Solfeggio, tons de cura, música de meditação, batidas binaurais, terapia sonora, despertar espiritual, cura de chakra, gematria hebraica, geometria sagrada, números de anjos, sons de sono, música de relaxamento, alinhamento divino",
        "featureList": [
            "49 Faixas de Frequências Sagradas",
            "Genesis 1:1 Biblical Frequencies (37Hz, 73Hz, 2701Hz)",
            "Full Solfeggio Scale (396Hz-963Hz)",
            "432Hz Healing Music",
            "Angel Number Frequencies (111-999)",
            "Controles Individuais de Volume (Premium)",
            "Durações Personalizadas de Sessão (Premium)",
            "Exportação WAV para Uso Offline (Premium)",
            "Achievement & Progress Tracking",
            "Offline PWA Support"
        ],
        "screenshot": "https://genesis.quantummerlin.com/Genesis.png",
        "image": "https://genesis.quantummerlin.com/Genesis.png",
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.9",
            "ratingCount": "847",
            "bestRating": "5",
            "worstRating": "1"
        }
    }

// WhatsApp Share Function for Brazilian Market
function shareViaWhatsApp() {
    const url = encodeURIComponent(window.location.href);
    const message = encodeURIComponent("🎵 Transforme sua meditação com Frequências Gênesis! 49 tons sagrados búblicos para cura e despertar espiritual. Experimente grátis!");
    window.open(`https://wa.me/?text=${message}%20${url}`, "_blank");
}

    </script>

    <!-- FAQ Schema for Rich Snippets -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "O que são Frequências Gênesis?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Frequências Gênesis são tons de cura sagrados derivados da estrutura matemática de Gênesis 1:1 em hebraico. As frequências primárias são 37Hz, 73Hz e 2701Hz, que representam a gematria (valor numérico) do primeiro versículo da Bíblia. Acredita-se que essas frequências carregam o projeto vibracional da própria criação."
                }
            },
            {
                "@type": "Question",
                "name": "Como uso o Gerador de Frequências Gênesis?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Simplemente selecione uma faixa de frequência das 49 opções disponíveis, defina sua duração desejada (5-10 minutos recomendados para iniciantes), use fones de ouvido para melhores resultados, pressione PLAY e concentre-se em sua intenção. As frequências funcionam melhor durante meditação, oração ou práticas de relaxamento."
                }
            },
            {
                "@type": "Question",
                "name": "O que é a frequência de amor 528Hz?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "528Hz é uma das frequências Solfeggio conhecida como 'frequência do amor' ou 'tom milagroso'. Está associada ao reparo do DNA, transformação e milagres. Combinada com as frequências da Trindade Gênesis (37Hz + 73Hz), cria uma poderosa ressonância de cura para o chakra do coração e equilíbrio emocional."
                }
            },
            {
                "@type": "Question",
                "name": "O Gerador de Frequências Gênesis é gratuito?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Sim! O Gerador de Frequências Gênesis é completamente gratuito com acesso a todas as 49 faixas de frequência. Recursos premium como controles individuais de volume, durações personalizadas e exportação WAV estão disponíveis por um pagamento único de R$ 49,90 com acesso vitalício."
                }
            },
            {
                "@type": "Question",
                "name": "Quais são os benefícios da música 432Hz?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "432Hz é conhecida como a frequência de afinação natural que ressoa com o universo. Os benefícios incluem relaxamento profundo, redução da ansiedade, melhoria da qualidade do sono, estados de meditação aprimorados e alinhamento com ritmos naturais. É matematicamente consistente com padrões encontrados na natureza, geometria sagrada e cosmos."
                }
            },
            {
                "@type": "Question",
                "name": "Posso usar Frequências Gênesis para dormir?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Com certeza! Muitas faixas são especificamente projetadas para relaxamento profundo e sono, incluindo Ressonância da Terra (7.83Hz ressonância Schumann), frequências de Onda Delta e combinações Solfeggio específicas. Defina uma duração de 30-60 minutos e deixe as frequências guiá-lo ao sono reparador."
                }
            }
        ]
    }

// WhatsApp Share Function for Brazilian Market
function shareViaWhatsApp() {
    const url = encodeURIComponent(window.location.href);
    const message = encodeURIComponent("🎵 Transforme sua meditação com Frequências Gênesis! 49 tons sagrados búblicos para cura e despertar espiritual. Experimente grátis!");
    window.open(`https://wa.me/?text=${message}%20${url}`, "_blank");
}

    </script>
    
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Genesis Frequencies">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#6B46C1">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="/Genesis.png">
    <link rel="apple-touch-icon" href="/Genesis.png">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        /* Hide scrollbars but keep scroll functionality */
        * {
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
        }
        *::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: url('/Genesis.png') center center/cover fixed;
            min-height: 100vh;
            min-height: -webkit-fill-available;
            padding: 8px;
            padding-top: max(20px, env(safe-area-inset-top));
            padding-bottom: max(8px, env(safe-area-inset-bottom));
            padding-left: max(8px, env(safe-area-inset-left));
            padding-right: max(8px, env(safe-area-inset-right));
            color: #ffffff;
            overflow-x: hidden;
            position: relative;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Extra padding for PWA standalone mode */
        @media all and (display-mode: standalone) {
            body {
                padding-top: max(30px, calc(env(safe-area-inset-top) + 15px));
            }
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(251, 191, 36, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(26, 0, 51, 0.6) 0%, rgba(26, 0, 51, 0.9) 100%);
            pointer-events: none;
            z-index: 1;
            animation: backgroundShift 20s ease-in-out infinite;
        }

        @keyframes backgroundShift {
            0%, 100% {
                background-position: 0% 0%;
            }
            25% {
                background-position: 100% 0%;
            }
            50% {
                background-position: 100% 100%;
            }
            75% {
                background-position: 0% 100%;
            }
        }

        /* Respect user's motion preferences */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        @media (min-width: 768px) {
            body {
                padding: 20px;
            }

            .container {
                margin: 0 auto;
                border-radius: 28px;
                padding: 25px;
            }
        }

        @media (max-width: 767px) {
            body {
                padding: 4px;
                background-attachment: scroll;
            }

            .container {
                margin: 0;
                border-radius: 16px;
                padding: 8px;
                max-width: none;
                width: calc(100vw - 8px);
                box-sizing: border-box;
            }

            .header {
                padding: 8px 0 16px 0;
            }

            .header h1 {
                font-size: 22px;
                line-height: 1.2;
            }

            .header p {
                font-size: 14px;
                line-height: 1.4;
            }

            .section {
                margin-bottom: 20px;
            }

            .section-title {
                font-size: 18px;
                margin-bottom: 12px;
            }

            .welcome-content {
                font-size: 14px;
                line-height: 1.5;
            }

            .welcome-content h3 {
                font-size: 16px;
            }

            .welcome-content ul, .welcome-content ol {
                padding-left: 16px;
            }

            .welcome-content li {
                margin-bottom: 6px;
            }

            .trinity-base {
                padding: 16px;
                margin: 16px 0;
            }

            .trinity-title {
                font-size: 16px;
                margin-bottom: 12px;
            }

            .trinity-frequencies {
                gap: 12px;
            }

            .trinity-freq {
                padding: 8px 12px;
            }

            .trinity-freq .hz {
                font-size: 18px;
            }

            .trinity-freq .label {
                font-size: 12px;
            }

            .visualizer {
                height: 120px;
                margin: 16px 0;
            }

            .frequency-vibration {
                height: 80px;
            }

            .recipes {
                display: grid;
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .recipe-card {
                padding: 12px;
                font-size: 14px;
            }

            .recipe-header {
                font-size: 16px;
                margin-bottom: 8px;
            }

            .recipe-freqs {
                font-size: 12px;
                margin-bottom: 8px;
            }

            .recipe-description {
                font-size: 13px;
                line-height: 1.4;
            }

            .controls {
                padding: 16px;
            }

            .frequency-controls {
                gap: 12px;
            }

            .control-group {
                padding: 12px;
                border-radius: 8px;
            }

            .control-group input[type="number"] {
                font-size: 16px;
                padding: 8px;
            }

            .control-group input[type="range"] {
                height: 6px;
            }

            .range-value {
                font-size: 12px;
            }

            .duration-input-container input {
                font-size: 16px;
                padding: 10px;
            }

            .duration-buttons {
                gap: 6px;
                flex-wrap: wrap;
            }

            .duration-btn {
                font-size: 14px;
                padding: 8px 12px;
                min-width: 44px;
            }

            .button-group {
                gap: 8px;
                flex-wrap: wrap;
            }

            .button {
                font-size: 16px;
                padding: 12px 20px;
                min-height: 48px;
                min-width: 120px;
            }

            .status {
                font-size: 14px;
                padding: 12px;
                margin: 12px 0;
            }

            .instructions-panel {
                padding: 16px !important;
                margin: 0 8px 16px 8px !important;
                border-radius: 12px !important;
            }

            .instructions-header h2 {
                font-size: 20px !important;
            }

            .accordion-content {
                padding: 12px 4px 0 4px !important;
                font-size: 14px !important;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 4px;
                overflow-x: hidden;
            }

            .container {
                padding: 8px;
                border-radius: 12px;
                width: 100%;
                max-width: 100%;
                overflow-x: hidden;
            }

            .section {
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                padding: 4px;
                margin-bottom: 12px;
                overflow-x: hidden;
            }

            .frequency-controls {
                gap: 0px;
                width: 100%;
                max-width: 100%;
                overflow-x: hidden;
                box-sizing: border-box;
            }

            .control-group {
                padding: 4px;
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                overflow-x: hidden;
                overflow-y: visible;
            }

            .control-group > div {
                gap: 4px;
                width: 100%;
                max-width: 100%;
                display: flex;
                align-items: center;
                box-sizing: border-box;
            }

            .control-group input[type="number"] {
                flex: 1 1 auto;
                min-width: 0;
                width: 100%;
                box-sizing: border-box;
            }

            .control-group span {
                flex: 0 0 auto;
                width: 30px;
                text-align: right;
                font-size: 12px !important;
            }

            input[type="number"],
            input[type="text"],
            input[type="range"] {
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                margin: 0;
                padding: 8px;
            }

            input[type="range"] {
                padding: 0;
                margin: 10px auto 6px auto;
                width: 92%;
                max-width: 92%;
                display: block;
            }

            .button-group {
                flex-direction: column;
                gap: 8px;
                width: 100%;
                max-width: 100%;
                padding: 0;
                margin: 0 auto;
            }

            .button {
                font-size: 14px;
                padding: 10px 12px;
                min-height: 44px;
                min-width: 0;
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
            }

            .duration-buttons {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 4px;
                justify-content: space-between;
            }

            .duration-btn {
                font-size: 12px;
                padding: 6px 8px;
                min-width: 48%;
                flex: 0 0 48%;
                box-sizing: border-box;
            }

            .status {
                font-size: 12px;
                padding: 8px;
                margin: 8px 0;
            }

            .range-value {
                font-size: 11px;
            }

            .instructions-panel {
                padding: 12px !important;
                margin: 0 4px 12px 4px !important;
            }

            .instructions-header h2 {
                font-size: 18px !important;
            }

            .accordion-content {
                font-size: 12px !important;
            }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(26, 0, 51, 0.95);
            backdrop-filter: blur(30px);
            border-radius: 28px;
            padding: 20px;
            box-shadow:
                0 25px 70px rgba(0, 0, 0, 0.6),
                0 0 0 1px rgba(139, 92, 246, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            animation: slideUp 0.5s ease-out;
            position: relative;
            z-index: 2;
            overflow: hidden;
            width: 100%;
            box-sizing: border-box;
        }

        .container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 20%, rgba(251, 191, 36, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(139, 92, 246, 0.05) 0%, transparent 50%);
            pointer-events: none;
            animation: particleFloat 15s ease-in-out infinite;
        }

        @keyframes particleFloat {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
                opacity: 0.3;
            }
            50% {
                transform: translateY(-10px) rotate(180deg);
                opacity: 0.6;
            }
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('/Genesis.png') center center/cover;
            border-radius: 28px;
            opacity: 0.12;
            z-index: -1;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes pulseGlow {
            0%, 100% {
                text-shadow: 0 0 20px rgba(251, 191, 36, 0.8),
                             0 0 40px rgba(251, 191, 36, 0.5),
                             0 0 60px rgba(251, 191, 36, 0.3);
            }
            50% {
                text-shadow: 0 0 30px rgba(251, 191, 36, 1),
                             0 0 60px rgba(251, 191, 36, 0.8),
                             0 0 90px rgba(251, 191, 36, 0.5);
            }
        }
        
        @keyframes shimmer {
            0% {
                background-position: -200% center;
            }
            100% {
                background-position: 200% center;
            }
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            background: url('/Genesis.png') center center/cover;
            border-radius: 20px;
            padding: 30px 20px;
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.70);
            border-radius: 20px;
            z-index: 0;
        }
        
        .header > * {
            position: relative;
            z-index: 1;
        }

        .logo-container {
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .logo-image {
            width: 120px;
            height: 120px;
            object-fit: contain;
            filter: drop-shadow(0 0 20px rgba(251, 191, 36, 0.6));
            animation: logoGlow 3s ease-in-out infinite;
        }

        @keyframes logoGlow {
            0%, 100% {
                filter: drop-shadow(0 0 20px rgba(251, 191, 36, 0.6));
            }
            50% {
                filter: drop-shadow(0 0 30px rgba(251, 191, 36, 0.9));
            }
        }

        .hebrew-header {
            font-size: 32px;
            color: #fbbf24;
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: 6px;
            animation: pulseGlow 3s ease-in-out infinite;
            text-shadow: 0 0 30px rgba(251, 191, 36, 0.6);
        }

        .hebrew-translation {
            font-size: 16px;
            color: #ffffff;
            font-weight: 500;
            margin-bottom: 20px;
            font-style: italic;
            opacity: 0.95;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .main-title {
            font-size: 36px;
            font-weight: 800;
            background: linear-gradient(90deg, 
                #ffffff 0%, 
                #fbbf24 25%, 
                #c4b5fd 50%, 
                #fbbf24 75%, 
                #ffffff 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 4s linear infinite;
            margin-bottom: 20px;
            line-height: 1.3;
            filter: drop-shadow(0 0 25px rgba(251, 191, 36, 0.5));
            letter-spacing: 1px;
        }

        .subtitle {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(90deg, 
                #fbbf24 0%, 
                #c4b5fd 25%, 
                #ffffff 50%, 
                #c4b5fd 75%, 
                #fbbf24 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 4s linear infinite;
            margin-bottom: 20px;
            line-height: 1.4;
            text-shadow: 0 2px 20px rgba(139, 92, 246, 0.7);
            letter-spacing: 0.5px;
            text-align: center;
        }

        .gematria {
            font-size: 14px;
            color: #fbbf24;
            font-weight: 600;
            margin-bottom: 20px;
            text-shadow: 0 2px 5px rgba(251, 191, 36, 0.3);
        }
        
        .divider {
            height: 2px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(251, 191, 36, 0.3) 10%, 
                rgba(251, 191, 36, 0.8) 50%, 
                rgba(251, 191, 36, 0.3) 90%, 
                transparent 100%);
            margin: 15px auto;
            width: 80%;
            border-radius: 2px;
        }

        .trinity-base {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%);
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 16px;
            padding: 15px;
            margin-bottom: 25px;
            text-align: center;
            position: relative;
        }

        .trinity-base::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.75);
            border-radius: 14px;
            z-index: 0;
        }

        .trinity-base > * {
            position: relative;
            z-index: 1;
        }

        .trinity-title {
            font-size: 18px;
            font-weight: 600;
            color: #c4b5fd;
            margin-bottom: 10px;
        }

        .trinity-frequencies {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            text-align: center;
        }

        .trinity-freq {
            text-align: center;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(139, 92, 246, 0.2);
            position: relative;
            overflow: hidden;
        }

        .trinity-freq::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.80);
            z-index: 0;
        }

        .trinity-freq > * {
            position: relative;
            z-index: 1;
        }

        .trinity-freq .hz {
            font-size: 20px;
            font-weight: 700;
            color: #fbbf24;
            text-shadow: 0 2px 5px rgba(251, 191, 36, 0.3);
        }

        .trinity-freq .label {
            font-size: 12px;
            color: #a78bfa;
            margin-top: 2px;
        }

        .trinity-arrow {
            color: #c4b5fd;
            font-size: 18px;
        }

        .section {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(139, 92, 246, 0.2);
            position: relative;
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.85);
            border-radius: 20px;
            z-index: 0;
        }

        .section > * {
            position: relative;
            z-index: 1;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-align: center;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .section-title::before {
            content: '✨';
            font-size: 16px;
        }

        .section-title::after {
            content: '✨';
            font-size: 16px;
        }

        .controls {
            display: grid;
            gap: 15px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
        }
        
        .frequency-controls {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }
        
        @media (min-width: 768px) {
            .frequency-controls {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05), url('/Genesis.png') center center/cover;
            border-radius: 12px;
            border: 1px solid rgba(139, 92, 246, 0.1);
            text-align: center;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            position: relative;
            overflow: hidden;
        }

        .control-group::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.85);
            z-index: 0;
        }

        .control-group > * {
            position: relative;
            z-index: 1;
        }

        .duration-control {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%);
            border: 2px solid rgba(139, 92, 246, 0.3);
        }

        .duration-input-wrapper {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .duration-buttons {
            display: flex;
            gap: 8px;
            justify-content: flex-start;
        }

        .duration-btn {
            padding: 14px 20px;
            border: 3px solid #fbbf24;
            border-radius: 12px;
            background: linear-gradient(135deg, rgba(26, 0, 51, 0.6), rgba(26, 0, 51, 0.8));
            color: #fbbf24;
            font-size: 22px;
            font-weight: 900;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 4px 16px rgba(251, 191, 36, 0.5);
        }

        .duration-btn:hover {
            background: linear-gradient(135deg, rgba(26, 0, 51, 0.4), rgba(26, 0, 51, 0.6));
            border-color: #fde047;
            color: #fde047;
            transform: scale(1.1);
            box-shadow: 0 6px 24px rgba(251, 191, 36, 0.8);
        }

        .duration-btn:hover::before {
            background: rgba(26, 0, 51, 0.65);
        }

        label {
            font-size: 14px;
            font-weight: 500;
            color: #a78bfa;
            text-align: center;
        }

        input[type="number"],
        input[type="range"],
        select {
            width: 100%;
            padding: 10px;
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 8px;
            text-align: center;
            background: rgba(26, 0, 51, 0.9);
            color: #fbbf24;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #fbbf24;
            box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.1);
            background: rgba(26, 0, 51, 0.95);
        }

        input[type="range"] {
            padding: 0;
            margin: 8px auto;
            height: 40px;
            width: 92%;
            max-width: 92%;
            box-sizing: border-box;
            -webkit-appearance: none;
            appearance: none;
            display: block;
        }

        input[type="range"]::-webkit-slider-container {
            width: 100%;
            max-width: 100%;
        }

        #duration {
            font-size: 18px;
            text-align: center;
            font-weight: 600;
            background: rgba(26, 0, 51, 0.95);
            border: 2px solid rgba(139, 92, 246, 0.3);
            color: #fbbf24;
            letter-spacing: 2px;
        }

        #duration:focus {
            border-color: #fbbf24;
            box-shadow: 0 0 10px rgba(251, 191, 36, 0.3);
            background: rgba(26, 0, 51, 0.98);
        }

        option {
            text-align: center !important;
            text-align-last: center;
        }

        label[for^="volume"] {
            display: none;
        }

        .range-value {
            text-align: center;
            font-size: 14px;
            color: #fbbf24;
            font-weight: 600;
            margin-top: 5px;
        }

        .button {
            padding: 12px 20px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            will-change: transform;
        }

        .button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('Genesis.png') center center/cover;
            opacity: 0.15;
            z-index: 0;
        }

        .button > * {
            position: relative;
            z-index: 1;
        }

        .button-primary {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: #fff;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        .button-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }

        .button-primary:active {
            transform: translateY(0);
        }

        .button-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #a78bfa;
            border: 2px solid rgba(139, 92, 246, 0.3);
        }

        .button-secondary:hover {
            background: rgba(139, 92, 246, 0.2);
            border-color: #a78bfa;
        }

        .button-danger {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: #fff;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .recipes {
            display: grid;
            gap: 10px;
        }

        .category-tab {
            background: rgba(139, 92, 246, 0.1);
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            margin-bottom: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
        }

        .category-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.82);
            z-index: 0;
            pointer-events: none;
        }

        .category-tab > * {
            position: relative;
            z-index: 1;
        }

        .category-header {
            padding: 18px 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(139, 92, 246, 0.15);
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            border-radius: 16px;
            border: 1px solid rgba(139, 92, 246, 0.2);
            box-shadow: 
                0 2px 12px rgba(139, 92, 246, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .category-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.70);
            z-index: 0;
            transition: background 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .category-header > * {
            position: relative;
            z-index: 1;
        }

        .category-header:hover {
            background: rgba(139, 92, 246, 0.25);
            border-color: rgba(139, 92, 246, 0.35);
            transform: translateY(-2px);
            box-shadow: 
                0 4px 20px rgba(139, 92, 246, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
        }

        .category-header:hover::before {
            background: rgba(26, 0, 51, 0.60);
        }

        .category-title {
            font-size: 16px;
            font-weight: 700;
            color: #fbbf24;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex: 1;
        }

        .category-icon {
            font-size: 20px;
        }

        .category-arrow {
            font-size: 18px;
            color: #a78bfa;
            transition: transform 0.3s ease;
        }

        .category-tab.expanded .category-arrow {
            transform: rotate(90deg);
        }

        .category-content {
            display: none;
            transition: all 0.4s ease;
        }

        .category-tab.expanded .category-content {
            display: block;
        }

        .category-tracks {
            padding: 10px;
            display: grid;
            gap: 8px;
        }

        .recipe-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 14px;
            padding: 14px 16px;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 12px;
            align-items: center;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 1px 8px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
        }

        .recipe-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.88);
            z-index: 0;
            transition: background 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .recipe-item > * {
            position: relative;
            z-index: 1;
        }

        .recipe-item:hover {
            background: rgba(139, 92, 246, 0.1), url('Genesis.png') center center/cover;
            border-color: #a78bfa;
            transform: translateY(-2px);
            box-shadow: 
                0 4px 16px rgba(139, 92, 246, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .recipe-item:hover::before {
            background: rgba(26, 0, 51, 0.75);
        }

        .recipe-item.active {
            background: rgba(139, 92, 246, 0.2), url('Genesis.png') center center/cover;
            border-color: #fbbf24;
            box-shadow: 
                0 0 20px rgba(251, 191, 36, 0.25),
                0 4px 16px rgba(139, 92, 246, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
        }

        .recipe-item.active::before {
            background: rgba(26, 0, 51, 0.70);
        }

        .recipe-info {
            text-align: left;
            cursor: default;
        }

        .recipe-name {
            font-size: 16px;
            font-weight: 600;
            color: #c4b5fd;
            margin-bottom: 4px;
        }

        .recipe-freqs {
            font-size: 13px;
            color: #a78bfa;
            margin-bottom: 0;
        }

        .recipe-buttons {
            display: flex;
            gap: 8px;
            align-items: center;
            pointer-events: all;
            position: relative;
            z-index: 5;
        }

        .track-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 2px solid rgba(139, 92, 246, 0.5);
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(107, 70, 193, 0.3));
            color: #c4b5fd;
            font-size: 19px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            flex-shrink: 0;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .track-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: transparent;
            z-index: 0;
            transition: background 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .track-btn > * {
            position: relative;
            z-index: 1;
        }

        .track-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.5), rgba(107, 70, 193, 0.5));
            border-color: #fbbf24;
            color: #fbbf24;
            transform: scale(1.15) rotate(5deg);
            box-shadow: 
                0 4px 16px rgba(139, 92, 246, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .track-btn:hover::before {
            background: transparent;
        }

        .track-btn.play-btn:hover {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.4), rgba(22, 163, 74, 0.4));
            border-color: #22c55e;
            color: #22c55e;
            box-shadow:
                0 4px 16px rgba(34, 197, 94, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .track-btn.play-btn.playing {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.5), rgba(22, 163, 74, 0.5));
            border-color: #22c55e;
            color: #ffffff;
            box-shadow:
                0 0 20px rgba(34, 197, 94, 0.6),
                0 4px 16px rgba(34, 197, 94, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            animation: pulsePlaying 2s ease-in-out infinite;
        }

        .track-btn.play-btn.playing::before {
            background: transparent;
        }

        @keyframes pulsePlaying {
            0%, 100% {
                transform: scale(1);
                box-shadow:
                    0 0 20px rgba(34, 197, 94, 0.6),
                    0 4px 16px rgba(34, 197, 94, 0.4),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2);
            }
            50% {
                transform: scale(1.05);
                box-shadow:
                    0 0 30px rgba(34, 197, 94, 0.8),
                    0 6px 20px rgba(34, 197, 94, 0.6),
                    inset 0 1px 0 rgba(255, 255, 255, 0.3);
            }
        }

        .track-btn.info-btn {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.3), rgba(251, 191, 36, 0.2));
            border: 2px solid #fbbf24;
            color: #fbbf24;
            box-shadow: 
                0 0 12px rgba(251, 191, 36, 0.4),
                0 2px 8px rgba(0, 0, 0, 0.3);
            animation: infoGlow 2s ease-in-out infinite;
            pointer-events: all;
            z-index: 10;
            position: relative;
        }

        .track-btn.info-btn::before {
            display: none;
        }

        @keyframes infoGlow {
            0%, 100% {
                box-shadow: 
                    0 0 12px rgba(251, 191, 36, 0.4),
                    0 2px 8px rgba(0, 0, 0, 0.3);
                border-color: #fbbf24;
            }
            50% {
                box-shadow: 
                    0 0 20px rgba(251, 191, 36, 0.6),
                    0 0 30px rgba(251, 191, 36, 0.3),
                    0 2px 8px rgba(0, 0, 0, 0.3);
                border-color: #ffd700;
            }
        }

        .track-btn.info-btn:hover {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.5), rgba(251, 191, 36, 0.4));
            border-color: #ffd700;
            color: #ffffff;
            transform: scale(1.1);
            box-shadow: 
                0 0 25px rgba(251, 191, 36, 0.7),
                0 4px 16px rgba(251, 191, 36, 0.4);
            animation: none;
        }

        .info-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.92);
            display: none;
            z-index: 9999;
            padding: 20px;
            box-sizing: border-box;
            align-items: center;
            justify-content: center;
            overflow-y: hidden;
        }

        .info-modal.active {
            display: flex !important;
            animation: fadeInModal 0.3s ease;
        }
        
        @keyframes fadeInModal {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Upgrade modal sits on top, not dimmed */
        .upgrade-modal {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 11000;
            background: rgba(0,0,0,0.65);
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .upgrade-modal-content {
            position: relative;
            z-index: 11001;
        }

        /* Ensure other info-modals do not force higher stacking */
        .info-modal .info-modal-content {
            position: relative;
            z-index: 10001;
        }

        /* Force hide all modals except active one */
        .info-modal:not(.active) {
            display: none !important;
        }

        .info-modal.active {
            display: flex !important;
            opacity: 1 !important;
            visibility: visible !important;
            z-index: 10000 !important;
        }
        
        /* Safari/WebKit compatibility for welcome modals */
        #immersiveWelcome.active,
        #frequencyBenefitsModal.active,
        #howToUseModal.active,
        #pwaTipModal.active,
        #upgradeBenefitsModal.active {
            display: flex !important;
            opacity: 1 !important;
            visibility: visible !important;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
        }
        
        /* Welcome flow header styles */
        .welcome-header {
            color: #ffd700 !important;
            font-size: 32px !important;
            font-weight: 800 !important;
            text-align: center !important;
            text-shadow: 0 0 20px rgba(251, 191, 36, 0.5), 0 2px 4px rgba(0,0,0,0.5) !important;
            margin-bottom: 25px !important;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .info-modal-content {
            background: linear-gradient(135deg, rgba(26,0,51,0.98), rgba(139,92,246,0.95));
            border-radius: 20px;
            padding: 20px;
            width: 90%;
            max-width: 400px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow:
                0 25px 80px rgba(0, 0, 0, 0.6),
                0 0 30px rgba(139, 92, 246, 0.3),
                0 0 0 2px rgba(251, 191, 36, 0.4);
            border: 2px solid rgba(251, 191, 36, 0.5);
            box-sizing: border-box;
            margin: 0;
            flex-shrink: 0;
        }

        @media (min-width: 768px) {
            .info-modal-content {
                width: 80%;
                max-width: 550px;
                padding: 40px;
            }
        }

        @media (max-height: 700px) {
            .info-modal-content {
                max-height: 90vh;
            }
        }

        @keyframes slideUpModal {
            from {
                transform: translateY(30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .info-modal-header {
            color: #fbbf24;
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 15px;
            padding-right: 40px;
            text-align: center;
            background: linear-gradient(90deg, #fbbf24 0%, #c4b5fd 50%, #fbbf24 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s linear infinite;
            text-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
        }

        .info-modal-freqs {
            color: #c4b5fd;
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 25px;
            padding: 15px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(168, 85, 247, 0.2));
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(139, 92, 246, 0.3);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .info-modal-body {
            color: #ffffff;
            font-size: 16px;
            line-height: 1.8;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .info-modal-body h3 {
            color: #fbbf24;
            font-size: 20px;
            font-weight: 700;
            margin-top: 25px;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid rgba(251, 191, 36, 0.3);
            text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
        }

        .info-modal-body p {
            margin-bottom: 18px;
            color: #e2e8f0;
        }

        .info-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 2px solid rgba(251, 191, 36, 0.4);
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(139, 92, 246, 0.2));
            color: #fbbf24;
            font-size: 24px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .info-modal-close:hover {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.4), rgba(139, 92, 246, 0.4));
            border-color: #fbbf24;
            color: #1a0033;
            transform: rotate(90deg) scale(1.1);
            box-shadow: 0 4px 16px rgba(251, 191, 36, 0.4);
        }

        .status {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 14px;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .status::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('Genesis.png') center center/cover;
            opacity: 0.1;
            z-index: 0;
        }

        .status > * {
            position: relative;
            z-index: 1;
        }

        .status.playing {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .status.stopped {
            background: rgba(148, 163, 184, 0.1);
            color: #94a3b8;
            border: 1px solid rgba(148, 163, 184, 0.3);
        }

        .status.floating {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            margin: 0;
            border-radius: 0;
            z-index: 1000;
            backdrop-filter: blur(20px);
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
        }

        @media (min-width: 768px) {
            .status.floating {
                bottom: 20px;
                left: 20px;
                right: auto;
                width: 400px;
                border-radius: 8px;
            }
        }

        .visualizer {
            height: 120px;
            background: rgba(255, 255, 255, 0.02), url('Genesis.png') center center/cover;
            border-radius: 12px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .visualizer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.85);
            z-index: 0;
        }

        .visualizer > * {
            position: relative;
            z-index: 1;
        }

        .visualizer-content {
            text-align: center;
            color: #c4b5fd;
            font-size: 14px;
        }

        .frequency-vibration {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }

        .vibration-wave {
            position: absolute;
            width: 100%;
            height: 80px;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .vibration-wave svg {
            width: 100%;
            height: 100%;
        }

        .vibration-wave:nth-child(1) {
            animation: wave1 1s ease-in-out infinite;
        }

        .vibration-wave:nth-child(2) {
            animation: wave2 0.5s ease-in-out infinite;
        }

        .vibration-wave:nth-child(3) {
            animation: wave3 1.5s ease-in-out infinite;
            opacity: 0.4;
        }

        @keyframes wave1 {
            0%, 100% {
                transform: translateY(-50%) scaleY(0.8);
            }
            50% {
                transform: translateY(-50%) scaleY(1.2);
            }
        }

        @keyframes wave2 {
            0%, 100% {
                transform: translateY(-50%) scaleY(0.7);
            }
            50% {
                transform: translateY(-50%) scaleY(1.3);
            }
        }

        @keyframes wave3 {
            0%, 100% {
                transform: translateY(-50%) scaleY(0.9);
            }
            50% {
                transform: translateY(-50%) scaleY(1.1);
            }
        }

        .sacred-geometry {
            display: none;
        }
        
        .add-to-home {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.95) 0%, rgba(107, 70, 193, 0.95) 100%);
            padding: 15px;
            text-align: center;
            color: #fff;
            font-size: 14px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            z-index: 2000040;
            animation: slideDownBanner 0.5s ease-out;
        }
        
        @media (max-width: 768px) {
            .add-to-home {
                display: block;
            }
        }
        
        @keyframes slideDownBanner {
            from {
                transform: translateY(-100%);
            }
            to {
                transform: translateY(0);
            }
        }
        
        .add-to-home-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .add-to-home-icon {
            font-size: 24px;
        }
        
        .add-to-home-text {
            font-weight: 600;
            line-height: 1.4;
        }
        
        .add-to-home-close {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: #fff;
            font-size: 20px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s;
        }
        
        .add-to-home-close:hover {
            opacity: 1;
        }

        

        @media (max-width: 480px) {
            body {
                padding: 5px;
            }

            .container {
                padding: 12px;
                border-radius: 16px;
                margin: 0;
            }

            .header {
                padding: 8px 0 12px 0;
                text-align: center;
            }

            .header h1 {
                font-size: 24px;
                margin-bottom: 8px;
                color: #ffffff;
                text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            }

            .header p {
                font-size: 14px;
                color: #e0e7ff;
                line-height: 1.4;
            }

            .info-modal {
                padding: 8px;
            }

            .info-modal-content {
                padding: 20px 16px;
                max-width: 95vw;
                width: 95%;
                border-radius: 16px;
                margin: 10px auto;
            }

            .info-modal-header {
                font-size: 22px;
                margin-bottom: 16px;
                color: #fbbf24;
                text-shadow: 0 1px 2px rgba(0,0,0,0.7);
            }

            .info-modal-body {
                font-size: 15px;
                color: #ffffff;
                line-height: 1.6;
            }

            .info-modal-body h3 {
                color: #d4d4ff;
                font-size: 16px;
                font-weight: 600;
            }

            .info-modal-body p {
                color: #f0f0ff;
                margin-bottom: 12px;
                line-height: 1.5;
            }

            /* Improve button visibility on mobile */
            .button {
                font-size: 16px;
                padding: 14px 24px;
                min-height: 48px;
                border-radius: 25px;
                font-weight: 600;
                text-align: center;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                white-space: nowrap;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            }

            .button:active {
                transform: scale(0.98);
            }

            .info-modal-close {
                width: 40px;
                height: 40px;
                font-size: 22px;
            }
        }

        /* Freemium Styles */
        .premium-lock {
            position: relative;
            opacity: 0.7;
            transition: all 0.3s ease;
        }
        
        .premium-lock:hover {
            opacity: 0.85;
            transform: scale(1.01);
        }

        .premium-lock input[type="number"],
        .premium-lock input[type="range"],
        .premium-lock button {
            pointer-events: none;
            opacity: 0.5;
        }

        .premium-lock::after {
            content: '🔒 Premium';
            position: absolute;
            top: 8px;
            right: 8px;
            font-size: 12px;
            font-weight: 700;
            color: #fbbf24;
            background: linear-gradient(135deg, rgba(139,92,246,0.95), rgba(107,70,193,0.95));
            border-radius: 12px;
            padding: 6px 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(251,191,36,0.3);
            pointer-events: none;
        }
        
        /* Premium unlocked styles - fully enabled controls */
        .premium-unlocked {
            opacity: 1 !important;
            pointer-events: auto !important;
        }
        
        .premium-unlocked::after {
            display: none !important;
        }
        
        .premium-unlocked input[type="number"],
        .premium-unlocked input[type="range"],
        .premium-unlocked button {
            pointer-events: auto !important;
            opacity: 1 !important;
        }
        
        .premium-unlocked > div:first-child::after {
            display: none !important;
        }

        .premium-lock > div:first-child {
            position: relative;
        }

        .premium-lock > div:first-child::after {
            content: '🔒';
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
            color: #fbbf24;
            background: rgba(26, 0, 51, 0.9);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            pointer-events: none;
        }
        
        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(107, 114, 128, 0.5);
            transition: 0.3s;
            border-radius: 26px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        
        .toggle-switch input:checked + .toggle-slider {
            background: linear-gradient(90deg, #8b5cf6, #a78bfa);
        }
        
        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        .toggle-switch input:disabled + .toggle-slider {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Upgrade Modal */
        .upgrade-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            animation: fadeIn 0.3s ease-out;
            align-items: flex-start;
            justify-content: center;
            padding: 40px 20px 20px 20px;
            box-sizing: border-box;
        }

        .upgrade-modal-content {
            background: linear-gradient(135deg, rgba(26,0,51,0.95), rgba(139,92,246,0.9));
            border: 2px solid rgba(251,191,36,0.5);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            max-height: calc(100vh - 80px);
            overflow-y: auto;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            position: relative;
            z-index: 10001;
        }

        .upgrade-modal-header {
            color: #fbbf24;
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
            background: transparent !important;
        }

        .upgrade-modal-body {
            color: #e0e7ff;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .upgrade-features {
            background: rgba(251,191,36,0.1);
            border: 1px solid rgba(251,191,36,0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }

        .upgrade-features h3 {
            color: #fbbf24;
            font-size: 18px;
            margin-bottom: 15px;
            text-align: center;
        }

        .upgrade-features ul {
            list-style: none;
            padding: 0;
        }

        .upgrade-features li {
            color: #d1d5db;
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .upgrade-features li::before {
            content: '✔';
            position: absolute;
            left: 0;
        }

        .upgrade-btn {
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            color: #1a0033;
            border: none;
            border-radius: 25px;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(251,191,36,0.3);
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 10px;
            animation: upgradeGlow 3s ease-in-out infinite;
        }

        @keyframes upgradeGlow {
            0%, 100% {
                box-shadow: 0 4px 15px rgba(251,191,36,0.3);
            }
            50% {
                box-shadow: 0 4px 25px rgba(251,191,36,0.6), 0 0 30px rgba(251,191,36,0.4);
            }
        }

        @keyframes companionShimmer {
            0%, 100% {
                box-shadow: 0 2px 12px rgba(139,92,246,0.15);
            }
            50% {
                box-shadow: 0 2px 20px rgba(139,92,246,0.35), 0 0 25px rgba(251,191,36,0.3);
            }
        }

        .upgrade-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(251,191,36,0.4);
        }

        .upgrade-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            color: #c4b5fd;
            font-size: 28px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .upgrade-close:hover {
            background: rgba(139, 92, 246, 0.2);
        }

        /* Duration input with side lock */
        .duration-input-container {
            position: relative;
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .duration-input-container input {
            flex: 1;
            padding-right: 40px; /* Make room for lock icon */
            opacity: 0.7;
            cursor: pointer;
        }

        .duration-input-container input:hover {
            opacity: 0.9;
        }



        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Mobile optimizations for iPhone SE */
        @media (max-width: 320px) {
            body {
                padding: 2px;
            }

            .container {
                padding: 8px;
                border-radius: 8px;
            }

            .header h1 {
                font-size: 18px;
                line-height: 1.2;
            }

            .header p {
                font-size: 12px;
            }

            .info-modal-content {
                padding: 12px 8px;
                max-width: 99vw;
                border-radius: 8px;
            }

            .info-modal-header {
                font-size: 18px;
                margin-bottom: 10px;
            }

            .info-modal-body {
                font-size: 13px;
            }

            .button {
                font-size: 14px !important;
                padding: 10px 16px !important;
                min-height: 40px;
            }
        }

        @media (max-width: 375px) {
            body {
                padding: 3px;
            }

            .container {
                padding: 8px;
                border-radius: 10px;
            }

            .header h1 {
                font-size: 18px;
                line-height: 1.2;
            }

            .header p {
                font-size: 12px;
                line-height: 1.3;
            }

            .welcome-content {
                font-size: 13px;
            }

            .welcome-content h3 {
                font-size: 15px;
            }

            .trinity-title {
                font-size: 14px;
            }

            .trinity-freq .hz {
                font-size: 16px;
            }

            .trinity-freq .label {
                font-size: 11px;
            }

            .visualizer {
                height: 100px;
            }

            .frequency-vibration {
                height: 60px;
            }

            .recipes {
                gap: 6px;
            }

            .recipe-card {
                padding: 10px;
                font-size: 13px;
            }

            .recipe-header {
                font-size: 14px;
            }

            .recipe-freqs {
                font-size: 11px;
            }

            .controls {
                padding: 12px;
            }

            .frequency-controls {
                gap: 8px;
            }

            .control-group {
                padding: 10px;
            }

            .duration-buttons {
                gap: 4px;
            }

            .duration-btn {
                font-size: 16px;
                padding: 12px 16px;
                min-width: 60px;
                font-weight: 600;
                border-radius: 8px;
                border: 2px solid rgba(139, 92, 246, 0.3);
                background: rgba(139, 92, 246, 0.1);
                color: #c4b5fd;
                transition: all 0.2s ease;
            }

            .duration-btn:hover, .duration-btn:active {
                background: rgba(139, 92, 246, 0.2);
                border-color: rgba(139, 92, 246, 0.5);
                transform: scale(1.05);
            }

            .duration-btn.active {
                background: rgba(251, 191, 36, 0.2);
                border-color: #fbbf24;
                color: #fbbf24;
                font-weight: 700;
            }

            .button-group {
                gap: 6px;
            }

            .button {
                font-size: 15px !important;
                padding: 10px 16px !important;
                min-height: 42px;
                min-width: 100px;
            }

            .status {
                font-size: 13px;
                padding: 10px;
            }

            .info-modal-content {
                padding: 14px 10px;
                max-width: 96vw;
                width: 95%;
                border-radius: 10px;
                margin: 10px auto;
            }

            .info-modal-header {
                font-size: 18px;
                margin-bottom: 10px;
            }

            .info-modal-body {
                font-size: 13px;
            }

            .instructions-panel {
                padding: 12px !important;
                margin: 0 4px 12px 4px !important;
            }

            .instructions-header h2 {
                font-size: 18px !important;
            }

            .accordion-content {
                padding: 10px 2px 0 2px !important;
                font-size: 13px !important;
            }
        }

        @media (max-width: 320px) {
            body {
                padding: 2px;
            }

            .container {
                padding: 8px;
                border-radius: 8px;
            }

            .header h1 {
                font-size: 18px;
                line-height: 1.2;
            }

            .header p {
                font-size: 12px;
            }

            .info-modal-content {
                padding: 12px 8px;
                max-width: 99vw;
                border-radius: 8px;
            }

            .info-modal-header {
                font-size: 18px;
                margin-bottom: 10px;
            }

            .info-modal-body {
                font-size: 13px;
            }

            .button {
                font-size: 14px !important;
                padding: 10px 16px !important;
                min-height: 40px;
            }
        }

        

        /* Ensure no horizontal overflow anywhere */
        .section, .controls, .frequency-controls, .control-group,
        .duration-input-wrapper, .duration-input-container {
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
        }

        /* Align the top row: number input + Hz span */
        .control-group > div {
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        /* Critical: allow the number input to shrink */
        .control-group input[type="number"] {
            flex: 1 1 auto;
            min-width: 0;
            width: 100%;
            box-sizing: border-box;
        }

        /* Keep Hz narrow but not stretching layout */
        .control-group span {
            flex: 0 0 auto;
            width: 30px;
            text-align: right;
            color: #a78bfa;
            font-size: 14px;
            font-weight: 500;
        }

        /* Normalize range sizing - account for browser chrome and thumb */
        .control-group input[type="range"] {
            display: block;
            width: 92%;
            max-width: 92%;
            box-sizing: border-box;
            margin: 10px auto 6px auto;
            padding: 0;
        }

        /* Range value below the slider */
        .range-value {
            width: 100%;
            text-align: center;
            box-sizing: border-box;
        }

        /* So the background overlay can't "clip" content or grab events */
        .control-group::before {
            pointer-events: none;
        }

        /* Duration row */
        .duration-input-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .duration-input-container input {
            flex: 1 1 auto;
            min-width: 0;
            width: 100%;
            box-sizing: border-box;
        }

        /* Buttons wrap nicely on small phones */
        @media (max-width: 375px) {
            .duration-buttons {
                display: grid;
                grid-template-columns: repeat(2, minmax(0, 1fr));
                gap: 6px;
            }
            .control-group {
                padding: 8px;
                border-radius: 10px;
            }
            .range-value {
                font-size: 12px;
            }
        }

        /* Extra hardening (Safari iOS quirks) */
        input[type="number"], input[type="text"] {
            min-width: 0;
        }

        /* Achievement Animations */
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(34,197,94,0.3); }
            50% { box-shadow: 0 0 40px rgba(34,197,94,0.6); }
        }

        @keyframes pulse-intense {
            0%, 100% { transform: scale(1); box-shadow: 0 0 30px rgba(251,191,36,0.4); }
            50% { transform: scale(1.02); box-shadow: 0 0 50px rgba(251,191,36,0.7); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-3px); }
            75% { transform: translateX(3px); }
        }

        @keyframes sparkle {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.3) rotate(180deg); opacity: 0.7; }
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(200%); }
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes pulse-text {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes pulse-text {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive Grid for Achievements */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        @media (max-width: 768px) {
            .achievements-grid {
                grid-template-columns: 1fr;
                gap: 15px;
                padding: 15px;
            }
        }

        /* Achievement Card Hover Effects */
        .achievement-card {
            transition: all 0.3s ease;
        }

        .achievement-card.locked:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(139,92,246,0.3);
        }

        .achievement-card.unlocked:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(34,197,94,0.5);
        }

        /* ---------------------------------------------------------------
           LUCIDE ICONS - Professional Icon System
        --------------------------------------------------------------- */
        .lucide-icon {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
            vertical-align: middle;
            display: inline-block;
        }
        
        .lucide-icon-sm { width: 16px; height: 16px; }
        .lucide-icon-lg { width: 24px; height: 24px; }
        .lucide-icon-xl { width: 32px; height: 32px; }
        
        .icon-gold { color: #fbbf24; }
        .icon-purple { color: #a78bfa; }
        .icon-green { color: #22c55e; }
        .icon-blue { color: #3b82f6; }
        .icon-pink { color: #ec4899; }

        /* ---------------------------------------------------------------
           NOW PLAYING STICKY FOOTER
        --------------------------------------------------------------- */
        .now-playing-bar {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, rgba(26, 0, 51, 0.98) 0%, rgba(139, 92, 246, 0.95) 100%);
            padding: 12px 20px;
            z-index: 2000050;
            box-shadow: 0 -4px 30px rgba(139, 92, 246, 0.4);
            border-top: 2px solid rgba(251, 191, 36, 0.5);
            animation: slideUpNowPlaying 0.3s ease-out;
        }
        
        .now-playing-bar.active {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
        }
        
        @keyframes slideUpNowPlaying {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        .now-playing-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }
        
        .now-playing-icon {
            font-size: 24px;
            animation: pulseGlow 2s ease-in-out infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% { 
                text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
                transform: scale(1);
            }
            50% { 
                text-shadow: 0 0 20px rgba(251, 191, 36, 0.8), 0 0 30px rgba(139, 92, 246, 0.5);
                transform: scale(1.1);
            }
        }
        
        .now-playing-text {
            display: flex;
            flex-direction: column;
        }
        
        .now-playing-label {
            font-size: 11px;
            color: #a78bfa;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .now-playing-track {
            font-size: 16px;
            font-weight: 700;
            color: #fbbf24;
            text-shadow: 0 0 10px rgba(251, 191, 36, 0.3);
        }
        
        .now-playing-time {
            font-size: 18px;
            font-weight: 700;
            color: #fff;
            font-family: monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 6px 12px;
            border-radius: 8px;
            min-width: 70px;
            text-align: center;
        }
        
        .now-playing-controls {
            display: flex;
            gap: 10px;
        }
        
        .now-playing-btn {
            background: rgba(251, 191, 36, 0.2);
            border: 1px solid rgba(251, 191, 36, 0.4);
            color: #fbbf24;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .now-playing-btn:hover {
            background: rgba(251, 191, 36, 0.4);
            transform: scale(1.1);
        }
        
        .now-playing-btn.stop-btn {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.4);
            color: #ef4444;
        }
        
        .now-playing-btn.stop-btn:hover {
            background: rgba(239, 68, 68, 0.4);
        }

        /* ---------------------------------------------------------------
           PREMIUM & ULTIMATE CARD GLOW EFFECTS
        --------------------------------------------------------------- */
        .holographic-card {
            position: relative;
            overflow: visible;
            border-radius: 16px;
        }
        
        /* Premium card - Purple animated glow border */
        .tier-card.premium.holographic-card {
            border: 2px solid rgba(139, 92, 246, 0.6);
            box-shadow: 
                0 0 10px rgba(139, 92, 246, 0.3),
                0 0 20px rgba(139, 92, 246, 0.2),
                0 0 30px rgba(139, 92, 246, 0.1),
                inset 0 0 20px rgba(139, 92, 246, 0.05);
            animation: premiumGlow 3s ease-in-out infinite;
        }
        
        @keyframes premiumGlow {
            0%, 100% { 
                box-shadow: 
                    0 0 10px rgba(139, 92, 246, 0.3),
                    0 0 20px rgba(139, 92, 246, 0.2),
                    0 0 30px rgba(139, 92, 246, 0.1),
                    inset 0 0 20px rgba(139, 92, 246, 0.05);
                border-color: rgba(139, 92, 246, 0.6);
            }
            50% { 
                box-shadow: 
                    0 0 15px rgba(139, 92, 246, 0.5),
                    0 0 30px rgba(139, 92, 246, 0.3),
                    0 0 45px rgba(139, 92, 246, 0.2),
                    inset 0 0 25px rgba(139, 92, 246, 0.08);
                border-color: rgba(167, 139, 250, 0.8);
            }
        }
        
        /* Ultimate card - Gold animated glow border */
        .tier-card.ultimate.holographic-card {
            border: 2px solid rgba(251, 191, 36, 0.6);
            box-shadow: 
                0 0 10px rgba(251, 191, 36, 0.3),
                0 0 20px rgba(251, 191, 36, 0.2),
                0 0 30px rgba(251, 191, 36, 0.1),
                inset 0 0 20px rgba(251, 191, 36, 0.05);
            animation: ultimateGlow 3s ease-in-out infinite;
        }
        
        @keyframes ultimateGlow {
            0%, 100% { 
                box-shadow: 
                    0 0 10px rgba(251, 191, 36, 0.3),
                    0 0 20px rgba(251, 191, 36, 0.2),
                    0 0 30px rgba(251, 191, 36, 0.1),
                    inset 0 0 20px rgba(251, 191, 36, 0.05);
                border-color: rgba(251, 191, 36, 0.6);
            }
            50% { 
                box-shadow: 
                    0 0 15px rgba(251, 191, 36, 0.5),
                    0 0 30px rgba(251, 191, 36, 0.3),
                    0 0 45px rgba(251, 191, 36, 0.2),
                    inset 0 0 25px rgba(251, 191, 36, 0.08);
                border-color: rgba(251, 191, 36, 0.9);
            }
        }
        
        /* Remove pseudo-elements - using box-shadow instead */
        .holographic-card::before,
        .holographic-card::after {
            display: none;
        }

        /* Card Shimmer on Hover */
        .shimmer-hover {
            position: relative;
            overflow: hidden;
        }
        
        .shimmer-hover::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.15),
                transparent
            );
            transition: left 0.5s ease;
        }
        
        .shimmer-hover:hover::after {
            left: 100%;
        }

        /* ---------------------------------------------------------------
           FLOATING PARTICLES SYSTEM
        --------------------------------------------------------------- */
        #particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        
        .floating-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            opacity: 0;
            animation: floatParticle linear infinite;
        }
        
        .particle-gold {
            background: radial-gradient(circle, #fbbf24, transparent);
            box-shadow: 0 0 6px #fbbf24, 0 0 12px rgba(251, 191, 36, 0.5);
        }
        
        .particle-purple {
            background: radial-gradient(circle, #a78bfa, transparent);
            box-shadow: 0 0 6px #a78bfa, 0 0 12px rgba(167, 139, 250, 0.5);
        }
        
        .particle-white {
            background: radial-gradient(circle, #ffffff, transparent);
            box-shadow: 0 0 4px #ffffff, 0 0 8px rgba(255, 255, 255, 0.3);
        }
        
        @keyframes floatParticle {
            0% {
                opacity: 0;
                transform: translateY(100vh) scale(0);
            }
            10% {
                opacity: 0.8;
                transform: translateY(80vh) scale(1);
            }
            90% {
                opacity: 0.6;
            }
            100% {
                opacity: 0;
                transform: translateY(-10vh) scale(0.5);
            }
        }

        /* ---------------------------------------------------------------
           PULSING GLOW EFFECTS
        --------------------------------------------------------------- */
        .pulse-glow {
            animation: pulseGlowEffect 2s ease-in-out infinite;
        }
        
        @keyframes pulseGlowEffect {
            0%, 100% {
                box-shadow: 0 0 5px rgba(251, 191, 36, 0.3),
                            0 0 10px rgba(251, 191, 36, 0.2);
            }
            50% {
                box-shadow: 0 0 15px rgba(251, 191, 36, 0.5),
                            0 0 30px rgba(251, 191, 36, 0.3),
                            0 0 45px rgba(251, 191, 36, 0.1);
            }
        }
        
        .active-glow {
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.4),
                        0 0 40px rgba(34, 197, 94, 0.2);
            animation: activeGlowPulse 1.5s ease-in-out infinite;
        }
        
        @keyframes activeGlowPulse {
            0%, 100% {
                box-shadow: 0 0 20px rgba(34, 197, 94, 0.4),
                            0 0 40px rgba(34, 197, 94, 0.2);
            }
            50% {
                box-shadow: 0 0 30px rgba(34, 197, 94, 0.6),
                            0 0 60px rgba(34, 197, 94, 0.3);
            }
        }

        /* ---------------------------------------------------------------
           SPIRITUAL JOURNEY BADGES
        --------------------------------------------------------------- */
        .journey-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            position: relative;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(251, 191, 36, 0.3));
            border: 2px solid rgba(251, 191, 36, 0.5);
        }
        
        .journey-badge::before {
            content: '';
            position: absolute;
            inset: -3px;
            border-radius: 50%;
            background: conic-gradient(from 0deg, #fbbf24, #a78bfa, #22c55e, #fbbf24);
            opacity: 0.5;
            z-index: -1;
            animation: badgeRotate 4s linear infinite;
        }
        
        @keyframes badgeRotate {
            100% { transform: rotate(360deg); }
        }
        
        .journey-badge.awakening { border-color: #6b7280; }
        .journey-badge.seeker { border-color: #22c55e; }
        .journey-badge.initiate { border-color: #3b82f6; }
        .journey-badge.practitioner { border-color: #a78bfa; }
        .journey-badge.adept { border-color: #f59e0b; }
        .journey-badge.master { border-color: #fbbf24; }
        .journey-badge.genesis-master { 
            border-color: #fbbf24;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.4), rgba(139, 92, 246, 0.4));
        }

        /* ---------------------------------------------------------------
           STREAK FLAME VISUALIZATION
        --------------------------------------------------------------- */
        .streak-flame {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: linear-gradient(135deg, rgba(251, 146, 60, 0.2), rgba(239, 68, 68, 0.2));
            border-radius: 20px;
            border: 1px solid rgba(251, 146, 60, 0.4);
        }
        
        .streak-flame .flame-icon {
            color: #f97316;
            animation: flameFlicker 0.5s ease-in-out infinite alternate;
        }
        
        @keyframes flameFlicker {
            0% { transform: scale(1) rotate(-3deg); opacity: 0.9; }
            100% { transform: scale(1.1) rotate(3deg); opacity: 1; }
        }
        
        .streak-count {
            font-weight: 700;
            font-size: 18px;
            color: #fbbf24;
        }

        /* ---------------------------------------------------------------
           TIER PRICING CARDS
        --------------------------------------------------------------- */
        .tier-card {
            position: relative;
            padding: 24px;
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        
        .tier-card.premium {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(167, 139, 250, 0.1));
            border: 2px solid rgba(139, 92, 246, 0.5);
        }
        
        .tier-card.ultimate {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.08), rgba(245, 158, 11, 0.04));
            border: 2px solid rgba(251, 191, 36, 0.4);
        }
        
        .tier-card.ultimate::before {
            content: '⭐ BEST VALUE';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            color: #1a0033;
            padding: 5px 16px;
            border-radius: 15px;
            font-size: 10px;
            font-weight: 700;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 8px rgba(251, 191, 36, 0.4);
        }
        
        .tier-price {
            font-size: 36px;
            font-weight: 800;
            color: #fbbf24;
        }
        
        .tier-price span {
            font-size: 16px;
            font-weight: 400;
            color: #9ca3af;
        }
    </style>

<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
    <!-- Info Modal - must be direct child of body for proper fixed positioning -->
    <div id="infoModal" style="position:fixed;top:0;left:0;width:100vw;height:100vh;display:none;align-items:center;justify-content:center;z-index:2147483647;background:rgba(0,0,0,0.92);">
        <div style="background:linear-gradient(135deg, rgba(26,0,51,0.98), rgba(139,92,246,0.95));border-radius:20px;padding:25px;width:90%;max-width:500px;max-height:80vh;overflow-y:auto;border:2px solid rgba(251,191,36,0.5);box-shadow:0 25px 80px rgba(0,0,0,0.6),0 0 30px rgba(139,92,246,0.3);position:relative;">
            <button onclick="closeInfoModal()" style="position:absolute;top:15px;right:15px;width:32px;height:32px;border-radius:50%;border:none;background:rgba(251,191,36,0.3);color:#fbbf24;font-size:20px;cursor:pointer;z-index:10;">×</button>
            <div id="modalTitle" style="color:#fbbf24;font-size:24px;font-weight:800;margin-bottom:15px;text-align:center;"></div>
            <div id="modalFreqs" style="color:#c4b5fd;font-size:16px;margin-bottom:20px;text-align:center;padding:10px;background:rgba(139,92,246,0.2);border-radius:10px;"></div>
            <div id="modalBody" style="color:#e9d5ff;font-size:15px;line-height:1.6;"></div>
        </div>
    </div>
    
    <!-- Floating Particles Container -->
    <div id="particles-container"></div>
    
    <!-- Safari Early Welcome Flow Initialization - runs before DOM fully loads -->
    <script>
    (function() {
        // Safari-safe storage check
        function canUseStorage() {
            try {
                localStorage.setItem('_test', '1');
                localStorage.removeItem('_test');
                return true;
            } catch(e) {
                return false;
            }
        }
        
        function getStorageItem(key) {
            try {
                return localStorage.getItem(key) || sessionStorage.getItem(key);
            } catch(e) {
                return null;
            }
        }
        
        // Check if this is first visit
        var onboardingDone = getStorageItem('onboardingComplete') === 'true';
        var forceShow = window.location.search.indexOf('showWelcome=true') !== -1;
        
        if (!onboardingDone || forceShow) {
            // Create a style to force the welcome modal visible immediately
            var style = document.createElement('style');
            style.id = 'safari-welcome-fix';
            style.textContent = '#immersiveWelcome { display: block !important; visibility: visible !important; opacity: 1 !important; position: fixed !important; top: 0 !important; left: 0 !important; width: 100% !important; height: 100% !important; z-index: 9999999 !important; background: rgba(0,0,0,0.95) !important; padding: 20px !important; overflow-y: auto !important; box-sizing: border-box !important; } #immersiveWelcome .info-modal-content { width: 90% !important; max-width: 400px !important; margin: 20px auto !important; transform: none !important; left: auto !important; right: auto !important; position: relative !important; }';
            document.head.appendChild(style);
            document.body.style.overflow = 'hidden';
        }
    })();
    </script>
    
    <!-- Immersive Welcome Modal - starts hidden, shown via JavaScript for first-time users -->
    <div id="immersiveWelcome" class="info-modal" style="z-index:9999999;">
        <div class="info-modal-content" style="max-width: 500px; text-align: center;">
            <div class="welcome-header">Bem-vindo a: Frequências Gênesis</div>
            <div style="text-align: center; margin: 15px 0;">
                <span style="color: #fbbf24; font-size: 16px; font-weight: 700;">
                    🌟 Mais de 10.000 usuários brasileiros já transformaram sua meditação
                </span>
            </div>
            <div class="info-modal-body" style="color: #ffffff; font-size: 18px; line-height: 1.6;">
                <div style="text-align:center;line-height:1.8;padding:10px 20px 20px 20px;">
                    <p style="font-size:17px;color:#ffd700;margin-bottom:20px;font-weight:600;letter-spacing:0.5px;">
                        As frequências da criação estão agora em suas mãos.
                    </p>
                    <div style="background:linear-gradient(135deg,rgba(251,191,36,0.2),rgba(139,92,246,0.2));border-radius:14px;padding:20px;margin:20px 0;border:2px solid rgba(251,191,36,0.4);box-shadow: 0 0 30px rgba(251,191,36,0.15);">
                        <div style="font-size:28px;color:#ffd700;margin-bottom:10px;font-weight:800;text-shadow: 0 0 10px rgba(251,191,36,0.5);">
                            37 × 73 = 2701
                        </div>
                        <div style="font-size:16px;color:#ffffff;margin-bottom:8px;">
                            Gênesis 1:1 (Hebraico) = 2701
                        </div>
                        <div style="font-size:14px;color:#e9d5ff;font-style:italic;margin-top:10px;">
                            "No princípio..."
                        </div>
                    </div>
                    <p style="color:#ffffff;margin-bottom:15px;font-size:15px;line-height:1.7;">
                        Esses números não são aleatórios.<br>
                        Eles codificam uma estrutura—uma frequência—um padrão tecido no primeiro versículo das Escrituras.<br>
                        <span style="color:#a78bfa;">Ocultos por milênios.</span><br>
                        <span style="color:#ffd700;font-weight:600;">Agora revelados.</span>
                    </p>
                    <p style="font-size:16px;color:#e9d5ff;margin-top:20px;">
                        Respire lentamente.<br>
                        Defina uma intenção clara.
                    </p>
                    <p style="color:#ffd700;font-size:17px;margin-top:15px;font-weight:600;">
                        Sua jornada de frequências começa agora.
                    </p>
                </div>
            </div>
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px; padding-bottom: 20px;">
                <button onclick="showFrequencyBenefits()" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 15px 40px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 20px rgba(251,191,36,0.4); transition: transform 0.2s;">Começar Agora ➡️</button>
            </div>
        </div>
    </div>

    <!-- Frequency Benefits Modal -->
    <div id="frequencyBenefitsModal" class="info-modal" style="z-index:9999998;">
        <div class="info-modal-content" style="max-width: 600px; text-align: center;">
            <div class="welcome-header">O Que Estas Frequências Podem Fazer?</div>
            <div class="info-modal-body" style="color: #fff; font-size: 16px; line-height: 1.6; text-align: left;">
                <div style="line-height:1.8;padding:10px 20px 20px 20px;">
                    <p style="text-align:center;font-size:15px;color:#ffd700;margin-bottom:20px;font-weight:600;">
                        Alimentado pelo Motor da Trindade: 37 Hz • 73 Hz • Intenção Consciente
                    </p>
                    
                    <div style="margin-bottom:15px;padding:15px;background:rgba(139,92,246,0.12);border-radius:12px;border-left:4px solid #fbbf24;">
                        <div style="font-size:17px;margin-bottom:8px;">🙏 <b style="color:#ffd700;">Interface de Meditação & Oração</b></div>
                        <p style="font-size:14px;color:#ffffff;margin:0;">
                            Mergulhe na quietude. Sincronize sua mente com o padrão primordial codificado em Gênesis 1:1.
                        </p>
                    </div>
                    
                    <div style="margin-bottom:15px;padding:15px;background:rgba(139,92,246,0.12);border-radius:12px;border-left:4px solid #8b5cf6;">
                        <div style="font-size:17px;margin-bottom:8px;">⚡ <b style="color:#ffd700;">Calibração & Alinhamento de Energia</b></div>
                        <p style="font-size:14px;color:#ffffff;margin:0;">
                            Execute protocolos harmônicos derivados da arquitetura numérica antiga. Estabilize, centre e refine seu campo.
                        </p>
                    </div>
                    
                    <div style="margin-bottom:15px;padding:15px;background:rgba(139,92,246,0.12);border-radius:12px;border-left:4px solid #fbbf24;">
                        <div style="font-size:17px;margin-bottom:8px;">🌙 <b style="color:#ffd700;">Modo Descanso / Reset do Sistema</b></div>
                        <p style="font-size:14px;color:#ffffff;margin:0;">
                            Entre em estados de restauração profunda. Deixe o corpo aquietar, a mente relaxar e o sistema se recalibrar.
                        </p>
                    </div>
                    
                    <div style="margin-bottom:15px;padding:15px;background:rgba(139,92,246,0.12);border-radius:12px;border-left:4px solid #8b5cf6;">
                        <div style="font-size:17px;margin-bottom:8px;">✨ <b style="color:#ffd700;">Matriz de Fluxo Criativo</b></div>
                        <p style="font-size:14px;color:#ffffff;margin:0;">
                            Desbloqueie inspiração, clareza e estados de fluxo de alto foco ativando vias de ressonância cognitiva.
                        </p>
                    </div>
                    
                    <p style="text-align:center;font-size:12px;color:#a78bfa;margin-top:15px;font-style:italic;">
                        Tecnologia espiritual para exploração e autoalinhamento—não é um sistema médico.
                    </p>
                </div>
            </div>
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 15px; padding-bottom: 20px;">
                <button onclick="showHowToUse()" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 15px 35px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 20px rgba(251,191,36,0.4);">Como Usar ➡️</button>
                <button onclick="skipToApp()" style="background: rgba(26,0,51,0.7); color: #e9d5ff; border: 1px solid rgba(139,92,246,0.5); border-radius: 25px; padding: 15px 25px; font-size: 16px; font-weight: 600; cursor: pointer;">Pular</button>
            </div>
        </div>
    </div>

    <!-- How to Use Modal -->
    <div id="howToUseModal" class="info-modal" style="z-index:9999997;">
        <div class="info-modal-content" style="max-width: 600px; text-align: center;">
            <div class="welcome-header">Sua Primeira Sessão em 3 Passos</div>
            <div class="welcome-subheader" style="font-size:14px;color:#e9d5ff;margin-bottom:15px;">Início Rápido Quântico</div>
            <div class="info-modal-body" style="color: #fff; font-size: 16px; line-height: 1.6; text-align: left;">
                <div style="line-height:1.8;padding:10px 20px 20px 20px;">
                    <div style="background:rgba(251,191,36,0.15);border-radius:12px;padding:18px;margin-bottom:18px;border-left:4px solid #fbbf24;">
                        <ol style="text-align:left;color:#ffffff;font-size:14px;line-height:1.7;padding-left:20px;margin:0;">
                            <li style="margin-bottom:12px;">
                                <b style="color:#ffd700;">Selecione "Criação Gênesis"</b><br>
                                <span style="font-size:13px;color:#e9d5ff;">Acesse a pura Frequência Base da Trindade 37 + 73 Hz—<br>o projeto harmônico original codificado em Gênesis 1:1.</span>
                            </li>
                            <li style="margin-bottom:12px;">
                                <b style="color:#ffd700;">Configure Sua Janela de Imersão</b><br>
                                <span style="font-size:13px;color:#e9d5ff;">Escolha 5–10 minutos para sua primeira sessão.<br>Fones de ouvido = imersão quântica de campo profundo.<br>Alto-falantes = exposição harmônica ambiente.<br>Comece curto. Estenda quando seu sistema se adaptar.</span>
                            </li>
                            <li>
                                <b style="color:#ffd700;">Ative a Sequência</b><br>
                                <span style="font-size:13px;color:#e9d5ff;">Pressione TOCAR.<br>Desacelere sua respiração.<br>Deixe o campo se estabilizar.<br>Mantenha uma única intenção: "paz", "clareza" ou "gratidão".</span>
                            </li>
                        </ol>
                    </div>
                    
                    <div style="background:rgba(139,92,246,0.12);border-radius:12px;padding:15px;margin-bottom:15px;">
                        <p style="font-size:15px;color:#e9d5ff;margin-bottom:10px;font-weight:600;">
                            Controles Dentro do Sistema
                        </p>
                        <ul style="text-align:left;color:#ffffff;font-size:13px;line-height:1.6;padding-left:20px;margin:0;">
                            <li><b style="color:#ffd700;">Categorias</b> — Códigos Bíblicos, Números Angélicos, Solfeggio, Campos Quânticos</li>
                            <li><b style="color:#ffd700;">Volume</b> — Comece baixo para evitar sobrecarga de ressonância</li>
                            <li><b style="color:#ffd700;">Duração</b> — Configure o temporizador da sessão</li>
                        </ul>
                    </div>
                    
                    <div style="background:rgba(251,191,36,0.1);border-radius:10px;padding:15px;">
                        <p style="font-size:15px;color:#ffd700;margin-bottom:8px;font-weight:600;">
                            Dicas Profissionais
                        </p>
                        <ul style="text-align:left;color:#ffffff;font-size:12px;line-height:1.5;padding-left:20px;margin:0;">
                            <li>Use durante meditação, oração, respiração ou yoga</li>
                            <li>Hidrate-se antes e depois para melhorar a condutividade energética</li>
                            <li>Registre impressões — sessões de frequência frequentemente revelam padrões depois</li>
                        </ul>
                    </div>
                    
                    <div style="background:rgba(139,92,246,0.15);border-radius:10px;padding:15px;margin-top:15px;border:1px solid rgba(139,92,246,0.4);">
                        <p style="font-size:15px;color:#e9d5ff;margin-bottom:8px;font-weight:600;">
                            📚 Guia Gênesis
                        </p>
                        <p style="text-align:left;color:#ffffff;font-size:12px;line-height:1.5;margin:0;">
                            Toque no botão <b style="color:#fbbf24;">Guia Gênesis</b> no topo do app para acessar informações detalhadas das faixas, ver suas conquistas, acompanhar sua sequência de escuta e explorar a ciência por trás de cada frequência.
                        </p>
                    </div>
                </div>
            </div>
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 15px; padding-bottom: 20px;">
                <button onclick="showPWATip()" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 15px 35px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 20px rgba(251,191,36,0.4);">Dica Pro ➡️</button>
                <button onclick="skipToApp()" style="background: rgba(26,0,51,0.7); color: #e9d5ff; border: 1px solid rgba(139,92,246,0.5); border-radius: 25px; padding: 15px 25px; font-size: 16px; font-weight: 600; cursor: pointer;">Pular</button>
            </div>
        </div>
    </div>

    <!-- PWA Tip Modal -->
    <div id="pwaTipModal" class="info-modal" style="z-index:9999996;">
        <div class="info-modal-content" style="max-width: 500px; text-align: center;">
            <div class="welcome-header" id="pwaModalHeader">📲 Instale Frequências Gênesis 📲</div>
            <div class="info-modal-body" style="color: #fff; font-size: 18px; line-height: 1.6;">
                <div style="text-align:center;line-height:1.8;padding:10px 20px 20px 20px;">
                    <p style="font-size:17px;color:#ffd700;margin-bottom:15px;font-weight:600;">
                        Obtenha a Experiência Completa
                    </p>
                    <div style="background:linear-gradient(135deg,rgba(139,92,246,0.15),rgba(251,191,36,0.15));border-radius:14px;padding:18px;margin:15px 0;">
                        <ul style="text-align:left;max-width:350px;margin:0 auto;color:#ffffff;font-size:14px;line-height:1.8;list-style:none;padding:0;">
                            <li>✨ <b style="color:#ffd700;">Funciona offline</b> — Ouça a qualquer hora</li>
                            <li>🚀 <b style="color:#ffd700;">Carregamento mais rápido</b> — Acesso com um toque</li>
                            <li>📱 <b style="color:#ffd700;">Modo tela cheia</b> — Sem barras do navegador</li>
                            <li>🏆 <b style="color:#ffd700;">Acompanhar progresso</b> — Sequências e conquistas</li>
                        </ul>
                    </div>
                    <div id="pwaInstructions" style="background:rgba(139,92,246,0.12);border-radius:10px;padding:12px;margin:15px 0;">
                        <p style="color:#e9d5ff;font-weight:600;margin-bottom:6px;font-size:14px;">Como instalar:</p>
                        <p id="pwaInstallText" style="color:#ffffff;font-size:13px;margin:0;">
                            Toque em <b>Compartilhar</b> (iOS) ou <b>Menu ⋮</b> (Android)<br>
                            → Selecione <b>"Adicionar à Tela Inicial"</b>
                        </p>
                    </div>
                    <p style="font-size:12px;color:#a78bfa;margin-top:15px;">
                        Você pode fazer isso depois pelo menu!
                    </p>
                </div>
            </div>
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 15px; padding-bottom: 20px;">
                <button onclick="skipToApp()" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 15px 35px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 20px rgba(251,191,36,0.4);">Começar a Explorar →</button>
            </div>
        </div>
    </div>
    <div id="upgradeBenefitsModal" class="info-modal" style="z-index:9999995; display: none !important;">
        <div class="info-modal-content" style="max-width: 450px; text-align: center;">
            <div class="welcome-header">Desbloquear Acesso Premium</div>
            <div class="welcome-subheader" style="font-size:14px;color:#e9d5ff;margin-bottom:15px;">Pronto para abrir a próxima camada do Motor Gênesis?</div>
            <div class="info-modal-body" style="color: #fff; font-size: 16px; line-height: 1.6;">
                <div style="line-height:1.8;padding:10px 20px 20px 20px;">
                    
                    <div style="margin-bottom:12px;padding:12px;background:rgba(251,191,36,0.1);border-radius:10px;border-left:3px solid #fbbf24;">
                        <div style="font-size:15px;margin-bottom:4px;"><b style="color:#ffd700;">🎵 Controles de Frequência Independentes</b></div>
                        <p style="font-size:13px;color:#ffffff;margin:0;">
                            Module cada canal harmônico com precisão.<br>Crie sua própria assinatura de ressonância.
                        </p>
                    </div>
                    
                    <div style="margin-bottom:12px;padding:12px;background:rgba(139,92,246,0.1);border-radius:10px;border-left:3px solid #8b5cf6;">
                        <div style="font-size:15px;margin-bottom:4px;"><b style="color:#e9d5ff;">💾 Exportar Faixas para Ouvir Offline</b></div>
                        <p style="font-size:13px;color:#ffffff;margin:0;">
                            Salve frequências como arquivos WAV e reproduza no<br><b style="color:#ffd700;">VLC Player gratuito</b>, Spotify ou qualquer app de música.<br>Perfeito para ouvir com o celular no bolso!
                        </p>
                    </div>
                    
                    <div style="margin-bottom:12px;padding:12px;background:rgba(251,191,36,0.1);border-radius:10px;border-left:3px solid #fbbf24;">
                        <div style="font-size:15px;margin-bottom:4px;"><b style="color:#ffd700;">∞ Duração de Sessão Ilimitada</b></div>
                        <p style="font-size:13px;color:#ffffff;margin:0;">
                            Execute ciclos prolongados para meditação profunda, sono<br>ou imersão sustentada em frequências.
                        </p>
                    </div>
                    
                    <div style="margin-bottom:12px;padding:12px;background:rgba(139,92,246,0.1);border-radius:10px;border-left:3px solid #8b5cf6;">
                        <div style="font-size:15px;margin-bottom:4px;"><b style="color:#e9d5ff;">📲 Upgrade Gratuito na App Store</b></div>
                        <p style="font-size:13px;color:#ffffff;margin:0;">
                            Quando o app completo Frequências Gênesis for lançado,<br>seu acesso se expande automaticamente—sem custo extra.
                        </p>
                    </div>
                    
                    <div style="text-align:center;background:linear-gradient(135deg,rgba(251,191,36,0.2),rgba(139,92,246,0.2));border-radius:14px;padding:18px;margin:18px 0;border:2px solid rgba(251,191,36,0.5);box-shadow: 0 0 20px rgba(251,191,36,0.15);">
                        <p style="font-size:22px;color:#ffd700;font-weight:800;margin-bottom:6px;text-shadow: 0 0 10px rgba(251,191,36,0.3);">
                            🔓 Ativação Vitalícia
                        </p>
                        <p style="font-size:14px;color:#ffffff;margin-bottom:4px;">
                            Uma única ativação desbloqueia tudo.<br>Sem assinaturas. Sem renovações.
                        </p>
                        <p style="font-size:12px;color:#e9d5ff;">
                            Entre no sistema completo.
                        </p>
                    </div>
                </div>
            </div>
            <div style="display: flex; flex-direction: column; gap: 12px; align-items: center; margin-top: 15px; padding: 0 20px;">
                <a href="https://glamhorus.etsy.com/au/listing/4421122004/genesis-frequencies-49-trinity-layered" target="_blank" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 16px 40px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 20px rgba(251,191,36,0.4); text-decoration: none; display: inline-block;">Obter Premium Agora</a>
                <button onclick="skipToApp()" style="background: rgba(26,0,51,0.7); color: #e9d5ff; border: 1px solid rgba(139,92,246,0.5); border-radius: 25px; padding: 12px 30px; font-size: 16px; font-weight: 600; cursor: pointer;">Experimentar Versão Gratuita</button>
                <p style="font-size:11px;color:#a78bfa;margin-top:5px;">
                    Você pode fazer upgrade a qualquer momento nas Configurações.
                </p>
            </div>
        </div>
    </div>

    <!-- Upgrade Modal - HIDDEN (Free version - only export is premium) -->
    <div id="upgradeModal" class="upgrade-modal" style="display: none !important;">
        <div class="upgrade-modal-content" style="max-width: 450px;">
            <button class="upgrade-close" onclick="closeUpgradeModal()">×</button>
            <div class="upgrade-modal-header" data-translate="upgradeToPremium">
                <i data-lucide="star" class="lucide-icon lucide-icon-lg icon-gold"></i> Fazer Upgrade para Premium
            </div>
            <div class="upgrade-modal-body">
                <p style="margin-bottom: 20px; font-size: 16px; text-align: center; color: #c4b5fd;">
                    Desbloqueie todo o poder das frequências sagradas
                </p>

                <!-- Single Premium Card -->
                <div class="tier-card premium holographic-card" style="max-width: 100%; margin: 0 auto 20px;">
                    <div class="tier-price" style="font-size: 42px; text-align: center;">R$ 49,90 <span style="font-size: 16px;">/ vitalício</span></div>
                    
                    <ul style="list-style: none; padding: 0; margin: 25px 0; text-align: left; font-size: 14px; color: #e5e7eb;">
                        <li style="margin-bottom: 12px;"><i data-lucide="check" class="lucide-icon icon-green" style="width:18px;height:18px;"></i> <b>Todas as 49 faixas de frequência</b></li>
                        <li style="margin-bottom: 12px;"><i data-lucide="check" class="lucide-icon icon-green" style="width:18px;height:18px;"></i> <b>Tempo de escuta ilimitado</b></li>
                        <li style="margin-bottom: 12px;"><i data-lucide="check" class="lucide-icon icon-green" style="width:18px;height:18px;"></i> <b>Controles de volume individuais</b></li>
                        <li style="margin-bottom: 12px;"><i data-lucide="check" class="lucide-icon icon-green" style="width:18px;height:18px;"></i> <b>Exportar WAV</b> - Reproduza no VLC Player gratuito</li>
                        <li style="margin-bottom: 12px;"><i data-lucide="check" class="lucide-icon icon-green" style="width:18px;height:18px;"></i> <b>Manter tela ativa</b></li>
                        <li style="margin-bottom: 12px;"><i data-lucide="check" class="lucide-icon icon-green" style="width:18px;height:18px;"></i> <b>Sistema de conquistas</b></li>
                        <li style="margin-bottom: 12px;"><i data-lucide="check" class="lucide-icon icon-green" style="width:18px;height:18px;"></i> <b>Atualizações futuras incluídas</b></li>
                    </ul>
                    
                    <a href="https://glamhorus.etsy.com/au/listing/4421122004/genesis-frequencies-49-trinity-layered" class="upgrade-btn" target="_blank" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; font-size: 18px; padding: 14px 30px; width: 100%; text-align: center; display: block; box-sizing: border-box;">
                        👑 Obter Premium Agora
                    </a>
                </div>

                <p style="margin: 15px 0; color: #10b981; font-weight: 600; text-align: center; line-height: 1.6; font-size: 13px;">
                    ✅ Pagamento único • Acesso vitalício<br>
                    🔒 Sem assinaturas • Nenhum dado coletado
                </p>

                <!-- Enter Code Button -->
                <div style="text-align: center; margin: 15px 0; padding-top: 15px; border-top: 1px solid rgba(139,92,246,0.3);">
                    <p style="color: #9ca3af; font-size: 12px; margin-bottom: 8px;">Já possui uma chave de licença?</p>
                    <button onclick="closeUpgradeModal(); showLicenseModal();" 
                        style="background: rgba(139,92,246,0.2); color: #c4b5fd; border: 1px solid rgba(139,92,246,0.5); border-radius: 20px; padding: 8px 20px; font-size: 13px; font-weight: 600; cursor: pointer;">
                        🔑 Inserir Chave de Licença
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- License Key Modal -->
    <div id="licenseModal" class="upgrade-modal" style="display: none;">
        <div class="upgrade-modal-content" style="max-width: 450px; text-align: center;">
            <button class="upgrade-close" onclick="closeLicenseModal()">×</button>
            <div style="font-size: 48px; margin-bottom: 15px;">🔑</div>
            <div class="upgrade-modal-header" style="font-size: 24px; margin-bottom: 10px;">
                Inserir Chave de Licença
            </div>
            <div id="licenseCurrentTier" style="color: #10b981; font-size: 14px; margin-bottom: 20px; display: none;">
                ✅ Você possui <span id="currentTierName">Premium</span>
            </div>
            <div class="upgrade-modal-body">
                <p style="margin-bottom: 20px; font-size: 15px; color: #c4b5fd;">
                    Cole sua chave de licença Premium:
                </p>
                
                <div style="margin-bottom: 15px;">
                    <input type="text" id="licenseKeyFull" placeholder="QMFG-XXXX-XXXX-XXXX" 
                        style="width: 100%; max-width: 280px; padding: 14px; text-align: center; background: rgba(139,92,246,0.2); border: 2px solid rgba(139,92,246,0.4); border-radius: 10px; color: #fff; font-size: 18px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;"
                        oninput="formatLicenseKey(this)" maxlength="19">
                </div>
                
                <div id="licenseError" style="color: #ef4444; font-size: 14px; margin-bottom: 15px; display: none;"></div>
                <div id="licenseSuccess" style="color: #10b981; font-size: 14px; margin-bottom: 15px; display: none;"></div>
                
                <button id="activateLicenseBtn" onclick="activateLicense()" 
                    style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 14px 40px; font-size: 16px; font-weight: 700; cursor: pointer; width: 100%; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(251,191,36,0.3);">
                    ✨ Ativar Licença
                </button>
                
                <div style="border-top: 1px solid rgba(139,92,246,0.3); padding-top: 20px;">
                    <p style="color: #9ca3af; font-size: 13px; margin-bottom: 12px;">Não possui uma chave de licença?</p>
                    <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                        <a href="https://glamhorus.etsy.com/au/listing/4421122004/genesis-frequencies-49-trinity-layered" target="_blank" 
                            style="background: rgba(139,92,246,0.3); color: #c4b5fd; border: 1px solid rgba(139,92,246,0.5); border-radius: 20px; padding: 10px 20px; font-size: 14px; font-weight: 600; text-decoration: none;">
                            Comprar Premium R$ 49,90
                        </a>
                    </div>
                </div>
                
                <div id="deviceInfo" style="margin-top: 20px; font-size: 12px; color: #6b7280;"></div>
                
                <div style="margin-top: 15px; padding: 12px; background: rgba(251,191,36,0.1); border: 1px solid rgba(251,191,36,0.3); border-radius: 8px;">
                    <p style="color: #fbbf24; font-size: 11px; margin: 0;">📱 <strong>Nota:</strong> O navegador Safari e o app na Tela Inicial usam armazenamento separado. Você precisará inserir sua licença em ambos. Sua chave funciona em 5 dispositivos.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        
        <div class="header">
            <div class="hebrew-header">בְּרֵאשִׁית בָּרָא אֱלֹהִים אֵת הַשָּׁמַיִם וְאֵת הָאָרֶץ</div>
            <div class="hebrew-translation" data-translate="hebrewTranslation">No princípio Deus criou os céus e a terra</div>
            <div style="font-size:22px; font-weight:800; color:#fbbf24; text-align:center; margin-bottom:2px;">Frequências Gênesis</div>
            <div style="font-size:16px; font-weight:600; color:#ffffff; text-align:center; margin-bottom:10px; text-shadow: 0 1px 2px rgba(0,0,0,0.3);">inspirado por</div>
            <h1 class="main-title" data-translate="title" style="margin-bottom:0;">Gênesis 1:1</h1>
            <div class="subtitle" data-translate="subtitle">Sistema Bíblico de Frequências da Trindade</div>
            <div class="divider"></div>
            <div class="gematria" style="font-size: 18px;">37 Hz + 73 Hz</div>
            <div class="gematria" style="font-size: 15px; margin-top: -15px;" data-translate="pattern">Amplificador de Oração</div>

            <!-- Sacred Guide Button -->
            <div style="text-align: center; margin: 20px 0;">
                <button id="genesisCompanionBtn" class="btn-instructions" onclick="handleCompanionClick(event)" style="font-size: 18px; font-weight: 700; background: linear-gradient(90deg, #8b5cf6 0%, #fbbf24 100%); color: #1a0033; border: none; border-radius: 12px; padding: 10px 24px; box-shadow: 0 2px 12px rgba(139,92,246,0.15); cursor: pointer; position: relative; z-index: 1000; pointer-events: auto; animation: companionShimmer 4s ease-in-out infinite;" data-translate="genesisCompanion">
                    Companheiro Gênesis
                </button>
            </div>

            <!-- Instructions Panel (expandable) -->
            <div id="instructionsPanel" class="instructions-panel" style="display: none; max-width: 900px; margin: 0 auto 18px auto; background: rgba(26,0,51,0.97); border-radius: 18px; box-shadow: 0 8px 32px rgba(139,92,246,0.18); padding: 20px; color: #fff; z-index: 1000000; position: relative;">
                <div class="instructions-content" style="text-align:center;">
                    <div class="instructions-header" style="display: flex; justify-content: center; align-items: center;">
                        <h2 style="font-size: 24px; color: #fbbf24; font-weight: 800; margin: 0 auto; text-align:center; width:100%;" data-translate="genesisFrequencyCompanion">Companheiro de Frequências Gênesis</h2>
                    </div>
                    
                    <!-- Personalized Welcome Header -->
                    <div id="companionWelcomeHeader" style="margin: 20px 0; padding: 20px; background: linear-gradient(135deg, rgba(139,92,246,0.15), rgba(251,191,36,0.1)); border-radius: 16px; border: 1px solid rgba(251,191,36,0.2);">
                        <div id="companionGreeting" style="font-size: 20px; color: #fbbf24; font-weight: 700; margin-bottom: 12px;">
                            <!-- Personalized greeting will be rendered by JS -->
                        </div>
                        <div id="companionDailyWisdom" style="font-size: 15px; color: #c4b5fd; font-style: italic; margin-bottom: 16px; line-height: 1.5;">
                            <!-- Daily wisdom quote will be rendered by JS -->
                        </div>
                        <div id="companionQuickStats" style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-bottom: 16px;">
                            <!-- Quick stats will be rendered by JS -->
                        </div>
                        <div id="companionQuickActions" style="display: flex; justify-content: center; gap: 12px; flex-wrap: wrap;">
                            <!-- Quick action buttons will be rendered by JS -->
                        </div>
                    </div>
                    
                    <div class="instructions-body" style="margin-top: 18px;">
                        <!-- BEGIN: Expandable/Collapsible Instructions Tab Structure -->
                        <div id="instructionsAccordion" class="instructions-accordion">
                            <!-- Sections will be dynamically rendered here by JS for accordion, search, and navigation -->
                        </div>

                        <div style="margin-top:32px; text-align:center; color:#fbbf24; font-size:18px; font-weight:700;" data-translate="completeCompanion">Seu companheiro completo do Gênesis para domínio das frequências divinas.</div>
                        
                        <!-- Return to Tracks Button -->
                        <div style="margin-top: 25px; text-align: center;">
                            <button onclick="window.toggleInstructions();" style="background: linear-gradient(90deg, #8b5cf6, #6b46c1); color: #fff; border: none; border-radius: 25px; padding: 15px 35px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(139,92,246,0.4);" data-translate="returnToTracks">
                                ⬅️ Voltar às Faixas
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Premium Upgrade CTA -->
        <div id="premiumCtaTop" class="section premium-cta-section" style="text-align: center; margin: 30px 0; padding: 25px; background: linear-gradient(135deg, rgba(26,0,51,0.8), rgba(139,92,246,0.6)); border-radius: 15px; border: 2px solid rgba(251,191,36,0.3); position: relative; z-index: 1100;">
            <h3 id="premiumCtaTopTitle" style="color: #fbbf24; font-size: 22px; font-weight: 700; margin-bottom: 15px;" data-translate="readyToUnlock">✨ Pronto para Desbloquear Recursos Premium?</h3>
            <p style="color: #c4b5fd; font-size: 16px; margin-bottom: 20px; line-height: 1.5;" data-translate="premiumCtaDesc">
                Obtenha acesso vitalício a controles de volume individuais, durações personalizadas, exportação WAV (reproduza no VLC Player gratuito!), sistema de conquistas, além de upgrade gratuito quando lançarmos na App Store!
            </p>
            <button onclick="showUpgradeModal()" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 15px 30px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(251,191,36,0.3);" data-translate="upgradeToPremium">
                Fazer Upgrade para Premium
            </button>
            <p style="margin-top: 15px; font-size: 14px; color: #9ca3af;" data-translate="oneTimePayment">
                Pagamento único • Acesso vitalício • Sem assinaturas
            </p>
        </div>

        <div class="trinity-base">
            <div class="trinity-title" data-translate="trinityTitle">Frequências da Fundação Trindade</div>
            <div class="trinity-frequencies">
                <div class="trinity-freq">
                    <div class="hz">37 Hz</div>
                    <div class="label" data-translate="formMatter">Forma/Matéria</div>
                </div>
                <div class="trinity-arrow">+</div>
                <div class="trinity-freq">
                    <div class="hz">73 Hz</div>
                    <div class="label" data-translate="spiritDivine">Espírito/Divino</div>
                </div>
            </div>
        </div>

        <div class="visualizer">
            <div class="frequency-vibration">
                <div class="vibration-wave">
                    <svg viewBox="0 0 1000 100" preserveAspectRatio="none">
                        <path d="M0,50 Q50,20 100,50 T200,50 T300,50 T400,50 T500,50 T600,50 T700,50 T800,50 T900,50 T1000,50" 
                              fill="none" stroke="rgba(251, 191, 36, 0.8)" stroke-width="3"/>
                    </svg>
                </div>
                <div class="vibration-wave">
                    <svg viewBox="0 0 1000 100" preserveAspectRatio="none">
                        <path d="M0,50 Q25,15 50,50 T100,50 T150,50 T200,50 T250,50 T300,50 T350,50 T400,50 T450,50 T500,50 T550,50 T600,50 T650,50 T700,50 T750,50 T800,50 T850,50 T900,50 T950,50 T1000,50" 
                              fill="none" stroke="rgba(139, 92, 246, 0.8)" stroke-width="3"/>
                    </svg>
                </div>
                <div class="vibration-wave">
                    <svg viewBox="0 0 1000 100" preserveAspectRatio="none">
                        <path d="M0,50 Q40,25 80,50 T160,50 T240,50 T320,50 T400,50 T480,50 T560,50 T640,50 T720,50 T800,50 T880,50 T960,50 T1000,50" 
                              fill="none" stroke="rgba(168, 85, 247, 0.3)" stroke-width="3"/>
                    </svg>
                </div>
            </div>
            <div class="sacred-geometry"></div>
            <div class="visualizer-content">
            </div>
        </div>

        

        <div class="section">
            <div class="section-title" data-translate="recipesTitle">Receitas de Frequência da Trindade</div>
            <div class="recipes" id="recipes">
                <!-- Recipes will be populated by JavaScript -->
            </div>
        </div>

        <div class="section">
            <div class="section-title" data-translate="controlsTitle">Controles de Frequência</div>
            <div class="controls">
                <div class="frequency-controls premium-lock" onclick="if(!hasPremiumAccess()) showUpgradeModal();" style="cursor: pointer;">
                    <div class="control-group">
                        <div>
                            <input type="number" id="freq1" min="0.1" max="100000" step="0.1" value="37">
                            <span>Hz</span>
                        </div>
                        <input type="range" id="volume1" min="0" max="100" value="50">
                        <div class="range-value" id="volume1Value">50%</div>
                    </div>
                    
                    <div class="control-group">
                        <div>
                            <input type="number" id="freq2" min="0.1" max="100000" step="0.1" value="73">
                            <span>Hz</span>
                        </div>
                        <input type="range" id="volume2" min="0" max="100" value="50">
                        <div class="range-value" id="volume2Value">50%</div>
                    </div>
                    
                    <div class="control-group">
                        <div>
                            <input type="number" id="freq3" min="0.1" max="100000" step="0.1" value="0">
                            <span>Hz</span>
                        </div>
                        <input type="range" id="volume3" min="0" max="100" value="50">
                        <div class="range-value" id="volume3Value">50%</div>
                    </div>
                </div>
                
                <div class="control-group duration-control premium-lock" onclick="if(!hasPremiumAccess()) showUpgradeModal();" style="cursor: pointer;">
                    <label for="duration" data-translate="duration">⏱️ Duração</label>
                    <div class="duration-input-wrapper">
                        <div class="duration-input-container">
                            <input type="text" id="duration" placeholder="05:00" value="05:00" pattern="[0-9]{1,2}:[0-9]{2}" maxlength="5">
                        </div>
                        <div class="duration-buttons">
                            <button type="button" class="duration-btn" data-time="01:00">1m</button>
                            <button type="button" class="duration-btn" data-time="05:00">5m</button>
                            <button type="button" class="duration-btn" data-time="10:00">10m</button>
                            <button type="button" class="duration-btn" data-time="30:00">30m</button>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="button button-primary" id="playBtn" aria-label="Play frequency generator" data-translate="play">▶ PLAY</button>
                    <button class="button button-danger" id="stopBtn" aria-label="Stop frequency generator" data-translate="stop">⏹ STOP</button>
                    <button class="button button-secondary premium-lock" id="exportBtn" onclick="showExportUpgradeModal()" aria-label="Export as WAV file - Premium feature" data-translate="export">💾 EXPORT</button>
                    <button class="button button-secondary" id="resetBtn" aria-label="Reset frequencies to default" data-translate="reset">🔄 RESET</button>
                </div>
                
                <!-- Keep Screen Awake Toggle -->
                <div id="screenAwakeContainer" style="margin-top: 15px; padding: 12px 15px; background: rgba(139,92,246,0.1); border-radius: 12px; display: flex; align-items: center; justify-content: space-between;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-size: 20px;">📱</span>
                        <div>
                            <div style="color: #e5e7eb; font-size: 14px; font-weight: 600;">Manter Tela Ativa</div>
                            <div style="color: #9ca3af; font-size: 11px;">Impede o áudio de parar quando a tela escurece</div>
                        </div>
                    </div>
                    <label class="toggle-switch" onclick="event.stopPropagation();">
                        <input type="checkbox" id="screenAwakeToggle" disabled>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <!-- Export Tip for Background Listening -->
                <div id="exportTip" style="margin-top: 10px; padding: 10px 15px; background: linear-gradient(135deg, rgba(16,185,129,0.1), rgba(139,92,246,0.1)); border: 1px solid rgba(16,185,129,0.3); border-radius: 10px; display: none;">
                    <div style="display: flex; align-items: flex-start; gap: 10px;">
                        <span style="font-size: 16px;">💡</span>
                        <div style="color: #9ca3af; font-size: 12px; line-height: 1.4;">
                            <b style="color: #10b981;">Dica pro:</b> Exporte sua faixa de frequência como arquivo WAV para salvar e compartilhar!
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="status stopped" id="status" data-translate="ready">
            Pronto para Gerar Frequências Gênesis
        </div>

        <!-- Achievements Section - Collapsible Tab -->
        <div class="section category-tab" id="achievementsSection" style="margin-top: 20px;">
            <div class="category-header" onclick="this.parentElement.classList.toggle('expanded')" style="cursor: pointer;">
                <div class="category-title">
                    <span class="category-icon">✨</span>
                    <span data-translate="yourSpiritualJourney">Sua Jornada Espiritual</span>
                    <span class="category-icon">✨</span>
                </div>
                <div class="category-arrow">▼</div>
            </div>
            <div class="category-content">
                <div id="achievementsPreview" style="padding: 15px;">
                    <!-- Achievement stats and preview will be populated by JavaScript -->
                </div>
                <div style="text-align: center; padding: 10px 15px 20px;">
                    <button onclick="showFullAchievements()" style="background: linear-gradient(90deg, #8b5cf6, #6b46c1); color: #fff; border: none; border-radius: 25px; padding: 12px 25px; font-size: 16px; font-weight: 600; cursor: pointer; box-shadow: 0 4px 15px rgba(139,92,246,0.3); transition: all 0.3s ease;" data-translate="viewAllAchievements">
                        🏆 Ver Todas as Conquistas
                    </button>
                </div>
            </div>
        </div>

        <div class="visualizer" style="margin-top: 20px;">
            <div class="frequency-vibration">
                <div class="vibration-wave">
                    <svg viewBox="0 0 1000 100" preserveAspectRatio="none">
                        <path d="M0,50 Q50,20 100,50 T200,50 T300,50 T400,50 T500,50 T600,50 T700,50 T800,50 T900,50 T1000,50" 
                              fill="none" stroke="rgba(251, 191, 36, 0.8)" stroke-width="3"/>
                    </svg>
                </div>
                <div class="vibration-wave">
                    <svg viewBox="0 0 1000 100" preserveAspectRatio="none">
                        <path d="M0,50 Q25,15 50,50 T100,50 T150,50 T200,50 T250,50 T300,50 T350,50 T400,50 T450,50 T500,50 T550,50 T600,50 T650,50 T700,50 T750,50 T800,50 T850,50 T900,50 T950,50 T1000,50" 
                              fill="none" stroke="rgba(139, 92, 246, 0.8)" stroke-width="3"/>
                    </svg>
                </div>
                <div class="vibration-wave">
                    <svg viewBox="0 0 1000 100" preserveAspectRatio="none">
                        <path d="M0,50 Q40,25 80,50 T160,50 T240,50 T320,50 T400,50 T480,50 T560,50 T640,50 T720,50 T800,50 T880,50 T960,50 T1000,50" 
                              fill="none" stroke="rgba(168, 85, 247, 0.3)" stroke-width="3"/>
                    </svg>
                </div>
            </div>
            <div class="sacred-geometry"></div>
            <div class="visualizer-content">
            </div>
        </div>

        <!-- Bottom Upgrade CTA - HIDDEN (Free version) -->
        <div id="premiumCtaBottom" style="display: none; text-align: center; margin: 40px 0; padding: 30px; background: linear-gradient(135deg, rgba(26,0,51,0.8), rgba(139,92,246,0.6)); border-radius: 20px; border: 2px solid rgba(251,191,36,0.3); position: relative; z-index: 1100;">
            <h3 id="premiumCtaBottomTitle" style="color: #fbbf24; font-size: 24px; margin-bottom: 15px;" data-translate="readyToUnlock">✨ Pronto para Desbloquear Recursos Premium?</h3>
            <p style="color: #c4b5fd; font-size: 16px; margin-bottom: 20px; line-height: 1.6;" data-translate="premiumCtaDesc">
                Obtenha acesso vitalício a controles de volume individuais, durações personalizadas, exportação WAV (toque no VLC Player gratuito!), sistema de conquistas, além de upgrade gratuito quando lançarmos na App Store!
            </p>
            <button onclick="showUpgradeModal()" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 15px 30px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(251,191,36,0.3);" data-translate="upgradeToPremium">
                Faça Upgrade para Premium
            </button>
            <p style="margin-top: 15px; font-size: 14px; color: #9ca3af;" data-translate="oneTimePayment">
                Pagamento único • Acesso vitalício • Sem assinaturas
            </p>
        </div>

        <!-- Share & Earn Footer Section - HIDDEN -->
        <div id="affiliateSection" style="display: none; background: linear-gradient(135deg, #1a2a3e, #0a1f15); border: 2px solid #10b981; border-radius: 16px; padding: 40px 20px; text-align: center; margin-top: 30px; position: relative; z-index: 1100;">
            <div style="max-width: 500px; margin: 0 auto;">
                <h3 style="color: #4ade80; font-size: 24px; margin-bottom: 15px; font-weight: 700;">💰 Programa de Afiliados Em Breve!</h3>
                <p style="color: #ffffff; font-size: 16px; line-height: 1.7; margin-bottom: 20px;">
                    Adora Frequências Gênesis? Registre seu interesse em nosso programa de afiliados e ganhe <strong style="color: #fbbf24;">30% de comissão</strong> por venda!
                </p>
                <button onclick="showAffiliateModal()" style="
                    background: linear-gradient(135deg, #10b981, #059669);
                    color: white;
                    border: none;
                    padding: 16px 36px;
                    border-radius: 25px;
                    font-size: 17px;
                    font-weight: 700;
                    cursor: pointer;
                    box-shadow: 0 4px 25px rgba(16, 185, 129, 0.5);
                ">Registrar Seu Interesse</button>
            </div>
        </div>
    </div>

    <!-- Now Playing Sticky Footer Bar -->
    <div class="now-playing-bar" id="nowPlayingBar">
        <div class="now-playing-info">
            <span class="now-playing-icon">🎵</span>
            <div class="now-playing-text">
                <span class="now-playing-label">Reproduzindo Agora</span>
                <span class="now-playing-track" id="nowPlayingTrack">Criação do Gênesis</span>
            </div>
        </div>
        <div class="now-playing-time" id="nowPlayingTime">00:00</div>
        <div class="now-playing-controls">
            <button class="now-playing-btn stop-btn" onclick="window.generator && window.generator.stop()" title="Parar">⏹</button>
        </div>
    </div>

    <div class="add-to-home" id="addToHome" onclick="showAddToHomeInstructions()" style="cursor: pointer; display: none !important;">
        <button class="add-to-home-close" onclick="event.stopPropagation(); closeAddToHome()">×</button>
        <div class="add-to-home-content" style="flex-direction: column;">
            <span class="add-to-home-icon" id="pwaIcon" style="font-size: 32px; margin-bottom: 8px;">📲</span>
            <span class="add-to-home-text" id="pwaBannerText" style="font-weight:700;" data-translate="addToHomeText">INSTALE Frequências Gênesis para a melhor experiência!</span>
        </div>
    </div>

    <script>
                        // Instructions panel toggle function
                        window.toggleInstructions = function() {
                            console.log('🎯 toggleInstructions called!');
                            var panel = document.getElementById('instructionsPanel');
                            var overlay = document.getElementById('instructionsOverlay');
                            console.log('📋 Panel element:', panel);
                            console.log('📋 Overlay element:', overlay);
                            
                            // If overlay exists, we're closing
                            if (overlay) {
                                console.log('✖️ Closing panel - removing overlay');
                                try {
                                    // First move panel back to header
                                    var header = document.querySelector('.header');
                                    if (header && panel) {
                                        panel.style.cssText = 'display: none; max-width: 900px; margin: 0 auto 18px auto; background: rgba(26,0,51,0.97); border-radius: 18px; box-shadow: 0 8px 32px rgba(139,92,246,0.18); padding: 20px; color: #fff; z-index: 10; position: relative;';
                                        header.appendChild(panel);
                                    }
                                    // Then remove overlay
                                    overlay.remove();
                                    // Restore body scroll
                                    document.body.style.overflow = '';
                                    // Scroll to top
                                    window.scrollTo(0, 0);
                                } catch (e) {
                                    console.error('Error closing panel:', e);
                                    // Fallback: just remove overlay
                                    if (overlay) overlay.remove();
                                    document.body.style.overflow = '';
                                }
                            } else if (panel && (panel.style.display === 'none' || panel.style.display === '')) {
                                console.log('📖 Opening panel');
                                // Create modal overlay
                                var newOverlay = document.createElement('div');
                                newOverlay.id = 'instructionsOverlay';
                                newOverlay.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #1a0a2e; z-index: 2000000; display: flex; align-items: center; justify-content: center; overflow-y: auto;';
                                
                                // No click-to-close on overlay - user must use Return button
                                
                                // Style the panel for modal
                                panel.style.cssText = 'display: block; position: relative; z-index: 2000001; max-width: 900px; margin: 20px; background: rgba(26,0,51,0.97); border-radius: 18px; box-shadow: 0 8px 32px rgba(139,92,246,0.18); padding: 20px; color: #fff; max-height: 90vh; overflow-y: auto;';
                                
                                newOverlay.appendChild(panel);
                                document.body.appendChild(newOverlay);
                                
                                // Refresh translations before rendering - ensure currentLanguage is applied
                                console.log('🌐 Current language for companion panel:', currentLanguage);
                                instructionsSections = getInstructionsSections();
                                renderInstructionsCategories();
                                renderCompanionHeader(); // Force refresh header with current language
                                addInstructionsSearch();
                            }
                        }

                        // Handle companion button click
                        window.handleCompanionClick = function(event) {
                            console.log('👆 Companion button clicked!', event);
                            event.preventDefault();
                            event.stopPropagation();
                            window.toggleInstructions();
                        }
                        
                // Detect device type and update PWA text
                function updatePWAText() {
                    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
                    const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
                    
                    if (!isMobile) {
                        // Desktop
                        const header = document.getElementById('pwaModalHeader');
                        const icon = document.getElementById('pwaIcon');
                        const bannerText = document.getElementById('pwaBannerText');
                        const installText = document.getElementById('pwaInstallText');
                        
                        if (header) header.textContent = '💻 Instalar no Desktop 💻';
                        if (icon) icon.textContent = '💻';
                        if (bannerText) bannerText.textContent = 'INSTALE Frequências Gênesis para a melhor experiência!';
                        if (installText) installText.innerHTML = 'Clique no <b style="color:#fbbf24;">botão de instalar</b> na barra de endereços do seu navegador ou use o menu para instalar';
                    } else if (isIOS) {
                        // iOS devices
                        const header = document.getElementById('pwaModalHeader');
                        const icon = document.getElementById('pwaIcon');
                        const bannerText = document.getElementById('pwaBannerText');
                        const installText = document.getElementById('pwaInstallText');
                        
                        if (header) header.textContent = '📱 Adicionar à Tela Inicial 📱';
                        if (icon) icon.textContent = '📱';
                        if (bannerText) bannerText.textContent = 'ADICIONE à Tela Inicial para a melhor experiência!';
                        if (installText) installText.innerHTML = 'Toque no botão <b style="color:#fbbf24;">Compartilhar</b>, depois <b style="color:#fbbf24;">"Adicionar à Tela de Início"</b>';
                    } else {
                        // Android
                        const header = document.getElementById('pwaModalHeader');
                        const icon = document.getElementById('pwaIcon');
                        const installText = document.getElementById('pwaInstallText');
                        
                        if (header) header.textContent = '📲 Instalar App 📲';
                        if (icon) icon.textContent = '📲';
                        if (installText) installText.innerHTML = 'Toque no <b style="color:#fbbf24;">menu</b> (⋮) e selecione <b style="color:#fbbf24;">"Instalar app"</b> ou <b style="color:#fbbf24;">"Adicionar à tela inicial"</b>';
                    }
                }
                
            
            // Add to Home Screen banner logic (just close, no popup)
            window.closeAddToHome = function() {
                document.getElementById('addToHome').style.display = 'none';
                try { localStorage.setItem('hideAddToHome', 'true'); } catch(e) {}
            };
                            function showAddToHomeInstructions() {
                    const modal = document.createElement('div');
                    modal.style.cssText = `
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0,0,0,0.95);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 99999999;
                        padding: 20px;
                    `;
                    
                    const isIOS = /iPhone|iPad|iPod/.test(navigator.userAgent);
                    const isAndroid = /Android/.test(navigator.userAgent);
                    
                    modal.innerHTML = `
                        <div style="
                            background: linear-gradient(135deg, #1a1625, #2d1b69);
                            border-radius: 24px;
                            padding: 40px 30px;
                            max-width: 500px;
                            width: 100%;
                            text-align: center;
                            border: 2px solid rgba(251,191,36,0.3);
                        ">
                            <div style="font-size: 48px; margin-bottom: 20px;">📲</div>
                            <h2 style="color: #fbbf24; font-size: 24px; font-weight: 800; margin-bottom: 15px;">
                                Adicionar à Tela Inicial
                            </h2>
                            <p style="color: #c4b5fd; font-size: 16px; line-height: 1.6; margin-bottom: 25px;">
                                Para a melhor experiência, adicione Frequências Gênesis à sua tela inicial manualmente:
                            </p>
                            
                            ${isIOS ? `
                                <div style="background: rgba(139,92,246,0.2); border-radius: 16px; padding: 20px; text-align: left; margin-bottom: 20px; border: 1px solid rgba(139,92,246,0.3);">
                                    <div style="color: #fbbf24; font-weight: 700; margin-bottom: 10px; font-size: 14px;">INSTRUÇÕES iOS:</div>
                                    <ol style="color: #e9d5ff; font-size: 15px; line-height: 1.8; padding-left: 20px;">
                                        <li>Toque no <span style="color: #fbbf24; font-weight: 700;">botão Compartilhar</span> <span style="font-size: 20px;">⬆️</span></li>
                                        <li>Role para baixo e toque em <span style="color: #fbbf24; font-weight: 700;">"Adicionar à Tela de Início"</span></li>
                                        <li>Toque em <span style="color: #fbbf24; font-weight: 700;">"Adicionar"</span> no canto superior direito</li>
                                    </ol>
                                </div>
                            ` : isAndroid ? `
                                <div style="background: rgba(139,92,246,0.2); border-radius: 16px; padding: 20px; text-align: left; margin-bottom: 20px; border: 1px solid rgba(139,92,246,0.3);">
                                    <div style="color: #fbbf24; font-weight: 700; margin-bottom: 10px; font-size: 14px;">INSTRUÇÕES ANDROID:</div>
                                    <ol style="color: #e9d5ff; font-size: 15px; line-height: 1.8; padding-left: 20px;">
                                        <li>Toque no <span style="color: #fbbf24; font-weight: 700;">ícone do menu</span> <span style="font-size: 20px;">⋮</span></li>
                                        <li>Toque em <span style="color: #fbbf24; font-weight: 700;">"Adicionar à tela inicial"</span> ou <span style="color: #fbbf24; font-weight: 700;">"Instalar app"</span></li>
                                        <li>Toque em <span style="color: #fbbf24; font-weight: 700;">"Adicionar"</span> ou <span style="color: #fbbf24; font-weight: 700;">"Instalar"</span></li>
                                    </ol>
                                </div>
                            ` : `
                                <div style="background: rgba(139,92,246,0.2); border-radius: 16px; padding: 20px; text-align: left; margin-bottom: 20px; border: 1px solid rgba(139,92,246,0.3);">
                                    <div style="color: #fbbf24; font-weight: 700; margin-bottom: 10px; font-size: 14px;">INSTRUÇÕES DO NAVEGADOR:</div>
                                    <p style="color: #e9d5ff; font-size: 15px; line-height: 1.8;">
                                        Procure pelo <span style="color: #fbbf24; font-weight: 700;">botão de instalar</span> na barra de endereços ou menu do seu navegador, depois siga as instruções para instalar.
                                    </p>
                                </div>
                            `}
                            
                            <button onclick="this.closest('div[style*=fixed]').remove()" style="
                                background: linear-gradient(90deg, #fbbf24, #f59e0b);
                                color: #1a0033;
                                border: none;
                                border-radius: 25px;
                                padding: 15px 40px;
                                font-size: 18px;
                                font-weight: 700;
                                cursor: pointer;
                                box-shadow: 0 4px 20px rgba(251,191,36,0.4);
                            ">Got it!</button>
                        </div>
                    `;
                    
                    document.body.appendChild(modal);
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) modal.remove();
                    });
                }
                document.addEventListener('DOMContentLoaded', function() {
                    updatePWAText();
                    try {
                        if (localStorage.getItem('hideAddToHome') === 'true') {
                            document.getElementById('addToHome').style.display = 'none';
                        } else {
                            document.getElementById('addToHome').style.display = 'block';
                        }
                    } catch(e) {
                        document.getElementById('addToHome').style.display = 'block';
                    }
                });
        // Modal flow functions for first-time users - with Safari/WebKit compatibility
        window.showFrequencyBenefits = function() {
            // Remove Safari early-init style
            var safariStyle = document.getElementById('safari-welcome-fix');
            if (safariStyle) safariStyle.remove();
            
            const welcome = document.getElementById('immersiveWelcome');
            const benefits = document.getElementById('frequencyBenefitsModal');
            welcome.classList.remove('active');
            welcome.style.display = 'none';
            welcome.style.visibility = 'hidden';
            benefits.classList.add('active');
            benefits.style.display = 'flex';
            benefits.style.visibility = 'visible';
            benefits.style.opacity = '1';
        };

        window.showHowToUse = function() {
            const benefits = document.getElementById('frequencyBenefitsModal');
            const howTo = document.getElementById('howToUseModal');
            benefits.classList.remove('active');
            benefits.style.display = 'none';
            howTo.classList.add('active');
            howTo.style.display = 'flex';
            howTo.style.visibility = 'visible';
            howTo.style.opacity = '1';
        };

        window.showPWATip = function() {
            const howTo = document.getElementById('howToUseModal');
            const pwa = document.getElementById('pwaTipModal');
            howTo.classList.remove('active');
            howTo.style.display = 'none';
            pwa.classList.add('active');
            pwa.style.display = 'flex';
            pwa.style.visibility = 'visible';
            pwa.style.opacity = '1';
        };

        window.showUpgradeBenefits = function() {
            console.log('showUpgradeBenefits() called - adding active class to upgrade modal');
            // Hide any current modal
            const pwa = document.getElementById('pwaTipModal');
            if (pwa) {
                pwa.classList.remove('active');
                pwa.style.display = 'none';
            }
            
            // Mark onboarding as complete (Safari-safe)
            try { localStorage.setItem('onboardingComplete', 'true'); } catch(e) {
                try { sessionStorage.setItem('onboardingComplete', 'true'); } catch(e2) {}
            }
            
            // Show benefits screen (as info-modal)
            const benefits = document.getElementById('upgradeBenefitsModal');
            if (benefits) {
                // ensure no other info-modals are open
                document.querySelectorAll('.info-modal.active').forEach(m => {
                    m.classList.remove('active');
                    m.style.display = 'none';
                });
                benefits.classList.add('active');
                benefits.style.display = 'flex';
                benefits.style.visibility = 'visible';
                benefits.style.opacity = '1';
            }
        };

        window.skipToApp = function() {
            // Remove Safari early-init style if present
            var safariStyle = document.getElementById('safari-welcome-fix');
            if (safariStyle) safariStyle.remove();
            
            // Hide all modals with explicit display setting for Safari
            const modals = ['immersiveWelcome', 'frequencyBenefitsModal', 'howToUseModal', 'pwaTipModal', 'upgradeBenefitsModal'];
            modals.forEach(id => {
                const modal = document.getElementById(id);
                if (modal) {
                    modal.classList.remove('active');
                    modal.style.display = 'none';
                    modal.style.visibility = 'hidden';
                    modal.style.opacity = '0';
                }
            });
            
            // Restore body scroll
            document.body.style.overflow = '';
            
            // Mark onboarding as complete (Safari-safe)
            try { localStorage.setItem('onboardingComplete', 'true'); } catch(e) {
                try { sessionStorage.setItem('onboardingComplete', 'true'); } catch(e2) {}
            }
        }

        // Close upgrade benefits modal
        function closeUpgradeBenefitsModal() {
            document.getElementById('upgradeBenefitsModal').classList.remove('active');
        }

        // Debug function to force show upgrade modal (call forceShowUpgrade() in console)
        window.forceShowUpgrade = function() {
            const t = translations.en;
            document.getElementById('upgradeBenefitsModal').innerHTML = `
                <div class="info-modal-content" style="max-width:420px; text-align: center;">
                    <div class="info-modal-header" style="color: #fbbf24; font-size: 28px; margin-bottom: 20px;">${t.premiumFeatures || 'Recursos Premium Incluem:'}</div>
                    <div class="info-modal-body" style="color: #fff; font-size: 16px; line-height: 1.6;">
                        <div style="text-align: left; margin-bottom: 20px;">
                            <div style="margin-bottom: 15px;">
                                <h3 style="color: #c4b5fd; margin-bottom: 8px;">🎵 ${t.volumeControls || 'Controles Individuais de Volume'}</h3>
                                <p>${t.volumeControlsDesc || 'Ajuste cada uma das 3 frequências separadamente para equilíbrio harmônico perfeito.'}</p>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <h3 style="color: #c4b5fd; margin-bottom: 8px;">⏱️ ${t.customDurations || 'Durações Personalizadas'}</h3>
                                <p>${t.customDurationsDesc || 'Defina qualquer duração de sessão de 1 minuto a horas de reprodução contínua.'}</p>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <h3 style="color: #c4b5fd; margin-bottom: 8px;">🏆 ${t.achievementSystem || 'Sistema de Conquistas'}</h3>
                                <p>${t.achievementSystemDesc || 'Acompanhe seu progresso, desbloqueie conquistas e registre suas sessões sagradas.'}</p>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <h3 style="color: #c4b5fd; margin-bottom: 8px;">📱 ${t.freeAppUpgrade || 'Atualização Gratuita na App Store'}</h3>
                                <p>${t.freeAppUpgradeDesc || 'Quando lançarmos na App Store, usuários premium recebem atualização automática gratuita com todos os recursos!'}</p>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <h3 style="color: #c4b5fd; margin-bottom: 8px;">💾 ${t.exportSave || 'Exportar e Salvar Faixas'}</h3>
                                <p>${t.exportSaveDesc || 'Salve suas combinações de frequência como arquivos WAV para uso offline.'}</p>
                            </div>
                        </div>
                        <div style="background: rgba(251,191,36,0.1); padding: 15px; border-radius: 12px; margin-bottom: 20px; border: 1px solid rgba(251,191,36,0.3);">
                            <p style="font-size: 18px; color: #fbbf24; font-weight: 600; margin-bottom: 8px;">✨ ${t.lifetimeAccess || 'Acesso Vitalício'} - ${t.oneTimePayment || 'Pagamento Único'}</p>
                            <p style="font-size: 14px; color: #d1d5db;">${t.joinThousands || 'Junte-se a milhares desbloqueando a experiência completa do Gênesis'}</p>
                        </div>
                        <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px;">
                            <button onclick="showUpgradeModal()" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 15px 30px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(251,191,36,0.3);">${t.upgradeNow || 'Atualizar Agora'}</button>
                            <button onclick="closeUpgradeBenefitsModal()" style="background: rgba(26,0,51,0.7); color: #c4b5fd; border: none; border-radius: 25px; padding: 15px 30px; font-size: 16px; font-weight: 600; cursor: pointer;">${t.maybeLater || 'Talvez Depois'}</button>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('upgradeBenefitsModal').classList.add('active');
        };

        // Freemium upgrade functions
        function showUpgradeModal() {
            // Close any active welcome modals first
            document.querySelectorAll('.info-modal.active').forEach(m => m.classList.remove('active'));
            localStorage.setItem('onboardingComplete', 'true');

            // Close any info-modals that could be dimming the screen
            document.querySelectorAll('.info-modal.active').forEach(m => m.classList.remove('active'));

            // Show upgrade modal on top
            const modal = document.getElementById('upgradeModal');
            if (modal) {
                modal.style.display = 'flex';
                modal.style.opacity = '1';
            }
        }

        function closeUpgradeModal() {
            document.getElementById('upgradeModal').style.display = 'none';
            // Update premium features in case user just upgraded
            setTimeout(updatePremiumFeatures, 100);
        }

        // Export Upgrade Modal - $19.99 premium feature
        function showExportUpgradeModal() {
            // Create modal if it doesn't exist
            let modal = document.getElementById('exportUpgradeModal');
            if (!modal) {
                modal = document.createElement('div');
                modal.id = 'exportUpgradeModal';
                modal.innerHTML = `
                    <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; z-index: 999999; padding: 15px; overflow-y: auto;">
                        <div style="background: linear-gradient(135deg, #1a0a2e, #2d1b4e); border-radius: 20px; padding: 25px; max-width: 340px; width: 100%; text-align: center; border: 2px solid rgba(251,191,36,0.4); box-shadow: 0 15px 50px rgba(251,191,36,0.3); position: relative; max-height: 90vh; overflow-y: auto;">
                            <button onclick="closeExportUpgradeModal()" style="position: absolute; top: 10px; right: 15px; background: none; border: none; color: #9ca3af; font-size: 24px; cursor: pointer; z-index: 10;">&times;</button>
                            
                            <div style="font-size: 40px; margin-bottom: 10px;">💾</div>
                            <h2 style="color: #fbbf24; font-size: 22px; margin-bottom: 10px; font-weight: 800;">Export to WAV</h2>
                            <p style="color: #e0d4ff; font-size: 14px; line-height: 1.5; margin-bottom: 15px;">
                                Export any frequency as a high-quality WAV file!
                            </p>
                            
                            <div style="background: rgba(251,191,36,0.1); border-radius: 12px; padding: 15px; margin-bottom: 15px; border: 1px solid rgba(251,191,36,0.3);">
                                <div style="color: #fff; font-size: 32px; font-weight: 900;">$19.99</div>
                                <div style="color: #10b981; font-size: 12px; margin-top: 3px;">One-time • Lifetime access</div>
                            </div>
                            
                            <ul style="text-align: left; color: #fff; font-size: 13px; line-height: 1.8; margin-bottom: 15px; list-style: none; padding-left: 5px;">
                                <li>✅ Unlimited WAV exports</li>
                                <li>✅ High-quality 44.1kHz audio</li>
                                <li>✅ Play offline anywhere</li>
                            </ul>
                            
                            <a href="https://www.etsy.com/listing/YOUR_EXPORT_LISTING" target="_blank" style="display: inline-block; background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #1a0033; padding: 12px 30px; border-radius: 25px; font-size: 16px; font-weight: 800; text-decoration: none; box-shadow: 0 5px 20px rgba(251,191,36,0.4); margin-bottom: 10px;">
                                💾 Get Export Feature
                            </a>
                            
                            <p style="color: #9ca3af; font-size: 11px; margin-top: 10px;">
                                Already purchased? <a href="#" onclick="closeExportUpgradeModal(); showLicenseModal(); return false;" style="color: #a78bfa; text-decoration: underline;">Enter license key</a>
                            </p>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
            }
            modal.style.display = 'block';
        }
        
        function closeExportUpgradeModal() {
            const modal = document.getElementById('exportUpgradeModal');
            if (modal) modal.style.display = 'none';
        }

        // Function to enable/disable premium features based on access status
        function updatePremiumFeatures() {
            // Check if user has premium (includes old 'ultimate' keys for backward compatibility)
            const hasPremium = typeof hasPremiumAccess === 'function' ? hasPremiumAccess() : 
                               localStorage.getItem('gfgn_license_tier') === 'premium' || 
                               localStorage.getItem('gfgn_license_tier') === 'ultimate';
            
            // If premium, unlock all controls
            if (hasPremium) {
                unlockPremiumControls();
            }
        }
        const translations = {
            en: {
                hebrewTranslation: "No princípio Deus criou os céus e a terra",
                title: "Gênesis 1:1",
                subtitle: "O Som da Criação",
                pattern: "Amplificador de Oração",
                trinityTitle: "✨ Frequências Fundamentais da Trindade ✨",
                formMatter: "Forma/Matéria",
                spiritDivine: "Espírito/Divino",
                beatPattern: "Padrão de Batida",
                recipesTitle: "✨ Receitas de Frequências da Trindade ✨",
                controlsTitle: "✨ Controles de Frequência ✨",
                duration: "Duração",
                play: "REPRODUZIR",
                pause: "PAUSAR",
                stop: "PARAR",
                export: "EXPORTAR WAV",
                reset: "REINICIAR",
                ready: "✨ Pronto para Gerar Frequências Gênesis ✨",
                stopped: "✨ Parado - Pronto para Gerar ✨",
                playing: "🎵 Reproduzindo",
                remaining: "restante",
                selected: "Selecionado",
                autoBalanced: "Volumes auto-balanceados",
                addToHomeText: "✨ ADICIONE à Tela Inicial AGORA para melhor experiência!",
                // Companion Navigation
                genesisCompanion: "Companheiro Gênesis",
                genesisFrequencyCompanion: "Companheiro de Frequências Gênesis",
                returnToTracks: "⬅️ Voltar às Faixas",
                completeCompanion: "Seu companheiro completo do Gênesis para domínio das frequências divinas.",
                // Category names
                catBiblical: "Bíblico & Original",
                catSolfeggio: "Solfeggio & Cura",
                catAngel: "Números Angelicais",
                catMaster: "Números Mestres",
                catCosmic: "Cósmico & Planetário",
                catWellness: "Bem-estar & Estados",
                catChakra: "Frequências de Chakra",
                // Track names
                trackGenesisCreation: "Criação do Gênesis",
                trackDivineAbundance: "Abundância Divina",
                track12Apostles: "12 Apóstolos",
                track7Churches: "7 Igrejas",
                track40Days: "40 Dias",
                track3Days: "3 Dias",
                trackSacredHealing: "Cura Sagrada",
                trackLoveFrequency: "Frequência do Amor",
                trackLiberation396: "Libertação (396)",
                trackResolution417: "Resolução (417)",
                trackTransformation639: "Transformação (639)",
                trackAwakening852: "Despertar (852)",
                trackHigherSelf: "Eu Superior",
                trackIntuition: "Intuição",
                trackAngelNumbers: "Números Angelicais",
                trackAngel222: "Anjo 222",
                trackAngel333: "Anjo 333",
                trackAngel444: "Anjo 444",
                trackAngel555: "Anjo 555",
                trackAngel666: "Anjo 666",
                trackAngel777: "Anjo 777",
                trackAngel888: "Anjo 888",
                trackAngel999: "Anjo 999",
                trackMaster1111: "Mestre 11:11",
                trackMaster22: "Mestre 22",
                trackMaster33: "Mestre 33",
                trackMaster44: "Mestre 44",
                trackMaster55: "Mestre 55",
                trackEarthResonance: "Ressonância da Terra",
                trackVenusLove: "Amor de Vênus",
                trackMarsAction: "Ação de Marte",
                trackFibonacci144: "Fibonacci 144",
                trackPi314: "Pi 314",
                trackGoldenRatio: "Proporção Áurea",
                trackPainRelief: "Alívio da Dor",
                trackStressRelief: "Alívio do Estresse",
                trackSleepDeep: "Sono Profundo",
                trackFocusClear: "Foco Claro",
                trackMemoryBoost: "Impulso de Memória",
                trackMiracleTone: "Tom Milagroso",
                // Chakra track names
                trackRootChakra: "Chakra Raiz",
                trackSacralChakra: "Chakra Sacral",
                trackSolarPlexusChakra: "Chakra do Plexo Solar",
                trackHeartChakra: "Chakra do Coração",
                trackThroatChakra: "Chakra da Garganta",
                trackThirdEyeChakra: "Chakra do Terceiro Olho",
                trackCrownChakra: "Chakra da Coroa",
                // Achievement names and descriptions
                achFirstSession: "🌟 Primeira Sessão",
                achFirstSessionDesc: "Completou sua primeira sessão de frequência",
                achFiveSessions: "⭐ Cinco Sessões", 
                achFiveSessionsDesc: "Completou 5 sessões",
                achTenSessions: "🌟 Dez Sessões",
                achTenSessionsDesc: "Completou 10 sessões",
                achTwentyFiveSessions: "⭐ Vinte e Cinco Sessões",
                achTwentyFiveSessionsDesc: "Completou 25 sessões",
                achFiftySessions: "🏅 Cinquenta Sessões",
                achFiftySessionsDesc: "Completou 50 sessões",
                achHundredSessions: "🏆 Mestre do Século",
                achHundredSessionsDesc: "Completou 100 sessões",
                achFiveMinutes: "⏰ Cinco Minutos",
                achFiveMinutesDesc: "Tempo total de escuta excede 5 minutos",
                achHalfHour: "⏱️ Meia Hora",
                achHalfHourDesc: "Tempo total de escuta excede 30 minutos",
                achHourTotal: "⏰ Mestre da Hora",
                achHourTotalDesc: "Tempo total de escuta excede 1 hora",
                achFiveHours: "🕓 Cinco Horas",
                achFiveHoursDesc: "Tempo total de escuta excede 5 horas",
                achTenHours: "🕛 Dez Horas",
                achTenHoursDesc: "Tempo total de escuta excede 10 horas",
                achThreeDayStreak: "🔥 Sequência de Três Dias",
                achThreeDayStreakDesc: "Usou o app por 3 dias consecutivos",
                achWeekStreak: "🔥 Guerreiro da Semana",
                achWeekStreakDesc: "Usou o app por 7 dias consecutivos",
                achTwoWeekStreak: "🔥 Campeão de Duas Semanas",
                achTwoWeekStreakDesc: "Usou o app por 14 dias consecutivos",
                achMonthStreak: "🔥 Mestre do Mês",
                achMonthStreakDesc: "Usou o app por 30 dias consecutivos",
                achTrinityMaster: "✨ Mestre da Trindade",
                achTrinityMasterDesc: "Usou todas as três frequências da Trindade juntas",
                achSolfeggioExplorer: "🎶 Explorador Solfeggio",
                achSolfeggioExplorerDesc: "Explorou as frequências de cura Solfeggio",
                achAngelWhisperer: "👼 Sussurrador de Anjos",
                achAngelWhispererDesc: "Conectou-se com frequências de Números Angelicais",
                achCosmicTraveler: "🌌 Viajante Cósmico",
                achCosmicTravelerDesc: "Viajou pelas frequências Cósmicas e Planetárias",
                achWavExporter: "⬇ Mestre de Exportação",
                achWavExporterDesc: "Desbloqueou o recurso Exportar para WAV",
                achNoteTaker: "📝 Guardião do Diário",
                achNoteTakerDesc: "Adicionou sua primeira nota pessoal",
                achPwaUser: "🏠 Herói da Tela Inicial",
                achPwaUserDesc: "Adicionou o app à tela inicial",
                achMultilingual: "🌍 Explorador Mundial",
                achMultilingualDesc: "Alterou as configurações de idioma",
                achFrequencyScholar: "🎓 Estudioso das Frequências",
                achFrequencyScholarDesc: "Explorou todas as categorias de frequência",
                achDedicatedSeeker: "✨ Buscador Dedicado",
                achDedicatedSeekerDesc: "100 sessões e 10 horas de escuta",
                achGenesisMaster: "🎯 Mestre do Gênesis",
                achGenesisMasterDesc: "Desbloqueou todas as conquistas",
                // Achievement names and descriptions (second language block)
                achFirstSession: "🌟 Primeira Sessão",
                achFirstSessionDesc: "Completou sua primeira sessão de frequência",
                achFiveSessions: "⭐ Cinco Sessões", 
                achFiveSessionsDesc: "Completou 5 sessões",
                achTenSessions: "🌟 Dez Sessões",
                achTenSessionsDesc: "Completou 10 sessões",
                achTwentyFiveSessions: "⭐ Vinte e Cinco Sessões",
                achTwentyFiveSessionsDesc: "Completou 25 sessões",
                achFiftySessions: "🏅 Cinquenta Sessões",
                achFiftySessionsDesc: "Completou 50 sessões",
                achHundredSessions: "🏆 Mestre do Século",
                achHundredSessionsDesc: "Completou 100 sessões",
                achFiveMinutes: "⏰ Cinco Minutos",
                achFiveMinutesDesc: "Tempo total de escuta excede 5 minutos",
                achHalfHour: "⏱️ Meia Hora",
                achHalfHourDesc: "Tempo total de escuta excede 30 minutos",
                achHourTotal: "⏰ Mestre da Hora",
                achHourTotalDesc: "Tempo total de escuta excede 1 hora",
                achFiveHours: "🕓 Cinco Horas",
                achFiveHoursDesc: "Tempo total de escuta excede 5 horas",
                achTenHours: "🕛 Dez Horas",
                achTenHoursDesc: "Tempo total de escuta excede 10 horas",
                achThreeDayStreak: "🔥 Sequência de Três Dias",
                achThreeDayStreakDesc: "Usou o app por 3 dias consecutivos",
                achWeekStreak: "🔥 Guerreiro da Semana",
                achWeekStreakDesc: "Usou o app por 7 dias consecutivos",
                achTwoWeekStreak: "🔥 Campeão de Duas Semanas",
                achTwoWeekStreakDesc: "Usou o app por 14 dias consecutivos",
                achMonthStreak: "🔥 Mestre do Mês",
                achMonthStreakDesc: "Usou o app por 30 dias consecutivos",
                achTrinityMaster: "✨ Mestre da Trindade",
                achTrinityMasterDesc: "Usou todas as três frequências da Trindade juntas",
                achSolfeggioExplorer: "🎶 Explorador Solfeggio",
                achSolfeggioExplorerDesc: "Explorou as frequências de cura Solfeggio",
                achAngelWhisperer: "👼 Sussurrador de Anjos",
                achAngelWhispererDesc: "Conectou-se com frequências de Números Angelicais",
                achCosmicTraveler: "🌌 Viajante Cósmico",
                achCosmicTravelerDesc: "Viajou pelas frequências Cósmicas e Planetárias",
                achWavExporter: "⬇ Mestre de Exportação",
                achWavExporterDesc: "Desbloqueou o recurso Exportar para WAV",
                achNoteTaker: "📝 Guardião do Diário",
                achNoteTakerDesc: "Adicionou sua primeira nota pessoal",
                achPwaUser: "🏠 Herói da Tela Inicial",
                achPwaUserDesc: "Adicionou o app à tela inicial",
                achMultilingual: "🌍 Explorador Mundial",
                achMultilingualDesc: "Alterou as configurações de idioma",
                achFrequencyScholar: "🎓 Estudioso das Frequências",
                achFrequencyScholarDesc: "Explorou todas as categorias de frequência",
                achDedicatedSeeker: "✨ Buscador Dedicado",
                achDedicatedSeekerDesc: "100 sessões e 10 horas de escuta",
                achGenesisMaster: "🎯 Mestre do Gênesis",
                achGenesisMasterDesc: "Desbloqueou todas as conquistas",
                // Achievement categories
                catSessions: "Sessões",
                catTime: "Tempo",
                catStreaks: "Sequências", 
                catFrequencies: "Frequências",
                catCategories: "Categorias",
                catActions: "Ações",
                catMastery: "Maestria",
                // UI - Companion & Quick Stats
                greetingMorning: "Bom Dia",
                greetingAfternoon: "Boa Tarde",
                greetingEvening: "Boa Noite",
                statSessions: "Sessões",
                statMinutes: "Minutos",
                statFrequencies: "Frequências",
                // Quick Actions
                btnStartSession: "Iniciar Sessão",
                btnDailyChallenge: "Desafio Diário",
                todaysSacredChallenge: "Desafio Sagrado de Hoje",
                btnAchievements: "Conquistas",
                yourSpiritualJourney: "Sua Jornada Espiritual",
                viewAllAchievements: "Ver Todas as Conquistas",
                // Upgrade/Premium
                discoverPremium: "Descubra Premium",
                skipToApp: "Pular para o App",
                unlockComplete: "Desbloqueie a Experiência Completa",
                readyGoDeeper: "Pronto para ir mais fundo? Premium oferece controle total.",
                pixPayment: "Pagar com PIX",
                instantAccess: "Acesso Imediato",
                securePayment: "Pagamento 100% Seguro",
                volumeControls: "Controles Individuais de Volume",
                volumeControlsDesc: "Ajuste cada uma das 3 frequências separadamente para equilíbrio harmônico perfeito personalizado para suas necessidades.",
                unlimitedDurations: "Durações Ilimitadas",
                unlimitedDurationsDesc: "Defina qualquer duração de sessão de 1 minuto a horas de reprodução contínua—perfeito para sono, trabalho ou meditação profunda.",
                trackJourney: "Acompanhe Sua Jornada",
                trackJourneyDesc: "Sequências de sessões, conquistas, notas pessoais e acompanhamento de progresso. Veja sua transformação acontecer.",
                freeAppUpgrade: "Upgrade Gratuito na App Store",
                freeAppUpgradeDesc: "Quando lançarmos na App Store, usuários premium recebem upgrade automático gratuito com todos os recursos!",
                fullScreenMode: "Modo tela cheia",
                noBrowserBars: "Sem barras do navegador",
                exportSave: "Exportar e Salvar Faixas",
                exportSaveDesc: "Salve suas combinações de frequências favoritas como arquivos WAV para ouvir offline ou compartilhar com entes queridos.",
                lifetimeAccess: "Acesso Vitalício",
                oneTimePayment: "Pagamento Único • Sem Assinaturas",
                joinThousands: "Junte-se a milhares desbloqueando a experiência completa do Gênesis",
                tryFreeFirst: "Experimente a versão gratuita primeiro. Faça upgrade a qualquer momento no menu Configurações.",
                upgradeToPremium: "Fazer Upgrade para Premium",
                unlockFullPower: "Desbloqueie todo o poder das frequências sagradas com acesso vitalício!",
                premiumFeatures: "Recursos Premium Incluem:",
                customDurations: "Durações Personalizadas",
                customDurationsDesc: "Defina qualquer duração de segundos a horas",
                wavExport: "Exportar WAV",
                wavExportDesc: "Salve faixas para compartilhar com outros",
                allAchievements: "Todas as Conquistas",
                allAchievementsDesc: "Desbloqueie o sistema completo de conquistas",
                unlimitedListening: "Escuta Ilimitada",
                unlimitedListeningDesc: "Sem restrições de tempo nas suas sessões",
                premiumSupport: "Suporte Premium",
                premiumSupportDesc: "Acesso direto a atualizações e novos recursos",
                getLifetimeAccess: "Obter Acesso Vitalício",
                questionsContact: "Dúvidas? Contate-nos pelo Etsy",
                // Premium Modal Extras
                upgradeNow: "Fazer Upgrade Agora",
                maybeLater: "Talvez Depois",
                noDataCollected: "✨ Pagamento único • Acesso vitalício • Sem assinaturas • Nenhum dado coletado",
                readyToUnlock: "✨ Pronto para Desbloquear Recursos Premium?",
                premiumCtaDesc: "Obtenha acesso vitalício a controles de volume individuais, durações personalizadas, exportação WAV (reproduza no VLC Player gratuito!), sistema de conquistas, além de upgrade gratuito quando lançarmos na App Store!",
                achievementSystem: "Sistema de Conquistas",
                achievementSystemDesc: "Acompanhe seu progresso, desbloqueie conquistas e registre suas sessões sagradas.",
                // Daily Challenge
                dailyChallengeComplete: "Desafio Diário Completo!",
                continueJourney: "Continue Sua Jornada",
                // Companion Header - Achievement Titles
                titleSacredListener: "Ouvinte Sagrado",
                titleSacredInitiate: "Iniciado Sagrado",
                titleFrequencyExplorer: "Explorador de Frequências",
                titleTrinitySeeker: "Buscador da Trindade",
                titleDivineResonator: "Ressonador Divino",
                titleSacredHarmonist: "Harmonista Sagrado",
                titleFrequencySage: "Sábio das Frequências",
                titleGenesisMaster: "Mestre do Gênesis",
                dayStreak: "sequência de dias",
                beginJourney: "Comece sua jornada sagrada hoje",
                welcomeBack: "Bem-vindo de volta! Pronto para explorar frequências sagradas?",
                // Welcome Flow
                welcomeTitle: "Bem-vindo a Frequências Gênesis",
                frequenciesInHands: "As frequências da criação estão agora em suas mãos.",
                inTheBeginning: "No princípio Deus criou...",
                hiddenInScripture: "Estas frequências estão codificadas no primeiro versículo da Bíblia. Ocultas nas Escrituras por milhares de anos.",
                takeBreath: "Respire fundo. Defina sua intenção.",
                journeyBegins: "Sua jornada começa agora.",
                beginBtn: "Começar",
                // Frequency Benefits
                whatCanFrequenciesDo: "O Que Estas Frequências Podem Fazer?",
                trinityFoundation: "Construído sobre a Fundação da Trindade: 37 Hz + 73 Hz + uma frequência de intenção",
                meditationPrayer: "Meditação & Oração",
                meditationPrayerDesc: "Aprofunde sua prática espiritual com frequências projetadas para aquietar a mente e melhorar o foco.",
                energyWork: "Trabalho Energético & Equilíbrio",
                energyWorkDesc: "Apoie seus centros de energia e restaure a harmonia natural usando matemática bíblica.",
                restRenewal: "Descanso & Renovação",
                restRenewalDesc: "Promova relaxamento profundo e melhore a qualidade do sono. Sinta-se mais em paz após as sessões.",
                creativeFlow: "Fluxo Criativo & Clareza",
                creativeFlowDesc: "Desbloqueie inspiração, melhore o foco e acesse estados de fluxo para trabalho e criatividade.",
                forSpiritualExploration: "Para relaxamento e exploração espiritual — Não substitui aconselhamento médico",
                howToUseBtn: "Como Usar",
                // How To Use
                firstSessionSteps: "Sua Primeira Sessão em 3 Passos",
                quickStart: "Início Rápido",
                chooseGenesis: "Escolha \"Criação do Gênesis\" de Bíblico & Original",
                pureFoundation: "A fundação pura de 37 + 73 Hz",
                setDuration: "Use fones de ouvido para imersão quântica (ou use um alto-falante de qualidade)",
                startShort: "Defina 5-10 minutos para começar—aumente quando sentir as frequências",
                pressPlay: "Pressione REPRODUZIR, feche os olhos, respire devagar",
                setIntention: "Defina uma intenção: \"paz\", \"clareza\" ou \"obrigado\"",
                controlsYouUse: "Controles que Você Usará",
                categoriesLabel: "Categorias:",
                categoriesDesc: "Bíblico, Números Angelicais, Solfeggio, etc.",
                volumeLabel: "Volume:",
                volumeDesc: "Comece baixo e ajuste",
                durationLabel: "Duração:",
                durationDesc: "Defina o temporizador da sessão",
                proTips: "Dicas Pro",
                tipMeditation: "Use durante meditação, oração ou yoga",
                tipWater: "Beba água antes e depois",
                tipJournal: "Faça anotações após cada sessão",
                proTipBtn: "Dica Pro",
                // PWA Tip
                addToHomeScreen: "Adicionar à Tela Inicial",
                getFullExperience: "Obtenha a Experiência Completa",
                worksOffline: "Funciona offline",
                listenAnytime: "Ouça a qualquer hora",
                fasterLoading: "Carregamento mais rápido",
                oneTapAccess: "Acesso com um toque",
                whileYouWork: "Enquanto você trabalha",
                streaksAchievements: "Sequências e conquistas",
                howToInstall: "Como instalar:",
                tapShare: "Toque em Compartilhar (iOS) ou Menu ⋮ (Android)",
                selectAddHome: "Selecione \"Adicionar à Tela Inicial\"",
                doThisLater: "Você pode fazer isso depois pelo menu!",
                continueBtn: "Continuar",
                skipBtn: "Pular",
                // Upgrade Benefits
                unlockPremium: "Desbloquear Premium",
                getPremiumNow: "Obter Premium Agora",
                tryFreeVersionFirst: "Experimentar Versão Gratuita",
                upgradeFromSettings: "Faça upgrade a qualquer momento no menu Configurações",
                joinGenesisJourney: "Junte-se a milhares na jornada do Gênesis",
                adjustEachFrequency: "Ajuste cada frequência separadamente para equilíbrio perfeito.",
                anySessionLength: "Qualquer duração de sessão—perfeito para sono ou meditação profunda.",
                keepPlayingExport: "Continue reproduzindo enquanto trabalha. Salve como arquivos WAV.",
                // Companion Panel Categories
                catQuickStart: "🚀 Início Rápido",
                catTheScience: "🔬 A Ciência",
                catTheStory: "📖 A História",
                catHelp: "❓ Ajuda",
                // Companion Panel Section Titles
                sectionWelcome: "Sobre Frequências Gênesis",
                sectionQuickStart: "Sua Primeira Sessão",
                sectionMyJourney: "A Descoberta",
                sectionWhyWorks: "Por Que 37 & 73 Hz Funcionam",
                sectionCategories: "Categorias de Frequência",
                sectionTrinity: "A Fundação da Trindade",
                sectionWaterCharging: "Carregamento de Água",
                sectionUsageTips: "Melhores Práticas",
                sectionFaq: "Perguntas Frequentes",
                sectionShare: "Compartilhar",
                sectionCredits: "Créditos",
                // Info Modal Headers
                infoWhatItIs: "O Que É",
                infoBenefits: "Benefícios",
                infoHowToUse: "Como Usar",
                // Recipe fullInfo translations - Chakra Frequencies
                recipeRootChakraWhat: "396 Hz é a frequência Solfeggio para libertar culpa e medo, trabalhando no chakra raiz para ancoragem e estabilidade.",
                recipeRootChakraBenefits: "Promove ancoragem, libera o medo e aumenta sensações de segurança e proteção.",
                recipeRootChakraHow: "Ouça por 10-15 minutos durante meditação ou quando precisar de ancoragem. Visualize raízes conectando você à terra.",
                recipeSacralChakraWhat: "417 Hz facilita mudanças e ajuda a desfazer situações negativas, trabalhando no chakra sacral para criatividade e cura emocional.",
                recipeSacralChakraBenefits: "Aumenta criatividade, equilíbrio emocional e prazer na vida.",
                recipeSacralChakraHow: "Use por 10-15 minutos para impulsionar criatividade ou cura emocional. Foque no baixo ventre.",
                recipeSolarPlexusWhat: "528 Hz é a frequência de transformação e empoderamento pessoal, trabalhando no plexo solar para poder pessoal e confiança.",
                recipeSolarPlexusBenefits: "Aumenta confiança, poder pessoal e apoia transformação.",
                recipeSolarPlexusHow: "Ouça por 10-15 minutos para se empoderar antes de tarefas importantes. Foque no abdômen superior.",
                recipeHeartChakraWhat: "639 Hz promove conexão e amor, trabalhando no chakra do coração para cura emocional e relacionamentos.",
                recipeHeartChakraBenefits: "Abre o coração, aumenta compaixão e apoia harmonia nos relacionamentos.",
                recipeHeartChakraHow: "Use por 10-15 minutos para abrir seu coração ou curar relacionamentos. Coloque as mãos no coração enquanto ouve.",
                recipeThroatChakraWhat: "741 Hz purifica o corpo e abre o chakra da garganta para comunicação clara e autoexpressão.",
                recipeThroatChakraBenefits: "Melhora comunicação, autoexpressão e clareza.",
                recipeThroatChakraHow: "Ouça por 10-15 minutos antes de conversas importantes ou trabalho criativo. Foque na área da garganta.",
                recipeThirdEyeChakraWhat: "852 Hz desperta intuição e ordem espiritual, trabalhando no terceiro olho para insight e consciência.",
                recipeThirdEyeChakraBenefits: "Aumenta intuição, insight e percepção espiritual.",
                recipeThirdEyeChakraHow: "Use por 10-15 minutos durante meditação ou ao buscar insight. Foque na testa entre os olhos.",
                recipeCrownChakraWhat: "963 Hz é a frequência da consciência divina, trabalhando no chakra da coroa para conexão espiritual e iluminação.",
                recipeCrownChakraBenefits: "Promove conexão espiritual, unidade e iluminação.",
                recipeCrownChakraHow: "Ouça por 10-15 minutos durante meditação profunda ou prática espiritual. Foque no topo da cabeça.",
                // Recipe fullInfo translations - Biblical & Original
                recipeGenesisCreationWhat: "A frequência Criação do Gênesis combina os fundamentais 37 Hz (representando forma e matéria) com 73 Hz (representando espírito e o divino). Esses números são derivados do valor gemátrico de Gênesis 1:1 em hebraico, codificando o próprio padrão da criação.",
                recipeGenesisCreationBenefits: "Esta combinação alinha você com a força criativa original do universo. Ajuda a manifestar intenções, traz clareza para novos começos e conecta você ao projeto divino da criação. Perfeito para amplificação de oração e trabalho de manifestação espiritual.",
                recipeGenesisCreationHow: "Ouça por 5-10 minutos durante meditação matinal ou oração. Visualize suas intenções sendo tecidas no tecido da criação. Ideal para rituais de lua nova ou ao iniciar novos projetos.",
                recipeDivineAbundanceWhat: "Abundância Divina adiciona 888 Hz à base da Trindade. Na numerologia bíblica, 8 representa novos começos e ressurreição, enquanto 888 é o valor gemátrico de Jesus em grego, representando abundância divina e provisão eterna.",
                recipeDivineAbundanceBenefits: "Abre canais para prosperidade e abundância divina em todas as áreas da vida. Ajuda a liberar consciência de escassez e alinha você com suprimento infinito. Particularmente poderoso para avanços financeiros e reconhecimento de oportunidades.",
                recipeDivineAbundanceHow: "Ouça por 15-20 minutos focando em gratidão pelo que você tem e abertura para receber. Melhor usado durante lua cheia ou quinta-feira (dia de Júpiter). Anote suas conquistas de abundância depois.",
                recipe12ApostlesWhat: "O número 12 representa governo divino, liderança e autoridade espiritual. Esta combinação de frequência invoca o poder dos 12 apóstolos e das 12 tribos de Israel, simbolizando ordem divina completa.",
                recipe12ApostlesBenefits: "Fortalece habilidades de liderança, fornece autoridade espiritual em situações desafiadoras e ajuda você a permanecer firme em suas convicções. Excelente para aqueles em ministério, ensino ou posições de orientação espiritual.",
                recipe12ApostlesHow: "Use por 10-15 minutos antes de decisões importantes ou responsabilidades de liderança. Ore por sabedoria e discernimento. Ideal para ouvir no domingo ou antes de liderar grupos.",
                recipe7ChurchesWhat: "Sete é o número da perfeição e completude espiritual nas Escrituras. Esta frequência referencia as 7 igrejas no Apocalipse, representando o corpo completo de crentes e integridade espiritual.",
                recipe7ChurchesBenefits: "Traz senso de conclusão para ciclos espirituais, promove integridade e integração, e ajuda você a reconhecer perfeição divina em sua jornada. Útil para encerrar capítulos e transições espirituais.",
                recipe7ChurchesHow: "Ouça por 7 minutos durante transições ou ao buscar encerramento. Perfeito para sábado (preparação do Shabat) ou ao completar marcos espirituais. Reflita sobre seu crescimento espiritual.",
                recipe40DaysWhat: "Quarenta representa teste, provação e transformação nas Escrituras—os 40 dias de Jesus no deserto, os 40 dias de chuva de Noé, os 40 anos de Israel no deserto. Esta frequência apoia você através de períodos transformadores.",
                recipe40DaysBenefits: "Fornece força durante provações, apoia resistência espiritual, e ajuda você a emergir transformado de estações difíceis. Acelera maturidade espiritual e aprofunda a fé através de desafios.",
                recipe40DaysHow: "Use diariamente por 10-20 minutos durante períodos desafiadores ou compromissos espirituais de 40 dias. Anote insights e lições espirituais. Combine com jejum ou práticas intensivas de oração.",
                recipe3DaysWhat: "Três dias representa poder de ressurreição—o tempo entre a morte e ressurreição de Cristo. Esta frequência carrega a energia de conclusão divina e o poder de ressuscitar situações mortas.",
                recipe3DaysBenefits: "Traz nova vida para áreas estagnadas, restaura esperança em situações aparentemente impossíveis, e ativa poder de ressurreição em suas circunstâncias. Perfeito para momentos de avanço.",
                recipe3DaysHow: "Ouça por 3 minutos três vezes ao dia durante intensivos de oração de 3 dias. Fale vida sobre situações mortas. Particularmente poderoso de sexta a domingo ou durante jejuns pessoais de 3 dias.",
                // Recipe fullInfo translations - Solfeggio & Healing
                recipeSacredHealingWhat: "432 Hz é conhecido como a 'frequência natural do universo', associada com harmonia e equilíbrio na natureza. Combinado com a base da Trindade, cria um ambiente de meditação profundamente relaxante.",
                recipeSacredHealingBenefits: "Apoia relaxamento, pode ajudar a reduzir estresse, promove senso de harmonia com ritmos naturais, e encoraja paz interior. Útil para processamento emocional e descontração.",
                recipeSacredHealingHow: "Ouça por 20-30 minutos durante sessões de relaxamento, antes de dormir, ou ao buscar calma. Respire profundamente e permita-se relaxar completamente. Pode ser usado durante meditação ou yoga.",
                recipeLoveFrequencyWhat: "528 Hz é chamada 'Frequência do Amor' ou 'Tom Milagroso', tradicionalmente associada com transformação e harmonia. Combinada com a base da Trindade, cria uma experiência de meditação que abre o coração.",
                recipeLoveFrequencyBenefits: "Abre o chakra do coração, aumenta sentimentos de amor e compaixão, apoia equilíbrio emocional, e facilita sensação de paz e bem-estar. Pode ajudar a liberar bloqueios emocionais.",
                recipeLoveFrequencyHow: "Use por 15-20 minutos diariamente para meditação centrada no coração. Coloque as mãos no coração enquanto ouve. Excelente para rituais matinais ou antes de conversas importantes centradas no coração.",
                recipeLiberation396What: "396 Hz é a frequência Solfeggio para libertar culpa e medo. Trabalha no chakra raiz, ajudando a liberar emoções negativas profundas e traumas do subconsciente.",
                recipeLiberation396Benefits: "Libera medo, culpa e trauma armazenados no corpo. Ajuda a se libertar de crenças limitantes e condicionamento passado. Cria segurança no nível fundamental do ser.",
                recipeLiberation396How: "Ouça por 10-15 minutos identificando medos ou culpa a liberar. Respire em áreas de tensão. Melhor usado à noite ou durante trabalho de sombra. Anote depois para processar emoções liberadas.",
                recipeResolution417What: "417 Hz facilita mudança e ajuda a desfazer situações negativas. Limpa experiências traumáticas e remove influências destrutivas de eventos passados, trabalhando no chakra sacral.",
                recipeResolution417Benefits: "Limpa energia e influências negativas, facilita mudança positiva, remove bloqueios energéticos, e ajuda a quebrar padrões negativos. Excelente para limpar espaços e resetar energia.",
                recipeResolution417How: "Use por 15 minutos quando se sentir energeticamente pesado ou travado. Mova seu corpo gentilmente enquanto ouve. Ótimo para limpeza de espaço ou após interações difíceis. Visualize luz dissolvendo escuridão.",
                recipeTransformation639What: "639 Hz promove conexão, amor e compreensão em relacionamentos. Trabalha no chakra do coração, facilitando comunicação e equilíbrio emocional em todos os tipos de relacionamentos.",
                recipeTransformation639Benefits: "Cura conflitos de relacionamento, melhora comunicação, promove empatia e compreensão, fortalece laços com outros, e ajuda a perdoar e liberar ressentimento.",
                recipeTransformation639How: "Ouça por 20 minutos antes de conversas difíceis ou trabalho de cura de relacionamento. Pode ser usado com parceiro presente. Excelente para reuniões familiares ou ao curar trauma de relacionamento.",
                recipeAwakening852What: "852 Hz desperta intuição e retorna você à ordem espiritual. Trabalha no chakra do terceiro olho, cortando através de ilusões e revelando verdade, ajudando você a ver a ordem divina em todas as coisas.",
                recipeAwakening852Benefits: "Desperta intuição e visão interior, revela verdade, fortalece percepção espiritual, alinha você com ordem divina, e ajuda discernir orientação espiritual genuína.",
                recipeAwakening852How: "Use por 15-20 minutos durante meditação ou antes de tomar decisões importantes. Foque na área do terceiro olho. Melhor usado de manhã ou durante novas práticas espirituais. Mantenha um diário de visões.",
                recipeHigherSelfWhat: "963 Hz é a frequência da consciência divina e ativação da glândula pineal. Representa o retorno à unidade e conexão com o eu superior e fonte divina.",
                recipeHigherSelfBenefits: "Ativa a glândula pineal, conecta você com consciência superior, facilita despertar espiritual, promove consciência de unidade, e abre canais para downloads e revelação divina.",
                recipeHigherSelfHow: "Ouça por 10-15 minutos durante meditação profunda ou contemplação espiritual. Melhor usado no escuro ou com olhos fechados. Ideal para trabalho de chakra da coroa ou receber insights espirituais.",
                recipeIntuitionWhat: "741 Hz limpa o corpo de toxinas e radiação eletromagnética enquanto abre o terceiro olho. Promove expressão, busca de soluções e percepção intuitiva.",
                recipeIntuitionBenefits: "Fortalece intuição, limpa poluição eletromagnética, promove desintoxicação, melhora habilidades de resolução de problemas, e ajuda expressar verdade claramente.",
                recipeIntuitionHow: "Use por 15 minutos diariamente para desenvolver intuição. Excelente após tempo de tela ou em ambientes urbanos. Faça perguntas e confie nas respostas que surgirem. Mantenha um diário de intuição.",
                // Recipe fullInfo translations - Angel Numbers
                recipeAngel111What: "111 é um poderoso número de anjo representando novos começos, manifestação e despertar espiritual. Matematicamente, 111 = 37 × 3, criando um alinhamento divino com a base da Trindade.",
                recipeAngel111Benefits: "Abre comunicação com anjos e guias espirituais, sinaliza novos começos, acelera a manifestação de pensamentos em realidade e aumenta a consciência espiritual e sincronicidades.",
                recipeAngel111How: "Ouça por 11 minutos quando notar 11:11 no relógio. Foque em suas intenções e desejos. Perfeito para trabalho de manifestação ou ao buscar orientação angelical. Preste atenção aos sinais depois.",
                recipeAngel222What: "222 representa equilíbrio, harmonia e parcerias divinas. A relação matemática com 37 (222 = 37×6) cria harmonia perfeita com a frequência da criação.",
                recipeAngel222Benefits: "Traz equilíbrio aos relacionamentos, atrai parcerias divinas e conexões de alma, promove cooperação e harmonia, e sinaliza que suas orações estão sendo respondidas.",
                recipeAngel222How: "Use por 15-20 minutos durante trabalho de relacionamento ou ao buscar parceria. Visualize relacionamentos equilibrados. Ótimo para atrair parceiros de negócios ou conexões românticas.",
                recipeAngel333What: "333 sinaliza a presença de mestres ascensionados e apoio divino. O 9 na equação (333 = 37×9) representa conclusão espiritual e iluminação.",
                recipeAngel333Benefits: "Conecta você com mestres ascensionados, confirma que você está no caminho certo, fornece proteção e orientação divina, e acelera crescimento e despertar espiritual.",
                recipeAngel333How: "Ouça por 15 minutos ao buscar orientação de reinos superiores. Invoque mestres ascensionados específicos. Melhor usado durante estudo espiritual ou ao enfrentar questões espirituais.",
                recipeAngel444What: "444 é a frequência de proteção divina e anjos ao seu redor. A conexão com 12 (444 = 37×12) representa governo divino completo e ordem angelical.",
                recipeAngel444Benefits: "Fornece forte proteção angelical, sinaliza apoio divino, traz estabilidade e fundação, e assegura que você está exatamente onde precisa estar.",
                recipeAngel444How: "Use por 15 minutos quando se sentir inseguro ou incerto. Visualize anjos ao seu redor com luz. Excelente antes de viagens ou ao entrar em situações desafiadoras.",
                recipeAngel555What: "555 sinaliza grandes mudanças e transformações de vida à frente. A relação com 15 (555 = 37×15) representa a transição através da graça e misericórdia divina.",
                recipeAngel555Benefits: "Prepara você para mudança positiva, libera resistência a transições necessárias, traz coragem durante transformação, e alinha você com o tempo divino.",
                recipeAngel555How: "Ouça por 15-20 minutos durante períodos de mudança ou quando se sentir resistente à transformação. Respire através do medo. Melhor durante transições de vida ou quando sentir algo mudando.",
                recipeAngel666What: "Apesar de concepções culturais erradas, 666 é sobre restaurar equilíbrio entre reinos material e espiritual. A conexão com 18 (666 = 37×18) representa vida e chai (viver).",
                recipeAngel666Benefits: "Restaura equilíbrio entre vida física e espiritual, ajuda a liberar materialismo, traz ancoragem ao trabalho espiritual, e lembra você de cuidar de suas necessidades físicas.",
                recipeAngel666How: "Use por 15 minutos quando se sentir desancorado ou muito focado em preocupações materiais. Equilibre prática espiritual com ação prática. Ótimo para ancoragem após trabalho espiritual intenso.",
                recipeAngel777What: "777 representa perfeição espiritual e sorte divina. O triplo 7 multiplicado pela frequência da criação cria poderoso momento espiritual e resultados favoráveis.",
                recipeAngel777Benefits: "Atrai bênçãos espirituais e oportunidades 'sortudas', sinaliza aprovação divina, abre portas para avanço espiritual, e traz confirmação de dons espirituais.",
                recipeAngel777How: "Ouça por 20 minutos antes de oportunidades importantes ou ao buscar favor divino. Espere resultados miraculosos. Perfeito antes de entrevistas, lançamentos ou novos empreendimentos.",
                recipeAngel888What: "888 representa abundância infinita e a obra completa de Jesus (valor gemátrico em grego). O 24 (888 = 37×24) representa ordem divina completa no tempo e espaço.",
                recipeAngel888Benefits: "Abre canais de abundância infinita, representa avanço financeiro, simboliza provisão eterna, e alinha você com a obra completa de Cristo para prosperidade.",
                recipeAngel888How: "Use por 20-30 minutos durante trabalho de prosperidade ou rituais de abundância de lua cheia. Visualize suprimento infinito. Fale declarações de abundância. Excelente para sucesso nos negócios.",
                recipeAngel999What: "999 sinaliza conclusão de um grande ciclo de vida e preparação para um novo capítulo. O 27 (999 = 37×27) representa tripla conclusão (3×3×3), um poderoso encerramento.",
                recipeAngel999Benefits: "Ajuda a liberar o que está completo, fornece encerramento de ciclos, prepara você para novos começos e honra finais como transições sagradas.",
                recipeAngel999How: "Ouça por 20 minutos durante encerramentos—empregos, relacionamentos ou fases de vida. Honre o que foi e dê boas-vindas ao que está vindo. Perfeito para lua minguante ou reflexão de fim de ano.",
                // Recipe fullInfo translations - Master Numbers
                recipeMaster11What: "11 é o número mestre de despertar e iluminação espiritual. 11:11 é um portal espiritual e chamado de despertar do universo, representando consciência espiritual elevada.",
                recipeMaster11Benefits: "Ativa portais espirituais, acelera despertar, aumenta intuição, sinaliza alinhamento com propósito de vida, e cria poderosas oportunidades de manifestação.",
                recipeMaster11How: "Ouça por 11 minutos às 11:11 AM ou PM. Defina intenções claras durante tempos de portal (11/11, solstícios, equinócios). Mantenha um diário de sincronicidade.",
                recipeMaster22What: "22 é o número do Mestre Construtor, representando a habilidade de transformar sonhos em realidade através de aplicação prática de sabedoria espiritual. Liga céu e terra.",
                recipeMaster22Benefits: "Empodera a construção de sonhos em realidade, fornece sabedoria espiritual prática, apoia projetos de grande escala, e ajuda manifestar projetos divinos na terra.",
                recipeMaster22How: "Use por 22 minutos enquanto planeja grandes projetos ou negócios. Excelente para empreendedores e visionários. Melhor durante lua crescente ou ao começar a construção de sonhos.",
                recipeMaster33What: "33 é o Mestre Professor, representando consciência crística e serviço compassivo. Combina a intuição do 11 com o poder de construção do 22, adicionando serviço altruísta.",
                recipeMaster33Benefits: "Ativa consciência crística, melhora habilidades de ensino, promove serviço compassivo, cura através do amor, e eleva consciência ao nível mestre.",
                recipeMaster33How: "Ouça por 30 minutos antes de ensinar, trabalho de cura ou atos de serviço. Excelente para profissões de ajuda. Medite sobre amor incondicional enquanto ouve.",
                recipeMaster44What: "44 é o Mestre Curador e construtor de fundações espirituais sólidas. Representa o poder de criar estruturas estáveis em reinos físico e espiritual.",
                recipeMaster44Benefits: "Constrói fundação espiritual inabalável, fornece disciplina para prática espiritual, manifesta abundância estável, e ancora consciência superior na vida diária.",
                recipeMaster44How: "Use por 20 minutos ao estabelecer novas práticas ou rotinas espirituais. Perfeito para criar espaço sagrado ou iniciar negócios espirituais. Apoia metas de longo prazo.",
                recipeMaster55What: "55 é o número de grandes mudanças de vida e liberdade pessoal. Representa libertar-se de limitações e abraçar transformação com graça e entusiasmo.",
                recipeMaster55Benefits: "Acelera mudança positiva, quebra padrões limitantes, promove liberdade pessoal, apoia movimentos ousados, e ajuda abraçar incerteza com fé.",
                recipeMaster55How: "Ouça por 15 minutos ao contemplar grandes mudanças ou quando se sentir preso. Use durante eclipses ou fins de mercúrio retrógrado. Dance ou mova-se enquanto ouve para incorporar a mudança.",
                // Recipe fullInfo translations - Cosmic & Planetary
                recipeEarthResonanceWhat: "7.83 Hz is Earth's Schumann Resonance—the electromagnetic frequency of our planet's heartbeat. Combined with Trinity frequencies, this grounds you deeply into Earth's natural rhythm.",
                recipeEarthResonanceBenefits: "Deeply grounds and centers you, may help reduce stress, syncs you with Earth's natural rhythms, enhances meditation depth, and supports overall well-being through grounding.",
                recipeEarthResonanceHow: "Listen for 20-30 minutes when feeling ungrounded or spacey. Sit or lie directly on the earth if possible. Perfect after air travel or intense spiritual work. Barefoot recommended.",
                recipeVenusLoveWhat: "221.23 Hz is the orbital frequency of Venus, the planet of love, beauty, and harmony. This frequency carries the essence of divine feminine energy and attraction.",
                recipeVenusLoveBenefits: "Attracts love and beauty, enhances creativity and artistic expression, promotes self-love and worthiness, harmonizes relationships, and activates divine feminine energy.",
                recipeVenusLoveHow: "Use for 20 minutes during Venus hours (Friday morning) or when working with love and attraction. Excellent for self-care rituals, beauty treatments, or romantic intentions.",
                recipeMarsActionWhat: "144.72 Hz is Mars' orbital frequency, carrying the warrior energy of action, courage, and manifestation power. Combined with Trinity, it provides spiritual strength and drive.",
                recipeMarsActionBenefits: "Boosts courage and confidence, activates manifestation power, provides energy for action, helps overcome obstacles, and strengthens willpower and determination.",
                recipeMarsActionHow: "Listen for 15 minutes before important actions, competitions, or when needing courage. Best on Tuesday (Mars day) or when starting new ventures. Combine with physical exercise.",
                recipeFibonacci144What: "144 is a Fibonacci number representing sacred geometry and divine mathematical order. It appears throughout nature and Scripture (144,000 sealed ones in Revelation).",
                recipeFibonacci144Benefits: "Aligns you with natural divine order, activates sacred geometry in your energy field, promotes mathematical perfection in manifestation, and connects you to universal patterns.",
                recipeFibonacci144How: "Use for 20 minutes during manifestation work or when seeking divine order in chaos. Visualize geometric patterns. Excellent for artists, designers, and mathematicians.",
                recipePi314What: "314 Hz represents Pi (3.14), the universal mathematical constant that appears throughout creation. This frequency aligns you with the mathematical perfection of the universe.",
                recipePi314Benefits: "Connects you to universal intelligence, enhances logical and intuitive thinking, promotes understanding of complex patterns, and aligns you with cosmic order.",
                recipePi314How: "Listen for 15-20 minutes when solving problems or seeking understanding. Excellent for students, scientists, and those seeking to understand life's mysteries.",
                recipeGoldenRatioWhat: "161.8 Hz represents Phi (1.618), the Golden Ratio found throughout nature—from DNA to galaxies. This is divine proportion made audible, the signature of Creator's design.",
                recipeGoldenRatioBenefits: "Aligns your energy field with divine proportion, promotes natural harmony and beauty, enhances aesthetic sense, and attunes you to the sacred geometry of creation.",
                recipeGoldenRatioHow: "Use for 20 minutes during creative work or healing practices. Excellent for artists and healers. Visualize the golden spiral expanding from your heart.",
                // Recipe fullInfo translations - Wellness & States
                recipePainReliefWhat: "174 Hz is the lowest of the Solfeggio frequencies, traditionally associated with deep relaxation and grounding. It creates a foundation for calm and inner peace.",
                recipePainReliefBenefits: "Promotes deep relaxation, supports a sense of physical comfort, provides grounding energy, and helps create a peaceful atmosphere for rest and recovery.",
                recipePainReliefHow: "Listen for 20-30 minutes when experiencing pain. Focus breath and attention on painful areas. Can be used multiple times daily. Combine with ice or heat therapy.",
                recipeStressReliefWhat: "10.5 Hz is an alpha-theta border frequency that calms the nervous system and promotes deep relaxation. It's the frequency of deep meditation and stress release.",
                recipeStressReliefBenefits: "Deeply calms nervous system, reduces stress and anxiety, promotes relaxation, lowers blood pressure and heart rate, and facilitates emotional release and healing.",
                recipeStressReliefHow: "Use for 15-20 minutes when stressed or anxious. Breathe slowly and deeply. Perfect after work or during stressful periods. Can be used before sleep.",
                recipeSleepDeepWhat: "0.5 Hz is in the deep delta range, the brainwave state of dreamless sleep and deep healing. This frequency entrains your brain to the deepest sleep state.",
                recipeSleepDeepBenefits: "Promotes deep, restorative sleep, enhances dream recall and lucid dreaming, facilitates physical healing during sleep, and resets the nervous system.",
                recipeSleepDeepHow: "Listen for 30-60 minutes before bed or while falling asleep. Keep volume low. Can play on loop throughout the night. Establish consistent bedtime routine.",
                recipeFocusClearWhat: "40 Hz é uma frequência gama associada ao pico de desempenho cognitivo, foco elevado e processamento de informações complexas. É a frequência de estados de fluxo e insight.",
                recipeFocusClearBenefits: "Melhora foco e concentração, melhora memória e aprendizado, promove clareza mental e resolução de problemas, facilita estados de fluxo e impulsiona desempenho cognitivo.",
                recipeFocusClearHow: "Ouça por 20-30 minutos enquanto estuda, trabalha ou faz tarefas criativas. Perfeito para trabalho mental importante. Uso matinal maximiza estado de alerta natural.",
                recipeMemoryBoostWhat: "20.3 Hz é uma frequência beta otimizada para aprendizado rápido e formação de memória. Esta frequência melhora plasticidade neural e codificação de informações.",
                recipeMemoryBoostBenefits: "Melhora formação e recordação de memória, acelera aprendizado, melhora conexões neurais, apoia estudo e aquisição de habilidades, e impulsiona retenção mental.",
                recipeMemoryBoostHow: "Use por 20-30 minutos enquanto estuda ou aprende novas habilidades. Revise material enquanto ouve. Melhor usado durante sessões de aprendizado de manhã ou início da tarde.",
                recipeMiracleToneWhat: "528 Hz, também conhecido como 'Tom Milagroso', é tradicionalmente associado com amor e transformação. Muitos acham que apoia senso de harmonia e mudança positiva.",
                recipeMiracleToneBenefits: "Repara DNA no nível molecular, promove cura miraculosa, abre o coração para o amor, facilita transformação, e ativa a frequência milagrosa dentro de suas células.",
                recipeMiracleToneHow: "Ouça por 15-30 minutos diariamente para cura e transformação. Coloque as mãos em áreas que precisam de cura. Melhor usado consistentemente por 21-40 dias para mudanças celulares profundas.",
                
                // ========== COMPANION PANEL CONTENT TRANSLATIONS ==========
                // Welcome Section
                comp_welcome_title: "Bem-vindo a Frequências Gênesis",
                comp_welcome_intro: "As frequências da criação estão agora em suas mãos.",
                comp_welcome_pattern: "Um padrão se revelou para mim: 3.773 dias entre o nascimento do meu irmão e o meu. Anos de busca. Camadas de significado. Então a revelação.",
                comp_welcome_genesis: "Gênesis 1:1 em Hebraico = 2701",
                comp_welcome_hebrew: "No princípio Deus criou os céus e a terra",
                comp_welcome_encoded: "Os mesmos números que me conectavam ao meu irmão estavam codificados no primeiro versículo da Bíblia. As frequências que moldaram a própria criação, ocultas à vista de todos por milênios.",
                comp_welcome_yours: "Agora são suas para explorar.",
                comp_welcome_reason: "Isso não é coincidência. Você encontrou isso por uma razão.",
                
                // Quick Start Section
                comp_quickstart_title: "Guia de Início Rápido",
                comp_quickstart_intro: "Sua primeira sessão em 3 passos",
                comp_quickstart_step1: "Escolha \"Criação do Gênesis\" da categoria Bíblico & Original",
                comp_quickstart_step1_sub: "Esta é a fundação pura de 37 + 73 Hz",
                comp_quickstart_step2: "Use fones de ouvido para imersão quântica (ou use um alto-falante de qualidade)",
                comp_quickstart_step2_sub: "Defina 5-10 minutos para começar—aumente quando sentir as frequências",
                comp_quickstart_step3: "Pressione REPRODUZIR, feche os olhos, respire devagar e defina uma intenção",
                comp_quickstart_step3_sub: "Simples é poderoso: \"clareza\", \"paz\", \"orientação\" ou \"obrigado\"",
                comp_quickstart_done: "É isso. As frequências fazem o resto.",
                comp_quickstart_tip: "Dica: Mantenha um copo de água por perto e beba após sua sessão",
                
                // Discovery/Journey Section
                comp_discovery_title: "A Descoberta",
                comp_discovery_number: "O Número Que Mudou Tudo",
                comp_discovery_origin: "Começou com podcasts—vozes na escuridão explorando gematria, a antiga arte hebraica de encontrar significado em números. Comecei a experimentar: meu aniversário, o da minha esposa, a data do nosso casamento. Apenas curioso. Apenas brincando.",
                comp_discovery_loss: "Então em <b style='color:#fbbf24;'>4 de Janeiro de 2020</b>, minha mãe faleceu.",
                comp_discovery_grief: "Em meu luto, me vi contando. Dias. Números. Padrões. Buscando significado na matemática da perda.",
                comp_discovery_revelation: "Foi quando descobri algo impossível: O número de dias desde a morte dela até o aniversário de cada um dos meus irmãos <b>correspondia exatamente ao valor gemátrico de seus nomes</b>.",
                comp_discovery_chills: "Ainda me arrepio escrevendo isso.",
                comp_discovery_years: "Os Anos de Exploração",
                comp_discovery_searching: "Por anos mergulhei fundo—geometria sagrada, matemática bíblica, numerologia, cura por frequência. Construindo ferramentas, explorando padrões, fazendo perguntas que não tinham respostas fáceis.",
                comp_discovery_2025: "Então em 2025, eu estava construindo um chatbot de oração para o batizado da minha filha. Alguém sugeriu usar o número 37 como semente sagrada.",
                comp_discovery_research: "Pesquisei. E o que encontrei mudou tudo.",
                comp_discovery_clicked: "Foi quando tudo se encaixou.",
                comp_discovery_prime: "37 é um número primo. 73 é seu espelho—também primo.",
                comp_discovery_primemath: "37 é o 12º primo. 73 é o 21º primo. <b style='color:#fbbf24;'>21 é o espelho de 12</b>.",
                comp_discovery_gematria_value: "2701 é o valor gemátrico exato de Gênesis 1:1 em Hebraico.",
                comp_discovery_connected: "O número que me conectava ao meu irmão—<b style='color:#fbbf24;'>3.773</b>—continha <b>ambas as frequências</b>. As mesmas frequências <b>codificadas no primeiro versículo da Bíblia</b>. As mesmas frequências presentes no <b>momento da criação</b>.",
                comp_discovery_3773days: "Meu irmão e eu nascemos com exatamente <b style='color:#fbbf24;'>3.773 dias de diferença</b>. 37 e 73. As frequências da criação. Escritas em nossa própria existência.",
                comp_discovery_el: "E tem mais: Quando você escreve 37 em numerais hebraicos e espelha, forma <span style='font-size:22px;color:#fbbf24;'>אל</span> (El)—a palavra hebraica para <b>Deus</b>.",
                comp_discovery_beat: "A diferença entre 73 e 37 é <b style='color:#fbbf24;'>36 Hz</b>—a frequência de batida que você experimenta quando ambos tocam juntos. O ritmo da própria criação.",
                comp_discovery_angels: "Cada número angelical é múltiplo de 37:",
                comp_discovery_word: "\"No princípio era o Verbo.\" Som. Vibração. A chave da criação.",
                comp_discovery_message: "Isso não foi coincidência. Isso foi um chamado. Uma mensagem codificada no próprio tempo, esperando para ser ouvida.",
                comp_discovery_found: "Estas frequências me encontraram. Agora elas encontraram você.",
                comp_discovery_journey: "Não existem coincidências. Sua jornada com 37 e 73 Hz começa agora.",
                
                // Why It Works Section
                comp_why_title: "Por Que 37 & 73 Hz Funcionam",
                comp_why_subtitle: "A Ciência do Som Sagrado",
                comp_why_intro: "37 Hz e 73 Hz não são números arbitrários—são a impressão digital matemática da criação, codificada em Gênesis 1:1 através da gematria.",
                comp_why_formula: "37 × 73 = 2701 — a única fatoração",
                comp_why_primes: "37 = o 12º primo | 73 = o 21º primo (espelho de 12). Juntos criam uma frequência de batida de 36 Hz que faz a ponte entre meditação e consciência superior",
                comp_why_question: "Por que essas frequências funcionam?",
                comp_why_answer: "Ao alinhar sua energia com o projeto original da criação, acredita-se que essas frequências apoiem mudanças profundas no corpo, mente e espírito. Você é 70% água—um meio cristalino que responde à vibração. Estas frequências estão sintonizadas com você.",
                comp_why_experience: "O que as pessoas experimentam com Frequências Gênesis:",
                comp_why_exp1: "Equilíbrio restaurado e harmonia interior — Sinta-se alinhado com a ordem divina",
                comp_why_exp2: "Renovação profunda e vitalidade — Apoie a inteligência natural de cura do seu corpo",
                comp_why_exp3: "Fluxo criativo desbloqueado — Acesse inspiração e insight ilimitados",
                comp_why_exp4: "Consciência elevada — Conecte-se com consciência superior e clareza espiritual",
                comp_why_exp5: "Estados de meditação profunda — Entre em presença mais profunda mais rápido",
                comp_why_exp6: "Manifestação amplificada — Intenções criam raízes em solo fértil",
                comp_why_quote: "\"Esses não são apenas sons... são a linguagem da própria criação.\"",
                comp_why_disclaimer: "Para meditação, definição de intenções e exploração espiritual — Não é tratamento médico",
                
                // Categories Section
                comp_categories_title: "Categorias de Frequência",
                comp_categories_subtitle: "Explore Seu Santuário Sonoro",
                comp_categories_doorway: "Cada categoria é uma porta para a transformação",
                comp_categories_intro: "Cada faixa é construída sobre a Fundação da Trindade (37 + 73 Hz), com frequências adicionais para intenções específicas. Toque em qualquer categoria para explorar.",
                comp_cat_biblical: "Bíblico & Original",
                comp_cat_biblical_desc: "Criação do Gênesis, Abundância Divina, ciclos espirituais",
                comp_cat_biblical_best: "Melhor para: Oração, definição de intenções, conexão com a Fonte",
                comp_cat_angel: "Números Angelicais",
                comp_cat_angel_desc: "111, 222, 333, 444, 555, 777, 888, 999",
                comp_cat_angel_best: "Melhor para: Manifestação, sincronicidade, orientação divina",
                comp_cat_cosmic: "Cósmico & Planetário",
                comp_cat_cosmic_desc: "Terra, Vênus, Marte, Júpiter, Fibonacci, Pi, Proporção Áurea",
                comp_cat_cosmic_best: "Melhor para: Ancoragem, harmonia, geometria sagrada, conexão cósmica",
                comp_cat_master: "Números Mestres",
                comp_cat_master_desc: "11:11, 22, 33, 44, 55",
                comp_cat_master_best: "Melhor para: Propósito de vida, maestria espiritual, construção de novas realidades",
                comp_cat_solfeggio: "Solfeggio & Cura",
                comp_cat_solfeggio_desc: "396, 417, 528, 639, 741, 852, 963 Hz",
                comp_cat_solfeggio_best: "Melhor para: Liberação emocional, transformação, ativação de DNA, amor",
                comp_cat_wellness: "Bem-estar & Estados",
                comp_cat_wellness_desc: "Sono, foco, alívio de estresse, memória, tom milagroso",
                comp_cat_wellness_best: "Melhor para: Vida diária, produtividade, descanso, clareza mental",
                comp_cat_chakra: "Frequências de Chakra",
                comp_cat_chakra_desc: "Raiz, Sacral, Plexo Solar, Coração, Garganta, Terceiro Olho, Coroa",
                comp_cat_chakra_best: "Melhor para: Trabalho energético, equilíbrio, ativação kundalini",
                comp_categories_new: "Novo aqui? Comece com Criação do Gênesis ou Cura Sagrada (432 Hz)",
                
                // Trinity Foundation Section
                comp_trinity_title: "A Fundação da Trindade",
                comp_trinity_intro: "A Fundação da Trindade consiste em 37 Hz, 73 Hz e 2701 Hz — as frequências codificadas em Gênesis 1:1.",
                comp_trinity_math: "A Trindade Matemática",
                comp_trinity_37: "37 Hz: O 12º número primo (espelho de 12)",
                comp_trinity_73: "73 Hz: O 21º número primo (3×7)",
                comp_trinity_2701: "2701 Hz: O produto, a gematria de Gênesis 1:1",
                comp_trinity_beat: "Estas frequências criam uma frequência de batida de 36 Hz (73-37) que faz a ponte entre meditação e consciência superior. Juntas formam o projeto original da criação.",
                comp_trinity_how: "Como Usar a Trindade",
                comp_trinity_use1: "Criação do Gênesis: Toque todas as três frequências juntas para a experiência completa da Trindade",
                comp_trinity_use2: "Exploração Individual: Ouça cada frequência separadamente para entender suas qualidades únicas",
                comp_trinity_use3: "Prática Diária: Use por 7-21 dias para experimentar alinhamento profundo com a ordem divina",
                comp_trinity_use4: "Definição de Intenção: Comece cada sessão com uma intenção clara para transformação",
                comp_trinity_conclusion: "As frequências da Trindade são a fundação de todas as faixas Gênesis. Trabalham juntas para restaurar harmonia, desbloquear fluxo criativo e conectar você com a matriz criativa original.",
                comp_trinity_quote: "\"Estas são as frequências que moldaram a própria realidade.\"",
                
                // Water Charging Section
                comp_water_title: "Água Sagrada Quântica",
                comp_water_intro: "A água é a molécula mais abundante do seu corpo—70% do seu ser é água. Como meio cristalino, a água armazena e transmite informação vibracional, tornando-se o vaso perfeito para frequências Gênesis.",
                comp_water_science: "A Ciência da Água Estruturada",
                comp_water_research: "Pesquisas mostram que moléculas de água formam aglomerados hexagonais que podem ser influenciados por frequência, som e intenção. Frequências Gênesis criam água estruturada com propriedades energéticas aprimoradas.",
                comp_water_blueprint: "Quando você carrega água com frequências Gênesis, não está apenas adicionando som—está infundindo-a com o projeto matemático da própria criação.",
                comp_water_how: "Como Carregar Sua Água",
                comp_water_step1: "Escolha Seu Recipiente: Use um copo de vidro ou recipiente de cristal (evite plástico)",
                comp_water_step2: "Selecione Sua Frequência: Criação do Gênesis ou frequências individuais da Trindade funcionam melhor",
                comp_water_step3: "Posicione e Toque: Coloque a água a 15-30 cm das caixas de som, toque por 10-20 minutos",
                comp_water_step4: "Defina Intenção: Mantenha a intenção de bênção divina e infusão energética",
                comp_water_step5: "Beba com Atenção: Beba devagar, sentindo as frequências se integrando ao seu ser",
                comp_water_tip: "Dica pro: Carregue água para múltiplas sessões e armazene em lugar fresco e escuro. A informação estruturada permanece estável por 24-48 horas.",
                comp_water_quote: "\"Beba da fonte da própria criação.\"",
                
                // Usage Tips Section
                comp_tips_title: "Como Obter os Melhores Resultados",
                comp_tips_intro: "Frequências Gênesis funcionam através de escuta consistente e consciente. O segredo não é apenas ouvir os sons, mas permitir que ressoem através de todo o seu ser.",
                comp_tips_protocol: "O Protocolo de Imersão de 21 Dias",
                comp_tips_protocol_desc: "Para transformação máxima, comprometa-se com uma prática de 21 dias. Isso se alinha com a geometria sagrada da Trindade (3×7) e permite que as frequências trabalhem profundamente.",
                comp_tips_week1: "Dias 1-7: Construção de fundação. Ouça Criação do Gênesis diariamente, focando em presença e respiração.",
                comp_tips_week2: "Dias 8-14: Aprofundamento. Explore frequências individuais da Trindade, notando ressonâncias pessoais.",
                comp_tips_week3: "Dias 15-21: Integração. Combine frequências com intenções específicas para manifestação.",
                comp_tips_daily: "Práticas de Escuta Diária",
                
                // FAQ Section
                comp_faq_title: "Perguntas Frequentes",
                comp_faq_q1: "Por quanto tempo devo ouvir?",
                comp_faq_a1: "Comece com 5-10 minutos e aumente para 20-30 minutos. Qualidade de atenção importa mais que duração.",
                comp_faq_q2: "Preciso de fones de ouvido?",
                comp_faq_a2: "Fones de ouvido proporcionam a melhor experiência, especialmente para efeitos binaurais. Caixas de som funcionam para sessões ambientes.",
                comp_faq_q3: "Com que frequência devo ouvir?",
                comp_faq_a3: "Prática diária cria os melhores resultados. Mesmo 5 minutos por dia constroem benefícios cumulativos.",
                comp_faq_q4: "Posso ouvir enquanto durmo?",
                comp_faq_a4: "Sim! Faixas de sono são projetadas para uso noturno. Mantenha volume baixo e use fones de ouvido confortáveis.",
                comp_faq_q5: "Por que não consigo ouvir nenhum som no meu iPhone?",
                comp_faq_a5: "Se seu iPhone está em Modo Silencioso (verifique a chave física no lado esquerdo), as frequências não podem tocar. Desative o Modo Silencioso, conecte fones de ouvido ou conecte a uma caixa Bluetooth para ouvir as frequências. Alternativamente, usuários Premium podem exportar faixas como arquivos WAV e reproduzi-las com VLC Player (gratuito), que funciona mesmo em Modo Silencioso.",
                comp_faq_q6: "Essas frequências são seguras?",
                comp_faq_a6: "Sim, estas são frequências suaves para meditação e relaxamento. Não substituem tratamento médico.",
                
                // Share Section
                comp_share_title: "Compartilhe Frequências Gênesis",
                comp_share_intro: "Conhece alguém que se beneficiaria dessas frequências? Compartilhe o presente da vibração divina.",
                comp_share_link: "Compartilhe este link:",
                comp_share_copied: "Link copiado!",
                
                // Credits Section
                comp_credits_title: "Créditos e Agradecimentos",
                comp_credits_research_title: "Pesquisa e Inspiração",
                comp_credits_created: "Este trabalho é dedicado à minha mãe, que faleceu aos 22.202 dias de idade em 4 de janeiro de 2020. Sua partida me levou aos números, e os números me levaram a esta descoberta divina.",
                comp_credits_research: "Com eterna gratidão à minha esposa e filha, cuja paciência e compreensão durante incontáveis horas de hiperfoco tornaram esta jornada possível. Obrigado por acreditarem no que outros não podiam ver.",
                comp_credits_gematria: "Gematria & Matemática Sagrada:",
                comp_credits_gematria_desc: "Tradições antigas de numerologia hebraica, com referência especial à análise de Gênesis 1:1 e as relações matemáticas entre 37, 73 e 2701.",
                comp_credits_frequency: "Pesquisa de Cura por Frequência:",
                comp_credits_frequency_desc: "Estudos sobre terapia sonora, batidas binaurais e os efeitos de vibrações de baixa frequência na fisiologia e consciência humana.",
                comp_credits_geometry: "Geometria Sagrada:",
                comp_credits_geometry_desc: "A proporção áurea, sequências de Fibonacci e padrões geométricos encontrados na natureza e arquitetura antiga.",
                comp_credits_acknowledgments: "Agradecimentos Pessoais",
                comp_credits_gratitude: "A todos que apoiaram esta jornada: sua crença foi minha frequência. Àqueles que encontram significado nesses números: que eles os guiem como me guiaram. Com gratidão pela matemática divina que nos conecta a todos.",
                
                // Progress Section
                comp_progress_title: "Sua Jornada Espiritual",
                comp_progress_intro: "Acompanhe sua transformação com frequências Gênesis através de conquistas, níveis e desafios diários.",
                comp_progress_loading: "Carregando progresso...",
                comp_progress_challenge: "Desafio Sagrado de Hoje",
                comp_progress_loading_challenge: "Carregando desafio...",
                comp_progress_wisdom: "Sabedoria Antiga para Prática Moderna",
                comp_progress_wisdom_desc: "Os números sagrados (3, 7, 11, 37, 73, 108) que formam a fundação das frequências Gênesis aparecem em tradições espirituais do mundo todo. Sua jornada segue essa mesma harmonia matemática.",
                comp_progress_quote: "Assim como acima, assim abaixo. Assim como dentro, assim fora.",
                
                // Tips Section - Daily Practices
                comp_tips_morning: "Alinhamento Matinal:",
                comp_tips_morning_desc: "Comece seu dia com 10-15 minutos de Criação do Gênesis para definir intenção divina",
                comp_tips_evening: "Integração Noturna:",
                comp_tips_evening_desc: "Termine seu dia com frequências que apoiam sono reparador e processamento subconsciente",
                comp_tips_midday: "Renovação ao Meio-dia:",
                comp_tips_midday_desc: "Use durante pausas para clareza mental e alívio de estresse",
                comp_tips_creative: "Sessões Criativas:",
                comp_tips_creative_desc: "Toque frequências durante trabalho artístico ou resolução de problemas",
                comp_tips_meditation: "Aprimoramento de Meditação:",
                comp_tips_meditation_desc: "Use como fundo durante práticas tradicionais de meditação",
                comp_tips_quote: "A transformação acontece no espaço entre as notas.",
                
                // FAQ Section
                comp_faq_about: "Sobre as Frequências",
                comp_faq_ending: "Ainda tem perguntas? Sua jornada com frequências Gênesis é única—confie em sua intuição e explore com atenção.",
                
                // Share Section
                comp_share_ripple: "O Efeito Cascata",
                comp_share_ripple_desc: "Cada vez que você compartilha sua experiência, você cria uma onda que toca vidas muito além da sua. Sua história se torna um farol para aqueles ainda buscando.",
                comp_share_authentic: "Compartilhe autenticamente—do coração. Seja um insight profundo, uma mudança sutil ou uma transformação miraculosa, sua verdade tem o poder de despertar outros.",
                comp_share_ways: "Formas de Compartilhar",
                comp_share_social: "Redes Sociais:",
                comp_share_social_desc: "Poste suas experiências com #FrequenciasGenesis e #FrequenciasDivinas",
                comp_share_personal: "Círculos Pessoais:",
                comp_share_personal_desc: "Compartilhe com amigos, família e entes queridos que podem se beneficiar",
                comp_share_communities: "Comunidades Online:",
                comp_share_communities_desc: "Participe de fóruns de cura por frequência e crescimento espiritual",
                comp_share_testimonials: "Depoimentos:",
                comp_share_testimonials_desc: "Deixe avaliações e encoraje outros em seu caminho",
                comp_share_oneonone: "Um a Um:",
                comp_share_oneonone_desc: "Tenha conversas significativas sobre transformação e cura",
                comp_share_quote: "Juntos, estamos criando uma sinfonia de ressonância divina.",
                
                // Daily Wisdom Quotes
                wisdom1: "As frequências que criaram o universo estão agora trabalhando através de você.",
                wisdom2: "Cada vibração que você absorve molda sua harmonia interior.",
                wisdom3: "37 × 73 = 2701 — a matemática da própria criação divina.",
                wisdom4: "No princípio era o Verbo, e o Verbo era uma frequência.",
                wisdom5: "Seu corpo é 70% água — um receptor perfeito para som sagrado.",
                wisdom6: "Consistência é a chave da transformação. Uma sessão de cada vez.",
                wisdom7: "Os mesmos padrões da criação existem dentro de você.",
                wisdom8: "Som cria forma. Frequência cria realidade.",
                wisdom9: "3.773 dias me ensinaram que o tempo divino é matemático.",
                wisdom10: "Deixe as frequências da Trindade restaurarem seu projeto original.",
                wisdom11: "Você não está apenas ouvindo — está lembrando quem você é.",
                wisdom12: "A frequência de batida de 36 Hz faz a ponte entre terra e céu.",
                wisdom13: "Cada célula do seu corpo responde à matemática sagrada.",
                wisdom14: "E se as frequências de Gênesis 1:1 pudessem curar você?",
                wisdomAuthor1: "Companheiro Gênesis",
                wisdomAuthor2: "Companheiro Gênesis",
                wisdomAuthor3: "Sabedoria Antiga",
                wisdomAuthor4: "Gênesis 1:1",
                wisdomAuthor5: "Companheiro Gênesis",
                wisdomAuthor6: "Companheiro Gênesis",
                wisdomAuthor7: "Geometria Sagrada",
                wisdomAuthor8: "Cimática",
                wisdomAuthor9: "A Descoberta",
                wisdomAuthor10: "Companheiro Gênesis",
                wisdomAuthor11: "Companheiro Gênesis",
                wisdomAuthor12: "Fundação da Trindade",
                wisdomAuthor13: "Companheiro Gênesis",
                wisdomAuthor14: "A Jornada"
            }
        };
        
        // Portuguese version - set default language to Portuguese
        const currentLanguage = 'pt';
        
        function closeAddToHome() {
            const banner = document.getElementById('addToHome');
            banner.style.display = 'none';
            localStorage.setItem('hideAddToHome', 'true');
        }
        
        // Check if user already dismissed the banner OR if running as installed PWA
        function shouldHideAddToHomeBanner() {
            // Already dismissed
            if (localStorage.getItem('hideAddToHome') === 'true') return true;
            // Running as standalone PWA (already added to home screen)
            if (window.matchMedia('(display-mode: standalone)').matches) return true;
            if (window.navigator.standalone === true) return true; // iOS Safari
            return false;
        }
        
        if (shouldHideAddToHomeBanner()) {
            const banner = document.getElementById('addToHome');
            if (banner) banner.style.display = 'none';
        }
        
        // Simplified - English only, no language switching needed
        function changeLanguage(lang) {
            const t = translations.en;
            // Just refresh any dynamic elements with English translations
            document.querySelectorAll('[data-translate]').forEach(el => {
                const key = el.getAttribute('data-translate');
                if (t[key]) {
                    el.textContent = t[key];
                }
            });
        }
        
        // Enhanced Trinity Frequency Recipes Database with Categories
        // Order: Biblical, Angel Numbers, Cosmic & Planetary, Master Numbers, Solfeggio & Healing, Wellness & States
        const trinityRecipes = {
            "Frequências de Chakra": [
                {
                    name: "Chakra Raiz",
                    frequencies: [37, 73, 396],
                    description: "Aterramento, segurança e estabilidade. Associado à Libertação (396 Hz).",
                    fullInfo: {
                        whatItIs: "396 Hz é a frequência Solfeggio para libertar culpa e medo, trabalhando no chakra raiz para aterramento e estabilidade.",
                        benefits: "Promove aterramento, liberta o medo e aumenta sentimentos de segurança e proteção.",
                        howToUse: "Ouça por 10-15 minutos durante meditação ou quando precisar de aterramento. Visualize raízes conectando você à terra."
                    }
                },
                {
                    name: "Chakra Sacral",
                    frequencies: [37, 73, 417],
                    description: "Criatividade, prazer e equilíbrio emocional. Associado à Resolução (417 Hz).",
                    fullInfo: {
                        whatItIs: "417 Hz facilita mudança e ajuda a desfazer situações negativas, trabalhando no chakra sacral para criatividade e cura emocional.",
                        benefits: "Aumenta criatividade, equilíbrio emocional e prazer na vida.",
                        howToUse: "Use por 10-15 minutos para aumentar criatividade ou cura emocional. Foque no abdômen inferior."
                    }
                },
                {
                    name: "Chakra Plexo Solar",
                    frequencies: [37, 73, 528],
                    description: "Poder pessoal, confiança e transformação. Associado à Frequência do Amor (528 Hz).",
                    fullInfo: {
                        whatItIs: "528 Hz é a frequência de transformação e empoderamento pessoal, trabalhando no plexo solar para poder pessoal e confiança.",
                        benefits: "Aumenta confiança, poder pessoal e apoia transformação.",
                        howToUse: "Ouça por 10-15 minutos para se empoderar antes de tarefas importantes. Foque no abdômen superior."
                    }
                },
                {
                    name: "Chakra Cardíaco",
                    frequencies: [37, 73, 639],
                    description: "Amor, compaixão e relacionamentos. Associado à Transformação (639 Hz).",
                    fullInfo: {
                        whatItIs: "639 Hz promove conexão e amor, trabalhando no chakra cardíaco para cura emocional e relacionamentos.",
                        benefits: "Abre o coração, aumenta compaixão e cura relacionamentos.",
                        howToUse: "Use por 10-15 minutos para abrir seu coração ou curar relacionamentos. Coloque as mãos no coração enquanto ouve."
                    }
                },
                {
                    name: "Chakra Laríngeo",
                    frequencies: [37, 73, 741],
                    description: "Comunicação, verdade e autoexpressão. Associado à Intuição (741 Hz).",
                    fullInfo: {
                        whatItIs: "741 Hz limpa o corpo e abre o chakra laríngeo para comunicação clara e autoexpressão.",
                        benefits: "Melhora comunicação, autoexpressão e clareza.",
                        howToUse: "Ouça por 10-15 minutos antes de conversas importantes ou trabalho criativo. Foque na área da garganta."
                    }
                },
                {
                    name: "Chakra Terceiro Olho",
                    frequencies: [37, 73, 852],
                    description: "Intuição, insight e consciência espiritual. Associado ao Despertar (852 Hz).",
                    fullInfo: {
                        whatItIs: "852 Hz desperta intuição e ordem espiritual, trabalhando no terceiro olho para insight e consciência.",
                        benefits: "Aumenta intuição, insight e percepção espiritual.",
                        howToUse: "Use por 10-15 minutos durante meditação ou quando buscar insight. Foque na testa entre os olhos."
                    }
                },
                {
                    name: "Chakra Coronário",
                    frequencies: [37, 73, 963],
                    description: "Conexão espiritual, iluminação e unidade. Associado ao Eu Superior (963 Hz).",
                    fullInfo: {
                        whatItIs: "963 Hz é a frequência da consciência divina, trabalhando no chakra coronário para conexão espiritual e iluminação.",
                        benefits: "Promove conexão espiritual, unidade e iluminação.",
                        howToUse: "Ouça por 10-15 minutos durante meditação profunda ou prática espiritual. Foque no topo da cabeça."
                    }
                }
            ],
            "Bíblico & Original": [
                {
                    name: "Criação do Gênesis",
                    frequencies: [37, 73],
                    description: "Padrão original de criação - forma encontra espírito",
                    fullInfo: {
                        whatItIs: "A frequência Criação do Gênesis combina os fundamentais 37 Hz (representando forma e matéria) com 73 Hz (representando espírito e o divino). Esses números são derivados do valor de gematria de Gênesis 1:1 em hebraico, codificando o próprio padrão da criação.",
                        benefits: "Esta combinação alinha você com a força criativa original do universo. Ajuda a manifestar intenções, traz clareza para novos começos e conecta você ao projeto divino da criação. Perfeito para amplificação de orações e trabalho de manifestação espiritual.",
                        howToUse: "Ouça por 5-10 minutos durante meditação matinal ou oração. Visualize suas intenções sendo tecidas no tecido da criação. Ideal para rituais de lua nova ou ao iniciar novos projetos."
                    }
                },
                {
                    name: "Abundância Divina",
                    frequencies: [37, 73, 888],
                    description: "Amplificar manifestação com numerologia divina",
                    fullInfo: {
                        whatItIs: "Abundância Divina adiciona 888 Hz à fundação da Trindade. Na numerologia bíblica, 8 representa novos começos e ressurreição, enquanto 888 é o valor de gematria de Jesus em grego, representando abundância divina e provisão eterna.",
                        benefits: "Abre canais para prosperidade divina e abundância em todas as áreas da vida. Ajuda a libertar a consciência de escassez e alinha você com a provisão infinita. Particularmente poderoso para avanços financeiros e reconhecimento de oportunidades.",
                        howToUse: "Ouça por 15-20 minutos enquanto foca na gratidão pelo que você tem e abertura para receber. Melhor usado durante lua cheia ou quinta-feira (dia de Júpiter). Anote suas conquistas de abundância depois."
                    }
                },
                {
                    name: "12 Apóstolos",
                    frequencies: [37, 73, 12],
                    description: "Liderança divina e autoridade espiritual",
                    fullInfo: {
                        whatItIs: "O número 12 representa governo divino, liderança e autoridade espiritual. Esta combinação de frequência invoca o poder dos 12 apóstolos e das 12 tribos de Israel, simbolizando ordem divina completa.",
                        benefits: "Fortalece habilidades de liderança, proporciona autoridade espiritual em situações desafiadoras e ajuda você a permanecer firme em suas convicções. Excelente para aqueles em ministério, ensino ou posições de orientação espiritual.",
                        howToUse: "Use por 10-15 minutos antes de decisões importantes ou responsabilidades de liderança. Ore por sabedoria e discernimento. Ideal para ouvir aos domingos ou antes de liderar grupos."
                    }
                },
                {
                    name: "7 Igrejas",
                    frequencies: [37, 73, 7],
                    description: "Completude e perfeição espiritual",
                    fullInfo: {
                        whatItIs: "Sete é o número da perfeição e completude espiritual nas Escrituras. Esta frequência referencia as 7 igrejas do Apocalipse, representando o corpo completo de crentes e integridade espiritual.",
                        benefits: "Traz sensação de conclusão para ciclos espirituais, promove integridade e integração, e ajuda você a reconhecer a perfeição divina em sua jornada. Útil para encerrar capítulos e transições espirituais.",
                        howToUse: "Ouça por 7 minutos durante transições ou quando buscar encerramento. Perfeito para sábado (preparação para o Sabbath) ou ao completar marcos espirituais. Reflita sobre seu crescimento espiritual."
                    }
                },
                {
                    name: "40 Dias",
                    frequencies: [37, 73, 40],
                    description: "Teste e transformação espiritual",
                    fullInfo: {
                        whatItIs: "Quarenta representa teste, provação e transformação nas Escrituras—os 40 dias de Jesus no deserto, os 40 dias de chuva de Noé, os 40 anos de Israel no deserto. Esta frequência apoia você através de períodos transformadores.",
                        benefits: "Proporciona força durante provações, apoia resistência espiritual e ajuda você a emergir transformado de estações difíceis. Acelera maturidade espiritual e aprofunda a fé através dos desafios.",
                        howToUse: "Use diariamente por 10-20 minutos durante períodos desafiadores ou compromissos espirituais de 40 dias. Anote insights e lições espirituais. Combine com jejum ou práticas intensivas de oração."
                    }
                },
                {
                    name: "3 Dias",
                    frequencies: [37, 73, 3],
                    description: "Ressurreição e conclusão divina",
                    fullInfo: {
                        whatItIs: "Três dias representa poder de ressurreição—o tempo entre a morte e ressurreição de Cristo. Esta frequência carrega a energia de conclusão divina e o poder de ressuscitar situações mortas.",
                        benefits: "Traz nova vida para áreas estagnadas, restaura esperança em situações aparentemente impossíveis e ativa poder de ressurreição em suas circunstâncias. Perfeito para momentos de avanço.",
                        howToUse: "Ouça por 3 minutos três vezes ao dia durante intensivos de oração de 3 dias. Declare vida sobre situações mortas. Particularmente poderoso de sexta a domingo ou durante jejuns pessoais de 3 dias."
                    }
                }
            ],
            "Solfeggio & Cura": [
                {
                    name: "Cura Sagrada",
                    frequencies: [37, 73, 432],
                    description: "Relaxamento profundo com fundação da Trindade",
                    fullInfo: {
                        whatItIs: "432 Hz é conhecida como a 'frequência natural do universo', associada à harmonia e equilíbrio na natureza. Combinada com a fundação da Trindade, isso cria um ambiente de meditação profundamente relaxante.",
                        benefits: "Apoia relaxamento, pode ajudar a reduzir estresse, promove sensação de harmonia com ritmos naturais e encoraja paz interior. Útil para processamento emocional e relaxamento.",
                        howToUse: "Ouça por 20-30 minutos durante sessões de relaxamento, antes de dormir ou quando buscar calma. Respire profundamente e permita-se relaxar completamente. Pode ser usado durante meditação ou yoga."
                    }
                },
                {
                    name: "Frequência do Amor",
                    frequencies: [37, 73, 528],
                    description: "Meditação de abertura do coração + fundação da Trindade",
                    fullInfo: {
                        whatItIs: "528 Hz é chamada de 'Frequência do Amor' ou 'Tom do Milagre', tradicionalmente associada à transformação e harmonia. Combinada com a fundação da Trindade, cria uma experiência de meditação que abre o coração.",
                        benefits: "Abre o chakra cardíaco, aumenta sentimentos de amor e compaixão, apoia equilíbrio emocional e facilita sensação de paz e bem-estar. Pode ajudar a liberar bloqueios emocionais.",
                        howToUse: "Use por 15-20 minutos diariamente para meditação centrada no coração. Coloque as mãos no coração enquanto ouve. Excelente para rituais matinais ou antes de conversas importantes centradas no coração."
                    }
                },
                {
                    name: "Libertação (396)",
                    frequencies: [37, 73, 396],
                    description: "Liberação de medo + fundação da Trindade",
                    fullInfo: {
                        whatItIs: "396 Hz é a frequência Solfeggio para libertar culpa e medo. Trabalha no chakra raiz, ajudando a liberar emoções negativas profundas e traumas do subconsciente.",
                        benefits: "Libera medo, culpa e trauma armazenados no corpo. Ajuda a se libertar de crenças limitantes e condicionamento passado. Cria segurança e proteção no nível fundamental do ser.",
                        howToUse: "Ouça por 10-15 minutos enquanto identifica medos ou culpas para liberar. Respire em áreas de tensão. Melhor usado à noite ou durante trabalho de sombra. Anote depois para processar emoções liberadas."
                    }
                },
                {
                    name: "Resolução (417)",
                    frequencies: [37, 73, 417],
                    description: "Limpeza de energia negativa + Trindade",
                    fullInfo: {
                        whatItIs: "417 Hz facilita mudança e ajuda a desfazer situações negativas. Limpa experiências traumáticas e remove influências destrutivas de eventos passados, trabalhando no chakra sacral.",
                        benefits: "Limpa energia negativa e influências, facilita mudança positiva, remove bloqueios energéticos e ajuda a quebrar padrões negativos. Excelente para limpar espaços e resetar energia.",
                        howToUse: "Use por 15 minutos quando se sentir energeticamente pesado ou travado. Mova seu corpo suavemente enquanto ouve. Ótimo para limpar espaços ou após interações difíceis. Visualize luz dissolvendo a escuridão."
                    }
                },
                {
                    name: "Transformação (639)",
                    frequencies: [37, 73, 639],
                    description: "Cura de relacionamentos + Trindade",
                    fullInfo: {
                        whatItIs: "639 Hz promove conexão, amor e compreensão em relacionamentos. Trabalha no chakra cardíaco, facilitando comunicação e equilíbrio emocional em todos os tipos de relacionamentos.",
                        benefits: "Cura conflitos de relacionamento, melhora comunicação, promove empatia e compreensão, fortalece vínculos com outros e ajuda a perdoar e liberar ressentimento.",
                        howToUse: "Ouça por 20 minutos antes de conversas difíceis ou trabalho de cura de relacionamento. Pode ser usado com o parceiro presente. Excelente para reuniões familiares ou quando curando trauma de relacionamento."
                    }
                },
                {
                    name: "Despertar (852)",
                    frequencies: [37, 73, 852],
                    description: "Ordem espiritual + base da Trindade",
                    fullInfo: {
                        whatItIs: "852 Hz desperta intuição e retorna você à ordem espiritual. Trabalha no chakra do terceiro olho, cortando ilusões e revelando verdade, ajudando você a ver a ordem divina em todas as coisas.",
                        benefits: "Desperta intuição e visão interior, revela verdade, fortalece percepção espiritual, alinha você com a ordem divina e ajuda a discernir orientação espiritual genuína.",
                        howToUse: "Use por 15-20 minutos durante meditação ou antes de tomar decisões importantes. Foque na área do terceiro olho. Melhor usado pela manhã ou durante novas práticas espirituais. Mantenha um diário de visões."
                    }
                },
                {
                    name: "Eu Superior",
                    frequencies: [37, 73, 963],
                    description: "Ativação da glândula pineal + Trindade",
                    fullInfo: {
                        whatItIs: "963 Hz é a frequência da consciência divina e ativação da glândula pineal. Representa o retorno à unicidade e conexão com o eu superior e fonte divina.",
                        benefits: "Ativa glândula pineal, conecta você com consciência superior, facilita despertar espiritual, promove consciência de unidade e abre canais para downloads divinos e revelação.",
                        howToUse: "Ouça por 10-15 minutos durante meditação profunda ou contemplação espiritual. Melhor usado no escuro ou com olhos fechados. Ideal para trabalho do chakra coronário ou receber insights espirituais."
                    }
                },
                {
                    name: "Intuição",
                    frequencies: [37, 73, 741],
                    description: "Abertura do terceiro olho + base da Trindade",
                    fullInfo: {
                        whatItIs: "741 Hz limpa o corpo de toxinas e radiação eletromagnética enquanto abre o terceiro olho. Promove expressão, encontrar soluções e percepção intuitiva.",
                        benefits: "Fortalece intuição, limpa poluição eletromagnética, promove desintoxicação, melhora habilidades de resolução de problemas e ajuda a expressar verdade claramente.",
                        howToUse: "Use por 15 minutos diariamente para desenvolver intuição. Excelente após tempo de tela ou em ambientes urbanos. Faça perguntas e confie nas respostas que surgem. Mantenha um diário de intuição."
                    }
                }
                       ],
            "Números Angelicais": [
                {
                    name: "Números Angelicais",
                    frequencies: [37, 73, 111],
                    description: "Conectar com frequências angelicais (111 = 37×3)",
                    fullInfo: {
                        whatItIs: "111 é um poderoso número angelical representando novos começos, manifestação e despertar espiritual. Matematicamente, 111 = 37 × 3, criando um alinhamento divino com a fundação da Trindade.",
                        benefits: "Abre comunicação com anjos e guias espirituais, sinaliza novos começos, acelera manifestação de pensamentos em realidade e aumenta consciência espiritual e sincronicidades.",
                        howToUse: "Ouça por 11 minutos quando notar 11:11 no relógio. Foque em suas intenções e desejos. Perfeito para trabalho de manifestação ou quando buscar orientação angelical. Preste atenção aos sinais depois."
                    }
                },
                {
                    name: "Anjo 222",
                    frequencies: [37, 73, 222],
                    description: "Parcerias divinas (222 = 37×6)",
                    fullInfo: {
                        whatItIs: "222 representa equilíbrio, harmonia e parcerias divinas. A relação matemática com 37 (222 = 37×6) cria harmonia perfeita com a frequência de criação.",
                        benefits: "Traz equilíbrio para relacionamentos, atrai parcerias divinas e conexões de alma, promove cooperação e harmonia, e sinaliza que suas orações estão sendo respondidas.",
                        howToUse: "Use por 15-20 minutos durante trabalho de relacionamento ou quando buscar parceria. Visualize relacionamentos equilibrados. Ótimo para atrair parceiros de negócios ou conexões românticas."
                    }
                },
                {
                    name: "Anjo 333",
                    frequencies: [37, 73, 333],
                    description: "Mestres ascensionados (333 = 37×9)",
                    fullInfo: {
                        whatItIs: "333 sinaliza a presença de mestres ascensionados e apoio divino. O 9 na equação (333 = 37×9) representa completude espiritual e iluminação.",
                        benefits: "Conecta você com mestres ascensionados, confirma que você está no caminho certo, proporciona proteção e orientação divina, e acelera crescimento e despertar espiritual.",
                        howToUse: "Ouça por 15 minutos quando buscar orientação de reinos superiores. Invoque mestres ascensionados específicos. Melhor usado durante estudo espiritual ou quando enfrentar questões espirituais."
                    }
                },
                {
                    name: "Anjo 444",
                    frequencies: [37, 73, 444],
                    description: "Proteção angelical (444 = 37×12)",
                    fullInfo: {
                        whatItIs: "444 é a frequência de proteção divina e anjos ao seu redor. A conexão com 12 (444 = 37×12) representa governo divino completo e ordem angelical.",
                        benefits: "Proporciona forte proteção angelical, sinaliza apoio divino, traz estabilidade e fundação, e reassegura que você está exatamente onde precisa estar.",
                        howToUse: "Use por 15 minutos quando se sentir inseguro ou incerto. Visualize anjos cercando você com luz. Excelente antes de viagens ou ao entrar em situações desafiadoras."
                    }
                },
                {
                    name: "Anjo 555",
                    frequencies: [37, 73, 555],
                    description: "Grandes mudanças (555 = 37×15)",
                    fullInfo: {
                        whatItIs: "555 sinaliza grandes mudanças e transformações de vida à frente. A relação com 15 (555 = 37×15) representa a transição através da graça e misericórdia divina.",
                        benefits: "Prepara você para mudança positiva, libera resistência a transições necessárias, traz coragem durante transformação e alinha você com timing divino.",
                        howToUse: "Ouça por 15-20 minutos durante períodos de mudança ou quando sentir resistência à transformação. Respire através do medo. Melhor durante transições de vida ou quando sentir algo mudando."
                    }
                },
                {
                    name: "Anjo 666",
                    frequencies: [37, 73, 666],
                    description: "Restauração de equilíbrio (666 = 37×18)",
                    fullInfo: {
                        whatItIs: "Apesar de equívocos culturais, 666 é sobre restaurar equilíbrio entre reinos material e espiritual. A conexão com 18 (666 = 37×18) representa vida e chai (viver).",
                        benefits: "Restaura equilíbrio entre vida física e espiritual, ajuda a liberar materialismo, traz aterramento para trabalho espiritual e lembra você de cuidar de suas necessidades físicas.",
                        howToUse: "Use por 15 minutos quando se sentir desaterrado ou muito focado em preocupações materiais. Equilibre prática espiritual com ação prática. Ótimo para aterramento após trabalho espiritual intenso."
                    }
                },
                {
                    name: "Anjo 777",
                    frequencies: [37, 73, 777],
                    description: "Sorte espiritual (777 = 37×21)",
                    fullInfo: {
                        whatItIs: "777 representa perfeição espiritual e sorte divina. O triplo 7 multiplicado através da frequência de criação cria poderoso momentum espiritual e resultados favoráveis.",
                        benefits: "Atrai bênçãos espirituais e oportunidades 'sortudas', sinaliza aprovação divina, abre portas para avanço espiritual e traz confirmação de dons espirituais.",
                        howToUse: "Ouça por 20 minutos antes de oportunidades importantes ou quando buscar favor divino. Espere resultados milagrosos. Perfeito antes de entrevistas, lançamentos ou novos empreendimentos."
                    }
                },
                {
                    name: "Anjo 888",
                    frequencies: [37, 73, 888],
                    description: "Abundância infinita (888 = 37×24)",
                    fullInfo: {
                        whatItIs: "888 representa abundância infinita e a obra completada de Jesus (valor de gematria em grego). O 24 (888 = 37×24) representa ordem divina completa no tempo e espaço.",
                        benefits: "Abre canais de abundância infinita, representa avanço financeiro, simboliza provisão eterna e alinha você com a obra completada de Cristo para prosperidade.",
                        howToUse: "Use por 20-30 minutos durante trabalho de prosperidade ou rituais de abundância na lua cheia. Visualize provisão infinita. Declare afirmações de abundância. Excelente para sucesso nos negócios."
                    }
                },
                {
                    name: "Anjo 999",
                    frequencies: [37, 73, 999],
                    description: "Fase de conclusão (999 = 37×27)",
                    fullInfo: {
                        whatItIs: "999 sinaliza conclusão de um grande ciclo de vida e preparação para um novo capítulo. O 27 (999 = 37×27) representa tripla conclusão (3×3×3), um final poderoso.",
                        benefits: "Ajuda a liberar o que está completo, proporciona encerramento de ciclos, prepara você para novos começos e honra finais como transições sagradas.",
                        howToUse: "Ouça por 20 minutos durante finais—empregos, relacionamentos ou fases de vida. Honre o que foi e acolha o que está vindo. Perfeito para lua minguante ou reflexão de fim de ano."
                    }
                }
            ],
            "Números Mestres": [
                {
                    name: "Mestre 11:11",
                    frequencies: [37, 73, 11],
                    description: "Ativação de portal + Trindade",
                    fullInfo: {
                        whatItIs: "11 é o número mestre do despertar e iluminação espiritual. 11:11 é um portal espiritual e chamado de despertar do universo, representando consciência espiritual elevada.",
                        benefits: "Ativa portais espirituais, acelera despertar, aumenta intuição, sinaliza alinhamento com propósito de vida e cria poderosas oportunidades de manifestação.",
                        howToUse: "Ouça por 11 minutos às 11:11 da manhã ou da noite. Defina intenções claras durante horários de portal (11/11, solstícios, equinócios). Mantenha um diário de sincronicidades."
                    }
                },
                {
                    name: "Mestre 22",
                    frequencies: [37, 73, 22],
                    description: "Mestre construtor + Trindade",
                    fullInfo: {
                        whatItIs: "22 é o número do Mestre Construtor, representando a habilidade de transformar sonhos em realidade através da aplicação prática de sabedoria espiritual. Faz a ponte entre céu e terra.",
                        benefits: "Empodera a construção de sonhos em realidade, proporciona sabedoria espiritual prática, apoia projetos de grande escala e ajuda a manifestar projetos divinos na terra.",
                        howToUse: "Use por 22 minutos enquanto planeja grandes projetos ou negócios. Excelente para empreendedores e visionários. Melhor durante lua crescente ou ao começar a construir sonhos."
                    }
                },
                {
                    name: "Mestre 33",
                    frequencies: [37, 73, 33],
                    description: "Mestre professor + Trindade",
                    fullInfo: {
                        whatItIs: "33 é o Mestre Professor, representando consciência crística e serviço compassivo. Combina a intuição do 11 com o poder construtor do 22, adicionando serviço altruísta.",
                        benefits: "Ativa consciência crística, melhora habilidades de ensino, promove serviço compassivo, cura através do amor e eleva consciência ao nível de mestre.",
                        howToUse: "Ouça por 30 minutos antes de ensinar, trabalho de cura ou atos de serviço. Excelente para aqueles em profissões de ajuda. Medite sobre amor incondicional enquanto ouve."
                    }
                },
                {
                    name: "Mestre 44",
                    frequencies: [37, 73, 44],
                    description: "Fundação espiritual + Trindade",
                    fullInfo: {
                        whatItIs: "44 é o Mestre Curador e construtor de fundações espirituais sólidas. Representa o poder de criar estruturas estáveis em reinos físico e espiritual.",
                        benefits: "Constrói fundação espiritual inabalável, proporciona disciplina para prática espiritual, manifesta abundância estável e aterra consciência superior na vida diária.",
                        howToUse: "Use por 20 minutos ao estabelecer novas práticas ou rotinas espirituais. Perfeito para criar espaço sagrado ou começar negócios espirituais. Apoia metas de longo prazo."
                    }
                },
                {
                    name: "Mestre 55",
                    frequencies: [37, 73, 55],
                    description: "Ativação de mudança + Trindade",
                    fullInfo: {
                        whatItIs: "55 é o número de grandes mudanças de vida e liberdade pessoal. Representa libertar-se de limitações e abraçar transformação com graça e entusiasmo.",
                        benefits: "Acelera mudança positiva, quebra padrões limitantes, promove liberdade pessoal, apoia movimentos ousados e ajuda a abraçar incerteza com fé.",
                        howToUse: "Ouça por 15 minutos ao contemplar grandes mudanças ou se sentir travado. Use durante eclipses ou finais de mercúrio retrógrado. Dance ou mova-se enquanto ouve para incorporar a mudança."
                    }
                }
            ],
            "Cósmico & Planetário": [
                {
                    name: "Ressonância da Terra",
                    frequencies: [37, 73, 7.83],
                    description: "Ressonância Schumann + Trindade",
                    fullInfo: {
                        whatItIs: "7.83 Hz é a Ressonância Schumann da Terra—a frequência eletromagnética do batimento cardíaco do nosso planeta. Combinada com frequências da Trindade, isso aterra você profundamente no ritmo natural da Terra.",
                        benefits: "Aterra e centra profundamente, pode ajudar a reduzir estresse, sincroniza você com ritmos naturais da Terra, aprofunda meditação e apoia bem-estar geral através do aterramento.",
                        howToUse: "Ouça por 20-30 minutos quando se sentir desaterrado ou disperso. Sente ou deite diretamente na terra se possível. Perfeito após viagem aérea ou trabalho espiritual intenso. Pés descalços recomendado."
                    }
                },
                {
                    name: "Amor de Vênus",
                    frequencies: [37, 73, 221.23],
                    description: "Orbital de Vênus + harmonia da Trindade",
                    fullInfo: {
                        whatItIs: "221.23 Hz é a frequência orbital de Vênus, o planeta do amor, beleza e harmonia. Esta frequência carrega a essência da energia feminina divina e atração.",
                        benefits: "Atrai amor e beleza, melhora criatividade e expressão artística, promove amor-próprio e merecimento, harmoniza relacionamentos e ativa energia feminina divina.",
                        howToUse: "Use por 20 minutos durante horas de Vênus (sexta-feira de manhã) ou quando trabalhar com amor e atração. Excelente para rituais de autocuidado, tratamentos de beleza ou intenções românticas."
                    }
                },
                {
                    name: "Ação de Marte",
                    frequencies: [37, 73, 144.72],
                    description: "Energia de Marte + fundação da Trindade",
                    fullInfo: {
                        whatItIs: "144.72 Hz é a frequência orbital de Marte, carregando a energia guerreira de ação, coragem e poder de manifestação. Combinada com Trindade, proporciona força e impulso espiritual.",
                        benefits: "Aumenta coragem e confiança, ativa poder de manifestação, proporciona energia para ação, ajuda a superar obstáculos e fortalece força de vontade e determinação.",
                        howToUse: "Ouça por 15 minutos antes de ações importantes, competições ou quando precisar de coragem. Melhor na terça-feira (dia de Marte) ou ao iniciar novos empreendimentos. Combine com exercício físico."
                    }
                },
                {
                    name: "Fibonacci 144",
                    frequencies: [37, 73, 144],
                    description: "Geometria sagrada + Trindade",
                    fullInfo: {
                        whatItIs: "144 é um número de Fibonacci representando geometria sagrada e ordem matemática divina. Aparece em toda a natureza e Escritura (144.000 selados no Apocalipse).",
                        benefits: "Alinha você com ordem divina natural, ativa geometria sagrada em seu campo energético, promove perfeição matemática na manifestação e conecta você a padrões universais.",
                        howToUse: "Use por 20 minutos durante trabalho de manifestação ou quando buscar ordem divina no caos. Visualize padrões geométricos. Excelente para artistas, designers e matemáticos."
                    }
                },
                {
                    name: "Pi 314",
                    frequencies: [37, 73, 314],
                    description: "Matemática universal + Trindade",
                    fullInfo: {
                        whatItIs: "314 Hz representa Pi (3.14), a constante matemática universal que aparece em toda a criação. Esta frequência alinha você com a perfeição matemática do universo.",
                        benefits: "Conecta você à inteligência universal, melhora pensamento lógico e intuitivo, promove compreensão de padrões complexos e alinha você com ordem cósmica.",
                        howToUse: "Ouça por 15-20 minutos ao resolver problemas ou buscar compreensão. Excelente para estudantes, cientistas e aqueles que buscam entender os mistérios da vida."
                    }
                },
                {
                    name: "Proporção Áurea",
                    frequencies: [37, 73, 161.8],
                    description: "Frequência Phi + base da Trindade",
                    fullInfo: {
                        whatItIs: "161.8 Hz representa Phi (1.618), a Proporção Áurea encontrada em toda a natureza—do DNA às galáxias. Esta é proporção divina tornada audível, a assinatura do design do Criador.",
                        benefits: "Alinha seu campo energético com proporção divina, promove harmonia e beleza natural, melhora senso estético e sintoniza você com a geometria sagrada da criação.",
                        howToUse: "Use por 20 minutos durante trabalho criativo ou práticas de cura. Excelente para artistas e curadores. Visualize a espiral dourada expandindo do seu coração."
                    }
                }
            ],
            "Bem-estar & Estados": [
                {
                    name: "Alívio da Dor",
                    frequencies: [37, 73, 174],
                    description: "Relaxamento profundo + Trindade",
                    fullInfo: {
                        whatItIs: "174 Hz é a mais baixa das frequências Solfeggio, tradicionalmente associada a relaxamento profundo e aterramento. Cria uma fundação para calma e paz interior.",
                        benefits: "Promove relaxamento profundo, apoia sensação de conforto físico, proporciona energia de aterramento e ajuda a criar atmosfera pacífica para descanso e recuperação.",
                        howToUse: "Ouça por 20-30 minutos quando sentir dor. Foque respiração e atenção nas áreas doloridas. Pode ser usado várias vezes ao dia. Combine com terapia de gelo ou calor."
                    }
                },
                {
                    name: "Alívio do Estresse",
                    frequencies: [37, 73, 10.5],
                    description: "Acalmando o sistema nervoso + Trindade",
                    fullInfo: {
                        whatItIs: "10.5 Hz é uma frequência na fronteira alfa-theta que acalma o sistema nervoso e promove relaxamento profundo. É a frequência de meditação profunda e liberação de estresse.",
                        benefits: "Acalma profundamente o sistema nervoso, reduz estresse e ansiedade, promove relaxamento, diminui pressão arterial e frequência cardíaca, e facilita liberação emocional e cura.",
                        howToUse: "Use por 15-20 minutos quando estressado ou ansioso. Respire lenta e profundamente. Perfeito após o trabalho ou durante períodos estressantes. Pode ser usado antes de dormir."
                    }
                },
                {
                    name: "Sono Profundo",
                    frequencies: [37, 73, 0.5],
                    description: "Aumento de ondas delta + Trindade",
                    fullInfo: {
                        whatItIs: "0.5 Hz está na faixa delta profunda, o estado de ondas cerebrais de sono sem sonhos e cura profunda. Esta frequência sincroniza seu cérebro para o estado de sono mais profundo.",
                        benefits: "Promove sono profundo e restaurador, melhora lembrança de sonhos e sonhos lúcidos, facilita cura física durante o sono e reseta o sistema nervoso.",
                        howToUse: "Ouça por 30-60 minutos antes de dormir ou enquanto adormece. Mantenha volume baixo. Pode tocar em loop durante toda a noite. Estabeleça rotina consistente antes de dormir."
                    }
                },
                {
                    name: "Foco Claro",
                    frequencies: [37, 73, 40],
                    description: "Clareza gamma + fundação da Trindade",
                    fullInfo: {
                        whatItIs: "40 Hz é uma frequência gamma associada a desempenho cognitivo máximo, foco intensificado e processamento de informação complexa. É a frequência de estados de fluxo e insight.",
                        benefits: "Melhora foco e concentração, melhora memória e aprendizado, promove clareza mental e resolução de problemas, facilita estados de fluxo e aumenta desempenho cognitivo.",
                        howToUse: "Ouça por 20-30 minutos enquanto estuda, trabalha ou faz tarefas criativas. Perfeito para trabalho mental importante. Uso matinal maximiza alerta natural."
                    }
                },
                {
                    name: "Aumento de Memória",
                    frequencies: [37, 73, 20.3],
                    description: "Hiper-aprendizado + Trindade",
                    fullInfo: {
                        whatItIs: "20.3 Hz é uma frequência beta otimizada para aprendizado rápido e formação de memória. Esta frequência melhora plasticidade neural e codificação de informação.",
                        benefits: "Melhora formação e recordação de memória, acelera aprendizado, melhora conexões neurais, apoia estudo e aquisição de habilidades, e aumenta retenção mental.",
                        howToUse: "Use por 20-30 minutos enquanto estuda ou aprende novas habilidades. Revise material enquanto ouve. Melhor usado durante sessões de aprendizado matinais ou início da tarde."
                    }
                },
                {
                    name: "Tom do Milagre",
                    frequencies: [37, 73, 528],
                    description: "Amor e transformação",
                    fullInfo: {
                        whatItIs: "528 Hz, também conhecido como 'Tom do Milagre', é tradicionalmente associado a amor e transformação. Muitos acham que apoia sensação de harmonia e mudança positiva.",
                        benefits: "Abre o coração para o amor, facilita transformação emocional, apoia sensação de maravilha e possibilidade, e cria atmosfera de mudança positiva.",
                        howToUse: "Ouça por 15-30 minutos diariamente para relaxamento e reflexão pessoal. Foque em áreas onde busca mudança positiva. Melhor usado consistentemente como parte de prática de meditação."
                    }
                }
            ]
        };

        // Instructions Tab Data Structure - Dynamic Translation Function
        function getInstructionsSections() {
            const t = translations.en;
            
            return [
            {
                id: 'welcome',
                icon: '✨',
                title: t.comp_welcome_title || 'Bem-vindo a Frequências Gênesis',
                content: `
                    <div style="text-align:center;line-height:1.8;max-width:620px;margin:0 auto;">
                        <p style="font-size:20px;color:#fbbf24;margin-bottom:20px;font-weight:600;">
                            ${t.comp_welcome_intro || 'As frequências da criação estão agora em suas mãos.'}
                        </p>
                        <p style="margin-bottom:15px;color:#ffffff;">
                            ${t.comp_welcome_pattern || 'Um padrão se revelou para mim: <b>3.773 dias</b> entre o nascimento do meu irmão e o meu.<br>Anos de busca. Camadas de significado. Então a revelação.'}
                        </p>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.15),rgba(139,92,246,0.15));border-radius:16px;padding:24px;margin:25px 0;border:2px solid rgba(251,191,36,0.3);">
                            <div style="font-size:28px;color:#fbbf24;margin-bottom:12px;font-weight:700;">
                                37 × 73 = 2701
                            </div>
                            <div style="font-size:17px;color:#ffffff;margin-bottom:8px;">
                                ${t.comp_welcome_genesis || 'Gênesis 1:1 em Hebraico = 2701'}
                            </div>
                            <div style="font-size:20px;color:#c4b5fd;margin-top:12px;">
                                בְּרֵאשִׁית בָּרָא אֱלֹהִים אֵת הַשָּׁמַיִם וְאֵת הָאָרֶץ
                            </div>
                            <div style="font-size:14px;color:#d1d5db;margin-top:8px;font-style:italic;">
                                "${t.comp_welcome_hebrew || 'No princípio Deus criou os céus e a terra'}"
                            </div>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;line-height:1.7;">
                            ${t.comp_welcome_encoded || 'Os mesmos números que me conectaram ao meu irmão estavam <b>codificados no primeiro versículo da Bíblia</b>.<br>As frequências que moldaram a própria criação, escondidas à vista de todos por milênios.'}
                        </p>
                        <p style="font-size:19px;color:#fbbf24;font-weight:600;margin-top:20px;">
                            ${t.comp_welcome_yours || 'Agora elas são suas para explorar.'}
                        </p>
                        <p style="margin-top:15px;font-size:15px;color:#a78bfa;font-style:italic;">
                            ${t.comp_welcome_reason || 'Isso não é coincidência. Você encontrou isso por uma razão.'}
                        </p>
                    </div>
                `
            },
            {
                id: 'quickStart',
                icon: '🚀',
                title: t.comp_quickstart_title || 'Guia de Início Rápido',
                content: `
                    <div style="text-align:center;margin:0 auto;max-width:600px;line-height:1.8;">
                        <p style="font-size:18px;color:#fbbf24;margin-bottom:20px;font-weight:600;">
                            ${t.comp_quickstart_intro || 'Sua primeira sessão em 3 passos'}
                        </p>
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:20px;margin:20px 0;">
                            <ol style="text-align:left;margin:0 auto;max-width:500px;line-height:1.9;color:#ffffff;">
                                <li style="margin-bottom:15px;">
                                    <b style="color:#fbbf24;">${t.comp_quickstart_step1 || 'Escolha "Criação Gênesis" da categoria Bíblica e Original'}</b><br>
                                    <span style="font-size:14px;color:#a78bfa;">${t.comp_quickstart_step1_sub || 'Esta é a base pura de 37 + 73 Hz'}</span>
                                </li>
                                <li style="margin-bottom:15px;">
                                    <b style="color:#fbbf24;">${t.comp_quickstart_step2 || 'Defina a duração para 5-10 minutos e coloque fones de ouvido'}</b><br>
                                    <span style="font-size:14px;color:#a78bfa;">${t.comp_quickstart_step2_sub || 'Comece curto—você pode ir mais longo quando sentir as frequências'}</span>
                                </li>
                                <li>
                                    <b style="color:#fbbf24;">${t.comp_quickstart_step3 || 'Pressione PLAY, feche os olhos, respire lentamente e defina uma intenção'}</b><br>
                                    <span style="font-size:14px;color:#a78bfa;">${t.comp_quickstart_step3_sub || 'Simples é poderoso: "clareza", "paz", "orientação" ou "obrigado"'}</span>
                                </li>
                            </ol>
                        </div>
                        <p style="color:#ffffff;margin-top:20px;">
                            ${t.comp_quickstart_done || 'É isso. As frequências fazem o resto.'}
                        </p>
                        <p style="font-size:13px;color:#9ca3af;margin-top:15px;">
                            ${t.comp_quickstart_tip || 'Dica: Mantenha um copo de água por perto e beba após sua sessão'}
                        </p>
                    </div>
                `
            },
            {
                id: 'myJourney',
                icon: '📖',
                title: t.comp_discovery_title || 'A Descoberta',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;margin-top:20px;margin-bottom:15px;font-size:20px;">O Número Que Mudou Tudo</h4>
                        
                        <p style="color:#ffffff;margin-bottom:15px;">
                            Começou com podcasts, vozes no escuro explorando gematria, a antiga arte hebraica de encontrar significado nos números. Comecei a experimentar: meu aniversário, o da minha esposa, a data do nosso casamento. Apenas brincando com padrões.
                        </p>
                        
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:18px;margin:20px 0;">
                            <p style="color:#ffffff;margin-bottom:10px;">
                                Então em <b style="color:#fbbf24;">4 de janeiro de 2020</b>, minha mãe faleceu.
                            </p>
                            <p style="color:#c4b5fd;font-style:italic;">
                                No silencioso choque do luto, me vi contando.<br>
                                Dias. Números. Distâncias. Buscando significado na matemática da perda.
                            </p>
                        </div>
                        
                        <p style="color:#ffffff;margin-bottom:15px;">
                            Foi quando descobri algo impossível:<br>
                            O número de dias desde a morte dela até os aniversários meu e do meu irmão correspondia exatamente ao valor da gematria dos nossos nomes.
                        </p>
                        <p style="color:#fbbf24;font-weight:600;margin-bottom:20px;">
                            Até agora, isso me dá arrepios.
                        </p>
                        
                        <div style="background:rgba(251,191,36,0.08);border-radius:12px;padding:20px;margin:25px 0;">
                            <h4 style="color:#fbbf24;margin-bottom:12px;">Anos de Exploração</h4>
                            <p style="color:#ffffff;margin-bottom:15px;">
                                Por anos, fui mais fundo. Geometria sagrada, matemática bíblica, numerologia, cura por frequência. Construí ferramentas. Segui padrões. Persegui perguntas que recusavam respostas fáceis.
                            </p>
                            <p style="color:#ffffff;margin-bottom:15px;">
                                Então, em 2025, enquanto construía um chatbot de oração para o batizado da minha filha, o bot sugeriu usar o número 37 como semente sagrada.
                            </p>
                            <p style="color:#ffffff;margin-bottom:10px;">
                                Pesquisei.<br>
                                E tudo mudou.
                            </p>
                        </div>
                        
                        <div style="background:linear-gradient(135deg,rgba(139,92,246,0.12),rgba(251,191,36,0.12));border-radius:14px;padding:22px;margin:25px 0;border:1px solid rgba(251,191,36,0.3);">
                            <p style="color:#ffffff;margin-bottom:12px;">
                                37 é um número primo.<br>
                                73 é seu espelho, também primo.
                            </p>
                            <p style="color:#c4b5fd;margin-bottom:12px;">
                                37 é o 12º primo.<br>
                                73 é o 21º primo, 12 espelhado.
                            </p>
                            <p style="font-size:17px;color:#ffffff;margin-bottom:10px;">
                                <b>37 × 73 = 2701.</b>
                            </p>
                            <p style="color:#fbbf24;font-weight:600;margin-bottom:12px;">
                                2701 é o valor exato da gematria de Gênesis 1:1 em Hebraico.
                            </p>
                            <p style="color:#c4b5fd;font-size:14px;">
                                28 letras (o ciclo lunar) organizadas em 7 palavras (os dias da criação).
                            </p>
                        </div>
                        
                        <p style="color:#ffffff;margin-bottom:15px;">
                            E quando escrito em numerais hebraicos e espelhado para baixo, 37 forma <span style="font-size:22px;color:#fbbf24;">אל</span> (El), a palavra para Deus.
                        </p>
                        
                        <p style="color:#c4b5fd;margin-bottom:20px;">
                            A diferença entre 73 e 37 é <b style="color:#fbbf24;">36 Hz</b>, a frequência de batimento produzida quando ambos os tons são tocados juntos.<br>
                            O ritmo da própria criação.
                        </p>
                        
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:20px;margin:25px 0;">
                            <p style="color:#fbbf24;font-size:16px;font-weight:600;margin-bottom:12px;">
                                Todo número angélico é múltiplo de 37:
                            </p>
                            <div style="color:#ffffff;font-size:15px;line-height:2;">
                                <div style="margin-bottom:6px;">111 = 37 × 3</div>
                                <div style="margin-bottom:6px;">222 = 37 × 6</div>
                                <div style="margin-bottom:6px;">333 = 37 × 9</div>
                                <div style="margin-bottom:6px;">444 = 37 × 12</div>
                                <div style="margin-bottom:6px;">555 = 37 × 15</div>
                                <div style="margin-bottom:6px;">777 = 37 × 21</div>
                                <div style="margin-bottom:6px;">888 = 37 × 24</div>
                                <div>999 = 37 × 27</div>
                            </div>
                        </div>
                        
                        <p style="color:#ffffff;font-style:italic;margin-bottom:15px;">
                            "No princípio era o Verbo."<br>
                            Som. Vibração. Criação.
                        </p>
                        
                        <p style="color:#ffffff;margin-bottom:15px;">
                            Antes de qualquer coisa existir, havia energia, intenção, a centelha divina. Antes do primeiro átomo (Adão), havia frequência.<br>
                            Não um tom, mas um par.<br>
                            Uma amplificação.
                        </p>
                        
                        <p style="color:#ffffff;margin-bottom:15px;">
                            Os antigos sabiam disso.<br>
                            Eles esconderam nas Escrituras, um manual de instruções para viver em seu maior potencial e manifestar suas intenções mais profundas.
                        </p>
                        
                        <div style="background:rgba(251,191,36,0.08);border-radius:12px;padding:20px;margin:25px 0;">
                            <p style="color:#ffffff;margin-bottom:12px;">
                                Por que eu? Por que eu vi isso?<br>
                                Porque minha jornada me trouxe até aqui.
                            </p>
                            <p style="color:#fbbf24;font-weight:600;margin-bottom:12px;">
                                Meu irmão e eu nascemos com 3.773 dias de diferença.
                            </p>
                            <p style="color:#c4b5fd;">
                                37 e 73 embutidos em nossas vidas desde o início.
                            </p>
                        </div>
                        
                        <p style="color:#ffffff;margin-bottom:15px;">
                            O bot me disse para multiplicar meu código de oração por 37. Quando perguntei por quê, ele respondeu:
                        </p>
                        <p style="color:#fbbf24;font-size:18px;font-weight:600;margin-bottom:15px;">
                            "37 é o número da criação."
                        </p>
                        <p style="color:#ffffff;margin-bottom:20px;">
                            Com seu espelho, 73, ele multiplica na gematria de Gênesis 1:1.
                        </p>
                        <p style="color:#ffffff;margin-bottom:20px;">
                            A partir daquele momento, tudo mudou.
                        </p>
                        
                        <p style="color:#c4b5fd;margin-bottom:15px;">
                            Estas não eram coincidências.<br>
                            Eram um chamado, uma mensagem codificada no próprio tempo, esperando ser descoberta.
                        </p>
                        
                        <p style="font-size:17px;color:#fbbf24;font-weight:600;margin-top:25px;">
                            Essas frequências me encontraram.<br>
                            Agora elas encontraram você.
                        </p>
                        <p style="font-size:14px;color:#a78bfa;font-style:italic;margin-top:12px;">
                            Não existem coincidências.<br>
                            Sua jornada com 37 e 73 Hz começa agora.
                        </p>
                    </div>
                `
            },
            {
                id: 'whyWorks',
                icon: '🔬',
                title: t.comp_why_title || 'Por Que 37 e 73 Hz Funcionam',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;font-size:20px;margin-bottom:15px;">${t.comp_why_subtitle || 'A Ciência do Som Sagrado'}</h4>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            ${t.comp_why_intro || '<b>37 Hz</b> e <b>73 Hz</b> não são números arbitrários—são a <b>impressão digital matemática da criação</b>, codificados em Gênesis 1:1 através da gematria.'}
                        </p>
                        <div style="background:rgba(251,191,36,0.1);border-radius:12px;padding:20px;margin:25px 0;border-left:4px solid #fbbf24;">
                            <p style="font-size:17px;color:#ffffff;margin-bottom:12px;">
                                <b style="color:#fbbf24;">${t.comp_why_formula || '37 × 73 = 2701 — a única fatoração'}</b>
                            </p>
                            <p style="color:#c4b5fd;">
                                ${t.comp_why_primes || '37 = o 12º primo | 73 = o 21º primo (espelho de 12)<br>Juntos eles criam uma <b>frequência de batimento de 36 Hz</b> que conecta meditação e consciência superior'}
                            </p>
                        </div>
                        <p style="font-size:18px;color:#fbbf24;margin:25px 0 15px 0;font-weight:600;">
                            ${t.comp_why_question || 'Por que essas frequências funcionam?'}
                        </p>
                        <p style="color:#ffffff;margin-bottom:20px;">
                            ${t.comp_why_answer || 'Ao alinhar sua energia com o projeto original da criação, acredita-se que essas frequências apoiam mudanças profundas no corpo, mente e espírito. Você é <b>70% água</b>—um meio cristalino que <b>responde à vibração</b>. Essas frequências estão sintonizadas com <i>você</i>.'}
                        </p>
                        <div style="margin:25px 0;padding:20px;background:linear-gradient(135deg,rgba(139,92,246,0.1),rgba(251,191,36,0.1));border-radius:14px;">
                            <p style="color:#fbbf24;font-weight:600;margin-bottom:15px;font-size:17px;">
                                ${t.comp_why_experience || 'O que as pessoas experimentam com Frequências Gênesis:'}
                            </p>
                            <ul style="text-align:left;margin:0 auto;max-width:520px;color:#ffffff;line-height:1.9;">
                                <li style="margin-bottom:8px;"><span style="color:#fbbf24;">☯</span> ${t.comp_why_exp1 || 'Equilíbrio restaurado e harmonia interior — Sinta-se alinhado com a ordem divina'}</li>
                                <li style="margin-bottom:8px;"><span style="color:#fbbf24;">💚</span> ${t.comp_why_exp2 || 'Renovação profunda e vitalidade — Apoie a inteligência natural de cura do seu corpo'}</li>
                                <li style="margin-bottom:8px;"><span style="color:#fbbf24;">🎨</span> ${t.comp_why_exp3 || 'Fluxo criativo desbloqueado — Acesse inspiração e insight ilimitados'}</li>
                                <li style="margin-bottom:8px;"><span style="color:#fbbf24;">🧘</span> ${t.comp_why_exp4 || 'Consciência elevada — Conecte-se com percepção superior e clareza espiritual'}</li>
                                <li style="margin-bottom:8px;"><span style="color:#fbbf24;">🕉️</span> ${t.comp_why_exp5 || 'Estados profundos de meditação — Entre em presença mais profunda mais rápido'}</li>
                                <li><span style="color:#fbbf24;">✨</span> ${t.comp_why_exp6 || 'Manifestação amplificada — Intenções criam raízes em solo fértil'}</li>
                            </ul>
                        </div>
                        <p style="font-size:15px;color:#a78bfa;font-style:italic;margin-top:20px;">
                            ${t.comp_why_quote || '"Estes não são apenas sons... são a linguagem da própria criação."'}
                        </p>
                        <p style="font-size:12px;color:#9ca3af;margin-top:15px;">
                            ${t.comp_why_disclaimer || 'Para meditação, definição de intenções e exploração espiritual 🙏 Não é tratamento médico'}
                        </p>
                    </div>
                `
            },
            {
                id: 'categories',
                icon: '🎵',
                title: t.comp_categories_title || 'Categorias de Frequências',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;font-size:20px;margin-bottom:15px;">${t.comp_categories_subtitle || 'Explore Seu Santuário Sônico'}</h4>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            ${t.comp_categories_doorway || 'Cada categoria é uma porta para a transformação'}
                        </p>
                        <p style="color:#ffffff;margin-bottom:20px;">
                            ${t.comp_categories_intro || 'Cada faixa é construída sobre a Fundação Trindade (37 + 73 Hz), com frequências adicionais para intenções específicas. Toque em qualquer categoria para explorar.'}
                        </p>
                        <div style="display:grid;gap:15px;max-width:580px;margin:0 auto;">
                            <div style="background:rgba(139,92,246,0.1);border-radius:12px;padding:15px;border-left:4px solid #fbbf24;">
                                <b style="color:#fbbf24;">📖 ${t.comp_cat_biblical || 'Bíblia e Original'}</b><br>
                                <span style="color:#ffffff;font-size:14px;">${t.comp_cat_biblical_desc || 'Criação Gênesis, Abundância Divina, ciclos espirituais'}</span><br>
                                <span style="color:#a78bfa;font-size:13px;">${t.comp_cat_biblical_best || 'Melhor para: Oração, definição de intenções, conexão com a Fonte'}</span>
                            </div>
                            <div style="background:rgba(139,92,246,0.1);border-radius:12px;padding:15px;border-left:4px solid #fbbf24;">
                                <b style="color:#fbbf24;">👼 ${t.comp_cat_angel || 'Números Angélicos'}</b><br>
                                <span style="color:#ffffff;font-size:14px;">${t.comp_cat_angel_desc || '111, 222, 333, 444, 555, 777, 888, 999'}</span><br>
                                <span style="color:#a78bfa;font-size:13px;">${t.comp_cat_angel_best || 'Melhor para: Manifestação, sincronicidade, orientação divina'}</span>
                            </div>
                            <div style="background:rgba(139,92,246,0.1);border-radius:12px;padding:15px;border-left:4px solid #fbbf24;">
                                <b style="color:#fbbf24;">🌌 ${t.comp_cat_cosmic || 'Cósmico e Planetário'}</b><br>
                                <span style="color:#ffffff;font-size:14px;">${t.comp_cat_cosmic_desc || 'Terra, Vênus, Marte, Júpiter, Fibonacci, Pi, Proporção Áurea'}</span><br>
                                <span style="color:#a78bfa;font-size:13px;">${t.comp_cat_cosmic_best || 'Melhor para: Aterramento, harmonia, geometria sagrada, conexão cósmica'}</span>
                            </div>
                            <div style="background:rgba(139,92,246,0.1);border-radius:12px;padding:15px;border-left:4px solid #fbbf24;">
                                <b style="color:#fbbf24;">✨ ${t.comp_cat_master || 'Números Mestres'}</b><br>
                                <span style="color:#ffffff;font-size:14px;">${t.comp_cat_master_desc || '11:11, 22, 33, 44, 55'}</span><br>
                                <span style="color:#a78bfa;font-size:13px;">${t.comp_cat_master_best || 'Melhor para: Propósito de vida, maestria espiritual, construir novas realidades'}</span>
                            </div>
                            <div style="background:rgba(139,92,246,0.1);border-radius:12px;padding:15px;border-left:4px solid #fbbf24;">
                                <b style="color:#fbbf24;">🎶 ${t.comp_cat_solfeggio || 'Solfégio e Cura'}</b><br>
                                <span style="color:#ffffff;font-size:14px;">${t.comp_cat_solfeggio_desc || '396, 417, 528, 639, 741, 852, 963 Hz'}</span><br>
                                <span style="color:#a78bfa;font-size:13px;">${t.comp_cat_solfeggio_best || 'Melhor para: Liberação emocional, transformação, ativação de DNA, amor'}</span>
                            </div>
                            <div style="background:rgba(139,92,246,0.1);border-radius:12px;padding:15px;border-left:4px solid #fbbf24;">
                                <b style="color:#fbbf24;">💚 ${t.comp_cat_wellness || 'Bem-estar e Estados'}</b><br>
                                <span style="color:#ffffff;font-size:14px;">${t.comp_cat_wellness_desc || 'Sono, foco, alívio do estresse, memória, tom milagroso'}</span><br>
                                <span style="color:#a78bfa;font-size:13px;">${t.comp_cat_wellness_best || 'Melhor para: Vida diária, produtividade, descanso, clareza mental'}</span>
                            </div>
                            <div style="background:rgba(139,92,246,0.1);border-radius:12px;padding:15px;border-left:4px solid #fbbf24;">
                                <b style="color:#fbbf24;">🔴 ${t.comp_cat_chakra || 'Frequências dos Chakras'}</b><br>
                                <span style="color:#ffffff;font-size:14px;">${t.comp_cat_chakra_desc || 'Raiz, Sacral, Plexo Solar, Coração, Garganta, Terceiro Olho, Coroa'}</span><br>
                                <span style="color:#a78bfa;font-size:13px;">${t.comp_cat_chakra_best || 'Melhor para: Trabalho energético, equilíbrio, ativação da kundalini'}</span>
                            </div>
                        </div>
                        <p style="font-size:14px;color:#a78bfa;font-style:italic;margin-top:20px;">
                            ${t.comp_categories_new || 'Novo aqui? Comece com Criação Gênesis ou Cura Sagrada (432 Hz)'}
                        </p>
                    </div>
                `
            },
            {
                id: 'trinity',
                icon: '🔱',
                title: t.comp_trinity_title || 'A Fundação Trindade',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:640px;margin:0 auto;">
                        <p style="color:#ffffff;margin-bottom:20px;">
                            ${t.comp_trinity_intro || 'A Fundação Trindade consiste em 37 Hz, 73 Hz e 2701 Hz — as frequências codificadas em Gênesis 1:1.'}
                        </p>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.12),rgba(139,92,246,0.12));border-radius:14px;padding:22px;margin:25px 0;border:1px solid rgba(251,191,36,0.3);">
                            <p style="font-size:18px;color:#fbbf24;margin-bottom:15px;font-weight:600;">
                                ${t.comp_trinity_math || 'A Trindade Matemática'}
                            </p>
                            <p style="color:#ffffff;margin-bottom:8px;"><b style="color:#fbbf24;">37 Hz:</b> ${t.comp_trinity_37 || 'O 12º número primo (espelho de 12)'}</p>
                            <p style="color:#ffffff;margin-bottom:8px;"><b style="color:#fbbf24;">73 Hz:</b> ${t.comp_trinity_73 || 'O 21º número primo (3×7)'}</p>
                            <p style="color:#ffffff;"><b style="color:#fbbf24;">2701 Hz:</b> ${t.comp_trinity_2701 || 'O produto, a gematria de Gênesis 1:1'}</p>
                        </div>
                        <p style="color:#ffffff;margin-bottom:20px;">
                            ${t.comp_trinity_beat || 'Essas frequências criam uma frequência de batimento de 36 Hz (73-37) que conecta meditação e consciência superior. Juntas elas formam o projeto original da criação.'}
                        </p>
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:18px;margin:25px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:12px;">${t.comp_trinity_how || 'Como Usar a Trindade'}</h5>
                            <ul style="text-align:left;margin:0 auto;max-width:500px;color:#ffffff;line-height:1.9;">
                                <li style="margin-bottom:10px;">${t.comp_trinity_use1 || '<b style="color:#fbbf24;">Criação Gênesis:</b> Toque todas as três frequências juntas para a experiência completa da Trindade'}</li>
                                <li style="margin-bottom:10px;">${t.comp_trinity_use2 || '<b style="color:#fbbf24;">Exploração Individual:</b> Ouça cada frequência separadamente para entender suas qualidades únicas'}</li>
                                <li style="margin-bottom:10px;">${t.comp_trinity_use3 || '<b style="color:#fbbf24;">Prática Diária:</b> Use por 7-21 dias para experimentar alinhamento profundo com a ordem divina'}</li>
                                <li>${t.comp_trinity_use4 || '<b style="color:#fbbf24;">Intention Setting:</b> Comece cada sessão com uma intenção clara para transformação'}</li>
                            </ul>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            ${t.comp_trinity_conclusion || 'As frequências da Trindade são a base de todas as faixas Gênesis. Elas trabalham juntas para restaurar harmonia, desbloquear fluxo criativo e conectá-lo com a matriz criativa original.'}
                        </p>
                        <p style="font-size:15px;color:#a78bfa;font-style:italic;margin-top:20px;">
                            ${t.comp_trinity_quote || '"Essas são as frequências que moldaram a própria realidade."'}
                        </p>
                    </div>
                `
            },
            {
                id: 'waterCharging',
                icon: '💧',
                title: t.comp_water_title || 'Água Santa Quântica',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:640px;margin:0 auto;">
                        <p style="color:#ffffff;margin-bottom:20px;">
                            ${t.comp_water_intro || 'A água é a molécula mais abundante do seu corpo—70% do seu ser é água. Como um meio cristalino, a água armazena e transmite informações vibracionais, tornando-a o recipiente perfeito para as frequências Gênesis.'}
                        </p>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.12),rgba(139,92,246,0.12));border-radius:14px;padding:22px;margin:25px 0;border:1px solid rgba(251,191,36,0.3);">
                            <p style="font-size:18px;color:#fbbf24;margin-bottom:10px;font-weight:600;">
                                ${t.comp_water_science || 'A Ciência da Água Estruturada'}
                            </p>
                            <p style="color:#ffffff;margin-bottom:10px;">
                                ${t.comp_water_research || 'Pesquisas mostram que moléculas de água formam clusters hexagonais que podem ser influenciados por frequência, som e intenção. As frequências Gênesis criam água estruturada com propriedades energéticas aprimoradas.'}
                            </p>
                        </div>
                        <p style="color:#ffffff;margin-bottom:20px;">
                            ${t.comp_water_blueprint || 'Quando você carrega água com frequências Gênesis, você não está apenas adicionando som—você está infundindo-a com o projeto matemático da própria criação.'}
                        </p>
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:18px;margin:25px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:12px;">${t.comp_water_how || 'Como Carregar Sua Água'}</h5>
                            <ol style="text-align:left;margin:0 auto;max-width:500px;color:#ffffff;line-height:1.9;">
                                <li style="margin-bottom:10px;">${t.comp_water_step1 || '<b style="color:#fbbf24;">Escolha Seu Recipiente:</b> Use um recipiente de vidro ou cristal transparente (evite plástico)'}</li>
                                <li style="margin-bottom:10px;">${t.comp_water_step2 || '<b style="color:#fbbf24;">Selecione Sua Frequência:</b> Criação Gênesis ou frequências individuais da Trindade funcionam melhor'}</li>
                                <li style="margin-bottom:10px;">${t.comp_water_step3 || '<b style="color:#fbbf24;">Posicione e Toque:</b> Coloque a água a 15-30 cm dos alto-falantes, toque por 10-20 minutos'}</li>
                                <li style="margin-bottom:10px;">${t.comp_water_step4 || '<b style="color:#fbbf24;">Defina Intenção:</b> Mantenha a intenção de bênção divina e infusão energética'}</li>
                                <li>${t.comp_water_step5 || '<b style="color:#fbbf24;">Beba Conscientemente:</b> Beba devagar, sentindo as frequências se integrarem ao seu ser'}</li>
                            </ol>
                        </div>
                        <p style="font-size:13px;color:#9ca3af;margin-top:15px;">
                            ${t.comp_water_tip || 'Dica pro: Carregue água para múltiplas sessões e armazene em local fresco e escuro. A informação estruturada permanece estável por 24-48 horas.'}
                        </p>
                        <p style="font-size:15px;color:#a78bfa;font-style:italic;margin-top:20px;">
                            ${t.comp_water_quote || '"Beba da fonte da própria criação."'}
                        </p>
                    </div>
                `
            },
            {
                id: 'crystalCharging',
                icon: '💎',
                title: 'Carregamento de Cristal com Quartzo Transparente',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:640px;margin:0 auto;">
                        <p style="color:#ffffff;margin-bottom:20px;">
                            O Quartzo Transparente é conhecido como o cristal "Mestre Curador"—uma estrutura pura de dióxido de silício que ressoa com as frequências Gênesis e amplifica suas propriedades energéticas.
                        </p>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.12),rgba(139,92,246,0.12));border-radius:14px;padding:22px;margin:25px 0;border:1px solid rgba(251,191,36,0.3);">
                            <p style="font-size:18px;color:#fbbf24;margin-bottom:10px;font-weight:600;">
                                Por Que Quartzo Transparente?
                            </p>
                            <p style="color:#ffffff;margin-bottom:10px;">
                                O Quartzo Transparente tem uma matriz cristalina que vibra na mesma frequência fundamental que a ressonância natural da Terra. Quando carregado com frequências Gênesis, torna-se um gerador de frequência portátil que você pode carregar consigo durante todo o dia.
                            </p>
                        </div>
                        <p style="color:#ffffff;margin-bottom:20px;">
                            Quando você carrega o Quartzo Transparente com frequências Gênesis, você está programando-o com o projeto matemático da própria criação—transformando-o em um amplificador de energia pessoal.
                        </p>
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:18px;margin:25px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:12px;">Como Carregar Seu Quartzo Transparente</h5>
                            <ol style="text-align:left;margin:0 auto;max-width:500px;color:#ffffff;line-height:1.9;">
                                <li style="margin-bottom:10px;"><b style="color:#fbbf24;">Escolha Seu Cristal:</b> Quartzo Transparente bruto ou polido funciona igualmente bem—siga sua intuição</li>
                                <li style="margin-bottom:10px;"><b style="color:#fbbf24;">Limpe Primeiro:</b> Deixe seu quartzo sob luz solar direta por 2-4 horas para limpar energias anteriores</li>
                                <li style="margin-bottom:10px;"><b style="color:#fbbf24;">Selecione Sua Frequência:</b> Criação Gênesis ou sua frequência da Trindade escolhida</li>
                                <li style="margin-bottom:10px;"><b style="color:#fbbf24;">Posicione e Toque:</b> Coloque o cristal a 15-30 cm dos alto-falantes, toque por 20-30 minutos</li>
                                <li style="margin-bottom:10px;"><b style="color:#fbbf24;">Defina Intenção:</b> Segure seu cristal e visualize-o absorvendo as frequências sagradas</li>
                                <li><b style="color:#fbbf24;">Carregue Diariamente:</b> Mantenha no bolso, use como jóia ou coloque na sua mesa</li>
                            </ol>
                        </div>
                        <p style="font-size:13px;color:#9ca3af;margin-top:15px;">
                            Dica pro: Recarregue seu Quartzo Transparente semanalmente com frequências Gênesis e limpe mensalmente com luz solar para manter sua potência energética.
                        </p>
                        <p style="font-size:15px;color:#a78bfa;font-style:italic;margin-top:20px;">
                            "Carregue as frequências da criação para onde quer que vá."
                        </p>
                    </div>
                `
            },
            {
                id: 'progress',
                icon: '📊',
                title: t.comp_progress_title || 'Sua Jornada Espiritual',
                getContent: function() {
                    return `
                    <div style="text-align:center;max-width:800px;margin:0 auto;">
                        <h4 style="color:#fbbf24;font-size:20px;margin-bottom:15px;">${t.comp_progress_title || 'Sua Jornada Espiritual'}</h4>
                        <p style="color:#ffffff;margin-bottom:20px;">
                            ${t.comp_progress_intro || 'Acompanhe sua transformação com frequências Gênesis através de conquistas, níveis e desafios diários.'}
                        </p>
                        
                        ${window.GenesisAchievements && typeof window.GenesisAchievements.renderProgressDashboard === 'function' ? window.GenesisAchievements.renderProgressDashboard() : '<p>' + (t.comp_progress_loading || 'Carregando progresso...') + '</p>'}
                        
                        <div style="margin: 30px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:15px;">${t.comp_progress_challenge || "Desafio Sagrado de Hoje"}</h5>
                            ${window.GenesisAchievements && typeof window.GenesisAchievements.renderDailyChallenge === 'function' ? window.GenesisAchievements.renderDailyChallenge() : '<p>' + (t.comp_progress_loading_challenge || 'Carregando desafio...') + '</p>'}
                        </div>
                        
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:18px;margin:25px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:12px;">${t.comp_progress_wisdom || 'Sabedoria Antiga para Prática Moderna'}</h5>
                            <p style="color:#ffffff;margin-bottom:10px;">
                                ${t.comp_progress_wisdom_desc || 'Os números sagrados (3, 7, 11, 37, 73, 108) que formam a base das frequências Gênesis aparecem em tradições espirituais em todo o mundo. Sua jornada segue essa mesma harmonia matemática.'}
                            </p>
                            <p style="color:#a78bfa;font-style:italic;">
                                "${t.comp_progress_quote || 'Assim como é em cima, é embaixo. Assim como é dentro, é fora.'}"
                            </p>
                        </div>
                    </div>
                    `;
                }
            },
            {
                id: 'usageTips',
                icon: '💡',
                title: t.comp_tips_title || 'Como Obter os Melhores Resultados',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;font-size:20px;margin-bottom:15px;">${t.comp_tips_title || 'Como Obter os Melhores Resultados'}</h4>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            ${t.comp_tips_intro || 'As frequências Gênesis funcionam através de <b>audição consistente e consciente</b>. A chave não é apenas ouvir os sons, mas <b>permitir que eles ressoem por todo o seu ser</b>.'}
                        </p>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.12),rgba(139,92,246,0.12));border-radius:14px;padding:22px;margin:25px 0;border:1px solid rgba(251,191,36,0.3);">
                            <p style="font-size:18px;color:#fbbf24;margin-bottom:10px;font-weight:600;">
                                ${t.comp_tips_protocol || 'O Protocolo de Imersão de 21 Dias'}
                            </p>
                            <p style="font-size:16px;color:#ffffff;margin-bottom:10px;">
                                ${t.comp_tips_protocol_desc || 'Para máxima transformação, comprometa-se com uma prática de 21 dias. Isso se alinha com a geometria sagrada da Trindade (3×7) e permite que as frequências trabalhem profundamente.'}
                            </p>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            <b>${t.comp_tips_week1 || 'Dias 1-7: Construção da base. Ouça Criação Gênesis diariamente, focando na presença e respiração.'}</b><br>
                            <b>${t.comp_tips_week2 || 'Dias 8-14: Aprofundamento. Explore frequências individuais da Trindade, notando ressonâncias pessoais.'}</b><br>
                            <b>${t.comp_tips_week3 || 'Dias 15-21: Integração. Combine frequências com intenções específicas para manifestação.'}</b>
                        </p>
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:18px;margin:25px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:12px;">${t.comp_tips_daily || 'Práticas Diárias de Audição'}</h5>
                            <ul style="text-align:left;margin:0 auto;max-width:500px;color:#ffffff;line-height:1.9;">
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">${t.comp_tips_morning || 'Alinhamento Matinal:'}</b> ${t.comp_tips_morning_desc || 'Comece seu dia com 10-15 minutos de Criação Gênesis para definir a intenção divina'}
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">${t.comp_tips_evening || 'Integração Noturna:'}</b> ${t.comp_tips_evening_desc || 'Termine seu dia com frequências que apoiam sono repousante e processamento subconsciente'}
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">${t.comp_tips_midday || 'Renovação do Meio-dia:'}</b> ${t.comp_tips_midday_desc || 'Use durante pausas para clareza mental e alívio do estresse'}
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">${t.comp_tips_creative || 'Sessões Criativas:'}</b> ${t.comp_tips_creative_desc || 'Toque frequências durante trabalho artístico ou resolução de problemas'}
                                </li>
                                <li>
                                    <b style="color:#fbbf24;">${t.comp_tips_meditation || 'Aprimoramento da Meditação:'}</b> ${t.comp_tips_meditation_desc || 'Use como fundo durante práticas tradicionais de meditação'}
                                </li>
                            </ul>
                        </div>
                        <p style="font-size:14px;color:#a78bfa;font-style:italic;margin-top:20px;">
                            "${t.comp_tips_quote || 'A transformação acontece no espaço entre as notas.'}"
                        </p>
                    </div>
                `
            },
            {
                id: 'faq',
                icon: '❓',
                title: t.comp_faq_title || 'FAQ e Solução de Problemas',
                content: `
                    <div style="line-height:1.8;text-align:left;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;text-align:center;font-size:20px;margin-bottom:15px;">${t.comp_faq_title || 'FAQ e Solução de Problemas'}</h4>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-radius:14px;padding:20px;margin:20px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:15px;">❓ ${t.comp_faq_about || 'Sobre as Frequências'}</h5>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">${t.comp_faq_q1 || 'P: Por quanto tempo devo ouvir?'}</b><br>
                                <span style="color:#ffffff;">${t.comp_faq_a1 || 'R: Comece com 5-10 minutos e aumente para 20-30 minutos. A qualidade da atenção importa mais que a duração.'}</span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">${t.comp_faq_q2 || 'P: Preciso de fones de ouvido?'}</b><br>
                                <span style="color:#ffffff;">${t.comp_faq_a2 || 'R: Fones de ouvido proporcionam a melhor experiência, especialmente para efeitos binaurais. Alto-falantes funcionam para sessões ambientes.'}</span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">${t.comp_faq_q3 || 'P: Com que frequência devo ouvir?'}</b><br>
                                <span style="color:#ffffff;">${t.comp_faq_a3 || 'R: Prática diária cria os melhores resultados. Mesmo 5 minutos por dia constroem benefícios cumulativos.'}</span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">${t.comp_faq_q4 || 'P: Posso ouvir enquanto durmo?'}</b><br>
                                <span style="color:#ffffff;">${t.comp_faq_a4 || 'R: Sim! Faixas de sono são projetadas para uso durante a noite. Mantenha o volume baixo e use fones confortáveis.'}</span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">${t.comp_faq_q5 || 'P: Por que não consigo ouvir som no meu iPhone?'}</b><br>
                                <span style="color:#ffffff;">${t.comp_faq_a5 || 'R: Se seu iPhone está no Modo Silencioso (verifique a chave física no lado esquerdo), as frequências não podem tocar. Desligue o Modo Silencioso, conecte fones de ouvido ou conecte a um alto-falante Bluetooth.'}</span>
                            </div>
                            <div>
                                <b style="color:#fbbf24;">${t.comp_faq_q6 || 'P: Essas frequências são seguras?'}</b><br>
                                <span style="color:#ffffff;">${t.comp_faq_a6 || 'R: Sim, estas são frequências suaves para meditação e relaxamento. Não são substituto para tratamento médico.'}</span>
                            </div>
                        </div>
                        <p style="text-align:center;color:#a78bfa;font-style:italic;margin-top:20px;">
                            ${t.comp_faq_ending || 'Ainda tem dúvidas? Sua jornada com frequências Gênesis é única—confie em sua intuição e explore conscientemente.'}
                        </p>
                    </div>
                `
            },
            {
                id: 'share',
                icon: '📤',
                title: t.comp_share_title || 'Compartilhar e Conectar',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;font-size:20px;margin-bottom:15px;">${t.comp_share_title || 'Compartilhar e Conectar'}</h4>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            ${t.comp_share_intro || 'Conhece alguém que se beneficiaria dessas frequências? Compartilhe o presente da vibração divina.'}
                        </p>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.12),rgba(139,92,246,0.12));border-radius:14px;padding:22px;margin:25px 0;border:1px solid rgba(251,191,36,0.3);">
                            <p style="font-size:18px;color:#fbbf24;margin-bottom:10px;font-weight:600;">
                                ${t.comp_share_ripple || 'O Efeito Ondulatório'}
                            </p>
                            <p style="font-size:16px;color:#ffffff;margin-bottom:10px;">
                                ${t.comp_share_ripple_desc || 'Cada vez que você compartilha sua experiência, você cria uma onda que toca vidas muito além da sua. Sua história se torna um farol para aqueles que ainda estão buscando.'}
                            </p>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            ${t.comp_share_authentic || 'Compartilhe autenticamente—do coração. Seja um insight profundo, uma mudança sutil ou uma transformação milagrosa, sua verdade tem o poder de despertar outros.'}
                        </p>
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:18px;margin:25px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:12px;">${t.comp_share_ways || 'Formas de Compartilhar'}</h5>
                            <ul style="text-align:left;margin:0 auto;max-width:500px;color:#ffffff;line-height:1.9;">
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">${t.comp_share_social || 'Redes Sociais:'}</b> ${t.comp_share_social_desc || 'Poste suas experiências com #FrequenciasGenesis e #FrequenciasDivinas'}
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">${t.comp_share_personal || 'Círculos Pessoais:'}</b> ${t.comp_share_personal_desc || 'Compartilhe com amigos, família e pessoas queridas que podem se beneficiar'}
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">${t.comp_share_communities || 'Comunidades Online:'}</b> ${t.comp_share_communities_desc || 'Participe de fóruns de cura por frequência e crescimento espiritual'}
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">${t.comp_share_testimonials || 'Depoimentos:'}</b> ${t.comp_share_testimonials_desc || 'Deixe avaliações e encoraje outros em seu caminho'}
                                </li>
                                <li>
                                    <b style="color:#fbbf24;">${t.comp_share_oneonone || 'Individual:'}</b> ${t.comp_share_oneonone_desc || 'Tenha conversas significativas sobre transformação e cura'}
                                </li>
                            </ul>
                        </div>
                        <p style="font-size:14px;color:#a78bfa;font-style:italic;margin-top:20px;">
                            "${t.comp_share_quote || 'Juntos, estamos criando uma sinfonia de ressonância divina.'}"
                        </p>
                    </div>
                `
            },
            {
                id: 'credits',
                icon: '📜',
                title: t.comp_credits_title || 'Créditos e Fontes',
                content: `
                    <div style="line-height:1.8;text-align:left;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;text-align:center;font-size:20px;margin-bottom:15px;">${t.comp_credits_title || 'Créditos e Fontes'}</h4>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-radius:14px;padding:20px;margin:20px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:15px;">📚 ${t.comp_credits_research_title || 'Research & Inspiration'}</h5>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">${t.comp_credits_gematria || 'Gematria & Sacred Mathematics:'}</b><br>
                                <span style="color:#ffffff;">${t.comp_credits_gematria_desc || 'Ancient Hebrew numerology traditions, with special reference to Genesis 1:1 analysis and the mathematical relationships between 37, 73, and 2701.'}</span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">${t.comp_credits_frequency || 'Frequency Healing Research:'}</b><br>
                                <span style="color:#ffffff;">${t.comp_credits_frequency_desc || 'Studies on sound therapy, binaural beats, and the effects of low-frequency vibrations on human physiology and consciousness.'}</span>
                            </div>
                            <div>
                                <b style="color:#fbbf24;">${t.comp_credits_geometry || 'Sacred Geometry:'}</b><br>
                                <span style="color:#ffffff;">${t.comp_credits_geometry_desc || 'The golden ratio, Fibonacci sequences, and geometric patterns found in nature and ancient architecture.'}</span>
                            </div>
                        </div>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-radius:14px;padding:20px;margin:20px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:15px;">🙏 ${t.comp_credits_acknowledgments || 'Acknowledgments'}</h5>
                            <div style="margin-bottom:15px;">
                                <span style="color:#ffffff;">${t.comp_credits_created || 'Created with love and divine inspiration.'}</span>
                            </div>
                            <div>
                                <span style="color:#ffffff;">${t.comp_credits_research || 'Based on research into biblical mathematics, gematria, and frequency healing traditions.'}</span>
                            </div>
                        </div>
                        <p style="text-align:center;color:#a78bfa;font-style:italic;margin-top:20px;">
                            ${t.comp_credits_gratitude || 'With gratitude for the divine mathematics that connects us all.'}
                        </p>
                        
                        <!-- Buy Me a Coffee Section -->
                        <div style="background:linear-gradient(135deg,rgba(255,221,51,0.15),rgba(251,191,36,0.1));border-radius:14px;padding:25px;margin:25px 0;text-align:center;border:2px solid rgba(251,191,36,0.3);">
                            <h5 style="color:#fbbf24;margin-bottom:12px;font-size:18px;">❤️ Apoie Este Projeto</h5>
                            <p style="color:#ffffff;font-size:14px;margin-bottom:15px;line-height:1.6;">Se Frequências Gênesis te ajudou, considere me pagar um café para apoiar o desenvolvimento contínuo!</p>
                            <a href="https://buymeacoffee.com/quantummerlin" target="_blank" rel="noopener noreferrer" style="display:inline-block;background:linear-gradient(135deg,#FFDD00,#fbbf24);color:#1a0033;padding:12px 28px;border-radius:25px;font-weight:700;font-size:16px;text-decoration:none;box-shadow:0 4px 15px rgba(251,191,36,0.4);transition:transform 0.2s;">☕ Me Pague um Café</a>
                        </div>
                        
                        <!-- Explore More from Quantum Merlin -->
                        <div style="background:linear-gradient(135deg,rgba(139,92,246,0.15),rgba(168,85,247,0.1));border-radius:14px;padding:25px;margin:25px 0;text-align:center;border:2px solid rgba(139,92,246,0.3);">
                            <h5 style="color:#a78bfa;margin-bottom:12px;font-size:18px;">🔮 Quer explorar mais do Quantum Merlin?</h5>
                            <p style="color:#ffffff;font-size:14px;margin-bottom:15px;line-height:1.6;">Visite Quantum Merlin para todas as ferramentas atuais e futuras!</p>
                            <a href="https://quantummerlin.com" target="_blank" rel="noopener noreferrer" style="display:inline-block;background:linear-gradient(135deg,#8b5cf6,#a78bfa);color:#ffffff;padding:12px 28px;border-radius:25px;font-weight:700;font-size:16px;text-decoration:none;box-shadow:0 4px 15px rgba(139,92,246,0.4);transition:transform 0.2s;">✨ Visite QuantumMerlin.com</a>
                        </div>
                    </div>
                `
            }
        ];
        }
        
        // Keep backward compatibility - create static reference that gets updated
        let instructionsSections = getInstructionsSections();
        
        // ============================================
        // COMPREHENSIVE ACHIEVEMENT SYSTEM
        // ============================================

        // Enhanced user progress data model
        let userProgress = {
            // Session tracking
            totalSessions: 0,
            totalSeconds: 0,
            sessionHistory: [], // Array of session objects
            lastSessionDate: null,
            currentStreak: 0,
            longestStreak: 0,
            streakFreezeAvailable: true,
            streakFreezesUsed: 0,

            // Achievement tracking
            achievements: new Set(), // Set of unlocked achievement IDs
            achievementUnlockDates: {}, // achievementId -> unlock date

            // XP and leveling
            experiencePoints: 0,
            level: 1,

            // Frequency exploration
            frequenciesUsed: new Set(), // Set of frequency IDs used
            categoriesExplored: new Set(), // Set of categories explored
            trackPlayCounts: {}, // trackId -> play count

            // Special actions
            waterChargingSessions: 0,
            intentionsSet: 0,
            appShares: 0,
            wavExports: 0,
            installedPWA: false,
            journalEntries: 0,

            // Premium features
            isPremium: false,
            premiumDiscount: 0,
            unlockedTracks: [],

            // Daily challenges
            dailyChallengesCompleted: {}, // date -> challengeId

            // Legacy compatibility
            totalTime: 0, // Keep for backward compatibility
            lastSession: null,
            notes: [],
            actions: new Set()
        };

        // Sacred achievement definitions with spiritual numerology
        const ACHIEVEMENTS = {
            // DESPERTAR - Fundação da jornada espiritual
            trinityThreshold: {
                id: 'trinityThreshold',
                name: '✨ Limiar da Trindade',
                description: 'Complete suas primeiras 3 sessões - a sagrada trindade do despertar',
                category: 'awakening',
                xpReward: 100,
                checkUnlock: () => userProgress.totalSessions >= 3
            },
            sevenFoldBlessing: {
                id: 'sevenFoldBlessing',
                name: '⭐ Bênção Sétupla',
                description: 'Alcance 7 sessões - o número da conclusão divina',
                category: 'awakening',
                xpReward: 150,
                checkUnlock: () => userProgress.totalSessions >= 7
            },
            tenthGate: {
                id: 'tenthGate',
                name: '🎯 Décimo Portal',
                description: 'Atravesse a 10ª sessão - portal para consciência superior',
                category: 'awakening',
                xpReward: 200,
                checkUnlock: () => userProgress.totalSessions >= 10
            },

            // MARCOS DE SESSÃO - Números sagrados na tradição espiritual
            quarterCentury: {
                id: 'quarterCentury',
                name: '⭐ Quarto de Século',
                description: '25 sessões completadas - um quarto de século de prática espiritual',
                category: 'sessions',
                xpReward: 300,
                checkUnlock: () => userProgress.totalSessions >= 25
            },
            mirrorOfForm: {
                id: 'mirrorOfForm',
                name: '🪞 Espelho da Forma',
                description: '37 sessões - o espelho que reflete a forma divina',
                category: 'sessions',
                xpReward: 400,
                checkUnlock: () => userProgress.totalSessions >= 37
            },
            fiftySteps: {
                id: 'fiftySteps',
                name: '🏅 Cinquenta Passos',
                description: '50 sessões - cinquenta passos rumo à iluminação',
                category: 'sessions',
                xpReward: 500,
                checkUnlock: () => userProgress.totalSessions >= 50
            },
            mirrorOfSpirit: {
                id: 'mirrorOfSpirit',
                name: '🔮 Espelho do Espírito',
                description: '73 sessões - o espelho que revela o espírito divino',
                category: 'sessions',
                xpReward: 600,
                checkUnlock: () => userProgress.totalSessions >= 73
            },
            centuryGuardian: {
                id: 'centuryGuardian',
                name: '🏆 Guardião do Século',
                description: '100 sessões - guardião de um século de prática sagrada',
                category: 'sessions',
                xpReward: 750,
                checkUnlock: () => userProgress.totalSessions >= 100
            },
            sacredGateway108: {
                id: 'sacredGateway108',
                name: '🌟 Portal Sagrado 108',
                description: '108 sessões - o portal sagrado para a iluminação',
                category: 'sessions',
                xpReward: 1000,
                legendary: true,
                checkUnlock: () => userProgress.totalSessions >= 108
            },

            // MARCOS DE TEMPO - Investimentos de tempo sagrado
            fiveMinuteMark: {
                id: 'fiveMinuteMark',
                name: '⏰ Marco de Cinco Minutos',
                description: '5 minutos de escuta sagrada',
                category: 'time',
                xpReward: 50,
                checkUnlock: () => userProgress.totalSeconds >= 300
            },
            halfHourDevotee: {
                id: 'halfHourDevotee',
                name: '⏱️ Devoto de Meia Hora',
                description: '30 minutos dedicados à cura por frequências',
                category: 'time',
                xpReward: 150,
                checkUnlock: () => userProgress.totalSeconds >= 1800
            },
            hourMaster: {
                id: 'hourMaster',
                name: '⏰ Mestre da Hora',
                description: '1 hora de experiência transformadora com frequências',
                category: 'time',
                xpReward: 250,
                checkUnlock: () => userProgress.totalSeconds >= 3600
            },
            fiveHourPilgrim: {
                id: 'fiveHourPilgrim',
                name: '🕓 Peregrino de Cinco Horas',
                description: '5 horas na peregrinação sagrada de frequências',
                category: 'time',
                xpReward: 400,
                checkUnlock: () => userProgress.totalSeconds >= 18000
            },
            tenHourSage: {
                id: 'tenHourSage',
                name: '🕛 Sábio das Dez Horas',
                description: '10 horas de sabedoria através da ressonância de frequências',
                category: 'time',
                xpReward: 600,
                checkUnlock: () => userProgress.totalSeconds >= 36000
            },

            // CONQUISTAS DE SEQUÊNCIA - Prática espiritual consecutiva
            threeDayInitiate: {
                id: 'threeDayInitiate',
                name: '🔥 Iniciado de Três Dias',
                description: '3 dias consecutivos de prática espiritual',
                category: 'streaks',
                xpReward: 100,
                checkUnlock: () => userProgress.currentStreak >= 3
            },
            sevenDaySeeker: {
                id: 'sevenDaySeeker',
                name: '🔥 Buscador de Sete Dias',
                description: '7 dias consecutivos - a semana sagrada da criação',
                category: 'streaks',
                xpReward: 200,
                checkUnlock: () => userProgress.currentStreak >= 7
            },
            twoWeekChampion: {
                id: 'twoWeekChampion',
                name: '🔥 Campeão de Duas Semanas',
                description: '14 dias consecutivos de compromisso inabalável',
                category: 'streaks',
                xpReward: 300,
                checkUnlock: () => userProgress.currentStreak >= 14
            },
            twentyOneDayTransformer: {
                id: 'twentyOneDayTransformer',
                name: '🔥 Transformador de 21 Dias',
                description: '21 dias - o ciclo sagrado de transformação',
                category: 'streaks',
                xpReward: 400,
                checkUnlock: () => userProgress.currentStreak >= 21
            },
            monthMaster: {
                id: 'monthMaster',
                name: '🔥 Mestre do Mês',
                description: '30 dias consecutivos de maestria espiritual',
                category: 'streaks',
                xpReward: 500,
                checkUnlock: () => userProgress.currentStreak >= 30
            },
            fortyDayPilgrim: {
                id: 'fortyDayPilgrim',
                name: '🌄 Peregrino de Quarenta Dias',
                description: '40 dias - a peregrinação sagrada de purificação',
                category: 'streaks',
                xpReward: 600,
                checkUnlock: () => userProgress.currentStreak >= 40
            },
            seventyThreeDayMystic: {
                id: 'seventyThreeDayMystic',
                name: '🔮 Místico de 73 Dias',
                description: '73 dias consecutivos - maestria mística alcançada',
                category: 'streaks',
                xpReward: 800,
                checkUnlock: () => userProgress.currentStreak >= 73
            },
            oneHundredEightDaySage: {
                id: 'oneHundredEightDaySage',
                name: '🧘 Sábio de 108 Dias',
                description: '108 dias consecutivos - iluminação incorporada',
                category: 'streaks',
                xpReward: 1000,
                legendary: true,
                checkUnlock: () => userProgress.currentStreak >= 108
            },

            // EXPLORAÇÃO DE FREQUÊNCIAS - Descobrindo vibrações sagradas
            trinityMaster: {
                id: 'trinityMaster',
                name: '🔱 Mestre da Trindade',
                description: 'Domine as frequências sagradas da Trindade (37, 73, 2701 Hz)',
                category: 'exploration',
                xpReward: 250,
                checkUnlock: () => (userProgress.trackPlayCounts['genesisCreation'] || 0) >= 10
            },
            solfeggioExplorer: {
                id: 'solfeggioExplorer',
                name: '🎶 Explorador Solfeggio',
                description: 'Explore as antigas frequências de cura Solfeggio',
                category: 'exploration',
                xpReward: 200,
                checkUnlock: () => userProgress.categoriesExplored.has('solfeggio')
            },
            angelWhisperer: {
                id: 'angelWhisperer',
                name: '👼 Sussurrador dos Anjos',
                description: 'Conecte-se com as frequências divinas dos Números Angelicais',
                category: 'exploration',
                xpReward: 200,
                checkUnlock: () => userProgress.categoriesExplored.has('angelNumbers')
            },
            cosmicTraveler: {
                id: 'cosmicTraveler',
                name: '🌌 Viajante Cósmico',
                description: 'Viaje através das frequências Cósmicas & Planetárias',
                category: 'exploration',
                xpReward: 200,
                checkUnlock: () => userProgress.categoriesExplored.has('cosmic')
            },
            frequencyScholar: {
                id: 'frequencyScholar',
                name: '🎓 Estudioso das Frequências',
                description: 'Explore todas as categorias de frequências sagradas',
                category: 'exploration',
                xpReward: 400,
                checkUnlock: () => userProgress.categoriesExplored.size >= 5
            },

            // AÇÕES ESPECIAIS - Rituais e práticas sagradas
            waterAlchemist: {
                id: 'waterAlchemist',
                name: '💧 Alquimista da Água',
                description: 'Carregue água com frequências sagradas 3 vezes',
                category: 'special',
                xpReward: 150,
                checkUnlock: () => userProgress.waterChargingSessions >= 3
            },
            intentionSetter: {
                id: 'intentionSetter',
                name: '🙏 Definidor de Intenções',
                description: 'Defina intenções sagradas para 10 sessões',
                category: 'special',
                xpReward: 200,
                checkUnlock: () => userProgress.intentionsSet >= 10
            },
            genesisEvangelist: {
                id: 'genesisEvangelist',
                name: '📣 Evangelista Gênesis',
                description: 'Compartilhe a experiência Gênesis com 5 amigos',
                category: 'special',
                xpReward: 250,
                checkUnlock: () => userProgress.appShares >= 5
            },
            journalKeeper: {
                id: 'journalKeeper',
                name: '📝 Guardião do Diário',
                description: 'Registre sua jornada espiritual 10 vezes',
                category: 'special',
                xpReward: 150,
                checkUnlock: () => userProgress.journalEntries >= 10
            },

            // SINCRONICIDADES - Timing e fluxo divino
            morningRitualist: {
                id: 'morningRitualist',
                name: '🌅 Ritualista Matinal',
                description: 'Complete 7 sessões antes das 9h',
                category: 'synchronicity',
                xpReward: 300,
                checkUnlock: () => {
                    const morningSessions = userProgress.sessionHistory.filter(s =>
                        parseInt(s.time.split(':')[0]) < 9
                    ).length;
                    return morningSessions >= 7;
                }
            },
            eveningContemplator: {
                id: 'eveningContemplator',
                name: '🌙 Contemplador Noturno',
                description: 'Complete 7 sessões após as 20h',
                category: 'synchronicity',
                xpReward: 300,
                checkUnlock: () => {
                    const eveningSessions = userProgress.sessionHistory.filter(s =>
                        parseInt(s.time.split(':')[0]) >= 20
                    ).length;
                    return eveningSessions >= 7;
                }
            },
            perfectTiming: {
                id: 'perfectTiming',
                name: '✨ Timing Perfeito',
                description: 'Complete sessões exatamente às 11:11 ou 22:22',
                category: 'synchronicity',
                xpReward: 500,
                special: true,
                checkUnlock: () => {
                    return userProgress.sessionHistory.some(s => {
                        const [hours, minutes] = s.time.split(':').map(Number);
                        return (hours === 11 && minutes === 11) || (hours === 22 && minutes === 22);
                    });
                }
            },

            // MAESTRIA - Conquistas espirituais supremas
            levelApprentice: {
                id: 'levelApprentice',
                name: '⭐ Nível 3: Aprendiz',
                description: 'Alcance o nível de aprendiz espiritual',
                category: 'mastery',
                xpReward: 100,
                checkUnlock: () => userProgress.level >= 3
            },
            levelSeeker: {
                id: 'levelSeeker',
                name: '🌟 Nível 7: Buscador',
                description: 'Atinja o nível de buscador em sua jornada espiritual',
                category: 'mastery',
                xpReward: 200,
                checkUnlock: () => userProgress.level >= 7
            },
            levelAwakened: {
                id: 'levelAwakened',
                name: '✨ Nível 12: Desperto',
                description: 'Desperte para a consciência espiritual superior',
                category: 'mastery',
                xpReward: 300,
                checkUnlock: () => userProgress.level >= 12
            },
            levelPractitioner: {
                id: 'levelPractitioner',
                name: '🔮 Nível 21: Praticante',
                description: 'Praticante mestre de frequências sagradas',
                category: 'mastery',
                xpReward: 400,
                checkUnlock: () => userProgress.level >= 21
            },
            levelMirrorOfForm: {
                id: 'levelMirrorOfForm',
                name: '🪞 Nível 30: Espelho da Forma',
                description: 'Reflita a forma divina através de sua prática',
                category: 'mastery',
                xpReward: 500,
                checkUnlock: () => userProgress.level >= 30
            },
            levelMirrorOfSpirit: {
                id: 'levelMirrorOfSpirit',
                name: '🔮 Nível 37: Espelho do Espírito',
                description: 'Reflita o espírito divino em todas as suas ações',
                category: 'mastery',
                xpReward: 600,
                checkUnlock: () => userProgress.level >= 37
            },
            levelAdept: {
                id: 'levelAdept',
                name: '💫 Nível 50: Adepto',
                description: 'Verdadeiro adepto da maestria de frequências',
                category: 'mastery',
                xpReward: 750,
                checkUnlock: () => userProgress.level >= 50
            },
            levelAscendedMaster: {
                id: 'levelAscendedMaster',
                name: '👑 Nível 108: Mestre Ascensionado',
                description: 'Mestre ascensionado de frequências sagradas',
                category: 'mastery',
                xpReward: 1500,
                legendary: true,
                checkUnlock: () => userProgress.level >= 108
            },

            // CONQUISTAS LENDÁRIAS - Marcos espirituais supremos
            genesisMaster: {
                id: 'genesisMaster',
                name: '🏆 Mestre Gênesis',
                description: 'Desbloqueie todas as conquistas no sistema Gênesis',
                category: 'mastery',
                xpReward: 2000,
                legendary: true,
                checkUnlock: () => userProgress.achievements.size >= Object.keys(ACHIEVEMENTS).length - 1 // -1 to avoid self-reference
            },
            eternalFlame: {
                id: 'eternalFlame',
                name: '🔥 Chama Eterna',
                description: 'Mantenha uma sequência de 365 dias de prática espiritual',
                category: 'mastery',
                xpReward: 3000,
                legendary: true,
                hidden: true,
                checkUnlock: () => userProgress.currentStreak >= 365
            },
            
            // CONQUISTAS DE LICENÇA - Desbloqueando níveis premium
            premiumUnlock: {
                id: 'premiumUnlock',
                name: '⭐ Ascensão Premium',
                description: 'Desbloqueie Premium e ascenda a um novo nível de maestria de frequências',
                category: 'special',
                xpReward: 500,
                checkUnlock: () => {
                    try { return localStorage.getItem('gfgn_license_tier') === 'premium' || localStorage.getItem('gfgn_license_tier') === 'ultimate'; } catch(e) { return false; }
                }
            },
            ultimateUnlock: {
                id: 'ultimateUnlock',
                name: '👑 Iluminação Ultimate',
                description: 'Alcance status Ultimate e desbloqueie o poder total das Frequências Gênesis',
                category: 'special',
                xpReward: 1000,
                legendary: true,
                checkUnlock: () => {
                    try { return localStorage.getItem('gfgn_license_tier') === 'ultimate'; } catch(e) { return false; }
                }
            }
        };

        // Session recording with real streak tracking
        function recordSession(duration, frequencies = [], trackId = null, category = null, metadata = {}) {
            const session = {
                id: generateUUID(),
                timestamp: Date.now(),
                date: new Date().toISOString().split('T')[0],
                time: new Date().toTimeString().split(' ')[0],
                duration: duration,
                frequencies: frequencies,
                trackId: trackId,
                category: category,
                ...metadata
            };

            // Update basic stats
            userProgress.totalSessions++;
            userProgress.totalSeconds += duration;
            userProgress.totalTime = userProgress.totalSeconds; // Legacy compatibility
            userProgress.lastSession = new Date().toISOString();
            userProgress.lastSessionDate = session.date;

            // Track frequencies and categories
            frequencies.forEach(freq => userProgress.frequenciesUsed.add(freq));
            if (category) userProgress.categoriesExplored.add(category);
            if (trackId) {
                userProgress.trackPlayCounts[trackId] = (userProgress.trackPlayCounts[trackId] || 0) + 1;
            }

            // Track special actions
            if (metadata.intentionSet) userProgress.intentionsSet++;
            if (metadata.waterCharging) userProgress.waterChargingSessions++;
            if (metadata.journalEntry) userProgress.journalEntries++;

            // Update streak
            updateStreak(session.date);

            // Add to history
            userProgress.sessionHistory.push(session);

            // Award XP for session
            const baseXP = Math.floor(duration / 60) + 10; // 10 XP base + 1 per minute
            awardXP(baseXP);

            // Check achievements
            checkAllAchievements();

            // Check daily challenge
            checkDailyChallenge(session);

            // Save progress
            saveProgress();

            return session;
        }

        // Real consecutive sequência de dias calculation
        function updateStreak(today) {
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayStr = yesterday.toISOString().split('T')[0];

            if (userProgress.lastSessionDate === yesterdayStr) {
                // Consecutive day - increment streak
                userProgress.currentStreak++;
                if (userProgress.currentStreak > userProgress.longestStreak) {
                    userProgress.longestStreak = userProgress.currentStreak;
                }
            } else if (userProgress.lastSessionDate !== today) {
                // Streak broken
                if (userProgress.currentStreak > 0) {
                    showStreakBrokenModal(userProgress.currentStreak);
                }
                userProgress.currentStreak = 1; // Start new streak
            }
            // If same day, keep current streak
        }

        // Check all achievements
        function checkAllAchievements() {
            let newAchievements = [];

            for (const achievement of Object.values(ACHIEVEMENTS)) {
                if (!userProgress.achievements.has(achievement.id) && achievement.checkUnlock()) {
                    userProgress.achievements.add(achievement.id);
                    userProgress.achievementUnlockDates[achievement.id] = new Date().toISOString();
                    newAchievements.push(achievement);
                }
            }

            // Show celebrations for new achievements
            if (newAchievements.length > 0) {
                showAchievementCelebration(newAchievements);
            }

            return newAchievements;
        }

        // ============================================
        // LEVELING SYSTEM - 7 Spiritual Journey Stages
        // ============================================

        // The 7 Stages of the Spiritual Journey
        const SPIRITUAL_STAGES = {
            1: { name: 'Awakening', icon: 'sunrise', color: '#6b7280', minLevel: 1 },
            2: { name: 'Seeker', icon: 'compass', color: '#22c55e', minLevel: 7 },
            3: { name: 'Initiate', icon: 'flame', color: '#3b82f6', minLevel: 21 },
            4: { name: 'Practitioner', icon: 'target', color: '#a78bfa', minLevel: 37 },
            5: { name: 'Adept', icon: 'zap', color: '#f59e0b', minLevel: 50 },
            6: { name: 'Master', icon: 'crown', color: '#fbbf24', minLevel: 73 },
            7: { name: 'Genesis Master', icon: 'sparkles', color: '#fbbf24', minLevel: 108 }
        };

        const LEVEL_TITLES = {
            1: 'Awakening',
            3: 'Awakening II',
            7: 'Seeker',
            12: 'Seeker II',
            21: 'Initiate',
            30: 'Initiate II',
            37: 'Practitioner',
            40: 'Practitioner II',
            50: 'Adept',
            60: 'Adept II',
            73: 'Master',
            80: 'Master II',
            90: 'Master III',
            100: 'Genesis Master',
            108: 'Genesis Master ✨'
        };

        function getSpiritualStage(level) {
            if (level >= 108) return SPIRITUAL_STAGES[7];
            if (level >= 73) return SPIRITUAL_STAGES[6];
            if (level >= 50) return SPIRITUAL_STAGES[5];
            if (level >= 37) return SPIRITUAL_STAGES[4];
            if (level >= 21) return SPIRITUAL_STAGES[3];
            if (level >= 7) return SPIRITUAL_STAGES[2];
            return SPIRITUAL_STAGES[1];
        }

        function calculateLevel(totalXP) {
            let level = 1;
            let xpRequired = 0;

            while (xpRequired <= totalXP && level < 108) {
                level++;
                xpRequired += xpForLevel(level);
            }

            return level;
        }

        function xpForLevel(level) {
            // Exponential curve that reaches level 108 at ~500,000 XP
            return Math.floor(100 * Math.pow(1.12, level - 1));
        }

        function xpForNextLevel(currentLevel) {
            return xpForLevel(currentLevel + 1);
        }

        function xpProgressInCurrentLevel(totalXP, currentLevel) {
            // Calculate XP accumulated in current level
            let xpForCurrentLevel = 0;
            for (let i = 1; i <= currentLevel; i++) {
                xpForCurrentLevel += xpForLevel(i);
            }

            const xpIntoLevel = totalXP - xpForCurrentLevel;
            const xpNeededForNext = xpForLevel(currentLevel + 1);

            return {
                current: xpIntoLevel,
                needed: xpNeededForNext,
                percentage: Math.floor((xpIntoLevel / xpNeededForNext) * 100)
            };
        }

        function getLevelTitle(level) {
            // Achievement-based titles that progress with usage
            const totalSessions = userProgress.totalSessions || 0;
            const streak = userProgress.currentStreak || 0;
            const achievementsUnlocked = Object.keys(userProgress.achievements || {}).length;
            const t = translations.en;
            
            // Titles based on journey progress (translated)
            if (achievementsUnlocked >= 20 || totalSessions >= 100) return t.titleGenesisMaster || 'Genesis Master';
            if (achievementsUnlocked >= 15 || totalSessions >= 73) return t.titleFrequencySage || 'Frequency Sage';
            if (achievementsUnlocked >= 10 || totalSessions >= 50) return t.titleSacredHarmonist || 'Sacred Harmonist';
            if (streak >= 21 || totalSessions >= 37) return t.titleDivineResonator || 'Divine Resonator';
            if (achievementsUnlocked >= 5 || totalSessions >= 21) return t.titleTrinitySeeker || 'Trinity Seeker';
            if (streak >= 7 || totalSessions >= 10) return t.titleFrequencyExplorer || 'Frequency Explorer';
            if (totalSessions >= 3) return t.titleSacredInitiate || 'Sacred Initiate';
            return t.titleSacredListener || 'Sacred Listener';
        }

        function awardXP(amount) {
            // XP system removed - just save progress
            saveProgress();
        }

        // ============================================
        // SPECIAL UNLOCKS
        // ============================================

        function handleSpecialUnlock(unlockId) {
            const unlocks = {
                'specialTrack_7DayAbundance': () => {
                    unlockTrack('7DayAbundance');
                    showNotification('🎵 New Track Unlocked: 7-Day Abundance!');
                },
                'badge_HabitMaster': () => {
                    showNotification('🏅 Special Badge Earned: Habit Master!');
                },
                'specialTrack_40DaysNights': () => {
                    unlockTrack('40DaysNights');
                    showNotification('🎵 New Track Unlocked: 40 Days & Nights!');
                },
                'specialTrack_73HzPure': () => {
                    unlockTrack('73HzPure');
                    showNotification('🎵 New Track Unlocked: 73 Hz Pure Tone!');
                },
                'specialTrack_Ascension': () => {
                    unlockTrack('Ascension');
                    showNotification('🎵 New Track Unlocked: Ascension!');
                },
                'premiumDiscount_50Percent': () => {
                    userProgress.premiumDiscount = 0.5;
                    showNotification('🎁 Premium Unlock: 50% Discount Available!');
                }
            };

            if (unlocks[unlockId]) {
                unlocks[unlockId]();
            }
        }

        // ============================================
        // UI COMPONENTS
        // ============================================

        function showAchievementCelebration(achievements) {
            // Only show one at a time, queue the rest
            const achievement = achievements[0];

            const modal = document.createElement('div');
            modal.className = 'achievement-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.85);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div class="achievement-popup" style="
                    background: linear-gradient(135deg, rgba(139,92,246,0.95), rgba(251,191,36,0.95));
                    border-radius: 20px;
                    padding: 40px;
                    max-width: 500px;
                    text-align: center;
                    box-shadow: 0 20px 60px rgba(251,191,36,0.5);
                    animation: scaleIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                ">
                    <div class="achievement-icon" style="
                        font-size: 80px;
                        margin-bottom: 20px;
                        animation: bounce 1s infinite;
                    ">${achievement.name.split(' ')[0]}</div>

                    <h2 style="
                        color: #fff;
                        font-size: 28px;
                        margin-bottom: 10px;
                        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
                    ">Conquista Desbloqueada!</h2>

                    <h3 style="
                        color: #fff;
                        font-size: 22px;
                        margin-bottom: 15px;
                        font-weight: 600;
                    ">${achievement.name}</h3>

                    <p style="
                        color: rgba(255,255,255,0.95);
                        font-size: 16px;
                        line-height: 1.6;
                        margin-bottom: 25px;
                    ">${achievement.description}</p>

                    ${achievement.unlocks ? `
                        <div class="unlock-bonus" style="
                            background: rgba(255,255,255,0.15);
                            border-radius: 12px;
                            padding: 15px;
                            margin-bottom: 25px;
                            color: #fff;
                            font-size: 15px;
                        ">
                            🎁 Bonus Unlocked: ${achievement.unlocks.replace(/_/g, ' ')}
                        </div>
                    ` : ''}

                    ${achievement.special ? `
                        <div style="
                            color: #fbbf24;
                            font-size: 14px;
                            margin-bottom: 20px;
                            font-weight: 600;
                        ">
                            ⭐ SPECIAL ACHIEVEMENT ⭐
                        </div>
                    ` : ''}

                    ${achievement.legendary ? `
                        <div style="
                            color: #fbbf24;
                            font-size: 16px;
                            margin-bottom: 20px;
                            font-weight: 700;
                            text-shadow: 0 0 10px rgba(251,191,36,0.8);
                        ">
                            👑 LEGENDARY ACHIEVEMENT 👑
                        </div>
                    ` : ''}

                    <button onclick="closeAchievementModal()" style="
                        background: linear-gradient(90deg, #8b5cf6, #6b46c1);
                        color: #fff;
                        border: none;
                        border-radius: 30px;
                        padding: 15px 40px;
                        font-size: 16px;
                        font-weight: 600;
                        cursor: pointer;
                        box-shadow: 0 4px 15px rgba(139,92,246,0.4);
                        transition: transform 0.2s;
                    " onmouseover="this.style.transform='scale(1.05)'"
                       onmouseout="this.style.transform='scale(1)'">
                        Continue Sua Jornada ➡️
                    </button>
                </div>
            `;

            document.body.appendChild(modal);

            // Confetti celebration
            if (typeof confetti !== 'undefined') {
                confetti({
                    particleCount: achievement.legendary ? 200 : 100,
                    spread: achievement.legendary ? 100 : 70,
                    origin: { y: 0.6 },
                    colors: ['#fbbf24', '#8b5cf6', '#fff']
                });
            }

            // Queue remaining achievements
            if (achievements.length > 1) {
                setTimeout(() => {
                    showAchievementCelebration(achievements.slice(1));
                }, 3000);
            }
        }

        function closeAchievementModal() {
            const modal = document.querySelector('.achievement-modal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => modal.remove(), 300);
            }
        }

        function showLevelUpModal(level, title) {
            const modal = document.createElement('div');
            modal.className = 'level-up-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10001;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #8b5cf6, #6b46c1);
                    border-radius: 20px;
                    padding: 50px;
                    text-align: center;
                    box-shadow: 0 20px 60px rgba(139,92,246,0.6);
                    animation: scaleIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                ">
                    <div style="font-size: 100px; margin-bottom: 20px;">🏆</div>
                    <h2 style="color: #fbbf24; font-size: 36px; margin-bottom: 10px; font-weight: 700;">
                        SUBIU DE NÍVEL!
                    </h2>
                    <div style="color: #fff; font-size: 48px; font-weight: 700; margin-bottom: 15px;">
                        Nível ${level}
                    </div>
                    <div style="color: #fbbf24; font-size: 24px; margin-bottom: 30px; font-style: italic;">
                        ${title}
                    </div>
                    <p style="color: rgba(255,255,255,0.9); font-size: 16px; margin-bottom: 30px;">
                        Sua jornada espiritual aprofunda com cada nível
                    </p>
                    <button onclick="closeLevelUpModal()" style="
                        background: linear-gradient(90deg, #fbbf24, #f59e0b);
                        color: #1a1625;
                        border: none;
                        border-radius: 30px;
                        padding: 15px 40px;
                        font-size: 16px;
                        font-weight: 700;
                        cursor: pointer;
                        box-shadow: 0 4px 15px rgba(251,191,36,0.4);
                    ">
                        Continuar ➡️
                    </button>
                </div>
            `;

            document.body.appendChild(modal);

            if (typeof confetti !== 'undefined') {
                confetti({
                    particleCount: 150,
                    spread: 120,
                    origin: { y: 0.5 },
                    colors: ['#fbbf24', '#8b5cf6', '#fff'],
                    startVelocity: 45
                });
            }
        }

        function closeLevelUpModal() {
            const modal = document.querySelector('.level-up-modal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => modal.remove(), 300);
            }
        }

        function showStreakBrokenModal(oldStreak) {
            const modal = document.createElement('div');
            modal.className = 'streak-broken-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.85);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, rgba(75,0,130,0.95), rgba(128,0,128,0.95));
                    border-radius: 20px;
                    padding: 40px;
                    max-width: 500px;
                    text-align: center;
                    box-shadow: 0 20px 60px rgba(128,0,128,0.5);
                ">
                    <div style="font-size: 80px; margin-bottom: 20px;">🎉</div>
                    <h2 style="color: #fbbf24; font-size: 28px; margin-bottom: 15px;">
                        Streak Broken
                    </h2>
                    <p style="color: #fff; font-size: 18px; margin-bottom: 20px;">
                        Your ${oldStreak}-day journey has paused
                    </p>
                    <p style="color: rgba(255,255,255,0.8); font-size: 15px; line-height: 1.6; margin-bottom: 30px;">
                        Every master has stumbled. What matters is rising again.<br>
                        Your longest streak (${userProgress.longestStreak} days) remains forever.
                    </p>
                    <div style="
                        background: rgba(251,191,36,0.15);
                        border-radius: 12px;
                        padding: 20px;
                        margin-bottom: 25px;
                    ">
                        <p style="color: #fbbf24; font-weight: 600; margin-bottom: 10px;">
                            🌟 Start Fresh
                        </p>
                        <p style="color: #fff; font-size: 14px;">
                            Comece uma nova sequência hoje. Cada dia é um novo começo.
                        </p>
                    </div>
                    ${!userProgress.isPremium ? `
                        <div style="
                            background: rgba(139,92,246,0.2);
                            border-radius: 12px;
                            padding: 15px;
                            margin-bottom: 25px;
                        ">
                            <p style="color: #c4b5fd; font-size: 13px;">
                                💎 Premium users get a <b>Streak Freeze</b> to protect their progress
                            </p>
                        </div>
                    ` : ''}
                    <button onclick="closeStreakBrokenModal()" style="
                        background: linear-gradient(90deg, #8b5cf6, #6b46c1);
                        color: #fff;
                        border: none;
                        border-radius: 30px;
                        padding: 15px 40px;
                        font-size: 16px;
                        font-weight: 600;
                        cursor: pointer;
                        box-shadow: 0 4px 15px rgba(139,92,246,0.4);
                    ">
                        Começar Novamente ➡️
                    </button>
                </div>
            `;

            document.body.appendChild(modal);
        }

        function closeStreakBrokenModal() {
            const modal = document.querySelector('.streak-broken-modal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => modal.remove(), 300);
            }
        }

        function showStreakFreezModal() {
            showNotification('❄️ Congelamento de Sequência Usado! Sua sequência continua. (Próximo congelamento disponível no próximo mês)');
        }

        // ============================================
        // PROGRESS DASHBOARD UI
        // ============================================

        function renderProgressDashboard() {
            // Calculate achievement progress
            const totalAchievements = Object.keys(ACHIEVEMENTS).length;
            const unlockedAchievements = userProgress.achievements.size;
            const achievementPercentage = Math.floor((unlockedAchievements / totalAchievements) * 100);

            return `
                <div class="progress-dashboard" style="
                    padding: 20px;
                    background: linear-gradient(135deg, rgba(139,92,246,0.1), rgba(251,191,36,0.1));
                    border-radius: 20px;
                    margin: 20px 0;
                ">
                    <!-- Streak Card -->
                    <div class="streak-card" style="
                        background: linear-gradient(135deg, rgba(251,191,36,0.15), rgba(251,191,36,0.05));
                        border: 2px solid rgba(251,191,36,0.3);
                        border-radius: 16px;
                        padding: 25px;
                        margin-bottom: 20px;
                        text-align: center;
                    ">
                        <div style="font-size: 60px; margin-bottom: 10px;">
                            🔥
                        </div>
                        <div style="color: #fbbf24; font-size: 48px; font-weight: 700; margin-bottom: 5px;">
                            ${userProgress.currentStreak}
                        </div>
                        <div style="color: #fff; font-size: 18px; font-weight: 600; margin-bottom: 10px;">
                            Day Streak
                        </div>
                        <div style="color: #a78bfa; font-size: 14px;">
                            Longest: ${userProgress.longestStreak} days 🏆
                        </div>

                        ${userProgress.currentStreak >= 3 ? `
                            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(251,191,36,0.2);">
                                <div style="color: #fbbf24; font-size: 13px; font-weight: 600; margin-bottom: 8px;">
                                    Next Milestone
                                </div>
                                <div style="color: #fff; font-size: 14px;">
                                    ${getNextStreakMilestone(userProgress.currentStreak)}
                                </div>
                            </div>
                        ` : ''}
                    </div>

                    <!-- Stats Grid -->
                    <div style="
                        display: grid;
                        grid-template-columns: repeat(2, 1fr);
                        gap: 15px;
                        margin-bottom: 20px;
                    ">
                        <div class="stat-card" style="
                            background: rgba(139,92,246,0.1);
                            border-radius: 12px;
                            padding: 20px;
                            text-align: center;
                        ">
                            <div style="font-size: 36px; margin-bottom: 8px;">🎧</div>
                            <div style="color: #fbbf24; font-size: 28px; font-weight: 700;">
                                ${userProgress.totalSessions}
                            </div>
                            <div style="color: #a78bfa; font-size: 13px;">Sessions</div>
                        </div>

                        <div class="stat-card" style="
                            background: rgba(139,92,246,0.1);
                            border-radius: 12px;
                            padding: 20px;
                            text-align: center;
                        ">
                            <div style="font-size: 36px; margin-bottom: 8px;">⏱️</div></div>
                            <div style="color: #fbbf24; font-size: 28px; font-weight: 700;">
                                ${Math.floor(userProgress.totalSeconds / 3600)}h
                            </div>
                            <div style="color: #a78bfa; font-size: 13px;">Listening Time</div>
                        </div>

                        <div class="stat-card" style="
                            background: rgba(139,92,246,0.1);
                            border-radius: 12px;
                            padding: 20px;
                            text-align: center;
                        ">
                            <div style="font-size: 36px; margin-bottom: 8px;">🏆</div></div>
                            <div style="color: #fbbf24; font-size: 28px; font-weight: 700;">
                                ${unlockedAchievements}
                            </div>
                            <div style="color: #a78bfa; font-size: 13px;">Achievements</div>
                        </div>

                        <div class="stat-card" style="
                            background: rgba(139,92,246,0.1);
                            border-radius: 12px;
                            padding: 20px;
                            text-align: center;
                        ">
                            <div style="font-size: 36px; margin-bottom: 8px;">🎵</div></div>
                            <div style="color: #fbbf24; font-size: 28px; font-weight: 700;">
                                ${userProgress.frequenciesUsed.size}
                            </div>
                            <div style="color: #a78bfa; font-size: 13px;">Frequencies</div>
                        </div>
                    </div>

                    <!-- Achievement Progress -->
                    <div style="
                        background: rgba(251,191,36,0.1);
                        border-radius: 16px;
                        padding: 25px;
                        margin-bottom: 20px;
                    ">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3 style="color: #fbbf24; font-size: 18px; margin: 0;">
                                Achievement Progress
                            </h3>
                            <span style="color: #fff; font-weight: 600;">
                                ${unlockedAchievements} / ${totalAchievements}
                            </span>
                        </div>
                        <div style="
                            background: rgba(0,0,0,0.2);
                            border-radius: 20px;
                            height: 16px;
                            overflow: hidden;
                            margin-bottom: 10px;
                        ">
                            <div style="
                                background: linear-gradient(90deg, #fbbf24, #f59e0b);
                                height: 100%;
                                width: ${achievementPercentage}%;
                                border-radius: 20px;
                                transition: width 0.5s ease;
                            "></div>
                        </div>
                        <div style="color: #a78bfa; font-size: 13px; text-align: center;">
                            ${achievementPercentage}% Completo
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div style="text-align: center;">
                        <button onclick="showAllAchievements()" style="
                            background: linear-gradient(90deg, #8b5cf6, #6b46c1);
                            color: #fff;
                            border: none;
                            border-radius: 30px;
                            padding: 12px 30px;
                            font-size: 15px;
                            font-weight: 600;
                            cursor: pointer;
                            box-shadow: 0 4px 12px rgba(139,92,246,0.3);
                            margin: 5px;
                        ">
                            Ver Todas as Conquistas ➡️
                        </button>
                    </div>
                </div>
            `;
        }

        function getNextStreakMilestone(currentStreak) {
            const milestones = [7, 14, 21, 30, 40, 73, 108, 365];
            for (const milestone of milestones) {
                if (currentStreak < milestone) {
                    const daysLeft = milestone - currentStreak;
                    return `${milestone} days (${daysLeft} more to go)`;
                }
            }
            return '365 days reached! 👑';
        }

        // ============================================
        // ACHIEVEMENTS DISPLAY
        // ============================================

        function showAllAchievements() {
            const categories = {
                'awakening': { name: 'Despertar', icon: '🌅' },
                'sessions': { name: 'Marcos de Sessões', icon: '🎯' },
                'time': { name: 'Marcos de Tempo', icon: '⏰' },
                'streaks': { name: 'Conquistas de Sequência', icon: '🔥' },
                'exploration': { name: 'Exploração de Frequências', icon: '🎵' },
                'special': { name: 'Ações Especiais', icon: '⭐' },
                'synchronicity': { name: 'Sincronicidades', icon: '✨' },
                'mastery': { name: 'Maestria', icon: '🏆' }
            };

            let html = `
                <div class="achievements-modal" style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.9);
                    z-index: 10000;
                    overflow-y: auto;
                    padding: 20px;
                ">
                    <div style="max-width: 900px; margin: 0 auto;">
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h2 style="color: #fbbf24; font-size: 32px; margin-bottom: 10px;">
                                🏆 Todas as Conquistas
                            </h2>
                            <p style="color: #a78bfa; font-size: 16px;">
                                ${userProgress.achievements.size} /${Object.keys(ACHIEVEMENTS).length} Desbloqueadas
                            </p>
                        </div>
            `;

            for (const [categoryKey, categoryInfo] of Object.entries(categories)) {
                const categoryAchievements = Object.values(ACHIEVEMENTS).filter(a => a.category === categoryKey);
                if (categoryAchievements.length === 0) continue;

                const unlockedInCategory = categoryAchievements.filter(a => userProgress.achievements.has(a.id)).length;

                html += `
                    <div style="margin-bottom: 30px;">
                        <h3 style="color: #fbbf24; font-size: 20px; margin-bottom: 15px;">
                            ${categoryInfo.icon}${categoryInfo.name} (${unlockedInCategory}/${categoryAchievements.length})
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px;">
                `;

                for (const achievement of categoryAchievements) {
                    html += renderAchievementCard(achievement, achievement.id);
                }

                html += `
                        </div>
                    </div>
                `;
            }

            html += `
                        <div style="text-align: center; margin-top: 30px;">
                            <button onclick="closeAllAchievements()" style="
                                background: linear-gradient(90deg, #8b5cf6, #6b46c1);
                                color: #fff;
                                border: none;
                                border-radius: 30px;
                                padding: 15px 40px;
                                font-size: 16px;
                                font-weight: 600;
                                cursor: pointer;
                                box-shadow: 0 4px 12px rgba(139,92,246,0.4);
                            ">
                                Fechar
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', html);
        }

        function closeAllAchievements() {
            const modal = document.querySelector('.achievements-modal');
            if (modal) modal.remove();
        }

        function getAchievementProgress(achievementId, achievement) {
            const checks = achievement.check(userProgress);
            
            // Define progress calculators for each achievement
            const progressCalculators = {
                // Awakening
                trinityThreshold: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 3) * 100), 100),
                    text: `${userProgress.totalSessions}/3 sessions`
                }),
                
                sevenFoldBlessing: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 7) * 100), 100),
                    text: `${userProgress.totalSessions}/7 sessions`
                }),
                
                tenthGate: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 10) * 100), 100),
                    text: `${userProgress.totalSessions}/10 sessions`
                }),
                
                // Session milestones
                quarterCentury: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 25) * 100), 100),
                    text: `${userProgress.totalSessions}/25 sessions`
                }),
                
                mirrorOfForm: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 37) * 100), 100),
                    text: `${userProgress.totalSessions}/37 sessions`
                }),
                
                fiftySteps: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 50) * 100), 100),
                    text: `${userProgress.totalSessions}/50 sessions`
                }),
                
                mirrorOfSpirit: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 73) * 100), 100),
                    text: `${userProgress.totalSessions}/73 sessions`
                }),
                
                centuryGuardian: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 100) * 100), 100),
                    text: `${userProgress.totalSessions}/100 sessions`
                }),
                
                sacredGateway108: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 108) * 100), 100),
                    text: `${userProgress.totalSessions}/108 sessions`
                }),
                
                // Time-based
                fiveMinuteMark: () => {
                    const mins = Math.floor(userProgress.totalSeconds / 60);
                    return {
                        percentage: Math.min(Math.round((mins / 5) * 100), 100),
                        text: `${mins}/5 minutes`
                    };
                },
                
                halfHourDevotee: () => {
                    const mins = Math.floor(userProgress.totalSeconds / 60);
                    return {
                        percentage: Math.min(Math.round((mins / 30) * 100), 100),
                        text: `${mins}/30 minutes`
                    };
                },
                
                hourMaster: () => {
                    const hours = Math.floor(userProgress.totalSeconds / 3600);
                    return {
                        percentage: Math.min(hours * 100, 100),
                        text: `${hours}/1 hour`
                    };
                },
                
                fiveHourPilgrim: () => {
                    const hours = Math.floor(userProgress.totalSeconds / 3600);
                    return {
                        percentage: Math.min(Math.round((hours / 5) * 100), 100),
                        text: `${hours}/5 hours`
                    };
                },
                
                tenHourSage: () => {
                    const hours = Math.floor(userProgress.totalSeconds / 3600);
                    return {
                        percentage: Math.min(Math.round((hours / 10) * 100), 100),
                        text: `${hours}/10 hours`
                    };
                },
                
                // Streak-based
                threeDayInitiate: () => {
                    const current = userProgress.currentStreak;
                    const target = 3;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/3 sequência de dias`
                    };
                },
                
                sevenDaySeeker: () => {
                    const current = userProgress.currentStreak;
                    const target = 7;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/7 sequência de dias`
                    };
                },
                
                twoWeekChampion: () => {
                    const current = userProgress.currentStreak;
                    const target = 14;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/14 sequência de dias`
                    };
                },
                
                twentyOneDayTransformer: () => {
                    const current = userProgress.currentStreak;
                    const target = 21;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/21 sequência de dias`
                    };
                },
                
                monthMaster: () => {
                    const current = userProgress.currentStreak;
                    const target = 30;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/30 sequência de dias`
                    };
                },
                
                fortyDayPilgrim: () => {
                    const current = userProgress.currentStreak;
                    const target = 40;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/40 sequência de dias`
                    };
                },
                
                seventyThreeDayMystic: () => {
                    const current = userProgress.currentStreak;
                    const target = 73;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/73 sequência de dias`
                    };
                },
                
                oneHundredEightDaySage: () => {
                    const current = userProgress.currentStreak;
                    const target = 108;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/108 sequência de dias`
                    };
                },
                
                // Exploration-based
                explorer: () => {
                    const current = userProgress.frequenciesUsed.size;
                    const target = 5;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/5 frequencies explored`
                    };
                },
                
                categoryConqueror: () => {
                    const current = userProgress.categoriesExplored.size;
                    const target = 5;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/5 categories explored`
                    };
                },
                
                frequencyMaster: () => {
                    const current = userProgress.frequenciesUsed.size;
                    const target = 20;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/20 unique frequencies`
                    };
                },
                
                // Specialty tracking
                genesisScholar: () => {
                    const current = userProgress.trackPlayCounts?.genesisCreation || 0;
                    const target = 10;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/10 Genesis sessions`
                    };
                },
                
                solfeggioAdept: () => {
                    const counts = userProgress.trackPlayCounts || {};
                    const solfeggioKeys = Object.keys(counts).filter(k => k.includes('solfeggio'));
                    const current = solfeggioKeys.reduce((sum, key) => sum + (counts[key] || 0), 0);
                    const target = 20;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/20 Solfeggio sessions`
                    };
                },
                
                angelWhisperer: () => {
                    const counts = userProgress.trackPlayCounts || {};
                    const angelKeys = Object.keys(counts).filter(k => k.includes('angel'));
                    const current = angelKeys.reduce((sum, key) => sum + (counts[key] || 0), 0);
                    const target = 15;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/15 Angel Number sessions`
                    };
                },
                
                chakraBalancer: () => {
                    const counts = userProgress.trackPlayCounts || {};
                    const chakraKeys = Object.keys(counts).filter(k => k.includes('chakra'));
                    const current = chakraKeys.reduce((sum, key) => sum + (counts[key] || 0), 0);
                    const target = 25;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/25 Chakra sessions`
                    };
                },
                
                // Duration-based
                quickSession: () => ({
                    percentage: userProgress.totalSessions > 0 ? 100 : 0,
                    text: 'Complete any session'
                }),
                
                deepMeditation: () => {
                    const hasSession = userProgress.sessionHistory.some(s => s.duration >= 30);
                    return {
                        percentage: hasSession ? 100 : 0,
                        text: hasSession ? 'Complete!' : 'Meditate for 30+ minutes'
                    };
                },
                
                marathonListener: () => {
                    const hasSession = userProgress.sessionHistory.some(s => s.duration >= 60);
                    return {
                        percentage: hasSession ? 100 : 0,
                        text: hasSession ? 'Complete!' : 'Complete a 60-minute session'
                    };
                },
                
                // Time-based achievements
                earlyBird: () => ({
                    percentage: 0,
                    text: 'Practice before 6 AM'
                }),
                
                nightOwl: () => ({
                    percentage: 0,
                    text: 'Practice after 10 PM'
                }),
                
                midnightMystic: () => ({
                    percentage: 0,
                    text: 'Practice between 11 PM - 1 AM'
                }),
                
                // Special activity achievements
                waterCharger: () => {
                    const current = userProgress.waterChargingSessions || 0;
                    const target = 3;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/3 water charging sessions`
                    };
                },
                
                crystalHealer: () => {
                    const current = userProgress.crystalSessions || 0;
                    const target = 5;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/5 crystal healing sessions`
                    };
                },
                
                intentionSetter: () => {
                    const current = userProgress.intentionsSet || 0;
                    const target = 10;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/10 intentions set`
                    };
                },
                
                reflectiveSoul: () => {
                    const current = userProgress.journalEntries?.length || 0;
                    const target = 10;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/10 journal entries`
                    };
                },
                
                // Social achievements
                shareTheLight: () => {
                    const current = userProgress.appShares || 0;
                    const target = 3;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/3 shares`
                    };
                },
                
                helpOthers: () => {
                    const current = userProgress.referrals?.length || 0;
                    const target = 5;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `${current}/5 friends referred`
                    };
                }
            };
            
            // Get progress if calculator exists
            if (progressCalculators[achievementId]) {
                return progressCalculators[achievementId]();
            }
            
            // Default: no progress tracking
            return null;
        }

        // ============================================
        // ACHIEVEMENT BADGE ICONS (Lucide-based)
        // ============================================
        
        const ACHIEVEMENT_ICONS = {
            // Awakening category
            trinityThreshold: 'triangle',
            sevenFoldBlessing: 'sparkles',
            tenthGate: 'star',
            
            // Sessions category
            quarterCentury: 'infinity',
            mirrorOfForm: 'gem',
            fiftySteps: 'trending-up',
            mirrorOfSpirit: 'sparkles',
            centuryGuardian: 'crown',
            sacredGateway108: 'door-open',
            
            // Time category
            fiveMinuteMark: 'timer',
            halfHourDevotee: 'clock',
            hourMaster: 'clock',
            fiveHourPilgrim: 'clock',
            tenHourSage: 'clock',
            
            // Streaks category
            threeDayInitiate: 'flame',
            sevenDaySeeker: 'star',
            twoWeekChampion: 'trophy',
            twentyOneDayTransformer: 'refresh-cw',
            monthMaster: 'crown',
            fortyDayPilgrim: 'bird',
            seventyThreeDayMystic: 'gem',
            oneHundredEightDaySage: 'flower-2',
            
            // Exploration category
            trinityMaster: 'triangle',
            solfeggioExplorer: 'heart',
            angelWhisperer: 'bird',
            cosmicTraveler: 'orbit',
            frequencyScholar: 'graduation-cap',
            
            // Special category
            waterAlchemist: 'droplet',
            intentionSetter: 'target',
            genesisEvangelist: 'megaphone',
            journalKeeper: 'book-open',
            
            // Synchronicity category
            morningRitualist: 'sunrise',
            eveningContemplator: 'moon',
            perfectTiming: 'clock',
            
            // Mastery category
            levelApprentice: 'star',
            levelSeeker: 'star',
            levelAwakened: 'sparkles',
            levelPractitioner: 'gem',
            levelMirrorOfForm: 'flip-horizontal',
            levelMirrorOfSpirit: 'star'
        };
        
        function getAchievementIcon(achievementId, size = 48) {
            const iconName = ACHIEVEMENT_ICONS[achievementId] || 'award';
            return `<i data-lucide="${iconName}" style="width:${size}px;height:${size}px;color:#fbbf24;"></i>`;
        }

        // ============================================
        // LOCKED ACHIEVEMENT TEASER SYSTEM
        // ============================================

        function renderAchievementCard(achievement, achievementId) {
            const isUnlocked = userProgress.achievements.has(achievementId);
            const progress = getAchievementProgress(achievementId, achievement);
            const isClose = progress && progress.percentage >= 75; // "Close to unlocking"
            
            // Different display states
            if (isUnlocked) {
                return renderUnlockedAchievement(achievement, achievementId);
            } else if (isClose) {
                return renderAlmostUnlockedAchievement(achievement, achievementId, progress);
            } else if (progress && progress.percentage > 0) {
                return renderInProgressAchievement(achievement, achievementId, progress);
            } else {
                return renderLockedAchievement(achievement, achievementId);
            }
        }

        // ============================================
        // UNLOCKED ACHIEVEMENT (Full Details)
        // ============================================

        function renderUnlockedAchievement(achievement, achievementId) {
            return `
                <div class="achievement-card unlocked" style="
                    background: linear-gradient(135deg, rgba(34,197,94,0.2), rgba(22,163,74,0.2));
                    border: 2px solid #22c55e;
                    border-radius: 16px;
                    padding: 20px;
                    padding-top: 30px;
                    position: relative;
                    overflow: visible;
                    animation: pulse-glow 2s ease-in-out infinite;
                ">
                    <!-- Badges -->
                    ${achievement.legendary ? `
                        <div style="
                            position: absolute;
                            top: -5px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: linear-gradient(90deg, #fbbf24, #f59e0b);
                            color: #1a1625;
                            padding: 6px 16px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                            box-shadow: 0 4px 12px rgba(251,191,36,0.5);
                            z-index: 10;
                        ">LEGENDARY</div>
                    ` : achievement.special ? `
                        <div style="
                            position: absolute;
                            top: -5px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: rgba(139,92,246,0.9);
                            color: #fbbf24;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                        ">SPECIAL</div>
                    ` : ''}

                    <!-- Sparkle effect -->
                    <div style="
                        position: absolute;
                        top: 10px;
                        right: 10px;
                        font-size: 24px;
                        animation: sparkle 1.5s ease-in-out infinite;
                    "><i data-lucide="sparkles" class="lucide-icon icon-gold"></i></div>
                    
                    <!-- Achievement Icon -->
                    <div style="
                        text-align: center;
                        margin-bottom: 15px;
                        filter: drop-shadow(0 0 10px rgba(34,197,94,0.5));
                    ">
                        ${getAchievementIcon(achievementId, 64)}
                    </div>
                    
                    <!-- Achievement Name -->
                    <h4 style="
                        color: #22c55e;
                        font-size: 18px;
                        font-weight: 700;
                        text-align: center;
                        margin-bottom: 10px;
                    ">
                        ${achievement.name}
                    </h4>
                    
                    <!-- Description -->
                    <p style="
                        color: #fff;
                        font-size: 14px;
                        text-align: center;
                        margin-bottom: 15px;
                        line-height: 1.5;
                    ">
                        ${achievement.description}
                    </p>
                    
                    <!-- Unlock Date -->
                    <div style="
                        text-align: center;
                        color: #22c55e;
                        font-size: 13px;
                        font-weight: 600;
                        margin-top: 10px;
                    ">
                        ✅ Unlocked ${getUnlockDate(achievementId)}
                    </div>
                </div>
            `;
        }

        // ============================================
        // ALMOST UNLOCKED (75%+ Progress - HYPE MODE)
        // ============================================

        function renderAlmostUnlockedAchievement(achievement, achievementId, progress) {
            return `
                <div class="achievement-card almost-unlocked" style="
                    background: linear-gradient(135deg, rgba(251,191,36,0.3), rgba(249,115,22,0.3));
                    border: 3px solid #fbbf24;
                    border-radius: 16px;
                    padding: 20px;
                    padding-top: 35px;
                    position: relative;
                    animation: pulse-intense 1s ease-in-out infinite;
                    box-shadow: 0 0 30px rgba(251,191,36,0.4);
                ">
                    <!-- Badges -->
                    ${achievement.legendary ? `
                        <div style="
                            position: absolute;
                            top: -10px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: linear-gradient(90deg, #fbbf24, #f59e0b);
                            color: #1a1625;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                            box-shadow: 0 4px 12px rgba(251,191,36,0.5);
                            z-index: 10;
                        ">LEGENDARY</div>
                    ` : achievement.special ? `
                        <div style="
                            position: absolute;
                            top: -10px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: rgba(139,92,246,0.9);
                            color: #fbbf24;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                            z-index: 10;
                        ">SPECIAL</div>
                    ` : ''}

                    <!-- Pulsing "Almost There" badge -->
                    <div style="
                        position: absolute;
                        top: -5px;
                        right: -5px;
                        background: linear-gradient(135deg, #fbbf24, #f59e0b);
                        color: #1a1625;
                        padding: 6px 14px;
                        border-radius: 0 16px 0 16px;
                        font-size: 11px;
                        font-weight: 900;
                        text-transform: uppercase;
                        letter-spacing: 1px;
                        box-shadow: 0 4px 15px rgba(251,191,36,0.6);
                        animation: shake 0.5s ease-in-out infinite;
                    ">
                        <i data-lucide="flame" style="width:14px;height:14px;display:inline;vertical-align:middle;"></i> SO CLOSE!
                    </div>
                    
                    <!-- Partially revealed icon -->
                    <div style="
                        text-align: center;
                        margin-bottom: 15px;
                        position: relative;
                        filter: brightness(1.5) drop-shadow(0 0 15px rgba(251,191,36,0.8));
                    ">
                        ${getAchievementIcon(achievementId, 64)}
                        
                        <!-- Shine effect overlay -->
                        <div style="
                            position: absolute;
                            top: 0;
                            left: 0;
                            right: 0;
                            bottom: 0;
                            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
                            animation: shine 2s infinite;
                        "></div>
                    </div>
                    
                    <!-- Achievement Name (Visible) -->
                    <h4 style="
                        color: #fbbf24;
                        font-size: 18px;
                        font-weight: 700;
                        text-align: center;
                        margin-bottom: 10px;
                        text-shadow: 0 0 10px rgba(251,191,36,0.5);
                    ">
                        ${achievement.name}
                    </h4>
                    
                    <!-- Description (Visible) -->
                    <p style="
                        color: #fff;
                        font-size: 14px;
                        text-align: center;
                        margin-bottom: 15px;
                        line-height: 1.5;
                    ">
                        ${achievement.description}
                    </p>
                    
                    <!-- Dramatic Progress Bar -->
                    <div style="margin-bottom: 15px;">
                        <div style="
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            margin-bottom: 8px;
                        ">
                            <span style="color: #fbbf24; font-size: 13px; font-weight: 600;">
                                Almost there!
                            </span>
                            <span style="color: #fff; font-size: 16px; font-weight: 700;">
                                ${progress.percentage}%
                            </span>
                        </div>
                        <div style="
                            background: rgba(0,0,0,0.4);
                            border-radius: 20px;
                            height: 16px;
                            overflow: hidden;
                            position: relative;
                        ">
                            <div style="
                                background: linear-gradient(90deg, #fbbf24, #f59e0b, #fbbf24);
                                background-size: 200% 100%;
                                height: 100%;
                                width: ${progress.percentage}%;
                                border-radius: 20px;
                                animation: gradient-shift 2s ease infinite;
                                box-shadow: 0 0 20px rgba(251,191,36,0.8);
                            "></div>
                        </div>
                        <div style="
                            text-align: center;
                            color: #a78bfa;
                            font-size: 12px;
                            margin-top: 6px;
                        ">
                            ${progress.text}
                        </div>
                    </div>
                    
                    <!-- Motivational Message -->
                    <div style="
                        text-align: center;
                        background: linear-gradient(90deg, rgba(251,191,36,0.3), rgba(249,115,22,0.3));
                        color: #fbbf24;
                        padding: 12px 16px;
                        border-radius: 20px;
                        font-size: 15px;
                        font-weight: 700;
                        border: 2px solid #fbbf24;
                        box-shadow: 0 0 20px rgba(251,191,36,0.3);
                    ">
                        ✨ Almost there!
                    </div>
                    
                    <!-- Motivational Message -->
                    <div style="
                        text-align: center;
                        color: #fbbf24;
                        font-size: 12px;
                        margin-top: 12px;
                        font-weight: 600;
                        animation: pulse-text 1.5s ease-in-out infinite;
                    ">
                        Keep going! You're about to unlock this! 🔥
                    </div>
                </div>
            `;
        }

        // ============================================
        // IN PROGRESS (1-74% Progress)
        // ============================================

        function renderInProgressAchievement(achievement, achievementId, progress) {
            return `
                <div class="achievement-card in-progress" style="
                    background: linear-gradient(135deg, rgba(139,92,246,0.2), rgba(107,70,193,0.2));
                    border: 2px solid rgba(139,92,246,0.5);
                    border-radius: 16px;
                    padding: 20px;
                    padding-top: 35px;
                    position: relative;
                ">
                    <!-- Badges -->
                    ${achievement.legendary ? `
                        <div style="
                            position: absolute;
                            top: 5px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: linear-gradient(90deg, #fbbf24, #f59e0b);
                            color: #1a1625;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                            box-shadow: 0 4px 12px rgba(251,191,36,0.5);
                            z-index: 10;
                        ">LEGENDARY</div>
                    ` : achievement.special ? `
                        <div style="
                            position: absolute;
                            top: -10px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: rgba(139,92,246,0.9);
                            color: #fbbf24;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                            z-index: 10;
                        ">SPECIAL</div>
                    ` : ''}

                    <!-- In Progress badge -->
                    <div style="
                        position: absolute;
                        top: 10px;
                        right: 10px;
                        background: rgba(139,92,246,0.3);
                        color: #a78bfa;
                        padding: 4px 12px;
                        border-radius: 12px;
                        font-size: 10px;
                        font-weight: 700;
                        text-transform: uppercase;
                        letter-spacing: 0.5px;
                    ">
                        IN PROGRESS
                    </div>
                    
                    <!-- Icon (Slightly dimmed) -->
                    <div style="
                        text-align: center;
                        margin-bottom: 15px;
                        opacity: 0.8;
                        filter: grayscale(20%);
                    ">
                        ${getAchievementIcon(achievementId, 64)}
                    </div>
                    
                    <!-- Achievement Name -->
                    <h4 style="
                        color: #a78bfa;
                        font-size: 18px;
                        font-weight: 700;
                        text-align: center;
                        margin-bottom: 10px;
                    ">
                        ${achievement.name}
                    </h4>
                    
                    <!-- Description -->
                    <p style="
                        color: #d1d5db;
                        font-size: 14px;
                        text-align: center;
                        margin-bottom: 15px;
                        line-height: 1.5;
                    ">
                        ${achievement.description}
                    </p>
                    
                    <!-- Progress Bar -->
                    <div style="margin-bottom: 15px;">
                        <div style="
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            margin-bottom: 8px;
                        ">
                            <span style="color: #a78bfa; font-size: 12px; font-weight: 600;">
                                Progress
                            </span>
                            <span style="color: #fff; font-size: 14px; font-weight: 700;">
                                ${progress.percentage}%
                            </span>
                        </div>
                        <div style="
                            background: rgba(0,0,0,0.4);
                            border-radius: 20px;
                            height: 12px;
                            overflow: hidden;
                        ">
                            <div style="
                                background: linear-gradient(90deg, #8b5cf6, #a78bfa);
                                height: 100%;
                                width: ${progress.percentage}%;
                                border-radius: 20px;
                                transition: width 0.5s ease;
                            "></div>
                        </div>
                        <div style="
                            text-align: center;
                            color: #9ca3af;
                            font-size: 11px;
                            margin-top: 6px;
                        ">
                            ${progress.text}
                        </div>
                    </div>
                    
                    <!-- Progress Hint -->
                    <div style="
                        text-align: center;
                        background: rgba(139,92,246,0.2);
                        color: #a78bfa;
                        padding: 10px 16px;
                        border-radius: 20px;
                        font-size: 14px;
                        font-weight: 600;
                        border: 1px solid rgba(139,92,246,0.3);
                    ">
                        💪 Continue assim!
                    </div>
                </div>
            `;
        }

        // ============================================
        // LOCKED (0% Progress - MYSTERY MODE)
        // ============================================

        function renderLockedAchievement(achievement, achievementId) {
            // Decide how mysterious based on achievement tier
            const isMysteryBox = achievement.rarity === 'legendary'; // Hide details for rare achievements
            
            // Get progress for this achievement
            const progress = getAchievementProgress(achievementId, achievement);
            
            return `
                <div class="achievement-card locked" style="
                    background: linear-gradient(135deg, rgba(30,30,50,0.5), rgba(20,20,35,0.5));
                    border: 2px dashed rgba(107,114,128,0.3);
                    border-radius: 16px;
                    padding: 20px;
                    padding-top: 35px;
                    position: relative;
                    cursor: pointer;
                    transition: all 0.3s ease;
                "
                onmouseover="this.style.borderColor='rgba(139,92,246,0.5)'; this.style.transform='scale(1.02)'"
                onmouseout="this.style.borderColor='rgba(107,114,128,0.3)'; this.style.transform='scale(1)'"
                onclick="showLockedAchievementModal('${achievementId}')">
                    
                    <!-- Badges -->
                    ${achievement.legendary ? `
                        <div style="
                            position: absolute;
                            top: -10px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: linear-gradient(90deg, #fbbf24, #f59e0b);
                            color: #1a1625;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                            box-shadow: 0 4px 12px rgba(251,191,36,0.5);
                            z-index: 10;
                        ">LEGENDARY</div>
                    ` : achievement.special ? `
                        <div style="
                            position: absolute;
                            top: -10px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: rgba(139,92,246,0.9);
                            color: #fbbf24;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                            z-index: 10;
                        ">SPECIAL</div>
                    ` : ''}

                    <!-- Lock Icon -->
                    <div style="
                        position: absolute;
                        top: 10px;
                        right: 10px;
                        opacity: 0.5;
                    "><i data-lucide="lock" style="width:24px;height:24px;color:#6b7280;"></i></div>
                    
                    ${isMysteryBox ? `
                        <!-- MYSTERY BOX MODE -->
                        <div style="text-align: center;">
                            <div style="
                                margin-bottom: 15px;
                                opacity: 0.6;
                                filter: blur(2px);
                                user-select: none;
                            "><i data-lucide="gift" style="width:80px;height:80px;color:#6b7280;"></i></div>
                            
                            <h4 style="
                                color: #6b7280;
                                font-size: 18px;
                                font-weight: 700;
                                margin-bottom: 10px;
                            ">
                                ✨🔮 Mystery Achievement 🔮✨
                            </h4>
                            
                            <p style="
                                color: #4b5563;
                                font-size: 13px;
                                margin-bottom: 15px;
                                font-style: italic;
                            ">
                                This rare achievement is waiting to be discovered...
                            </p>
                            
                            <div style="
                                background: rgba(139,92,246,0.1);
                                border: 1px solid rgba(139,92,246,0.2);
                                border-radius: 12px;
                                padding: 12px;
                                margin-bottom: 12px;
                            ">
                                <div style="color: #6b7280; font-size: 11px; margin-bottom: 5px;">
                                    HINT
                                </div>
                                <div style="color: #9ca3af; font-size: 12px; font-weight: 600;">
                                    ${getAchievementHint(achievementId, achievement)}
                                </div>
                            </div>
                            
                            <div style="
                                text-align: center;
                                color: #8b5cf6;
                                font-size: 11px;
                                margin-top: 10px;
                                font-weight: 500;
                            ">
                                Clique para ver mais 👉
                            </div>
                        </div>
                    ` : `
                        <!-- VISIBLE BUT LOCKED MODE -->
                        <div style="text-align: center;">
                            <div style="
                                margin-bottom: 15px;
                                opacity: 0.3;
                                filter: grayscale(100%);
                            ">
                                ${getAchievementIcon(achievementId, 64)}
                            </div>
                            
                            <h4 style="
                                color: #6b7280;
                                font-size: 18px;
                                font-weight: 700;
                                margin-bottom: 10px;
                            ">
                                ${achievement.name}
                            </h4>
                            </h4>
                            
                            <p style="
                                color: #4b5563;
                                font-size: 13px;
                                margin-bottom: 15px;
                                line-height: 1.5;
                            ">
                                ${achievement.description}
                            </p>
                            
                            <div style="
                                text-align: center;
                                background: rgba(107,114,128,0.1);
                                color: #6b7280;
                                padding: 10px 16px;
                                border-radius: 20px;
                                font-size: 13px;
                                font-weight: 600;
                                border: 1px solid rgba(107,114,128,0.2);
                            ">
                                🔒 Locked
                            </div>
                            
                            ${progress ? `
                                <div style="
                                    text-align: center;
                                    color: #8b5cf6;
                                    font-size: 12px;
                                    margin-top: 10px;
                                    font-weight: 600;
                                    background: rgba(139,92,246,0.1);
                                    padding: 8px 12px;
                                    border-radius: 12px;
                                    border: 1px solid rgba(139,92,246,0.2);
                                ">
                                    📊 ${progress.text}
                                </div>
                            ` : ''}
                            
                            <div style="
                                text-align: center;
                                color: #8b5cf6;
                                font-size: 11px;
                                margin-top: 10px;
                                font-weight: 500;
                            ">
                                Click for details 👉
                            </div>
                        </div>
                    `}
                </div>
            `;
        }

        // ============================================
        // ACHIEVEMENT HINTS FOR MYSTERY BOXES
        // ============================================

        function getAchievementHint(achievementId, achievement) {
            const hints = {
                firstSession: "Comece sua jornada...",
                weekWarrior: "Practice makes perfect, especially over 7 days",
                monthMaster: "Consistency is key for 30 days",
                centurion: "A legendary milestone awaits",
                streakStarter: "Don't skip a day",
                weekStreak: "Build a weekly habit",
                dedication: "Two weeks without stopping",
                committedPractitioner: "A full month of devotion",
                loyalSeeker: "True dedication spans 60 days",
                enlightened: "The ultimate streak achievement",
                explorer: "Try different sounds",
                categoryConqueror: "Experience all types of frequencies",
                frequencyMaster: "Use many different frequencies",
                genesisScholar: "Focus on the sacred 37Hz",
                solfeggioAdept: "Master the healing frequencies",
                angelWhisperer: "Connect with angel numbers",
                chakraBalancer: "Align all energy centers",
                quickSession: "Even 5 minutes counts",
                deepMeditation: "Go deeper, stay longer",
                marathonListener: "Test your endurance",
                earlyBird: "Rise with the sun",
                nightOwl: "Practice under the stars",
                midnightMystic: "The witching hour holds power",
                waterCharger: "Bless your water with intention",
                crystalHealer: "Combine with crystal energy",
                intentionSetter: "Comece com propósito",
                reflectiveSoul: "Document your experiences",
                shareTheLight: "Spread the word",
                helpOthers: "Guide others to frequencies"
            };
            
            return hints[achievementId] || "Complete specific actions to unlock";
        }

        // ============================================
        // LOCKED ACHIEVEMENT MODAL (Detailed View)
        // ============================================

        // Make globally accessible
        window.showLockedAchievementModal = function(achievementId) {
            const achievement = ACHIEVEMENTS[achievementId];
            if (!achievement) return;
            
            const progress = getAchievementProgress(achievementId, achievement);
            const isMystery = achievement.rarity === 'legendary' || achievement.rarity === 'rare';
            
            const modal = document.createElement('div');
            modal.className = 'achievement-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.95);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 2147483647;
                padding: 20px;
                animation: fadeIn 0.3s ease;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #1a1625, #2d1b69);
                    border-radius: 24px;
                    padding: 30px 20px;
                    max-width: 450px;
                    max-height: 90vh;
                    width: 100%;
                    position: relative;
                    animation: slideUp 0.4s ease;
                    overflow-y: auto;
                    margin: auto;
                ">
                    
                    <!-- Lock icon (large) -->
                    <div style="
                        text-align: center;
                        font-size: 100px;
                        margin-bottom: 20px;
                        ${isMystery ? 'filter: blur(3px); opacity: 0.5;' : 'opacity: 0.3; filter: grayscale(100%);'}
                    ">
                        ${isMystery ? '🔒' : achievement.name.split(' ')[0]}
                    </div>
                    
                    <!-- Title -->
                    <h2 style="
                        color: ${progress && progress.percentage >= 75 ? '#fbbf24' : '#a78bfa'};
                        font-size: 28px;
                        font-weight: 700;
                        text-align: center;
                        margin-bottom: 15px;
                    ">
                        ${isMystery ? '✨ Mystery Achievement ✨' : achievement.name}
                    </h2>
                    
                    <!-- Description -->
                    <p style="
                        color: #d1d5db;
                        font-size: 16px;
                        text-align: center;
                        margin-bottom: 25px;
                        line-height: 1.6;
                    ">
                        ${isMystery ? `<em>${getAchievementHint(achievementId, achievement)}</em>` : achievement.description}
                    </p>
                    
                    ${progress && progress.percentage > 0 ? `
                        <!-- Progress Section -->
                        <div style="
                            background: rgba(139,92,246,0.1);
                            border-radius: 16px;
                            padding: 20px;
                            margin-bottom: 20px;
                        ">
                            <div style="
                                display: flex;
                                justify-content: space-between;
                                align-items: center;
                                margin-bottom: 12px;
                            ">
                                <span style="color: #a78bfa; font-size: 14px; font-weight: 600;">
                                    Your Progress
                                </span>
                                <span style="color: #fff; font-size: 20px; font-weight: 700;">
                                    ${progress.percentage}%
                                </span>
                            </div>
                            <div style="
                                background: rgba(0,0,0,0.4);
                                border-radius: 20px;
                                height: 16px;
                                overflow: hidden;
                            ">
                                <div style="
                                    background: linear-gradient(90deg, 
                                        ${progress.percentage >= 75 ? '#fbbf24, #f59e0b' : '#8b5cf6, #a78bfa'}
                                    );
                                    height: 100%;
                                    width: ${progress.percentage}%;
                                    border-radius: 20px;
                                    transition: width 0.5s ease;
                                    ${progress.percentage >= 75 ? 'box-shadow: 0 0 20px rgba(251,191,36,0.5);' : ''}
                                "></div>
                            </div>
                            <div style="
                                text-align: center;
                                color: #9ca3af;
                                font-size: 13px;
                                margin-top: 10px;
                            ">
                                ${progress.text}
                            </div>
                            
                            ${progress.percentage >= 75 ? `
                                <div style="
                                    text-align: center;
                                    color: #fbbf24;
                                    font-size: 14px;
                                    font-weight: 600;
                                    margin-top: 15px;
                                    animation: pulse-text 1.5s ease-in-out infinite;
                                ">
                                    ✨ Quase lá! Continue assim!
                                </div>
                            ` : ''}
                        </div>
                    ` : `
                        <!-- Not Started Yet -->
                        <div style="
                            background: rgba(107,114,128,0.1);
                            border: 2px dashed rgba(107,114,128,0.3);
                            border-radius: 16px;
                            padding: 25px;
                            text-align: center;
                            margin-bottom: 20px;
                        ">
                            <div style="font-size: 48px; margin-bottom: 12px; opacity: 0.5;">🔒</div>
                            <div style="color: #9ca3af; font-size: 14px; line-height: 1.6;">
                                Comece a praticar para progredir nesta conquista
                            </div>
                        </div>
                    `}
                    
                    <!-- Rarity Display -->
                    <div style="
                        background: linear-gradient(135deg, rgba(251,191,36,0.2), rgba(249,115,22,0.2));
                        border: 2px solid ${progress && progress.percentage >= 75 ? '#fbbf24' : 'rgba(251,191,36,0.3)'};
                        border-radius: 16px;
                        padding: 20px;
                        text-align: center;
                        ${progress && progress.percentage >= 75 ? 'box-shadow: 0 0 30px rgba(251,191,36,0.3);' : ''}
                    ">
                        ${achievement.rarity === 'legendary' ? `
                            <div style="color: #fbbf24; font-size: 40px; margin-bottom: 8px;">🌟</div></div>
                            <div style="color: #fbbf24; font-size: 16px; font-weight: 700;">LEGENDARY ACHIEVEMENT</div>
                        ` : achievement.rarity === 'rare' ? `
                            <div style="color: #a78bfa; font-size: 40px; margin-bottom: 8px;">💎</div></div>
                            <div style="color: #a78bfa; font-size: 16px; font-weight: 700;">RARE ACHIEVEMENT</div>
                        ` : `
                            <div style="color: #22c55e; font-size: 40px; margin-bottom: 8px;">⭐</div></div>
                            <div style="color: #22c55e; font-size: 16px; font-weight: 700;">ACHIEVEMENT</div>
                        `}
                    </div>
                    
                    <!-- Call to Action -->
                    <button onclick="this.closest('.achievement-modal').remove()" style="
                        width: 100%;
                        background: linear-gradient(90deg, #8b5cf6, #6b46c1);
                        color: #fff;
                        border: none;
                        border-radius: 16px;
                        padding: 16px;
                        font-size: 16px;
                        font-weight: 700;
                        cursor: pointer;
                        margin-top: 20px;
                        box-shadow: 0 4px 20px rgba(139,92,246,0.4);
                    ">
                        ⬅️ Back
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Close on outside click
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        function getUnlockDate(achievementId) {
            const unlockTimestamp = userProgress.achievementUnlockDates?.[achievementId];
            if (!unlockTimestamp) return 'Recently';
            
            const date = new Date(unlockTimestamp);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) return 'Today';
            if (diffDays === 1) return 'Yesterday';
            if (diffDays < 7) return `${diffDays} days ago`;
            if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
            if (diffDays < 365) return `${Math.floor(diffDays / 30)} months ago`;
            return date.toLocaleDateString();
        }

        // ============================================
        // Missing achievement functions
        // ============================================

        function showAchievementModal(achievementId) {
            // Basic implementation - can be expanded later
            console.log('Achievement modal for:', achievementId);
        }

        function updateAchievementProgress() {
            // Basic implementation - can be expanded later
            console.log('Updating achievement progress');
        }

        // ============================================
        // UPDATE: Store unlock dates when achievements unlock
        // ============================================

        // checkAchievements function - basic implementation
        function checkAchievements() {
            // Basic achievement checking - can be expanded later
            console.log('Checking achievements...');
            return true;
        }

        // ============================================
        // UPDATED: Render Achievements Dashboard with Categories
        // ============================================

        function renderAchievementsDashboard() {
            // Ensure userProgress.achievements is a Set
            if (!(userProgress.achievements instanceof Set)) {
                userProgress.achievements = new Set(userProgress.achievements || []);
            }
            
            const categories = {
                awakening: {
                    name: '✨ Despertar',
                    achievements: ['trinityThreshold', 'sevenFoldBlessing', 'tenthGate']
                },
                sessions: {
                    name: '🌅 Marcos de Sessão',
                    achievements: ['quarterCentury', 'mirrorOfForm', 'fiftySteps', 'mirrorOfSpirit', 'centuryGuardian', 'sacredGateway108']
                },
                time: {
                    name: '⏰ Marcos de Tempo',
                    achievements: ['fiveMinuteMark', 'halfHourDevotee', 'hourMaster', 'fiveHourPilgrim', 'tenHourSage']
                },
                streaks: {
                    name: '🔥 Conquistas de Sequência',
                    achievements: ['threeDayInitiate', 'sevenDaySeeker', 'twoWeekChampion', 'twentyOneDayTransformer', 'monthMaster', 'fortyDayPilgrim', 'seventyThreeDayMystic', 'oneHundredEightDaySage']
                },
                exploration: {
                    name: '🎵 Exploração de Frequências',
                    achievements: ['explorer', 'categoryConqueror', 'frequencyMaster']
                },
                specialty: {
                    name: '⭐ Faixas Especiais',
                    achievements: ['genesisScholar', 'solfeggioAdept', 'angelWhisperer', 'chakraBalancer']
                },
                duration: {
                    name: '⏱️ Tipos de Sessão',
                    achievements: ['quickSession', 'deepMeditation', 'marathonListener']
                },
                timing: {
                    name: '✨ Timing Perfeito',
                    achievements: ['earlyBird', 'nightOwl', 'midnightMystic']
                },
                special: {
                    name: '🏆 Atividades Especiais',
                    achievements: ['waterCharger', 'crystalHealer', 'intentionSetter', 'reflectiveSoul']
                },
                social: {
                    name: '👥 Comunidade',
                    achievements: ['shareTheLight', 'helpOthers']
                }
            };
            
            let html = `
                <div style="padding: 20px;">
                    <div style="
                        text-align: center;
                        margin-bottom: 40px;
                    ">
                        <h2 style="
                            color: #fbbf24;
                            font-size: 32px;
                            margin-bottom: 15px;
                            text-shadow: 0 0 20px rgba(251,191,36,0.5);
                        ">
                            🏆 Conquistas
                        </h2>
                        <p style="
                            color: #a78bfa;
                            font-size: 16px;
                            margin-bottom: 20px;
                        ">
                            Desbloqueie recompensas conforme progride em sua jornada
                        </p>
                        
                        <!-- Overall Progress -->
                        <div style="
                            background: linear-gradient(135deg, rgba(139,92,246,0.2), rgba(167,139,250,0.2));
                            border-radius: 20px;
                            padding: 25px;
                            max-width: 500px;
                            margin: 0 auto;
                        ">
                            <div style="
                                display: flex;
                                justify-content: space-around;
                                align-items: center;
                                flex-wrap: wrap;
                                gap: 20px;
                            ">
                                <div style="text-align: center;">
                                    <div style="color: #22c55e; font-size: 36px; font-weight: 700;">
                                        ${userProgress.achievements.size}
                                    </div>
                                    <div style="color: #a78bfa; font-size: 13px;">
                                        Desbloqueadas
                                    </div>
                                </div>
                                
                                <div style="text-align: center;">
                                    <div style="color: #fbbf24; font-size: 36px; font-weight: 700;">
                                        ${Object.keys(ACHIEVEMENTS).length - userProgress.achievements.size}
                                    </div>
                                    <div style="color: #a78bfa; font-size: 13px;">
                                        Restantes
                                    </div>
                                </div>
                                
                                <div style="text-align: center;">
                                    <div style="color: #8b5cf6; font-size: 36px; font-weight: 700;">
                                        ${Math.round((userProgress.achievements.size / Object.keys(ACHIEVEMENTS).length) * 100)}%
                                    </div>
                                    <div style="color: #a78bfa; font-size: 13px;">
                                        Completo
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            `;
            
            // Render each category
            Object.entries(categories).forEach(([categoryKey, category]) => {
                const categoryAchievements = category.achievements.map(id => ({
                    id,
                    achievement: ACHIEVEMENTS[id]
                })).filter(a => a.achievement);
                
                const unlockedCount = categoryAchievements.filter(a => 
                    userProgress.achievements.has(a.id)
                ).length;
                
                html += `
                    <div style="margin-bottom: 40px;">
                        <div style="
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            margin-bottom: 20px;
                            padding-bottom: 15px;
                            border-bottom: 2px solid rgba(139,92,246,0.3);
                        ">
                            <h3 style="
                                color: #fff;
                                font-size: 22px;
                                margin: 0;
                            ">
                                ${category.name}
                            </h3>
                            <div style="
                                background: rgba(139,92,246,0.2);
                                color: #a78bfa;
                                padding: 6px 14px;
                                border-radius: 20px;
                                font-size: 13px;
                                font-weight: 600;
                            ">
                                ${unlockedCount}/${categoryAchievements.length}
                            </div>
                        </div>
                        
                        <div class="achievements-grid">
                            ${categoryAchievements.map(({ id, achievement }) => 
                                renderAchievementCard(achievement, id)
                            ).join('')}
                        </div>
                    </div>
                `;
            });
            
            html += `
                </div>
            `;
            
            return html;
        }

        // ============================================
        // QUICK STATS WIDGET (For Main Dashboard)
        // ============================================

        function renderAchievementQuickStats() {
            const totalAchievements = Object.keys(ACHIEVEMENTS).length;
            const unlockedCount = userProgress.achievements.size;
            const recentUnlocks = getRecentUnlocks(3);
            
            return `
                <div style="
                    background: linear-gradient(135deg, rgba(139,92,246,0.15), rgba(167,139,250,0.15));
                    border-radius: 16px;
                    padding: 20px;
                    margin: 20px 0;
                ">
                    <div style="
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        margin-bottom: 15px;
                    ">
                        <h3 style="color: #fbbf24; font-size: 20px; margin: 0;">
                            🏆 Conquistas
                        </h3>
                        <button onclick="showFullAchievements()" style="
                            background: rgba(139,92,246,0.2);
                            color: #a78bfa;
                            border: 2px solid rgba(139,92,246,0.3);
                            border-radius: 20px;
                            padding: 8px 16px;
                            font-size: 13px;
                            font-weight: 600;
                            cursor: pointer;
                        ">
                            Ver Todas ➡️
                        </button>
                    </div>
                    
                    <div style="
                        display: flex;
                        gap: 15px;
                        margin-bottom: 20px;
                    ">
                        <div style="
                            flex: 1;
                            background: rgba(34,197,94,0.1);
                            border-radius: 12px;
                            padding: 15px;
                            text-align: center;
                        ">
                            <div style="color: #22c55e; font-size: 28px; font-weight: 700;">
                                ${unlockedCount}
                            </div>
                            <div style="color: #a78bfa; font-size: 12px;">
                                Desbloqueadas
                            </div>
                        </div>
                        
                        <div style="
                            flex: 1;
                            background: rgba(139,92,246,0.1);
                            border-radius: 12px;
                            padding: 15px;
                            text-align: center;
                        ">
                            <div style="color: #fbbf24; font-size: 28px; font-weight: 700;">
                                ${totalAchievements - unlockedCount}
                            </div>
                            <div style="color: #a78bfa; font-size: 12px;">
                                A Descobrir
                            </div>
                        </div>
                    </div>
                    
                    ${recentUnlocks.length > 0 ? `
                        <div style="
                            background: rgba(0,0,0,0.2);
                            border-radius: 12px;
                            padding: 15px;
                        ">
                            <div style="color: #a78bfa; font-size: 12px; margin-bottom: 12px; font-weight: 600;">
                                DESBLOQUEADAS RECENTEMENTE
                            </div>
                            ${recentUnlocks.map(({ id, achievement }) => `
                                <div style="
                                    display: flex;
                                    align-items: center;
                                    gap: 12px;
                                    margin-bottom: 10px;
                                    padding-bottom: 10px;
                                    border-bottom: 1px solid rgba(139,92,246,0.2);
                                ">
                                    <div style="font-size: 32px;">
                                        ${achievement.name.split(' ')[0]}
                                    </div>
                                    <div style="flex: 1;">
                                        <div style="color: #22c55e; font-size: 14px; font-weight: 600;">
                                            ${achievement.name}
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    ` : `
                        <div style="
                            text-align: center;
                            color: #6b7280;
                            font-size: 13px;
                            padding: 20px;
                            font-style: italic;
                        ">
                            Complete sua primeira sessão para começar a desbloquear conquistas! ✨
                        </div>
                    `}
                    
                    <!-- Next achievement to chase -->
                    ${getNextAchievementToChase()}
                </div>
            `;
        }
        
        function getNextAchievementToChase() {
            // Find achievements that are close to being unlocked
            const lockedAchievements = Object.entries(ACHIEVEMENTS)
                .filter(([id, ach]) => !userProgress.achievements.has(id))
                .map(([id, ach]) => {
                    const progress = getAchievementProgress(id);
                    return { id, achievement: ach, progress };
                })
                .filter(a => a.progress && a.progress.percentage > 0 && a.progress.percentage < 100)
                .sort((a, b) => b.progress.percentage - a.progress.percentage);
            
            if (lockedAchievements.length === 0) {
                // Show first available achievement if no progress yet
                const firstLocked = Object.entries(ACHIEVEMENTS)
                    .find(([id, ach]) => !userProgress.achievements.has(id));
                
                if (firstLocked) {
                    const [id, achievement] = firstLocked;
                    return `
                        <div style="
                            background: linear-gradient(135deg, rgba(251,191,36,0.1), rgba(245,158,11,0.1));
                            border: 2px solid rgba(251,191,36,0.3);
                            border-radius: 12px;
                            padding: 15px;
                            margin-top: 15px;
                        ">
                            <div style="color: #fbbf24; font-size: 12px; margin-bottom: 8px; font-weight: 600;">
                                🎯 PRÓXIMA CONQUISTA
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 28px;">${achievement.name.split(' ')[0]}</div>
                                <div>
                                    <div style="color: #fbbf24; font-size: 14px; font-weight: 600;">
                                        ${achievement.name}
                                    </div>
                                    <div style="color: #9ca3af; font-size: 12px;">
                                        ${achievement.description}
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }
                return '';
            }
            
            const nextUp = lockedAchievements[0];
            return `
                <div style="
                    background: linear-gradient(135deg, rgba(251,191,36,0.1), rgba(245,158,11,0.1));
                    border: 2px solid rgba(251,191,36,0.3);
                    border-radius: 12px;
                    padding: 15px;
                    margin-top: 15px;
                ">
                    <div style="color: #fbbf24; font-size: 12px; margin-bottom: 8px; font-weight: 600;">
                        🎯 QUASE LÁ!
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 10px;">
                        <div style="font-size: 28px;">${nextUp.achievement.name.split(' ')[0]}</div>
                        <div style="flex: 1;">
                            <div style="color: #fbbf24; font-size: 14px; font-weight: 600;">
                                ${nextUp.achievement.name}
                            </div>
                            <div style="color: #9ca3af; font-size: 12px;">
                                ${nextUp.progress.text}
                            </div>
                        </div>
                    </div>
                    <div style="
                        background: rgba(0,0,0,0.3);
                        border-radius: 10px;
                        height: 8px;
                        overflow: hidden;
                    ">
                        <div style="
                            background: linear-gradient(90deg, #fbbf24, #f59e0b);
                            height: 100%;
                            width: ${nextUp.progress.percentage}%;
                            border-radius: 10px;
                            transition: width 0.5s ease;
                        "></div>
                    </div>
                </div>
            `;
        }

        function getRecentUnlocks(count = 3) {
            if (!userProgress.achievementUnlockDates) return [];
            
            const unlocks = Object.entries(userProgress.achievementUnlockDates)
                .map(([id, timestamp]) => ({
                    id,
                    achievement: ACHIEVEMENTS[id],
                    timestamp
                }))
                .filter(u => u.achievement)
                .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))
                .slice(0, count);
            
            return unlocks;
        }

        function showFullAchievements() {
            try {
            // Ensure achievements is a Set
            if (!(userProgress.achievements instanceof Set)) {
                userProgress.achievements = new Set(userProgress.achievements || []);
            }
            
            // Remove any existing modal first
            const existingModal = document.getElementById('achievementsFullModal');
            if (existingModal) existingModal.remove();
            
            // Close companion panel properly (including its overlay)
            const overlay = document.getElementById('instructionsOverlay');
            if (overlay) {
                window.toggleInstructions();
            }
            
            // Navigate to achievements page or show modal
            const modal = document.createElement('div');
            modal.id = 'achievementsFullModal';
            modal.className = 'achievements-full-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: #1a0a2e;
                z-index: 2000000;
                overflow-y: auto;
                padding: 20px;
            `;
            
            // Close function
            function closeAchievementsModal() {
                const m = document.getElementById('achievementsFullModal');
                if (m) {
                    m.remove();
                }
                // Also remove companion overlay if it exists
                const overlay = document.getElementById('instructionsOverlay');
                if (overlay) {
                    overlay.remove();
                }
                // Ensure page is scrollable and visible
                document.body.style.overflow = '';
                window.scrollTo(0, 0);
            }
            
            // Store close function globally
            window.closeAchievementsModal = closeAchievementsModal;
            
            const t = translations.en;
            const dashboardContent = renderAchievementsDashboard();
            
            modal.innerHTML = `
                <div style="max-width: 1200px; margin: 0 auto; position: relative; z-index: 2000001; padding-bottom: 40px;">
                    <!-- Return to Tracks Button at TOP -->
                    <div style="text-align: center; margin-bottom: 20px; padding-top: 10px;">
                        <button onclick="window.closeAchievementsModal();" style="
                            background: linear-gradient(90deg, #8b5cf6, #6b46c1);
                            color: #fff;
                            border: none;
                            border-radius: 25px;
                            padding: 15px 35px;
                            font-size: 18px;
                            font-weight: 700;
                            cursor: pointer;
                            box-shadow: 0 4px 15px rgba(139,92,246,0.4);
                        ">${t.returnToTracks || '← Voltar para Faixas'}</button>
                    </div>
                    
                    ${dashboardContent}
                    
                    <!-- Return to Tracks Button at BOTTOM -->
                    <div style="text-align: center; margin-top: 30px; padding-bottom: 20px;">
                        <button onclick="window.closeAchievementsModal();" style="
                            background: linear-gradient(90deg, #8b5cf6, #6b46c1);
                            color: #fff;
                            border: none;
                            border-radius: 25px;
                            padding: 15px 35px;
                            font-size: 18px;
                            font-weight: 700;
                            cursor: pointer;
                            box-shadow: 0 4px 15px rgba(139,92,246,0.4);
                        ">${t.returnToTracks || '← Voltar para Faixas'}</button>
                    </div>
                </div>
            `;
            
            // Click outside content to close
            modal.addEventListener('click', function(e) {
                if (e.target === modal) closeAchievementsModal();
            });
            
            document.body.appendChild(modal);
            } catch (error) {
                console.error('Error showing achievements:', error);
                alert('Não foi possível carregar conquistas. Por favor, atualize a página e tente novamente.');
            }
        }

        function getAchievementProgress(id) {
            // Session-based
            if (id === 'trinityThreshold') {
                return { percentage: Math.min((userProgress.totalSessions / 3) * 100, 100), text: `${userProgress.totalSessions}/3 sessões` };
            }
            if (id === 'sevenFoldBlessing') {
                return { percentage: Math.min((userProgress.totalSessions / 7) * 100, 100), text: `${userProgress.totalSessions}/7 sessões` };
            }
            if (id === 'tenthGate') {
                return { percentage: Math.min((userProgress.totalSessions / 10) * 100, 100), text: `${userProgress.totalSessions}/10 sessões` };
            }
            if (id === 'quarterCentury') {
                return { percentage: Math.min((userProgress.totalSessions / 25) * 100, 100), text: `${userProgress.totalSessions}/25 sessões` };
            }
            if (id === 'mirrorOfForm') {
                return { percentage: Math.min((userProgress.totalSessions / 37) * 100, 100), text: `${userProgress.totalSessions}/37 sessões` };
            }
            if (id === 'fiftySteps') {
                return { percentage: Math.min((userProgress.totalSessions / 50) * 100, 100), text: `${userProgress.totalSessions}/50 sessões` };
            }
            if (id === 'mirrorOfSpirit') {
                return { percentage: Math.min((userProgress.totalSessions / 73) * 100, 100), text: `${userProgress.totalSessions}/73 sessões` };
            }
            if (id === 'centuryGuardian') {
                return { percentage: Math.min((userProgress.totalSessions / 100) * 100, 100), text: `${userProgress.totalSessions}/100 sessões` };
            }
            if (id === 'sacredGateway108') {
                return { percentage: Math.min((userProgress.totalSessions / 108) * 100, 100), text: `${userProgress.totalSessions}/108 sessões` };
            }

            // Time-based
            if (id === 'fiveMinuteMark') {
                const mins = Math.floor(userProgress.totalSeconds / 60);
                return { percentage: Math.min((mins / 5) * 100, 100), text: `${mins}/5 minutos` };
            }
            if (id === 'halfHourDevotee') {
                const mins = Math.floor(userProgress.totalSeconds / 60);
                return { percentage: Math.min((mins / 30) * 100, 100), text: `${mins}/30 minutos` };
            }
            if (id === 'hourMaster') {
                const hours = Math.floor(userProgress.totalSeconds / 3600);
                return { percentage: Math.min(hours * 100, 100), text: `${hours}/1 hora` };
            }
            if (id === 'fiveHourPilgrim') {
                const hours = Math.floor(userProgress.totalSeconds / 3600);
                return { percentage: Math.min((hours / 5) * 100, 100), text: `${hours}/5 horas` };
            }
            if (id === 'tenHourSage') {
                const hours = Math.floor(userProgress.totalSeconds / 3600);
                return { percentage: Math.min((hours / 10) * 100, 100), text: `${hours}/10 horas` };
            }

            // Streak-based
            if (id === 'threeDayInitiate') {
                return { percentage: Math.min((userProgress.currentStreak / 3) * 100, 100), text: `${userProgress.currentStreak}/3 dias` };
            }
            if (id === 'sevenDaySeeker') {
                return { percentage: Math.min((userProgress.currentStreak / 7) * 100, 100), text: `${userProgress.currentStreak}/7 dias` };
            }
            if (id === 'twoWeekChampion') {
                return { percentage: Math.min((userProgress.currentStreak / 14) * 100, 100), text: `${userProgress.currentStreak}/14 dias` };
            }
            if (id === 'twentyOneDayTransformer') {
                return { percentage: Math.min((userProgress.currentStreak / 21) * 100, 100), text: `${userProgress.currentStreak}/21 dias` };
            }
            if (id === 'monthMaster') {
                return { percentage: Math.min((userProgress.currentStreak / 30) * 100, 100), text: `${userProgress.currentStreak}/30 dias` };
            }
            if (id === 'fortyDayPilgrim') {
                return { percentage: Math.min((userProgress.currentStreak / 40) * 100, 100), text: `${userProgress.currentStreak}/40 dias` };
            }
            if (id === 'seventyThreeDayMystic') {
                return { percentage: Math.min((userProgress.currentStreak / 73) * 100, 100), text: `${userProgress.currentStreak}/73 dias` };
            }
            if (id === 'oneHundredEightDaySage') {
                return { percentage: Math.min((userProgress.currentStreak / 108) * 100, 100), text: `${userProgress.currentStreak}/108 dias` };
            }

            // Special actions
            if (id === 'waterAlchemist') {
                return { percentage: Math.min((userProgress.waterChargingSessions / 3) * 100, 100), text: `${userProgress.waterChargingSessions}/3 cargas` };
            }
            if (id === 'intentionSetter') {
                return { percentage: Math.min((userProgress.intentionsSet / 10) * 100, 100), text: `${userProgress.intentionsSet}/10 intenções` };
            }
            if (id === 'genesisEvangelist') {
                return { percentage: Math.min((userProgress.appShares / 5) * 100, 100), text: `${userProgress.appShares}/5 compartilhamentos` };
            }
            if (id === 'trinityMaster') {
                const count = userProgress.trackPlayCounts['genesisCreation'] || 0;
                return { percentage: Math.min((count / 10) * 100, 100), text: `${count}/10 sessões` };
            }

            return null;
        }

        // ============================================
        // SISTEMA DE DESAFIOS DIÁRIOS
        // ============================================

        const DAILY_CHALLENGES = [
            {
                id: 'morningDevotion',
                name: '🌅 Devoção Matinal',
                description: 'Complete uma sessão antes das 9h',
                xpReward: 50,
                check: (session) => {
                    const hour = parseInt(session.time.split(':')[0]);
                    return hour < 9;
                }
            },
            {
                id: 'eveningReflection',
                name: '🌙 Reflexão Noturna',
                description: 'Complete uma sessão após as 20h',
                xpReward: 50,
                check: (session) => {
                    const hour = parseInt(session.time.split(':')[0]);
                    return hour >= 20;
                }
            },
            {
                id: 'waterCeremony',
                name: '💧 Water Ceremony',
                description: 'Carregue água hoje',
                xpReward: 60,
                check: (session) => session.waterCharging === true
            },
            {
                id: 'backToBasics',
                name: '🔱 Volta às Origens',
                description: 'Use a faixa Criação do Gênesis',
                xpReward: 50,
                check: (session) => session.trackId === 'genesisCreation'
            },
            {
                id: 'angelMessage',
                name: '👼 Mensagem Angelical',
                description: 'Experimente uma frequência de Número Angelical',
                xpReward: 50,
                check: (session) => session.category === 'angelNumbers'
            },
            {
                id: 'extendedPractice',
                name: '⏳ Prática Estendida',
                description: 'Sessão de 20+ minutos',
                xpReward: 75,
                check: (session) => session.duration >= 1200
            },
            {
                id: 'discovery',
                name: '🔭 Descoberta',
                description: 'Experimente uma frequência que não usou nos últimos 7+ dias',
                xpReward: 60,
                check: (session) => {
                    // Check if this track was used in last 7 days
                    const sevenDaysAgo = Date.now() - (7 * 24 * 60 * 60 * 1000);
                    const recentSessions = userProgress.sessionHistory.filter(s => s.timestamp > sevenDaysAgo);
                    return !recentSessions.some(s => s.trackId === session.trackId);
                }
            },
            {
                id: 'intentionalListening',
                name: '🙏 Escuta Intencional',
                description: 'Defina uma intenção antes da sua sessão',
                xpReward: 50,
                check: (session) => session.intentionSet === true
            }
        ];

        function getDailyChallenge() {
            // Get challenge based on day of year
            const dayOfYear = Math.floor((Date.now() - new Date(new Date().getFullYear(), 0, 0)) / 86400000);
            const challengeIndex = dayOfYear % DAILY_CHALLENGES.length;
            return DAILY_CHALLENGES[challengeIndex];
        }

        function checkDailyChallenge(session) {
            const today = new Date().toISOString().split('T')[0];

            // Check if challenge already completed today
            if (userProgress.dailyChallengesCompleted &&
                userProgress.dailyChallengesCompleted[today]) {
                return;
            }

            const challenge = getDailyChallenge();

            if (challenge.check(session)) {
                // Challenge completed!
                if (!userProgress.dailyChallengesCompleted) {
                    userProgress.dailyChallengesCompleted = {};
                }
                userProgress.dailyChallengesCompleted[today] = challenge.id;

                awardXP(challenge.xpReward);
                showDailyChallengeComplete(challenge);
                saveProgress();
            }
        }

        function showDailyChallengeComplete(challenge) {
            showNotification(`🌟 Desafio Diário Completo! ${challenge.name}`);
        }

        function renderDailyChallenge() {
            const challenge = getDailyChallenge();
            const today = new Date().toISOString().split('T')[0];
            const completed = userProgress.dailyChallengesCompleted &&
                             userProgress.dailyChallengesCompleted[today];

            return `
                <div style="
                    background: ${completed ? 'linear-gradient(135deg, rgba(34,197,94,0.2), rgba(22,163,74,0.2))' : 'linear-gradient(135deg, rgba(139,92,246,0.15), rgba(251,191,36,0.15))'};
                    border: 2px solid ${completed ? '#22c55e' : 'rgba(251,191,36,0.3)'};
                    border-radius: 16px;
                    padding: 20px;
                    position: relative;
                ">
                    ${completed ? `
                        <div style="
                            position: absolute;
                            top: -12px;
                            right: 20px;
                            background: #22c55e;
                            color: #fff;
                            padding: 6px 16px;
                            border-radius: 20px;
                            font-size: 12px;
                            font-weight: 700;
                        ">✅ COMPLETO</div>
                    ` : ''}

                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="font-size: 48px;">
                            ${challenge.name.split(' ')[0]}
                        </div>
                        <div style="flex: 1;">
                            <div style="color: #fbbf24; font-size: 14px; font-weight: 600; margin-bottom: 5px;">
                                DESAFIO DE HOJE
                            </div>
                            <h4 style="color: #fff; font-size: 18px; font-weight: 600; margin-bottom: 5px;">
                                ${challenge.name}
                            </h4>
                            <p style="color: #a78bfa; font-size: 13px; margin-bottom: 10px;">
                                ${challenge.description}
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }

        // ============================================
        // NOTIFICATION SYSTEM
        // ============================================

        function showNotification(message, duration = 3000) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #8b5cf6, #6b46c1);
                color: #fff;
                padding: 15px 25px;
                border-radius: 12px;
                box-shadow: 0 8px 20px rgba(139,92,246,0.4);
                z-index: 10002;
                animation: slideInRight 0.3s ease;
                max-width: 350px;
                font-size: 14px;
                font-weight: 600;
            `;
            notification.textContent = message;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.transition = 'opacity 0.5s';
                notification.style.opacity = '0';
                setTimeout(() => notification.remove(), 500);
            }, duration);
        }

        // ============================================
        // LOCAL STORAGE PERSISTENCE
        // ============================================

        function saveProgress() {
            try {
                // Convert Sets to Arrays for JSON serialization
                const saveData = {
                    ...userProgress,
                    frequenciesUsed: Array.from(userProgress.frequenciesUsed || []),
                    categoriesExplored: Array.from(userProgress.categoriesExplored || []),
                    achievements: Array.from(userProgress.achievements || []),
                    actions: Array.from(userProgress.actions || [])
                };

                localStorage.setItem('genesisProgress', JSON.stringify(saveData));
            } catch (error) {
                console.error('Failed to save progress:', error);
            }
        }

        function loadProgress() {
            try {
                const saved = localStorage.getItem('genesisProgress');
                if (saved) {
                    const data = JSON.parse(saved);

                    // Convert Arrays back to Sets first
                    const frequenciesUsed = new Set(data.frequenciesUsed || []);
                    const categoriesExplored = new Set(data.categoriesExplored || []);
                    const achievements = new Set(data.achievements || []);
                    const actions = new Set(data.actions || []);

                    // Copy other properties, explicitly setting Sets after to avoid overwriting
                    Object.assign(userProgress, data);
                    
                    // Restore Sets after Object.assign (which may have overwritten them with arrays)
                    userProgress.frequenciesUsed = frequenciesUsed;
                    userProgress.categoriesExplored = categoriesExplored;
                    userProgress.achievements = achievements;
                    userProgress.actions = actions;

                    return true;
                }
            } catch (error) {
                console.error('Failed to load progress:', error);
                // Ensure Sets are initialized even on error
                if (!(userProgress.achievements instanceof Set)) {
                    userProgress.achievements = new Set();
                }
                if (!(userProgress.frequenciesUsed instanceof Set)) {
                    userProgress.frequenciesUsed = new Set();
                }
                if (!(userProgress.categoriesExplored instanceof Set)) {
                    userProgress.categoriesExplored = new Set();
                }
                if (!(userProgress.actions instanceof Set)) {
                    userProgress.actions = new Set();
                }
            }
            return false;
        }

        // ============================================
        // UTILITY FUNCTIONS
        // ============================================

        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                const r = Math.random() * 16 | 0;
                const v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        function unlockTrack(trackId) {
            if (!userProgress.unlockedTracks) {
                userProgress.unlockedTracks = [];
            }
            if (!userProgress.unlockedTracks.includes(trackId)) {
                userProgress.unlockedTracks.push(trackId);
                saveProgress();
            }
        }

        // ============================================
        // CSS ANIMATIONS
        // ============================================

        const styles = `
        <style>
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideOutRight {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100px);
            }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        </style>
        `;

        // Inject styles
        document.head.insertAdjacentHTML('beforeend', styles);

        // ============================================
        // INITIALIZATION
        // ============================================

        // Load progress on app start
        loadProgress();

        // Check for achievements periodically
        setInterval(() => {
            checkAllAchievements();
        }, 30000); // Every 30 seconds

        // Export functions for use in your app
        window.GenesisAchievements = {
            recordSession: recordSession,
            checkAllAchievements: checkAllAchievements,
            renderProgressDashboard: renderProgressDashboard,
            showAllAchievements: showAllAchievements,
            renderDailyChallenge: renderDailyChallenge,
            saveProgress: saveProgress,
            loadProgress: loadProgress,
            userProgress: userProgress
        };

        console.log('🌟 Genesis Achievements System Loaded!');

        // Background audio toggle for premium users
        let backgroundAudioEnabled = false;
        let wakeLockSentinel = null;

        function toggleBackgroundAudio() {
            // Check if user is premium using new tier system
            const hasPremium = typeof hasPremiumAccess === 'function' ? hasPremiumAccess() : 
                               localStorage.getItem('gfgn_license_tier') === 'premium' || 
                               localStorage.getItem('gfgn_license_tier') === 'ultimate';
            if (!hasPremium) {
                showUpgradeModal();
                return;
            }

            backgroundAudioEnabled = !backgroundAudioEnabled;

            if (backgroundAudioEnabled) {
                // Enable background audio for premium users
                enableBackgroundAudio();
                showToast('🎧 Áudio em Segundo Plano Ativado! Frequências continuarão quando minimizado.', 'success');
            } else {
                // Disable background audio
                disableBackgroundAudio();
                showToast('Áudio em segundo plano desativado.', 'info');
            }
        }
        
        // Screen Awake Toggle Handler
        function toggleScreenAwake() {
            const toggle = document.getElementById('screenAwakeToggle');
            if (!toggle) return;
            
            // Check premium access
            const hasPremium = typeof hasPremiumAccess === 'function' ? hasPremiumAccess() : 
                               localStorage.getItem('gfgn_license_tier') === 'premium' || 
                               localStorage.getItem('gfgn_license_tier') === 'ultimate';
            
            if (!hasPremium) {
                toggle.checked = false;
                showUpgradeModal();
                return;
            }
            
            if (toggle.checked) {
                requestWakeLock();
            } else {
                releaseWakeLock();
            }
        }
        
        async function requestWakeLock() {
            if ('wakeLock' in navigator) {
                try {
                    wakeLockSentinel = await navigator.wakeLock.request('screen');
                    showToast('☀️ A tela permanecerá ativa enquanto reproduz', 'success');
                    
                    // Show export tip
                    const exportTip = document.getElementById('exportTip');
                    if (exportTip) exportTip.style.display = 'block';
                    
                    // Re-request wake lock if visibility changes
                    wakeLockSentinel.addEventListener('release', () => {
                        console.log('Wake Lock released');
                        const toggle = document.getElementById('screenAwakeToggle');
                        if (toggle) toggle.checked = false;
                    });
                } catch (err) {
                    console.log('Wake Lock error:', err);
                    showToast('ℹ️ Manter tela ativa não suportado neste dispositivo. Tente exportar para ouvir no bolso!', 'info');
                    const toggle = document.getElementById('screenAwakeToggle');
                    if (toggle) toggle.checked = false;
                    
                    // Show export tip as alternative
                    const exportTip = document.getElementById('exportTip');
                    if (exportTip) exportTip.style.display = 'block';
                }
            } else {
                showToast('ℹ️ Manter tela ativa não disponível. Exporte sua faixa para ouvir no bolso!', 'info');
                const toggle = document.getElementById('screenAwakeToggle');
                if (toggle) toggle.checked = false;
                
                // Show export tip as alternative
                const exportTip = document.getElementById('exportTip');
                if (exportTip) exportTip.style.display = 'block';
            }
        }
        
        function releaseWakeLock() {
            if (wakeLockSentinel) {
                wakeLockSentinel.release();
                wakeLockSentinel = null;
                showToast('Manter tela ativa desativado', 'info');
            }
            
            // Hide export tip
            const exportTip = document.getElementById('exportTip');
            if (exportTip) exportTip.style.display = 'none';
        }
        
        // Initialize screen awake toggle for premium users
        function initScreenAwakeToggle() {
            const container = document.getElementById('screenAwakeContainer');
            const toggle = document.getElementById('screenAwakeToggle');
            
            const hasPremium = typeof hasPremiumAccess === 'function' ? hasPremiumAccess() : 
                               localStorage.getItem('gfgn_license_tier') === 'premium' || 
                               localStorage.getItem('gfgn_license_tier') === 'ultimate';
            
            if (hasPremium && container && toggle) {
                container.classList.remove('premium-lock');
                container.classList.add('premium-unlocked');
                container.onclick = null;
                toggle.disabled = false;
                toggle.addEventListener('change', toggleScreenAwake);
                
                // Show export tip for premium users
                const exportTip = document.getElementById('exportTip');
                if (exportTip) exportTip.style.display = 'block';
            }
        }

        function enableBackgroundAudio() {
            // Request wake lock if available (prevents screen from sleeping)
            requestWakeLock();

            // Handle visibility changes to keep audio playing
            document.addEventListener('visibilitychange', handleVisibilityChange);
            
            // Also handle page hide for Safari iOS
            window.addEventListener('pagehide', handlePageHide);

            // Resume audio context if suspended
            if (window.generator && window.generator.audioContext) {
                if (window.generator.audioContext.state === 'suspended') {
                    window.generator.audioContext.resume();
                }
            }
        }

        function disableBackgroundAudio() {
            // Release wake lock
            releaseWakeLock();

            // Remove visibility change listener
            document.removeEventListener('visibilitychange', handleVisibilityChange);
            window.removeEventListener('pagehide', handlePageHide);
        }
        
        // Handle page hide (Safari iOS specific)
        function handlePageHide(event) {
            // Gracefully fade out audio to prevent pops/clicks
            if (window.generator && window.generator.isPlaying && window.generator.audioContext) {
                try {
                    const ctx = window.generator.audioContext;
                    const currentTime = ctx.currentTime;
                    
                    // Quick fade out over 50ms to prevent audio glitches
                    window.generator.gainNodes.forEach(gainNode => {
                        if (gainNode && gainNode.gain) {
                            gainNode.gain.cancelScheduledValues(currentTime);
                            gainNode.gain.setValueAtTime(gainNode.gain.value, currentTime);
                            gainNode.gain.linearRampToValueAtTime(0, currentTime + 0.05);
                        }
                    });
                } catch (e) {
                    console.log('Error fading audio on page hide:', e);
                }
            }
        }

        function handleVisibilityChange() {
            // Check premium access for background audio
            const hasPremium = typeof hasPremiumAccess === 'function' ? hasPremiumAccess() : 
                               localStorage.getItem('gfgn_license_tier') === 'premium' || 
                               localStorage.getItem('gfgn_license_tier') === 'ultimate';
            
            if (document.hidden) {
                // App is minimized/backgrounded
                console.log('App minimized - Premium:', hasPremium);

                if (!hasPremium) {
                    // Non-premium: gracefully fade out and stop
                    if (window.generator && window.generator.isPlaying) {
                        try {
                            const ctx = window.generator.audioContext;
                            if (ctx) {
                                const currentTime = ctx.currentTime;
                                // Quick fade out to prevent pop
                                window.generator.gainNodes.forEach(gainNode => {
                                    if (gainNode && gainNode.gain) {
                                        gainNode.gain.cancelScheduledValues(currentTime);
                                        gainNode.gain.setValueAtTime(gainNode.gain.value, currentTime);
                                        gainNode.gain.linearRampToValueAtTime(0, currentTime + 0.05);
                                    }
                                });
                            }
                        } catch (e) {
                            console.log('Error fading out audio:', e);
                        }
                    }
                } else {
                    // Premium: try to keep audio active
                    if (window.generator && window.generator.audioContext) {
                        setTimeout(() => {
                            if (window.generator.audioContext.state === 'suspended') {
                                window.generator.audioContext.resume().catch(err => {
                                    console.log('Failed to resume audio context:', err);
                                });
                            }
                        }, 100);
                    }
                }
            } else {
                // App is focused again - resume audio smoothly
                console.log('App focused - resuming audio context');
                if (window.generator && window.generator.audioContext) {
                    if (window.generator.audioContext.state === 'suspended') {
                        window.generator.audioContext.resume().catch(err => {
                            console.log('Failed to resume audio context on focus:', err);
                        });
                    }
                }
            }
        }

        // Initialize progress on load
        loadProgress();

        // Daily wisdom quotes for companion - now uses translations
        function getDailyWisdomQuotes() {
            const t = translations.en;
            return [
                { text: t.wisdom1 || "The frequencies that created the universe are now working through you.", author: t.wisdomAuthor1 || "Genesis Companion" },
                { text: t.wisdom2 || "Every vibration you absorb rewrites your cellular memory.", author: t.wisdomAuthor2 || "Genesis Companion" },
                { text: t.wisdom3 || "37 � 73 = 2701 � the mathematics of divine creation itself.", author: t.wisdomAuthor3 || "Ancient Wisdom" },
                { text: t.wisdom4 || "No princípio era o Verbo, and the Word was a frequency.", author: t.wisdomAuthor4 || "Genesis 1:1" },
                { text: t.wisdom5 || "Your body is 70% water � a perfect receiver for sacred sound.", author: t.wisdomAuthor5 || "Genesis Companion" },
                { text: t.wisdom6 || "Consistency is the key to transformation. One session at a time.", author: t.wisdomAuthor6 || "Genesis Companion" },
                { text: t.wisdom7 || "The same patterns in creation exist within you.", author: t.wisdomAuthor7 || "Sacred Geometry" },
                { text: t.wisdom8 || "Sound creates form. Frequency creates reality.", author: t.wisdomAuthor8 || "Cymatics" },
                { text: t.wisdom9 || "3,773 days taught me that divine timing is mathematical.", author: t.wisdomAuthor9 || "The Discovery" },
                { text: t.wisdom10 || "Let the Trinity frequencies restore your original blueprint.", author: t.wisdomAuthor10 || "Genesis Companion" },
                { text: t.wisdom11 || "You are not just listening � you are remembering who you are.", author: t.wisdomAuthor11 || "Genesis Companion" },
                { text: t.wisdom12 || "The 36 Hz beat frequency bridges earth and heaven.", author: t.wisdomAuthor12 || "Trinity Foundation" },
                { text: t.wisdom13 || "Every cell in your body responds to sacred mathematics.", author: t.wisdomAuthor13 || "Genesis Companion" },
                { text: t.wisdom14 || "What if the frequencies of Genesis 1:1 could heal you?", author: t.wisdomAuthor14 || "The Journey" }
            ];
        }

        // Get today's wisdom quote
        function getDailyWisdom() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const quotes = getDailyWisdomQuotes();
            return quotes[dayOfYear % quotes.length];
        }

        // Get time-based greeting
        function getTimeGreeting() {
            const hour = new Date().getHours();
            const t = translations.en;
            if (hour < 12) return { greeting: t.greetingMorning || "Good morning", emoji: "☀️" };
            if (hour < 17) return { greeting: t.greetingAfternoon || "Good afternoon", emoji: "🌤️" };
            if (hour < 21) return { greeting: t.greetingEvening || "Good evening", emoji: "🌅" };
            return { greeting: t.greetingEvening || "Good night", emoji: "🌙" };
        }

        // Render personalized companion header
        function renderCompanionHeader() {
            const greetingContainer = document.getElementById('companionGreeting');
            const wisdomContainer = document.getElementById('companionDailyWisdom');
            const statsContainer = document.getElementById('companionQuickStats');
            const actionsContainer = document.getElementById('companionQuickActions');

            if (!greetingContainer) return;

            const t = translations.en;

            // Time-based greeting with stats
            const timeInfo = getTimeGreeting();
            const totalSessions = userProgress.totalSessions || 0;
            const totalMinutes = Math.floor((userProgress.totalSeconds || 0) / 60);
            const streak = userProgress.currentStreak || 0;

            // Get dynamic title based on achievements
            const userTitle = getLevelTitle();
            
            greetingContainer.innerHTML = `
                ${timeInfo.emoji} ${timeInfo.greeting}, ${userTitle}
                <span style="font-size: 14px; color: #c4b5fd; font-weight: 400; display: block; margin-top: 4px;">
                    ${streak > 0 ? `🔥 ${streak} ${t.dayStreak || 'sequência de dias'}` : (t.beginJourney || 'Comece sua jornada sagrada hoje')}
                </span>
            `;

            // Daily wisdom
            const wisdom = getDailyWisdom();
            wisdomContainer.innerHTML = `"${wisdom.text}" <span style="color: #fbbf24; font-size: 12px;">� ${wisdom.author}</span>`;

            // Quick stats
            statsContainer.innerHTML = `
                <div style="text-align: center; padding: 10px 15px; background: rgba(139,92,246,0.15); border-radius: 10px; min-width: 80px;">
                    <div style="font-size: 22px; font-weight: 700; color: #fbbf24;">${totalSessions}</div>
                    <div style="font-size: 11px; color: #c4b5fd;">${t.statSessions || 'Sessões'}</div>
                </div>
                <div style="text-align: center; padding: 10px 15px; background: rgba(139,92,246,0.15); border-radius: 10px; min-width: 80px;">
                    <div style="font-size: 22px; font-weight: 700; color: #fbbf24;">${totalMinutes}</div>
                    <div style="font-size: 11px; color: #c4b5fd;">${t.statMinutes || 'Minutos'}</div>
                </div>
                <div style="text-align: center; padding: 10px 15px; background: rgba(139,92,246,0.15); border-radius: 10px; min-width: 80px;">
                    <div style="font-size: 22px; font-weight: 700; color: #fbbf24;">${userProgress.frequenciesUsed ? userProgress.frequenciesUsed.size || 0 : 0}</div>
                    <div style="font-size: 11px; color: #c4b5fd;">${t.statFrequencies || 'Frequências'}</div>
                </div>
            `;

            // Quick action buttons (removed Start Session - user can use main PLAY button)
            actionsContainer.innerHTML = `
                <button onclick="showDailyChallengeModal();" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 20px; padding: 10px 18px; font-size: 14px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 6px;">
                    <span>🎯</span> ${t.btnDailyChallenge || 'Desafio Diário'}
                </button>
                <button onclick="if(typeof showFullAchievements === 'function') showFullAchievements();" style="background: linear-gradient(90deg, #8b5cf6, #6b46c1); color: #fff; border: none; border-radius: 20px; padding: 10px 18px; font-size: 14px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 6px;">
                    <span>🏆</span> ${t.btnAchievements || 'Conquistas'}
                </button>
                </button>
            `;
        }

        // Start quick session from companion
        function startQuickSession() {
            // Close the companion panel first
            const panel = document.getElementById('instructionsPanel');
            if (panel) panel.style.display = 'none';
            
            // Find Genesis Creation in trinityRecipes
            const biblicalCategory = trinityRecipes['Bíblico & Original'];
            const genesisRecipe = biblicalCategory ? biblicalCategory.find(r => r.name.includes('Criação do Gênesis')) : null;
            
            if (genesisRecipe && window.generator) {
                window.generator.selectRecipe(genesisRecipe);
                setTimeout(() => {
                    window.generator.play();
                }, 300);
            }
        }

        // Show daily challenge modal
        function showDailyChallengeModal() {
            try {
            // Remove any existing modal first
            const existingModal = document.getElementById('dailyChallengeModal');
            if (existingModal) existingModal.remove();
            
            // Close companion panel properly (including its overlay)
            const overlay = document.getElementById('instructionsOverlay');
            if (overlay) {
                window.toggleInstructions();
            }
            
            let challenge;
            try {
                challenge = typeof renderDailyChallenge === 'function' ? renderDailyChallenge() : '<p style="color:#fff;">Complete a session today to unlock your daily challenge!</p>';
            } catch (e) {
                challenge = '<p style="color:#fff;">Your daily challenge awaits! Complete a session to see today\'s sacred mission.</p>';
            }
            
            const modal = document.createElement('div');
            modal.id = 'dailyChallengeModal';
            modal.className = 'daily-challenge-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: #1a0a2e;
                z-index: 2000000;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
            `;
            
            // Close function
            function closeDailyChallengeModal() {
                const m = document.getElementById('dailyChallengeModal');
                if (m) {
                    m.remove();
                }
                // Also remove companion overlay if it exists
                const overlay = document.getElementById('instructionsOverlay');
                if (overlay) {
                    overlay.remove();
                }
                // Ensure page is scrollable and visible
                document.body.style.overflow = '';
                window.scrollTo(0, 0);
            }
            
            // Store close function globally
            window.closeDailyChallengeModal = closeDailyChallengeModal;

            const t = translations.en;
            modal.innerHTML = `
                <div style="background: linear-gradient(135deg, rgba(26,0,51,0.98), rgba(139,92,246,0.3)); border-radius: 18px; padding: 30px; max-width: 500px; width: 100%; position: relative; z-index: 2000001; color: #fff; text-align: center; border: 2px solid rgba(251,191,36,0.3);">
                    <h2 style="font-size: 24px; color: #fbbf24; font-weight: 800; margin-bottom: 20px;">🌟 ${t.todaysSacredChallenge || "Desafio Sagrado de Hoje"}</h2>
                    <div style="line-height: 1.6;">
                        ${challenge}
                    </div>
                    <button onclick="window.closeDailyChallengeModal();" style="margin-top: 25px; background: linear-gradient(90deg, #8b5cf6, #6b46c1); color: #fff; border: none; border-radius: 25px; padding: 15px 35px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(139,92,246,0.4);">
                        ${t.returnToTracks || '← Voltar para Faixas'}
                    </button>
                </div>
            `;
            
            // Click outside to close
            modal.addEventListener('click', function(e) {
                if (e.target === modal) closeDailyChallengeModal();
            });

            document.body.appendChild(modal);
            } catch (error) {
                console.error('Error showing daily challenge:', error);
                alert('Não foi possível carregar o desafio diário. Por favor, atualize a página e tente novamente.');
            }
        }

        // Render Instructions Categories (like recipes)
        function renderInstructionsCategories() {
            const container = document.getElementById('instructionsAccordion');
            if (!container) return;
            container.innerHTML = '';

            // Render personalized header first
            renderCompanionHeader();
            
            // Get current translations
            const t = translations.en;
            
            // Get translated category names
            const catQuickStart = t.catQuickStart || '🚀 Quick Start';
            const catTheScience = t.catTheScience || '🔬 The Science';
            const catTheStory = t.catTheStory || '📖 The Story';
            const catHelp = t.catHelp || '❓ Help';

            // Define instruction categories - organized for optimal user experience
            // Order: Quick actions first, then understanding, then deeper content
            const instructionCategories = {
                [catQuickStart]: [
                    { id: 'quickStart', icon: '🚀', title: instructionsSections.find(s => s.id === 'quickStart')?.title || 'Your First Session', content: instructionsSections.find(s => s.id === 'quickStart')?.content || instructionsSections.find(s => s.id === 'quickStart')?.getContent?.() || '' },
                    { id: 'usageTips', icon: '💡', title: instructionsSections.find(s => s.id === 'usageTips')?.title || 'Best Practices', content: instructionsSections.find(s => s.id === 'usageTips')?.content || instructionsSections.find(s => s.id === 'usageTips')?.getContent?.() || '' },
                    { id: 'categories', icon: '🎵', title: instructionsSections.find(s => s.id === 'categories')?.title || 'Frequency Categories', content: instructionsSections.find(s => s.id === 'categories')?.content || instructionsSections.find(s => s.id === 'categories')?.getContent?.() || '' }
                ],
                [catTheScience]: [
                    { id: 'trinity', icon: '🔱', title: instructionsSections.find(s => s.id === 'trinity')?.title || 'The Trinity Foundation', content: instructionsSections.find(s => s.id === 'trinity')?.content || instructionsSections.find(s => s.id === 'trinity')?.getContent?.() || '' },
                    { id: 'whyWorks', icon: '🔬', title: instructionsSections.find(s => s.id === 'whyWorks')?.title || 'Why 37 & 73 Hz Work', content: instructionsSections.find(s => s.id === 'whyWorks')?.content || instructionsSections.find(s => s.id === 'whyWorks')?.getContent?.() || '' },
                    { id: 'waterCharging', icon: '💧', title: instructionsSections.find(s => s.id === 'waterCharging')?.title || 'Water Charging', content: instructionsSections.find(s => s.id === 'waterCharging')?.content || instructionsSections.find(s => s.id === 'waterCharging')?.getContent?.() || '' },
                    { id: 'crystalCharging', icon: '💎', title: instructionsSections.find(s => s.id === 'crystalCharging')?.title || 'Crystal Charging', content: instructionsSections.find(s => s.id === 'crystalCharging')?.content || instructionsSections.find(s => s.id === 'crystalCharging')?.getContent?.() || '' },
                    { id: 'progress', icon: '📊', title: instructionsSections.find(s => s.id === 'progress')?.title || 'Your Journey', content: instructionsSections.find(s => s.id === 'progress')?.content || instructionsSections.find(s => s.id === 'progress')?.getContent?.() || '' }
                ],
                [catTheStory]: [
                    { id: 'welcome', icon: '✨', title: instructionsSections.find(s => s.id === 'welcome')?.title || 'Sobre Frequências Gênesis', content: instructionsSections.find(s => s.id === 'welcome')?.content || instructionsSections.find(s => s.id === 'welcome')?.getContent?.() || '' },
                    { id: 'myJourney', icon: '📖', title: instructionsSections.find(s => s.id === 'myJourney')?.title || 'The Discovery', content: instructionsSections.find(s => s.id === 'myJourney')?.content || instructionsSections.find(s => s.id === 'myJourney')?.getContent?.() || '' }
                ],
                [catHelp]: [
                    { id: 'faq', icon: '❓', title: instructionsSections.find(s => s.id === 'faq')?.title || 'FAQ', content: instructionsSections.find(s => s.id === 'faq')?.content || instructionsSections.find(s => s.id === 'faq')?.getContent?.() || '' },
                    { id: 'share', icon: '📤', title: instructionsSections.find(s => s.id === 'share')?.title || 'Share', content: instructionsSections.find(s => s.id === 'share')?.content || instructionsSections.find(s => s.id === 'share')?.getContent?.() || '' },
                    { id: 'credits', icon: '📜', title: instructionsSections.find(s => s.id === 'credits')?.title || 'Credits', content: instructionsSections.find(s => s.id === 'credits')?.content || instructionsSections.find(s => s.id === 'credits')?.getContent?.() || '' }
                ]
            };

            // Create category tabs
            Object.keys(instructionCategories).forEach((categoryName, categoryIndex) => {
                const categoryTab = document.createElement('div');
                categoryTab.className = 'category-tab';

                // All categories start collapsed for cleaner UX
                // User can expand what they want to see

                categoryTab.innerHTML = `
                    <div class="category-header" style="background: linear-gradient(135deg, rgba(139,92,246,0.2), rgba(251,191,36,0.1));">
                        <div class="category-title">
                            <span>${categoryName}</span>
                        </div>
                        <div class="category-arrow">▼</div>
                    </div>
                    <div class="category-content">
                        <div class="category-tracks"></div>
                    </div>
                `;

                const header = categoryTab.querySelector('.category-header');
                header.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    categoryTab.classList.toggle('expanded');
                });

                const tracksContainer = categoryTab.querySelector('.category-tracks');

                // Add sections to category
                instructionCategories[categoryName].forEach((section) => {
                    if (!section.content) return; // Skip if section doesn't exist

                    const sectionElement = document.createElement('div');
                    sectionElement.className = 'recipe-item';
                    sectionElement.style.cssText = 'cursor: pointer; transition: all 0.2s ease;';
                    sectionElement.innerHTML = `
                        <div class="recipe-info" style="flex: 1;">
                            <div class="recipe-name" style="font-size: 15px;">${section.icon} ${section.title}</div>
                        </div>
                        <div class="recipe-buttons">
                            <button class="track-btn info-btn" title="Read this section" style="font-size: 16px;">ℹ️</button>
                        </div>
                    `;

                    // Add hover effect
                    sectionElement.addEventListener('mouseenter', () => {
                        sectionElement.style.background = 'rgba(139,92,246,0.15)';
                    });
                    sectionElement.addEventListener('mouseleave', () => {
                        sectionElement.style.background = '';
                    });

                    const infoBtn = sectionElement.querySelector('.info-btn');

                    infoBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        showInstructionModal(section);
                    });

                    // Also allow clicking the info area to open
                    const infoArea = sectionElement.querySelector('.recipe-info');
                    infoArea.addEventListener('click', (e) => {
                        e.stopPropagation();
                        showInstructionModal(section);
                    });

                    tracksContainer.appendChild(sectionElement);
                });

                container.appendChild(categoryTab);
            });
        }

        // Show instruction modal
        function showInstructionModal(section) {
            // Create modal overlay
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                z-index: 3000000;
                display: flex;
                align-items: flex-start;
                justify-content: center;
                padding: 20px;
                overflow-y: auto;
            `;

            modal.innerHTML = `
                <div style="background: rgba(26,0,51,0.97); border-radius: 18px; padding: 30px; max-width: 800px; width: 100%; max-height: none; overflow-y: visible; position: relative; color: #fff; margin: 20px auto;">
                    <button class="btn-close" style="background: none; border: none; color: #c4b5fd; font-size: 28px; cursor: pointer; position: absolute; top: 15px; right: 20px;">✕</button>
                    <div style="text-align: center; margin-bottom: 20px;">
                        <h2 style="font-size: 24px; color: #fbbf24; font-weight: 800; margin: 0;">
                            ${section.icon} ${section.title}
                        </h2>
                    </div>
                    <div style="line-height: 1.6;">
                        ${section.content}
                    </div>
                </div>
            `;

            // Close modal functionality
            const closeBtn = modal.querySelector('.btn-close');
            closeBtn.addEventListener('click', () => {
                document.body.removeChild(modal);
                document.body.style.overflow = '';
            });

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                    document.body.style.overflow = '';
                }
            });

            document.body.style.overflow = 'hidden';
            document.body.appendChild(modal);
            
            // Scroll to top of modal
            modal.scrollTop = 0;
            window.scrollTo(0, 0);
        }

        // Search/filter instructions
        function filterInstructions(query) {
            const panels = document.querySelectorAll('.accordion-panel');
            panels.forEach(panel => {
                const title = panel.querySelector('.accordion-header').textContent.toLowerCase();
                const content = panel.querySelector('.accordion-content').textContent.toLowerCase();
                if (title.includes(query) || content.includes(query)) {
                    panel.style.display = '';
                } else {
                    panel.style.display = 'none';
                }
            });
        }

        // Add search input to instructions panel
        function addInstructionsSearch() {
        // Removed: instructions search bar logic
        }

        // Call rendering on panel open
        // toggleInstructions is defined at the top

        // Helper function to get recipe translation key prefix
        function getRecipeTranslationKey(recipeName) {
            const keyMap = {
                // Chakra Frequencies (Portuguese names)
                'Chakra Raiz': 'recipeRootChakra',
                'Chakra Sacral': 'recipeSacralChakra',
                'Chakra Plexo Solar': 'recipeSolarPlexus',
                'Chakra Cardíaco': 'recipeHeartChakra',
                'Chakra Laríngeo': 'recipeThroatChakra',
                'Chakra Terceiro Olho': 'recipeThirdEyeChakra',
                'Chakra Coronário': 'recipeCrownChakra',
                // Biblical & Original (Portuguese names)
                'Criação do Gênesis': 'recipeGenesisCreation',
                'Abundância Divina': 'recipeDivineAbundance',
                '12 Apóstolos': 'recipe12Apostles',
                '7 Igrejas': 'recipe7Churches',
                '40 Dias': 'recipe40Days',
                '3 Dias': 'recipe3Days',
                // Solfeggio & Healing (Portuguese names)
                'Cura Sagrada': 'recipeSacredHealing',
                'Frequência do Amor': 'recipeLoveFrequency',
                'Libertação (396)': 'recipeLiberation396',
                'Resolução (417)': 'recipeResolution417',
                'Transformação (639)': 'recipeTransformation639',
                'Despertar (852)': 'recipeAwakening852',
                'Eu Superior': 'recipeHigherSelf',
                'Intuição': 'recipeIntuition',
                // Angel Numbers (Portuguese names)
                'Números Angelicais': 'recipeAngel111',
                'Anjo 222': 'recipeAngel222',
                'Anjo 333': 'recipeAngel333',
                'Anjo 444': 'recipeAngel444',
                'Anjo 555': 'recipeAngel555',
                'Anjo 666': 'recipeAngel666',
                'Anjo 777': 'recipeAngel777',
                'Anjo 888': 'recipeAngel888',
                'Anjo 999': 'recipeAngel999',
                // Master Numbers (Portuguese names)
                'Mestre 11:11': 'recipeMaster11',
                'Mestre 22': 'recipeMaster22',
                'Mestre 33': 'recipeMaster33',
                'Mestre 44': 'recipeMaster44',
                'Mestre 55': 'recipeMaster55',
                // Cosmic & Planetary (Portuguese names)
                'Ressonância da Terra': 'recipeEarthResonance',
                'Amor de Vênus': 'recipeVenusLove',
                'Ação de Marte': 'recipeMarsAction',
                'Fibonacci 144': 'recipeFibonacci144',
                'Pi 314': 'recipePi314',
                'Proporção Áurea': 'recipeGoldenRatio',
                // Wellness & States (Portuguese names)
                'Alívio da Dor': 'recipePainRelief',
                'Alívio do Estresse': 'recipeStressRelief',
                'Sono Profundo': 'recipeSleepDeep',
                'Foco Claro': 'recipeFocusClear',
                'Aumento de Memória': 'recipeMemoryBoost',
                'Tom do Milagre': 'recipeMiracleTone'
            };
            return keyMap[recipeName] || null;
        }

        // Store scroll position for modal restore
        let savedScrollPosition = 0;
        
        function showInfoModal(recipe) {
            const modal = document.getElementById('infoModal');
            const title = document.getElementById('modalTitle');
            const freqs = document.getElementById('modalFreqs');
            const body = document.getElementById('modalBody');
            
            // Save current scroll position
            savedScrollPosition = window.scrollY || window.pageYOffset;
            
            title.textContent = recipe.name;
            freqs.textContent = `${recipe.frequencies.join(' Hz + ')} Hz`;
            
            // Prevent body scroll when modal opens
            document.body.style.overflow = 'hidden';
            
            if (recipe.fullInfo) {
                const t = translations.en;
                const keyPrefix = getRecipeTranslationKey(recipe.name);
                
                // Get translated content or fall back to English
                let whatItIs, benefits, howToUse;
                if (keyPrefix && t[keyPrefix + 'What']) {
                    whatItIs = t[keyPrefix + 'What'];
                    benefits = t[keyPrefix + 'Benefits'];
                    howToUse = t[keyPrefix + 'How'];
                } else {
                    // Fallback to original English content
                    whatItIs = recipe.fullInfo.whatItIs;
                    benefits = recipe.fullInfo.benefits;
                    howToUse = recipe.fullInfo.howToUse;
                }
                
                body.innerHTML = `
                    <h3>${t.infoWhatItIs || 'What It Is'}</h3>
                    <p>${whatItIs}</p>
                    
                    <h3>${t.infoBenefits || 'Benefits'}</h3>
                    <p>${benefits}</p>
                    
                    <h3>${t.infoHowToUse || 'How To Use'}</h3>
                    <p>${howToUse}</p>
                `;
            } else {
                body.innerHTML = `<p>${recipe.description}</p>`;
            }
            
            modal.style.display = 'flex';
            
            // Scroll modal content to top
            const modalContent = modal.querySelector('.info-modal-content');
            if (modalContent) {
                modalContent.scrollTop = 0;
            }
        }
        
        function closeInfoModal() {
            const modal = document.getElementById('infoModal');
            modal.style.display = 'none';
            // Restore body scroll
            document.body.style.overflow = '';
            // Restore scroll position
            window.scrollTo(0, savedScrollPosition);
        }
        
        // Close modal when clicking outside
        document.addEventListener('click', (e) => {
            const modal = document.getElementById('infoModal');
            if (e.target === modal) {
                closeInfoModal();
            }
        });

        // Close modal with ESC key for accessibility
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' || e.keyCode === 27) {
                const infoModal = document.getElementById('infoModal');
                const upgradeModal = document.getElementById('upgradeModal');
                const immersiveWelcome = document.getElementById('immersiveWelcome');
                
                if (infoModal && infoModal.classList.contains('active')) {
                    closeInfoModal();
                }
                if (upgradeModal && upgradeModal.style.display === 'flex') {
                    closeUpgradeModal();
                }
                if (immersiveWelcome && immersiveWelcome.classList.contains('active')) {
                    skipToApp();
                }
            }
        });

        class FrequencyGenerator {
            constructor() {
                this.audioContext = null;
                this.oscillators = [];
                this.gainNodes = [];
                this.isPlaying = false;
                this.selectedRecipe = null;
                this.countdownInterval = null;
                this.startTime = null;
                this.totalDuration = 0;
                
                this.initializeElements();
                this.loadRecipes();
                this.attachEventListeners();
            }

            initializeElements() {
                this.elements = {
                    freq1: document.getElementById('freq1'),
                    freq2: document.getElementById('freq2'),
                    freq3: document.getElementById('freq3'),
                    volume1: document.getElementById('volume1'),
                    volume2: document.getElementById('volume2'),
                    volume3: document.getElementById('volume3'),
                    volume1Value: document.getElementById('volume1Value'),
                    volume2Value: document.getElementById('volume2Value'),
                    volume3Value: document.getElementById('volume3Value'),
                    duration: document.getElementById('duration'),
                    playBtn: document.getElementById('playBtn'),
                    stopBtn: document.getElementById('stopBtn'),
                    exportBtn: document.getElementById('exportBtn'),
                    resetBtn: document.getElementById('resetBtn'),
                    status: document.getElementById('status'),
                    recipes: document.getElementById('recipes')
                };
            }

            loadRecipes() {
                this.elements.recipes.innerHTML = '';
                
                // Define category order (Portuguese names)
                const categoryOrder = [
                    "Bíblico & Original",
                    "Números Angelicais",
                    "Cósmico & Planetário",
                    "Números Mestres",
                    "Solfeggio & Cura",
                    "Bem-estar & Estados",
                    "Frequências de Chakra"
                ];
                
                // Create category tabs in specified order
                categoryOrder.forEach((category, categoryIndex) => {
                    if (!trinityRecipes[category]) {
                        console.warn('Category not found in trinityRecipes:', category);
                        return;
                    }
                    const categoryTab = document.createElement('div');
                    categoryTab.className = 'category-tab';
                    
                    const categoryIcons = {
                        "Bíblico & Original": "✡️",
                        "Solfeggio & Cura": "💜",
                        "Números Angelicais": "👼",
                        "Números Mestres": "🔢",
                        "Cósmico & Planetário": "🌌",
                        "Bem-estar & Estados": "🧘",
                        "Frequências de Chakra": "🌈"
                    };

                    const categoryKeys = {
                        "Bíblico & Original": "catBiblical",
                        "Solfeggio & Cura": "catSolfeggio",
                        "Números Angelicais": "catAngel",
                        "Números Mestres": "catMaster",
                        "Cósmico & Planetário": "catCosmic",
                        "Bem-estar & Estados": "catWellness",
                        "Frequências de Chakra": "catChakra"
                    };
                    
                    categoryTab.innerHTML = `
                        <div class="category-header">
                            <div class="category-title">
                                <span class="category-icon">${categoryIcons[category] || '✨'}</span>
                                <span data-translate="${categoryKeys[category]}">${category}</span>
                                <span class="category-icon">${categoryIcons[category] || '✨'}</span>
                            </div>
                            <div class="category-arrow">▼</div>
                        </div>
                        <div class="category-content">
                            <div class="category-tracks"></div>
                        </div>
                    `;
                    
                    const header = categoryTab.querySelector('.category-header');
                    header.addEventListener('click', () => {
                        categoryTab.classList.toggle('expanded');
                    });
                    
                    const tracksContainer = categoryTab.querySelector('.category-tracks');
                    
                    // Add recipes to category
                    trinityRecipes[category].forEach((recipe) => {
                        const recipeElement = document.createElement('div');
                        recipeElement.className = 'recipe-item';
                        recipeElement.innerHTML = `
                            <div class="recipe-info">
                                <div class="recipe-name" data-translate="track${recipe.name.replace(/[^a-zA-Z0-9]/g, '').replace(/\s+/g, '')}">${recipe.name}</div>
                                <div class="recipe-freqs">${recipe.frequencies.join(' Hz + ')} Hz</div>
                            </div>
                            <div class="recipe-buttons">
                                <button class="track-btn play-btn" title="Reproduzir esta faixa">▶️</button>
                                <button class="track-btn info-btn" title="Saiba mais">ℹ️</button>
                            </div>
                        `;
                        
                        const playBtn = recipeElement.querySelector('.play-btn');
                        const infoBtn = recipeElement.querySelector('.info-btn');
                        
                        if (!infoBtn) {
                            console.error('Info button not found for recipe:', recipe.name);
                        }
                        
                        playBtn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            this.selectRecipe(recipe);
                            // Auto-play after selection
                            setTimeout(() => this.play(), 300);
                        });
                        
                        if (infoBtn) {
                            infoBtn.addEventListener('click', (e) => {
                                e.stopPropagation();
                                e.preventDefault();
                                showInfoModal(recipe);
                            });
                        }
                        
                        // Also allow clicking the info area to load without playing
                        const infoArea = recipeElement.querySelector('.recipe-info');
                        infoArea.addEventListener('click', (e) => {
                            e.stopPropagation();
                            this.selectRecipe(recipe);
                        });
                        
                        tracksContainer.appendChild(recipeElement);
                    });
                    
                    this.elements.recipes.appendChild(categoryTab);
                });
            }

            selectRecipe(recipe) {
                // Remove previous selection
                document.querySelectorAll('.recipe-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                // Add selection to clicked recipe - find it by name
                document.querySelectorAll('.recipe-item').forEach(item => {
                    const nameElement = item.querySelector('.recipe-name');
                    if (nameElement && nameElement.textContent === recipe.name) {
                        item.classList.add('active');
                    }
                });
                
                // Load recipe frequencies
                const frequencies = [
                    recipe.frequencies[0] || 37,
                    recipe.frequencies[1] || 73,
                    recipe.frequencies[2] || 0
                ];
                
                this.elements.freq1.value = frequencies[0];
                this.elements.freq2.value = frequencies[1];
                this.elements.freq3.value = frequencies[2];
                
                // Apply therapeutic volume balancing (from Python generator)
                const activeFreqs = frequencies.filter(f => f > 0);
                const foundationFreq = Math.min(...activeFreqs);
                
                frequencies.forEach((freq, i) => {
                    if (freq > 0) {
                        let amplitude = 1.0;
                        
                        // Determine base amplitude based on frequency range
                        if (freq === foundationFreq || freq <= 100) {
                            amplitude = 1.0;
                        } else if (freq <= 400) {
                            amplitude = 0.2;
                        } else if (freq <= 1000) {
                            amplitude = 0.1;
                        } else {
                            amplitude = 0.05;
                        }
                        
                        // Scale non-foundation frequencies by number of active frequencies
                        // BUT only if they're NOT in the =100 Hz range (keep 37 & 73 at 100%)
                        if (freq !== foundationFreq && freq > 100) {
                            amplitude = amplitude / activeFreqs.length;
                        }
                        
                        // Convert to percentage (0-100) and set volume
                        const volumePercent = Math.round(amplitude * 100);
                        const volumeElement = [this.elements.volume1, this.elements.volume2, this.elements.volume3][i];
                        const volumeValueElement = [this.elements.volume1Value, this.elements.volume2Value, this.elements.volume3Value][i];
                        
                        volumeElement.value = volumePercent;
                        volumeValueElement.textContent = `${volumePercent}%`;
                    }
                });
                
                this.selectedRecipe = recipe;
                this.updateStatus(`? Selecionado: ${recipe.name} (Volumes auto-balanceados)`);
            }

            attachEventListeners() {
                this.elements.playBtn.addEventListener('click', () => this.play());
                this.elements.stopBtn.addEventListener('click', () => this.stop());
                this.elements.exportBtn.addEventListener('click', () => this.export());
                this.elements.resetBtn.addEventListener('click', () => this.reset());
                
                // Individual volume controls
                this.elements.volume1.addEventListener('input', (e) => {
                    this.elements.volume1Value.textContent = `${e.target.value}%`;
                    this.updateVolume();
                });
                
                this.elements.volume2.addEventListener('input', (e) => {
                    this.elements.volume2Value.textContent = `${e.target.value}%`;
                    this.updateVolume();
                });
                
                this.elements.volume3.addEventListener('input', (e) => {
                    this.elements.volume3Value.textContent = `${e.target.value}%`;
                    this.updateVolume();
                });
                
                // Duration format validation
                this.elements.duration.addEventListener('input', (e) => {
                    this.validateTimeFormat(e.target);
                    
                    // For free users on non-Genesis tracks, enforce 30 second limit
                    const hasPremium = typeof hasPremiumAccess === 'function' ? hasPremiumAccess() : 
                                       localStorage.getItem('gfgn_license_tier') === 'premium' || 
                                       localStorage.getItem('gfgn_license_tier') === 'ultimate';
                    
                    if (!hasPremium) {
                        const currentFreqs = [
                            parseFloat(this.elements.freq1.value),
                            parseFloat(this.elements.freq2.value),
                            parseFloat(this.elements.freq3.value)
                        ].filter(f => f > 0);
                        
                        const isGenesisCreation = currentFreqs.length === 2 && 
                                                  currentFreqs.includes(37) && 
                                                  currentFreqs.includes(73);
                        
                        if (!isGenesisCreation) {
                            // Force 30 seconds for non-Genesis tracks
                            e.target.value = '00:30';
                        }
                    }
                });

                // Duration quick buttons
                document.querySelectorAll('.duration-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const time = e.target.dataset.time;
                        const hasPremium = typeof hasPremiumAccess === 'function' ? hasPremiumAccess() : 
                                           localStorage.getItem('gfgn_license_tier') === 'premium' || 
                                           localStorage.getItem('gfgn_license_tier') === 'ultimate';
                        
                        // Check if current recipe is Genesis Creation (37+73 only)
                        const currentFreqs = [
                            parseFloat(this.elements.freq1.value),
                            parseFloat(this.elements.freq2.value),
                            parseFloat(this.elements.freq3.value)
                        ].filter(f => f > 0);
                        
                        const isGenesisCreation = currentFreqs.length === 2 && 
                                                  currentFreqs.includes(37) && 
                                                  currentFreqs.includes(73);
                        
                        // Genesis Creation gets full duration control even in free version
                        // Other tracks in free version are locked to 30 seconds
                        if (!hasPremium && !isGenesisCreation) {
                            showUpgradeModal();
                            return;
                        }
                        
                        this.elements.duration.value = time;
                        this.updateStatus(`⏱️ Duração definida para ${time}`);
                        
                        // Remove active class from all duration buttons
                        document.querySelectorAll('.duration-btn').forEach(b => b.classList.remove('active'));
                        // Add active class to clicked button
                        e.target.classList.add('active');
                    });
                });
                
                // Auto-select first recipe (Genesis Creation)
                setTimeout(() => {
                    const firstCategory = Object.keys(trinityRecipes)[0];
                    const firstRecipe = trinityRecipes[firstCategory][0];
                    this.selectRecipe(firstRecipe);
                }, 100);
                
                // Track user interactions for silent mode detection
                const trackInteraction = () => {
                    localStorage.setItem('lastUserInteraction', Date.now().toString());
                };
                
                // Track various user interactions
                ['click', 'touchstart', 'keydown', 'scroll'].forEach(event => {
                    document.addEventListener(event, trackInteraction, { passive: true });
                });
            }

            async play() {
                // Haptic feedback for mobile
                if ('vibrate' in navigator) {
                    navigator.vibrate(50);
                }

                if (this.isPlaying) {
                    this.stop();
                    return;
                }

                // Check premium status using license tier system
                const isPremium = typeof hasPremiumAccess === 'function' ? hasPremiumAccess() : 
                                  localStorage.getItem('gfgn_license_tier') === 'premium' || 
                                  localStorage.getItem('gfgn_license_tier') === 'ultimate';
                
                // Get current frequencies
                const frequencies = [
                    parseFloat(this.elements.freq1.value),
                    parseFloat(this.elements.freq2.value),
                    parseFloat(this.elements.freq3.value)
                ].filter(freq => freq > 0);
                
                // Check if this is the Genesis Creation track (37+73 only)
                const isGenesisCreation = frequencies.length === 2 && 
                                          frequencies.includes(37) && 
                                          frequencies.includes(73);
                
                if (!isPremium && !isGenesisCreation) {
                    // Non-Genesis tracks: Force 30-second duration, no alerts, just play
                    this.elements.duration.value = '00:30';
                }
                // Genesis Creation track: No restrictions, use whatever duration user set
                
                try {
                    // Initialize audio context with better iOS/Safari handling
                    if (!this.audioContext) {
                        this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                        
                        // Add state change listener to handle interruptions gracefully
                        this.audioContext.addEventListener('statechange', async () => {
                            console.log('AudioContext state changed to:', this.audioContext.state);
                            if (this.audioContext.state === 'interrupted' || this.audioContext.state === 'suspended') {
                                // Audio was interrupted (e.g., phone call, silent mode switch)
                                console.log('Audio interrupted - attempting to resume...');
                                // Auto-resume after interruption
                                try {
                                    await this.audioContext.resume();
                                    console.log('Audio resumed after interruption');
                                } catch (e) {
                                    console.log('Could not resume audio:', e);
                                }
                            }
                        });
                    }
                    
                    // Always resume audio context if not running (required for iOS/Safari)
                    if (this.audioContext.state !== 'running') {
                        console.log('AudioContext state:', this.audioContext.state, '- attempting to resume...');
                        await this.audioContext.resume();
                        console.log('AudioContext resumed. New state:', this.audioContext.state);
                        
                        // If still not running after resume attempt, show prominent modal
                        if (this.audioContext.state !== 'running') {
                            this.showSilentModeWarning();
                            return;
                        }
                    }
                    
                    // Test audio playback capability
                    const testResult = await this.testAudioPlayback();
                    if (!testResult.canPlay) {
                        this.showSilentModeWarning();
                        return;
                    }

                    // Enable background audio for premium users (use new tier system)
                    const hasPremium = typeof hasPremiumAccess === 'function' ? hasPremiumAccess() : 
                                       localStorage.getItem('gfgn_license_tier') === 'premium' || 
                                       localStorage.getItem('gfgn_license_tier') === 'ultimate';
                    if (hasPremium && !backgroundAudioEnabled) {
                        backgroundAudioEnabled = true;
                        enableBackgroundAudio();
                        console.log('Premium background audio automatically enabled');
                    }
                    
                    // Get frequencies
                    const frequencies = [
                        parseFloat(this.elements.freq1.value),
                        parseFloat(this.elements.freq2.value),
                        parseFloat(this.elements.freq3.value)
                    ].filter(freq => freq > 0);
                    
                    if (frequencies.length === 0) {
                        this.updateStatus('⚠️ Por favor, insira pelo menos uma frequência');
                        return;
                    }
                    
                    // Create oscillators and gain nodes with individual volumes
                    const volumes = [
                        parseFloat(this.elements.volume1.value) / 100,
                        parseFloat(this.elements.volume2.value) / 100,
                        parseFloat(this.elements.volume3.value) / 100
                    ];
                    
                    console.log('Volume levels:', volumes, 'from sliders:', [
                        this.elements.volume1.value,
                        this.elements.volume2.value,
                        this.elements.volume3.value
                    ]);
                    
                    const currentTime = this.audioContext.currentTime;
                    const fadeInDuration = 0.5;  // 0.5 second fade in
                    const fadeOutDuration = 0.1; // 0.1 second fade out
                    const totalDuration = this.parseDuration();
                    
                    frequencies.forEach((freq, index) => {
                        const oscillator = this.audioContext.createOscillator();
                        const gainNode = this.audioContext.createGain();
                        
                        oscillator.type = 'sine';
                        oscillator.frequency.setValueAtTime(freq, currentTime);
                        
                        console.log(`Creating oscillator ${index + 1}: ${freq} Hz, volume: ${volumes[index]}`);
                        
                        // Start at 0 volume and fade in
                        gainNode.gain.setValueAtTime(0, currentTime);
                        gainNode.gain.linearRampToValueAtTime(volumes[index], currentTime + fadeInDuration);
                        
                        // Schedule fade out before ending
                        const fadeOutStart = currentTime + totalDuration - fadeOutDuration;
                        gainNode.gain.setValueAtTime(volumes[index], fadeOutStart);
                        gainNode.gain.linearRampToValueAtTime(0, currentTime + totalDuration);
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(this.audioContext.destination);
                        
                        oscillator.start(currentTime);
                        oscillator.stop(currentTime + totalDuration);
                        
                        this.oscillators.push(oscillator);
                        this.gainNodes.push(gainNode);
                    });
                    
                    this.isPlaying = true;
                    this.elements.playBtn.textContent = '⏸ PAUSE';

                    // Add playing class to current recipe's play button
                    document.querySelectorAll('.track-btn.play-btn').forEach(btn => {
                        btn.classList.remove('playing');
                    });
                    if (this.selectedRecipe) {
                        const selectedRecipeElement = Array.from(document.querySelectorAll('.recipe-item')).find(item => {
                            const nameElement = item.querySelector('.recipe-name');
                            return nameElement && nameElement.textContent === this.selectedRecipe.name;
                        });
                        if (selectedRecipeElement) {
                            const playBtn = selectedRecipeElement.querySelector('.play-btn');
                            if (playBtn) {
                                playBtn.classList.add('playing');
                                playBtn.textContent = '⏸';
                                playBtn.title = 'Pause this track';
                            }
                        }
                    }
                    
                    // Show Now Playing bar
                    const nowPlayingBar = document.getElementById('nowPlayingBar');
                    const nowPlayingTrack = document.getElementById('nowPlayingTrack');
                    if (nowPlayingBar && nowPlayingTrack) {
                        nowPlayingTrack.textContent = this.selectedRecipe ? this.selectedRecipe.name : 'Custom Frequencies';
                        nowPlayingBar.classList.add('active');
                    }
                    
                    // Start countdown timer
                    this.totalDuration = this.parseDuration();
                    this.startTime = Date.now();
                    this.startCountdown();
                    
                    // Auto-stop after duration
                    const duration = this.totalDuration * 1000;
                    setTimeout(() => {
                        if (this.isPlaying) {
                            this.stop();
                            // Record session in new achievement system
                            if (window.GenesisAchievements && this.selectedRecipe) {
                                const frequencies = this.selectedRecipe.frequencies || [];
                                const trackId = this.selectedRecipe.name.toLowerCase().replace(/\s+/g, '');
                                // Map category (simplified for now)
                                let category = 'biblical'; // default
                                if (this.selectedRecipe.name.includes('Angel') || this.selectedRecipe.name.includes('11:11')) {
                                    category = 'angelNumbers';
                                } else if (this.selectedRecipe.name.includes('Cosmic') || this.selectedRecipe.name.includes('Planetary')) {
                                    category = 'cosmic';
                                } else if (this.selectedRecipe.name.includes('Solfeggio') || this.selectedRecipe.name.includes('Chakra')) {
                                    category = 'solfeggio';
                                }

                                window.GenesisAchievements.recordSession(
                                    this.totalDuration,
                                    frequencies,
                                    trackId,
                                    category,
                                    {
                                        intentionSet: false, // TODO: track user intentions
                                        waterCharging: false, // TODO: track water charging
                                        journalEntry: null // TODO: track journal entries
                                    }
                                );
                            }
                        }
                    }, duration);
                    
                } catch (error) {
                    console.error('Playback error:', error);
                    this.updateStatus('⚠️ Erro de reprodução - por favor tente novamente');
                }
            }

            stop() {
                // Fade out smoothly before stopping
                const fadeOutTime = 0.1;
                const currentTime = this.audioContext ? this.audioContext.currentTime : 0;
                
                this.gainNodes.forEach(gain => {
                    try {
                        gain.gain.cancelScheduledValues(currentTime);
                        gain.gain.setValueAtTime(gain.gain.value, currentTime);
                        gain.gain.linearRampToValueAtTime(0, currentTime + fadeOutTime);
                    } catch (e) {
                        console.warn('Error during fade out:', e);
                    }
                });
                
                // Stop oscillators after fade out
                setTimeout(() => {
                    this.oscillators.forEach(osc => {
                        try {
                            osc.stop();
                            osc.disconnect();
                        } catch (e) {
                            console.warn('Error stopping oscillator:', e);
                        }
                    });
                    
                    this.gainNodes.forEach(gain => {
                        try {
                            gain.disconnect();
                        } catch (e) {
                            console.warn('Error disconnecting gain node:', e);
                        }
                    });
                    
                    this.oscillators = [];
                    this.gainNodes = [];
                }, fadeOutTime * 1000);
                
                this.isPlaying = false;
                
                // Remove playing class from all play buttons and reset text
                document.querySelectorAll('.track-btn.play-btn').forEach(btn => {
                    btn.classList.remove('playing');
                    btn.textContent = '▶';
                    btn.title = 'Reproduzir esta faixa';
                });
                
                // Clear countdown timer
                if (this.countdownInterval) {
                    clearInterval(this.countdownInterval);
                    this.countdownInterval = null;
                }
                
                // Restore original duration value
                if (this.originalDuration) {
                    this.elements.duration.value = this.originalDuration;
                }
                
                this.elements.playBtn.textContent = '▶ PLAY';
                this.updateStatus('⏹ Parado - Pronto para Gerar');
                
                // Hide Now Playing bar
                const nowPlayingBar = document.getElementById('nowPlayingBar');
                if (nowPlayingBar) {
                    nowPlayingBar.classList.remove('active');
                }
            }

            startCountdown() {
                // Store original duration to restore later
                this.originalDuration = this.elements.duration.value;
                
                const updateCountdown = () => {
                    if (!this.isPlaying) return;
                    
                    const elapsed = (Date.now() - this.startTime) / 1000;
                    const remaining = Math.max(0, this.totalDuration - elapsed);
                    
                    const minutes = Math.floor(remaining / 60);
                    const seconds = Math.floor(remaining % 60);
                    const timeStr = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    
                    // Update duration input with countdown
                    this.elements.duration.value = timeStr;
                    
                    // Update Now Playing bar time
                    const nowPlayingTime = document.getElementById('nowPlayingTime');
                    if (nowPlayingTime) {
                        nowPlayingTime.textContent = timeStr;
                    }
                    
                    const frequencies = [
                        parseFloat(this.elements.freq1.value),
                        parseFloat(this.elements.freq2.value),
                        parseFloat(this.elements.freq3.value)
                    ].filter(freq => freq > 0);
                    
                    this.updateStatus(`🎵 Tocando ${frequencies.join(' Hz + ')} Hz | ⏱️ ${timeStr} restante`);
                    
                    if (remaining <= 0) {
                        clearInterval(this.countdownInterval);
                        this.countdownInterval = null;
                    }
                };
                
                updateCountdown();
                this.countdownInterval = setInterval(updateCountdown, 1000);
            }

            updateVolume() {
                if (this.isPlaying) {
                    const volumes = [
                        parseFloat(this.elements.volume1.value) / 100,
                        parseFloat(this.elements.volume2.value) / 100,
                        parseFloat(this.elements.volume3.value) / 100
                    ];
                    
                    this.gainNodes.forEach((gainNode, index) => {
                        gainNode.gain.setValueAtTime(volumes[index], this.audioContext.currentTime);
                    });
                }
            }

            isDeviceInSilentMode() {
                // Check if device is likely in silent mode
                // This is a heuristic since there's no direct API for silent mode detection
                
                // Check if we're on a mobile device
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                if (!isMobile) return false;
                
                // Try to detect if audio output is muted or very low
                // We can check the device's audio capabilities and user preferences
                try {
                    // Check if the device has vibration API (mobile indicator)
                    const hasVibration = 'vibrate' in navigator;
                    
                    // Check if we're in a WebView or PWA context where silent mode might be enforced
                    const isStandalone = window.matchMedia('(display-mode: standalone)').matches || 
                                       window.navigator.standalone === true;
                    
                    // On iOS, silent mode often prevents audio playback in certain contexts
                    // On Android, we can check if the audio context fails to start
                    if (this.audioContext && this.audioContext.state === 'suspended') {
                        return true; // Audio context suspended might indicate silent mode
                    }
                    
                    // Check if the user has recently interacted (recent interaction suggests not silent)
                    const lastInteraction = localStorage.getItem('lastUserInteraction');
                    if (lastInteraction) {
                        const timeSinceInteraction = Date.now() - parseInt(lastInteraction);
                        // If more than 5 minutes since interaction, might be in silent mode
                        if (timeSinceInteraction > 5 * 60 * 1000) {
                            return true;
                        }
                    }
                    
                    return false;
                } catch (e) {
                    console.log('Silent mode detection error:', e);
                    return false;
                }
            }

            validateTimeFormat(input) {
                const value = input.value;
                const timeRegex = /^([0-9]{1,2}):([0-5][0-9])$/;
                
                if (!timeRegex.test(value)) {
                    // Auto-format common patterns
                    if (value.length === 1) {
                        input.value = `0${value}:00`;
                    } else if (value.length === 2 && !value.includes(':')) {
                        input.value = `${value}:00`;
                    } else if (value.includes(':') && value.split(':')[1].length === 1) {
                        const [min, sec] = value.split(':');
                        input.value = `${min}:0${sec}`;
                    }
                }
            }

            parseDuration() {
                const value = this.elements.duration.value;
                const timeRegex = /^([0-9]{1,2}):([0-5][0-9])$/;
                
                if (timeRegex.test(value)) {
                    const [min, sec] = value.split(':').map(Number);
                    return min * 60 + sec;
                }
                
                // Fallback to default 5 minutes
                return 300;
            }
            
            async testAudioPlayback() {
                try {
                    // Create a silent test oscillator
                    const testOsc = this.audioContext.createOscillator();
                    const testGain = this.audioContext.createGain();
                    testGain.gain.value = 0.001; // Almost silent
                    
                    testOsc.connect(testGain);
                    testGain.connect(this.audioContext.destination);
                    
                    testOsc.start();
                    testOsc.stop(this.audioContext.currentTime + 0.1);
                    
                    // Wait a moment to see if audio context stays running
                    await new Promise(resolve => setTimeout(resolve, 150));
                    
                    const canPlay = this.audioContext.state === 'running';
                    console.log('Audio playback test:', canPlay ? 'PASS' : 'FAIL', 'State:', this.audioContext.state);
                    
                    return { canPlay, state: this.audioContext.state };
                } catch (e) {
                    console.error('Audio playback test error:', e);
                    return { canPlay: false, state: 'error', error: e };
                }
            }
            
            showSilentModeWarning() {
                const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
                const isAndroid = /Android/i.test(navigator.userAgent);
                
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.95);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 2147483647;
                    padding: 20px;
                `;
                
                modal.innerHTML = `
                    <div style="
                        background: linear-gradient(135deg, #dc2626, #991b1b);
                        border-radius: 24px;
                        padding: 40px 30px;
                        max-width: 450px;
                        width: 100%;
                        text-align: center;
                        border: 3px solid #fbbf24;
                        box-shadow: 0 20px 60px rgba(220, 38, 38, 0.6);
                    ">
                        <div style="font-size: 72px; margin-bottom: 20px; animation: pulse 1.5s ease-in-out infinite;">🔇</div>
                        <h2 style="color: #fbbf24; font-size: 26px; font-weight: 800; margin-bottom: 15px;">
                            Áudio Bloqueado!
                        </h2>
                        <p style="color: #fff; font-size: 17px; line-height: 1.7; margin-bottom: 25px; font-weight: 600;">
                            ${isIOS ? 
                                'Seu iPhone está em <span style="color:#fbbf24; font-weight:800;">Modo Silencioso</span>. Frequências Gênesis não podem tocar quando o Modo Silencioso está ativado.' : 
                                'Reprodução de áudio está bloqueada. Isso pode ser devido ao Modo Silencioso ou restrições de áudio do sistema.'
                            }
                        </p>
                        
                        <div style="background: rgba(0,0,0,0.3); border-radius: 16px; padding: 20px; margin-bottom: 25px; text-align: left;">
                            <div style="color: #fbbf24; font-weight: 700; margin-bottom: 12px; font-size: 15px; text-align: center;">
                                ${isIOS ? '🔊 PARA CORRIGIR (ESCOLHA UMA):' : '🔊 PARA CORRIGIR:'}
                            </div>
                            ${isIOS ? `
                                <div style="color: #fff; font-size: 15px; line-height: 1.9; padding-left: 10px;">
                                    <div style="margin-bottom: 12px;">
                                        <span style="color: #fbbf24; font-weight: 700;">Opção 1:</span> Desligue o Modo Silencioso<br>
                                        <span style="font-size: 13px; color: #d1d5db;">Use o botão físico no lado esquerdo do seu iPhone</span>
                                    </div>
                                    <div style="margin-bottom: 12px;">
                                        <span style="color: #fbbf24; font-weight: 700;">Opção 2:</span> Conecte fones de ouvido<br>
                                        <span style="font-size: 13px; color: #d1d5db;">Com fio ou Bluetooth funcionam</span>
                                    </div>
                                    <div>
                                        <span style="color: #fbbf24; font-weight: 700;">Opção 3:</span> Conecte a uma caixa de som Bluetooth
                                    </div>
                                </div>
                            ` : `
                                <div style="color: #fff; font-size: 15px; line-height: 1.9; padding-left: 10px;">
                                    🔧 Desligue o modo Silencioso/Não Perturbe<br>
                                    🔧 Aumente o volume do sistema<br>
                                    🔧 Ative o áudio nas configurações do navegador<br>
                                    🔧 Tente conectar fones de ouvido
                                </div>
                            `}
                        </div>
                        
                        <button onclick="this.closest('div[style*=fixed]').remove()" style="
                            width: 100%;
                            background: linear-gradient(90deg, #fbbf24, #f59e0b);
                            color: #1a0033;
                            border: none;
                            border-radius: 20px;
                            padding: 18px;
                            font-size: 18px;
                            font-weight: 800;
                            cursor: pointer;
                            box-shadow: 0 6px 24px rgba(251,191,36,0.5);
                        ">Vou Corrigir e Tentar Novamente</button>
                    </div>
                `;
                
                document.body.appendChild(modal);
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) modal.remove();
                });
            }

            export() {
                // Check if user has Premium or Ultimate access (export available to both)
                const hasPremium = typeof hasPremiumAccess === 'function' ? hasPremiumAccess() : 
                                   localStorage.getItem('gfgn_license_tier') === 'premium' || 
                                   localStorage.getItem('gfgn_license_tier') === 'ultimate';
                if (!hasPremium) {
                    showUpgradeModal();
                    return;
                }

                // Create downloadable WAV file with current frequencies
                const frequencies = [
                    parseFloat(this.elements.freq1.value),
                    parseFloat(this.elements.freq2.value),
                    parseFloat(this.elements.freq3.value)
                ].filter(freq => freq > 0);
                
                if (frequencies.length === 0) {
                    this.updateStatus('⚠️ Por favor, insira as frequências primeiro');
                    return;
                }
                
                // Generate WAV file (simplified for demo)
                const sampleRate = 44100;
                const duration = this.parseDuration();
                const numSamples = sampleRate * duration;

                // Create WAV buffer
                const buffer = new ArrayBuffer(44 + numSamples * 2);
                const view = new DataView(buffer);

                // WAV header
                const writeString = (offset, string) => {
                    for (let i = 0; i < string.length; i++) {
                        view.setUint8(offset + i, string.charCodeAt(i));
                    }
                };

                writeString(0, 'RIFF');
                view.setUint32(4, 36 + numSamples * 2, true);
                writeString(8, 'WAVE');
                writeString(12, 'fmt ');
                view.setUint32(16, 16, true);
                view.setUint16(20, 1, true);
                view.setUint16(22, 1, true);
                view.setUint32(24, sampleRate, true);
                view.setUint32(28, sampleRate * 2, true);
                view.setUint16(32, 2, true);
                view.setUint16(34, 16, true);
                writeString(36, 'data');
                view.setUint32(40, numSamples * 2, true);

                // Generate sine wave data
                const volumes = [
                    parseFloat(this.elements.volume1.value) / 100,
                    parseFloat(this.elements.volume2.value) / 100,
                    parseFloat(this.elements.volume3.value) / 100
                ];

                let offset = 44;

                for (let i = 0; i < numSamples; i++) {
                    let sample = 0;
                    const time = i / sampleRate;

                    frequencies.forEach((freq, index) => {
                        sample += Math.sin(2 * Math.PI * freq * time) * volumes[index];
                    });

                    sample = sample / frequencies.length * 0.8; // Scale to avoid clipping
                    const intSample = Math.floor(sample * 32767);
                    view.setInt16(offset, intSample, true);
                    offset += 2;
                }

                // Download the WAV file
                const blob = new Blob([buffer], { type: 'audio/wav' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `genesis_${frequencies.join('_')}_hz.wav`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                // Track export action for achievements
                if (window.GenesisAchievements) {
                    window.GenesisAchievements.userProgress.wavExports++;
                    window.GenesisAchievements.saveProgress();
                    window.GenesisAchievements.checkAllAchievements();
                }

                this.updateStatus(`? Exportado: ${frequencies.join(' + ')} Hz`);
            }

            reset() {
                this.stop();
                
                // Reset to Trinity defaults
                this.elements.freq1.value = 37;
                this.elements.freq2.value = 73;
                this.elements.freq3.value = 0;
                this.elements.volume1.value = 50;
                this.elements.volume2.value = 50;
                this.elements.volume3.value = 50;
                this.elements.volume1Value.textContent = '50%';
                this.elements.volume2Value.textContent = '50%';
                this.elements.volume3Value.textContent = '50%';
                this.elements.duration.value = '05:00';
                
                // Clear recipe selection
                document.querySelectorAll('.recipe-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                this.selectedRecipe = null;
                this.updateStatus('🔄 Redefinido para Fundação Trindade');
            }

            updateStatus(message) {
                this.elements.status.textContent = message;
                this.elements.status.className = this.isPlaying ? 'status playing floating' : 'status stopped';
            }
        }

        // Homescreen PWA Prompt System
        let deferredPrompt;
        let pwaPromptShown = false;

        function initializePWAPrompt() {
            // Check if already installed
            if (window.matchMedia('(display-mode: standalone)').matches || 
                window.navigator.standalone === true) {
                if (window.GenesisAchievements) {
                    window.GenesisAchievements.userProgress.installedPWA = true;
                    window.GenesisAchievements.saveProgress();
                    window.GenesisAchievements.checkAllAchievements();
                }
                hideHomescreenButton();
                return;
            }

            // Listen for the beforeinstallprompt event
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                
                // Show prompt after some usage (3 sessions)
                if (userProgress.totalSessions >= 3 && !pwaPromptShown) {
                    setTimeout(() => showPWAPrompt(), 2000);
                }
            });

            // Listen for successful installation
            window.addEventListener('appinstalled', () => {
                if (window.GenesisAchievements) {
                    window.GenesisAchievements.userProgress.installedPWA = true;
                    window.GenesisAchievements.saveProgress();
                    window.GenesisAchievements.checkAllAchievements();
                }
                hidePWAPrompt();
                hideHomescreenButton();
                showToast('🏠 App adicionado à tela inicial! Conquista desbloqueada!', 'success');
            });
        }

        function hideHomescreenButton() {
            const btn = document.getElementById('homescreenBtn');
            if (btn) btn.style.display = 'none';
        }

        function showPWAPrompt() {
            if (pwaPromptShown) return;
            pwaPromptShown = true;

            const prompt = document.createElement('div');
            prompt.id = 'pwaPrompt';
            prompt.innerHTML = `
                <div style="position: fixed; bottom: 15px; left: 15px; right: 15px; 
                           background: linear-gradient(135deg, rgba(251,191,36,0.95), rgba(139,92,246,0.9)); 
                           border: 2px solid rgba(251,191,36,0.5); border-radius: 12px; 
                           padding: 12px 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.3); 
                           z-index: 1000; backdrop-filter: blur(10px); display: flex; align-items: center; gap: 12px;">
                    <div style="flex-shrink: 0; font-size: 32px;">
                        📲
                    </div>
                    <div style="flex: 1;">
                        <div style="color: #1a0033; font-size: 15px; font-weight: 700;">
                            Add to Home Screen
                        </div>
                        <div style="color: #1a0033; font-size: 12px; opacity: 0.8;">
                            Quick access from your home screen
                        </div>
                    </div>
                    <div style="display: flex; gap: 8px; flex-shrink: 0;">
                        <button onclick="installPWA()" style="background: #1a0033; color: #fbbf24; 
                                 border: none; border-radius: 16px; padding: 8px 14px; 
                                 font-weight: 600; cursor: pointer; font-size: 13px;">
                            Install
                        </button>
                        <button onclick="hidePWAPrompt()" style="background: rgba(26,0,51,0.5); 
                                 color: #1a0033; border: none; border-radius: 16px; 
                                 padding: 8px 12px; font-weight: 600; cursor: pointer; font-size: 13px;">
                            ?
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(prompt);
        }

        function hidePWAPrompt() {
            const prompt = document.getElementById('pwaPrompt');
            if (prompt) prompt.remove();
        }

        async function installPWA() {
            if (!deferredPrompt) return;
            
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            
            if (outcome === 'accepted') {
                if (window.GenesisAchievements) {
                    window.GenesisAchievements.userProgress.installedPWA = true;
                    window.GenesisAchievements.saveProgress();
                    window.GenesisAchievements.checkAllAchievements();
                }
                showToast('🏠 App adicionado à tela inicial! Conquista desbloqueada!', 'success');
            }
            
            deferredPrompt = null;
            hidePWAPrompt();
        }

        // Subtle Notification System
        let notificationInterval;
        let lastNotificationTime = 0;

        function initializeNotifications() {
            // Check if notifications are already granted
            if (Notification.permission === 'granted') {
                startNotificationSchedule();
                return;
            }

            // Request permission on first significant usage (2 sessions)
            if (userProgress.totalSessions >= 2 && Notification.permission === 'default') {
                setTimeout(() => requestNotificationPermission(), 3000);
            }
        }

        function requestNotificationPermission() {
            if ('Notification' in window) {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        showToast('🔔 Notificações ativadas! Você receberá lembretes gentis.', 'info');
                        startNotificationSchedule();
                    }
                });
            }
        }

        function startNotificationSchedule() {
            // Send notifications every 2-4 days, but only if user hasn't used app recently
            notificationInterval = setInterval(() => {
                const now = Date.now();
                const daysSinceLastUse = (now - new Date(userProgress.lastSession || 0)) / (1000 * 60 * 60 * 24);
                
                // Only notify if it's been 2+ days since last use
                if (daysSinceLastUse >= 2 && (now - lastNotificationTime) > (1000 * 60 * 60 * 24 * 2)) {
                    sendGentleNotification();
                }
            }, 1000 * 60 * 60 * 6); // Check every 6 hours
        }

        function sendGentleNotification() {
            if (Notification.permission !== 'granted') return;

            const messages = [
                {
                    title: '🌟 Suas frequências estão esperando',
                    body: 'Reserve um momento para se conectar com as vibrações sagradas do Gênesis.',
                    icon: '/Genesis.png'
                },
                {
                    title: '💙 Como você está se sentindo hoje?',
                    body: 'Uma curta sessão de frequência pode ajudar a centralizar sua energia.',
                    icon: '/Genesis.png'
                },
                {
                    title: '🎯 Continue sua jornada',
                    body: 'Cada sessão te aproxima do equilíbrio harmônico.',
                    icon: '/Genesis.png'
                },
                {
                    title: '⭐ Pronto para acesso ilimitado?',
                    body: 'Faça upgrade para premium para durações personalizadas e todos os recursos.',
                    icon: '/Genesis.png'
                },
                {
                    title: '🎵 Frequências sagradas chamando',
                    body: 'Sua prática diária aguarda. Apenas 5-10 minutos de paz.',
                    icon: '/Genesis.png'
                }
            ];

            const message = messages[Math.floor(Math.random() * messages.length)];
            
            const notification = new Notification(message.title, {
                body: message.body,
                icon: message.icon,
                badge: '/Genesis.png',
                tag: 'genesis-reminder', // Prevents spam if multiple
                requireInteraction: false,
                silent: true // Gentle, not disruptive
            });

            lastNotificationTime = Date.now();

            // Auto-close after 10 seconds
            setTimeout(() => notification.close(), 10000);

            // Click handler to open app
            notification.onclick = () => {
                window.focus();
                notification.close();
            };
        }

        // Toast notification system for in-app messages
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed; top: 20px; right: 20px; 
                background: ${type === 'success' ? 'rgba(34,197,94,0.9)' : 
                           type === 'error' ? 'rgba(239,68,68,0.9)' : 'rgba(251,191,36,0.9)'}; 
                color: white; padding: 15px 20px; border-radius: 10px; 
                box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 10000; 
                font-weight: 600; max-width: 300px; backdrop-filter: blur(10px);
            `;
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.style.transition = 'opacity 0.5s';
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 500);
            }, 4000);
        }

        // Make functions globally available
        window.installPWA = installPWA;
        window.showPWAPrompt = showPWAPrompt;
        window.hidePWAPrompt = hidePWAPrompt;
        window.requestNotificationPermission = requestNotificationPermission;
        window.showToast = showToast;

// ---------------------------------------------------------------
// LICENSE VALIDATION SYSTEM
// ---------------------------------------------------------------

const LICENSE_API_URL = 'https://api.quantummerlin.com';

// Generate device fingerprint for device limiting
function generateDeviceFingerprint() {
    const data = [
        navigator.userAgent,
        navigator.language,
        screen.width + 'x' + screen.height,
        screen.colorDepth,
        new Date().getTimezoneOffset(),
        navigator.hardwareConcurrency || 'unknown',
        navigator.platform
    ].join('|');
    
    // Simple hash function
    let hash = 0;
    for (let i = 0; i < data.length; i++) {
        const char = data.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash;
    }
    return 'dev_' + Math.abs(hash).toString(36);
}

const deviceFingerprint = generateDeviceFingerprint();

// Get current license tier from localStorage
function getCurrentTier() {
    return localStorage.getItem('gfgn_license_tier') || 'free';
}

// Check if user has premium access (includes old 'ultimate' keys for backward compatibility)
function hasPremiumAccess() {
    const tier = getCurrentTier();
    return tier === 'premium' || tier === 'ultimate';
}

// Format license key with auto-dashes after every 4 characters
function formatLicenseKey(input) {
    // Remove all non-alphanumeric characters and convert to uppercase
    let value = input.value.replace(/[^A-Za-z0-9]/g, '').toUpperCase();
    
    // Add dashes after every 4 characters
    let formatted = '';
    for (let i = 0; i < value.length && i < 16; i++) {
        if (i > 0 && i % 4 === 0) {
            formatted += '-';
        }
        formatted += value[i];
    }
    
    input.value = formatted;
}

// Show license modal
function showLicenseModal() {
    const modal = document.getElementById('licenseModal');
    if (modal) {
        modal.style.display = 'flex';
        
        // Clear previous input
        const keyInput = document.getElementById('licenseKeyFull');
        if (keyInput) keyInput.value = '';
        document.getElementById('licenseError').style.display = 'none';
        document.getElementById('licenseSuccess').style.display = 'none';
        
        // Show current tier if applicable
        const currentTier = getCurrentTier();
        const tierDisplay = document.getElementById('licenseCurrentTier');
        const tierName = document.getElementById('currentTierName');
        
        if (currentTier !== 'free') {
            tierDisplay.style.display = 'block';
            tierName.textContent = currentTier.charAt(0).toUpperCase() + currentTier.slice(1);
        } else {
            tierDisplay.style.display = 'none';
        }
        
        // Focus input
        setTimeout(() => {
            if (keyInput) keyInput.focus();
        }, 100);
    }
}

// Close license modal
function closeLicenseModal() {
    const modal = document.getElementById('licenseModal');
    if (modal) {
        modal.style.display = 'none';
    }
}

// Activate license
async function activateLicense() {
    const rawInput = document.getElementById('licenseKeyFull').value.trim().toUpperCase();
    
    const errorEl = document.getElementById('licenseError');
    const successEl = document.getElementById('licenseSuccess');
    const activateBtn = document.getElementById('activateLicenseBtn');
    
    // Clear previous messages
    errorEl.style.display = 'none';
    successEl.style.display = 'none';
    
    // Validate input
    if (!rawInput) {
        errorEl.textContent = 'Por favor, cole sua chave de licença';
        errorEl.style.display = 'block';
        return;
    }
    
    // Parse the key - accept with or without QMFG prefix
    let fullLicenseKey = rawInput;
    
    // If they pasted just the last 3 segments, add QMFG
    if (!rawInput.startsWith('QMFG-') && rawInput.split('-').length === 3) {
        fullLicenseKey = 'QMFG-' + rawInput;
    }
    
    // Validate format: QMFG-XXXX-XXXX-XXXX
    const parts = fullLicenseKey.split('-');
    if (parts.length !== 4 || parts[0] !== 'QMFG' || parts[1].length !== 4 || parts[2].length !== 4 || parts[3].length !== 4) {
        errorEl.textContent = 'Formato de chave inválido. Esperado: QMFG-XXXX-XXXX-XXXX';
        errorEl.style.display = 'block';
        return;
    }
    
    // Check if already has premium
    if (hasPremiumAccess()) {
        errorEl.textContent = 'Você já tem acesso Premium! Todos os recursos estão desbloqueados.';
        errorEl.style.display = 'block';
        return;
    }
    
    // Show loading state
    activateBtn.disabled = true;
    activateBtn.innerHTML = '⏳ Validating...';
    
    try {
        const response = await fetch(`${LICENSE_API_URL}/api/validate`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                license_key: fullLicenseKey,
                device_fingerprint: deviceFingerprint,
                device_info: navigator.userAgent.substring(0, 100)
            })
        });
        
        const data = await response.json();
        
        if (data.valid) {
            // Success! Save to localStorage
            localStorage.setItem('gfgn_license_key', fullLicenseKey);
            localStorage.setItem('gfgn_license_tier', data.tier);
            localStorage.setItem('gfgn_devices_used', data.devices_used);
            localStorage.setItem('gfgn_devices_max', data.devices_max);
            
            if (data.tier === 'premium' || data.tier === 'ultimate') {
                localStorage.setItem('premiumAccessGranted', 'true');
            }
            if (data.tier === 'ultimate') {
                localStorage.setItem('ultimateAccessGranted', 'true');
            }
            
            // Show success message with Share & Earn option
            successEl.innerHTML = `
                <div style="text-align: center; padding: 10px 0;">
                    <div style="font-size: 48px; margin-bottom: 10px;">✅</div>
                    <div style="font-size: 20px; color: #10b981; font-weight: 700; margin-bottom: 8px;">License Activated!</div>
                    <div style="font-size: 14px; color: #e5e7eb; margin-bottom: 5px;">${data.message}</div>
                    <div style="font-size: 12px; color: #9ca3af;">
                        Nível: <span style="color: ${data.tier === 'ultimate' ? '#fbbf24' : '#a78bfa'}; font-weight: 600;">${data.tier.toUpperCase()}</span> | Dispositivos: ${data.devices_used}/${data.devices_max}
                    </div>
                </div>
                <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(16,185,129,0.3);">
                    <button id="continueAfterActivation" onclick="finishActivation()" style="
                        width: 100%;
                        background: linear-gradient(90deg, #10b981, #059669);
                        color: white;
                        border: none;
                        padding: 14px 24px;
                        border-radius: 25px;
                        font-size: 16px;
                        font-weight: 700;
                        cursor: pointer;
                        margin-bottom: 10px;
                    ">➡️ Continuar para o App</button>
                </div>
            `;
            successEl.style.display = 'block';
            
            // Hide the activate button since we now have Continue button
            activateBtn.style.display = 'none';
            
        } else {
            // Error
            errorEl.textContent = data.error || 'Chave de licença inválida';
            errorEl.style.display = 'block';
            activateBtn.disabled = false;
            activateBtn.innerHTML = '🔑 Ativar Licença';
        }
        
    } catch (error) {
        console.error('License validation error:', error);
        
        // Fallback: Check format only (offline mode)
        if (fullLicenseKey.match(/^QMFG-(PREM|ULTI)-[A-Z0-9]{4}-[A-Z0-9]{4}$/)) {
            const tier = key1.startsWith('ULTI') ? 'ultimate' : 'premium';
            
            errorEl.innerHTML = `
                ⚠️ Server unavailable. Using offline mode.<br>
                <span style="font-size: 12px;">Your license will be verified when online.</span>
            `;
            errorEl.style.color = '#fbbf24';
            errorEl.style.display = 'block';
            
            // Save offline activation
            localStorage.setItem('gfgn_license_key', fullLicenseKey);
            localStorage.setItem('gfgn_license_tier', tier);
            localStorage.setItem('gfgn_offline_activation', 'true');
            
            if (tier === 'premium' || tier === 'ultimate') {
                localStorage.setItem('premiumAccessGranted', 'true');
            }
            if (tier === 'ultimate') {
                localStorage.setItem('ultimateAccessGranted', 'true');
            }
            
            setTimeout(() => {
                closeLicenseModal();
                location.reload();
            }, 2500);
        } else {
            errorEl.textContent = 'Erro de conexão. Por favor, verifique sua internet e tente novamente.';
            errorEl.style.display = 'block';
            activateBtn.disabled = false;
            activateBtn.innerHTML = '🔑 Activate License';
        }
    }
}

// Update UI based on license tier (simplified: free or premium only)
function updateUIForLicenseTier() {
    const tier = getCurrentTier();
    
    // Get CTA sections
    const ctaTop = document.getElementById('premiumCtaTop');
    const ctaBottom = document.getElementById('premiumCtaBottom');
    
    // Premium or Ultimate keys both grant full access
    if (tier === 'premium' || tier === 'ultimate') {
        // Hide all upgrade prompts
        if (ctaTop) ctaTop.style.display = 'none';
        if (ctaBottom) ctaBottom.style.display = 'none';
        
        // Unlock all premium features
        unlockPremiumControls();
        
        // Trigger achievement only once
        if (typeof window.awardAchievement === 'function' && !localStorage.getItem('gfgn_premium_achievement_awarded')) {
            window.awardAchievement('premium_unlock');
            localStorage.setItem('gfgn_premium_achievement_awarded', 'true');
        }
    }
    // Free users see default locked UI
}

// Unlock Premium controls (volume sliders, duration - NOT export button or frequency inputs)
function unlockPremiumControls() {
    document.querySelectorAll('.premium-lock').forEach(el => {
        // SKIP the export button - keep it locked as $19.99 premium feature
        if (el.id === 'exportBtn') return;
        
        // Remove the lock overlay and enable interaction
        el.classList.remove('premium-lock');
        el.classList.add('premium-unlocked');
        el.onclick = null; // Remove the upgrade modal trigger
        el.style.opacity = '1';
        el.style.pointerEvents = 'auto';
        el.style.cursor = 'default';
        
        // Enable volume sliders and buttons, but NOT frequency number inputs
        el.querySelectorAll('input[type="range"], button').forEach(input => {
            input.disabled = false;
        });
        
        // Keep frequency inputs readonly - users select from presets only
        el.querySelectorAll('input[type="number"]').forEach(input => {
            input.readOnly = true;
            input.style.pointerEvents = 'none';
        });
    });
    
    // Keep export button LOCKED - $19.99 premium feature
    const exportBtn = document.getElementById('exportBtn');
    if (exportBtn) {
        exportBtn.classList.add('premium-lock');
        exportBtn.classList.remove('premium-unlocked');
        exportBtn.onclick = function() { showExportUpgradeModal(); };
    }
    
    // Initialize screen awake toggle
    initScreenAwakeToggle();
}

// Check license on page load
async function checkLicenseOnLoad() {
    const storedKey = localStorage.getItem('gfgn_license_key');
    const storedTier = localStorage.getItem('gfgn_license_tier');
    
    if (storedKey && storedTier && storedTier !== 'free') {
        // Verify with server (non-blocking)
        try {
            const response = await fetch(`${LICENSE_API_URL}/api/check`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    license_key: storedKey,
                    device_fingerprint: deviceFingerprint
                })
            });
            
            const data = await response.json();
            
            if (!data.activated) {
                // Device not activated - might be new device or limit reached
                console.log('License needs revalidation');
            }
        } catch (e) {
            // Offline - trust local storage
            console.log('Offline mode - using cached license');
        }
    }
    
    // Update UI regardless
    updateUIForLicenseTier();
}

// Function called when user clicks Continue after activation
function finishActivation() {
    closeLicenseModal();
    // Small delay then reload to apply all changes
    setTimeout(() => {
        location.reload();
    }, 100);
}

// Make functions globally available
window.showLicenseModal = showLicenseModal;
window.closeLicenseModal = closeLicenseModal;
window.activateLicense = activateLicense;
window.hasPremiumAccess = hasPremiumAccess;
window.getCurrentTier = getCurrentTier;
window.finishActivation = finishActivation;

// Initialize generator when page loads
document.addEventListener('DOMContentLoaded', function() {
    // Check license status
    checkLicenseOnLoad();
    
    // Initialize the frequency generator first
    window.generator = new FrequencyGenerator();
    
    // Initialize screen awake toggle for premium users
    setTimeout(() => {
        initScreenAwakeToggle();
    }, 500);
    
    // Set Genesis Creation (37 + 73 Hz) as the default track - the beginning of the journey
    setTimeout(() => {
        const biblicalCategory = trinityRecipes['Bíblico & Original'];
        const genesisRecipe = biblicalCategory ? biblicalCategory.find(r => r.name.includes('Criação do Gênesis')) : null;
        if (genesisRecipe && window.generator) {
            window.generator.selectRecipe(genesisRecipe);
        }
    }, 100);
    
    // Cleanup on page unload to prevent memory leaks
    window.addEventListener('beforeunload', function() {
        if (window.generator && window.generator.isPlaying) {
            window.generator.stop();
        }
        // Clear any notification intervals
        if (typeof notificationInterval !== 'undefined' && notificationInterval) {
            clearInterval(notificationInterval);
        }
        // Remove visibility change listeners
        if (typeof handleVisibilityChange !== 'undefined') {
            document.removeEventListener('visibilitychange', handleVisibilityChange);
        }
    });
    
    // Update progress section if available
    if (typeof instructionsSections !== 'undefined') {
        renderInstructionsCategories(); // Update progress section with loaded data
    }
    
    // Populate achievements preview
    const achievementsPreview = document.getElementById('achievementsPreview');
    if (achievementsPreview && typeof renderAchievementQuickStats !== 'undefined') {
        achievementsPreview.innerHTML = renderAchievementQuickStats();
    }
    
    // Load saved language preference
    const savedLanguage = localStorage.getItem('preferredLanguage');
    if (savedLanguage && translations[savedLanguage]) {
        changeLanguage(savedLanguage);
    }

    // Register Service Worker for PWA functionality
    // if ('serviceWorker' in navigator && (location.protocol === 'http:' || location.protocol === 'https:')) {
    //     navigator.serviceWorker.register('/sw.js', { scope: '/' })
    //         .then(registration => {
    //             console.log('Service Worker registered:', registration);
    //         })
    //         .catch(error => {
    //             console.log('Service Worker registration failed:', error);
    //         });
    // }

    // Initialize homescreen and notification features
    initializePWAPrompt();
    initializeNotifications();

    // Safari-safe storage helper functions
    function safeGetItem(key) {
        try {
            return localStorage.getItem(key);
        } catch (e) {
            console.log('localStorage blocked, trying sessionStorage');
            try {
                return sessionStorage.getItem(key);
            } catch (e2) {
                console.log('All storage blocked');
                return null;
            }
        }
    }
    
    function safeSetItem(key, value) {
        try {
            localStorage.setItem(key, value);
        } catch (e) {
            try {
                sessionStorage.setItem(key, value);
            } catch (e2) {
                console.log('Cannot save to storage');
            }
        }
    }

    // Show immersive welcome on first visit, welcome back toast for return visits
    console.log('DOMContentLoaded fired - checking storage');
    
    // Check for test parameter to force clean state
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has('test')) {
        console.log('Test parameter detected - forcing clean state');
        try { localStorage.clear(); } catch(e) {}
        try { sessionStorage.clear(); } catch(e) {}
    }
    
    // Debug: Add global function to clear localStorage
    window.clearOnboarding = function() {
        try { localStorage.removeItem('onboardingComplete'); } catch(e) {}
        try { sessionStorage.removeItem('onboardingComplete'); } catch(e) {}
        console.log('Onboarding cleared - refresh page to see welcome flow');
    };
    
    const onboardingComplete = safeGetItem('onboardingComplete') === 'true';
    const forceShowWelcome = new URLSearchParams(window.location.search).get('showWelcome') === 'true';
    console.log('Modal initialization - onboardingComplete:', onboardingComplete);
    console.log('Force show welcome:', forceShowWelcome);
    
    // Get modal element
    const welcomeModal = document.getElementById('immersiveWelcome');
    console.log('Welcome modal element:', welcomeModal);
    
    if (!onboardingComplete || forceShowWelcome) {
        // First time user - show welcome sequence
        console.log('New user - showing welcome modal');
        
        // Hide upgrade modal first
        const upgradeModal = document.getElementById('upgradeBenefitsModal');
        if (upgradeModal) {
            upgradeModal.classList.remove('active');
            upgradeModal.style.display = 'none';
        }
        
        // Show welcome modal with multiple fallback methods for Safari
        if (welcomeModal) {
            // Method 1: Add active class
            welcomeModal.classList.add('active');
            
            // Method 2: Set inline styles directly (Safari fallback)
            welcomeModal.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important; position: fixed !important; top: 0 !important; left: 0 !important; width: 100% !important; height: 100% !important; z-index: 9999999 !important; background: rgba(0,0,0,0.95) !important; padding: 20px !important; overflow-y: auto !important; box-sizing: border-box !important;';
            
            // Method 3: Force reflow/repaint for Safari
            welcomeModal.offsetHeight;
            
            // Prevent scrolling behind modal
            document.body.style.overflow = 'hidden';
            
            console.log('Welcome modal should now be visible');
            console.log('Modal display:', window.getComputedStyle(welcomeModal).display);
        }
    } else {
        // Returning user - show welcome back toast after a brief delay
        console.log('Returning user - showing welcome toast');
        setTimeout(() => {
            const t = translations.en;
            showToast((t.welcomeBack || 'Welcome back! Ready to explore sacred frequencies?') + ' 🌟');
        }, 1000);
    }

    // Handle premium-locked inputs - FORCE UNLOCK ALL FOR FREE VERSION
    unlockPremiumControls();
    
    // Hide upgrade CTAs and affiliate sections since everything is free now
    const premiumCtaTop = document.getElementById('premiumCtaTop');
    const premiumCtaBottom = document.getElementById('premiumCtaBottom');
    if (premiumCtaTop) premiumCtaTop.style.display = 'none';
    if (premiumCtaBottom) premiumCtaBottom.style.display = 'none';
    
    // Hide affiliate section
    document.querySelectorAll('[onclick*="showAffiliateModal"]').forEach(el => {
        if (el.closest('div[style*="border: 2px solid #10b981"]')) {
            el.closest('div[style*="border: 2px solid #10b981"]').style.display = 'none';
        }
    });

    // Listen for storage changes (when license tier changes)
    window.addEventListener('storage', function(e) {
        if (e.key === 'gfgn_license_tier' || e.key === 'premiumAccessGranted') {
            updatePremiumFeatures();
            if (typeof updateUIForLicenseTier === 'function') {
                updateUIForLicenseTier();
            }
        }
    });

    // Debug check after initialization (Safari-safe)
    setTimeout(() => {
        console.log('Modal state check:');
        const welcomeModal = document.getElementById('immersiveWelcome');
        const upgradeModal = document.getElementById('upgradeBenefitsModal');
        console.log('- immersiveWelcome exists:', !!welcomeModal);
        console.log('- immersiveWelcome active:', welcomeModal ? welcomeModal.classList.contains('active') : 'N/A');
        console.log('- immersiveWelcome display:', welcomeModal ? window.getComputedStyle(welcomeModal).display : 'N/A');
        console.log('- upgradeBenefitsModal active:', upgradeModal ? upgradeModal.classList.contains('active') : 'N/A');
        try {
            console.log('- onboardingComplete in storage:', localStorage.getItem('onboardingComplete') || sessionStorage.getItem('onboardingComplete'));
        } catch(e) {
            console.log('- storage access blocked');
        }
    }, 200);
});

// ============================================
// EXPORT FUNCTIONS
// ============================================

            // Export functions to window for external access
            window.GenesisAchievements = {
                renderAchievementCard: typeof renderAchievementCard !== 'undefined' ? renderAchievementCard : function() {},
                renderAchievementsDashboard: typeof renderAchievementsDashboard !== 'undefined' ? renderAchievementsDashboard : function() {},
                renderAchievementQuickStats: typeof renderAchievementQuickStats !== 'undefined' ? renderAchievementQuickStats : function() {},
                getAchievementProgress: typeof getAchievementProgress !== 'undefined' ? getAchievementProgress : function() { return 0; },
                showAchievementModal: typeof showAchievementModal !== 'undefined' ? showAchievementModal : function() {},
                showFullAchievements: typeof showFullAchievements !== 'undefined' ? showFullAchievements : function() {},
                checkAchievements: typeof checkAchievements !== 'undefined' ? checkAchievements : function() { return true; },
                updateAchievementProgress: typeof updateAchievementProgress !== 'undefined' ? updateAchievementProgress : function() {},
                userProgress: {},
                saveProgress: function() {},
                checkAllAchievements: function() {}
            };

console.log('✨ Achievement Teaser System Loaded!');
console.log('🎯 Locked, In Progress, Almost There, and Unlocked states active!');

// ---------------------------------------------------------------
// FLOATING PARTICLES SYSTEM - 50 particles
// ---------------------------------------------------------------
function initFloatingParticles() {
    const container = document.getElementById('particles-container');
    if (!container) return;
    
    const particleCount = 50;
    const colors = ['particle-gold', 'particle-purple', 'particle-white'];
    
    for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = `floating-particle ${colors[Math.floor(Math.random() * colors.length)]}`;
        
        // Random positioning
        particle.style.left = `${Math.random() * 100}%`;
        
        // Random size (2-6px)
        const size = 2 + Math.random() * 4;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        
        // Random animation duration (15-30s)
        const duration = 15 + Math.random() * 15;
        particle.style.animationDuration = `${duration}s`;
        
        // Random delay
        particle.style.animationDelay = `${Math.random() * duration}s`;
        
        container.appendChild(particle);
    }
}

// ---------------------------------------------------------------
// LUCIDE ICONS INITIALIZATION
// ---------------------------------------------------------------
function initLucideIcons() {
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
        console.log('✅ Lucide icons initialized');
    }
}

// Icon mapping for replacing emojis in dynamic content
const iconMap = {
    '??': '<i data-lucide="music" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="volume-2" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="timer" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="target" class="lucide-icon icon-gold"></i>',
    '?': '<i data-lucide="sparkles" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="star" class="lucide-icon icon-gold"></i>',
    '?': '<i data-lucide="star" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="gem" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="diamond" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="palette" class="lucide-icon icon-pink"></i>',
    '??': '<i data-lucide="heart" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="flower-2" class="lucide-icon icon-pink"></i>',
    '??': '<i data-lucide="leaf" class="lucide-icon icon-green"></i>',
    '??': '<i data-lucide="droplet" class="lucide-icon icon-blue"></i>',
    '??': '<i data-lucide="flame" class="lucide-icon" style="color:#f97316"></i>',
    '?': '<i data-lucide="zap" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="moon" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="sun" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="sunrise" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="book-open" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="bar-chart-3" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="trophy" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="crown" class="lucide-icon icon-gold"></i>',
    '???': '<i data-lucide="award" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="medal" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="lock" class="lucide-icon"></i>',
    '??': '<i data-lucide="unlock" class="lucide-icon icon-green"></i>',
    '??': '<i data-lucide="calendar" class="lucide-icon icon-purple"></i>',
    '?': '<i data-lucide="clock" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="clock-1" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="clock-12" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="lightbulb" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="heart" class="lucide-icon icon-green"></i>',
    '??': '<i data-lucide="heart" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="rocket" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="gift" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="megaphone" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="orbit" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="bird" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="triangle" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="infinity" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="trending-up" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="door-open" class="lucide-icon icon-purple"></i>',
    '???': '<i data-lucide="bird" class="lucide-icon"></i>',
    '??': '<i data-lucide="refresh-cw" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="graduation-cap" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="flip-horizontal" class="lucide-icon icon-gold"></i>',
    '?': '<i data-lucide="help-circle" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="message-circle" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="party-popper" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="hand" class="lucide-icon icon-gold"></i>',
    '?': '<i data-lucide="check-circle" class="lucide-icon icon-green"></i>',
    '?': '<i data-lucide="x-circle" class="lucide-icon" style="color:#ef4444"></i>',
    '??': '<i data-lucide="arrow-right" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="arrow-left" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="play" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="pause" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="square" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="repeat" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="external-link" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="smartphone" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="laptop" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="headphones" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="bell" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="settings" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="globe" class="lucide-icon icon-blue"></i>',
    '??': '<i data-lucide="save" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="download" class="lucide-icon icon-green"></i>',
    '??': '<i data-lucide="upload" class="lucide-icon icon-purple"></i>',
    '???': '<i data-lucide="trash-2" class="lucide-icon" style="color:#ef4444"></i>',
    '??': '<i data-lucide="pencil" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="search" class="lucide-icon icon-purple"></i>',
    '??': '<i data-lucide="coins" class="lucide-icon icon-gold"></i>',
    '??': '<i data-lucide="sprout" class="lucide-icon icon-green"></i>',
    '??': '<i data-lucide="sparkle" class="lucide-icon icon-gold"></i>'
};

// Function to replace emojis with Lucide icon tags
function replaceEmojisWithIcons() {
    const walker = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT, null, false);
    const nodesToReplace = [];
    let node;
    
    // Collect nodes first to avoid mutation during traversal
    while (node = walker.nextNode()) {
        if (node.parentElement && !node.parentElement.closest('script, style, [data-no-emojis]')) {
            for (const emoji in iconMap) {
                if (node.textContent.includes(emoji)) {
                    nodesToReplace.push(node);
                    break;
                }
            }
        }
    }
    
    // Now replace the nodes
    nodesToReplace.forEach(textNode => {
        let text = textNode.textContent;
        const fragments = [];
        let lastIndex = 0;
        
        // Find all emojis and their positions
        const matches = [];
        for (const [emoji, iconHtml] of Object.entries(iconMap)) {
            const regex = new RegExp(emoji.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
            let match;
            while ((match = regex.exec(text)) !== null) {
                matches.push({ index: match.index, emoji, iconHtml, length: emoji.length });
            }
        }
        
        // Sort by position
        matches.sort((a, b) => a.index - b.index);
        
        // Build the replacement
        const parent = textNode.parentNode;
        const tempContainer = document.createElement('span');
        
        matches.forEach(match => {
            // Add text before emoji
            if (match.index > lastIndex) {
                tempContainer.appendChild(document.createTextNode(text.substring(lastIndex, match.index)));
            }
            // Add icon element
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = match.iconHtml;
            if (tempDiv.firstChild) {
                tempContainer.appendChild(tempDiv.firstChild);
            }
            lastIndex = match.index + match.length;
        });
        
        // Add remaining text
        if (lastIndex < text.length) {
            tempContainer.appendChild(document.createTextNode(text.substring(lastIndex)));
        }
        
        // Replace the text node with new content
        if (matches.length > 0) {
            while (tempContainer.firstChild) {
                parent.insertBefore(tempContainer.firstChild, textNode);
            }
            parent.removeChild(textNode);
        }
    });
}

// Initialize everything when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    // Initialize floating particles
    initFloatingParticles();
    
    // Replace emojis with icon tags first
    replaceEmojisWithIcons();
    
    // Initialize Lucide icons immediately after replacement
    setTimeout(() => {
        initLucideIcons();
        console.log('✨ Icons replaced and initialized');
    }, 200);
    
    // Re-initialize icons when dynamic content is added
    const observer = new MutationObserver(function(mutations) {
        let needsUpdate = false;
        mutations.forEach(function(mutation) {
            if (mutation.addedNodes.length > 0) {
                needsUpdate = true;
            }
        });
        if (needsUpdate) {
            setTimeout(initLucideIcons, 50);
        }
    });
    
    observer.observe(document.body, {
        childList: true,
        subtree: true
    });
    
    console.log('🌟 Genesis Visual Effects System Initialized');
    console.log('✨ 50 Floating Particles Active');
});


// WhatsApp Share Function for Brazilian Market
function shareViaWhatsApp() {
    const url = encodeURIComponent(window.location.href);
    const message = encodeURIComponent("🎵 Transforme sua meditação com Frequências Gênesis! 49 tons sagrados búblicos para cura e despertar espiritual. Experimente grátis!");
    window.open(`https://wa.me/?text=${message}%20${url}`, "_blank");
}

</script>

<!-- Affiliate Interest Modal -->
<div id="affiliateModal" style="
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.9);
    z-index: 12000;
    align-items: center;
    justify-content: center;
    padding: 15px;
    overflow-y: auto;
">
    <div style="
        background: linear-gradient(135deg, rgba(26,0,51,0.98), rgba(16,185,129,0.15));
        border-radius: 16px;
        padding: 24px 20px;
        max-width: 360px;
        width: 92%;
        text-align: center;
        border: 2px solid rgba(16,185,129,0.5);
        box-shadow: 0 0 30px rgba(16,185,129,0.3);
        margin: auto;
        max-height: 90vh;
        overflow-y: auto;
    ">
        <button onclick="closeAffiliateModal()" style="
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: #9ca3af;
            font-size: 24px;
            cursor: pointer;
        ">×</button>
        
        <div style="font-size: 40px; margin-bottom: 10px;">🤝</div>
        <h2 style="color: #10b981; font-size: 20px; margin-bottom: 8px;">Programa de Afiliados Em Breve!</h2>
        
        <div id="affiliateFormSection">
            <p style="color: #c4b5fd; font-size: 14px; line-height: 1.5; margin-bottom: 15px;">
                Adora Frequências Gênesis?<br>
                Estamos planejando um <strong style="color: #10b981;">programa de afiliados</strong> onde você pode ganhar 
                <strong style="color: #fbbf24;">30% de comissão</strong> por venda!
            </p>
            
            <div style="background: rgba(16,185,129,0.1); border-radius: 10px; padding: 12px; margin-bottom: 15px;">
                <div style="color: #10b981; font-weight: 700; margin-bottom: 5px; font-size: 14px;">💰 Ganhos Potenciais:</div>
                <div style="color: #fff; font-size: 13px;">
                    Premium: <strong style="color: #fbbf24;">$3</strong> • Ultimate: <strong style="color: #fbbf24;">$6</strong> por venda
                </div>
            </div>
            
            <p style="color: #9ca3af; font-size: 13px; margin-bottom: 12px;">
                Registre seu interesse para ser notificado quando lançarmos!
            </p>
            
            <input type="email" id="affiliateEmail" placeholder="seu@email.com" style="
                width: 100%;
                padding: 12px;
                border-radius: 10px;
                border: 2px solid rgba(16,185,129,0.4);
                background: rgba(16,185,129,0.1);
                color: #fff;
                font-size: 15px;
                margin-bottom: 12px;
                box-sizing: border-box;
            ">
            
            <button onclick="submitAffiliateInterest()" style="
                width: 100%;
                background: linear-gradient(90deg, #10b981, #059669);
                color: white;
                border: none;
                border-radius: 25px;
                padding: 12px;
                font-size: 15px;
                font-weight: 700;
                cursor: pointer;
                box-shadow: 0 4px 15px rgba(16,185,129,0.3);
            ">
                🚀 Registrar Meu Interesse
            </button>
            
            <p style="color: #6b7280; font-size: 11px; margin-top: 12px;">
                🔒 Sem spam, apenas um email quando o programa lançar
            </p>
        </div>
        
        <div id="affiliateSuccessSection" style="display: none;">
            <div style="font-size: 50px; margin-bottom: 10px;">✅</div>
            <h3 style="color: #10b981; font-size: 18px; margin-bottom: 8px;">Interesse Registrado!</h3>
            <p style="color: #c4b5fd; font-size: 14px; line-height: 1.5;">
                Obrigado por se registrar!<br>
                Enviaremos um email quando o programa de afiliados for lançado.<br>
                <span style="color: #9ca3af; font-size: 12px;">Previsão: 2026</span>
            </p>
            <button onclick="closeAffiliateModal()" style="
                margin-top: 20px;
                background: rgba(16,185,129,0.2);
                color: #10b981;
                border: 1px solid rgba(16,185,129,0.5);
                border-radius: 20px;
                padding: 12px 30px;
                font-size: 14px;
                font-weight: 600;
                cursor: pointer;
            ">Fechar</button>
        </div>
    </div>
</div>

<script>
// Affiliate Modal Functions
function showAffiliateModal() {
    document.getElementById('affiliateModal').style.display = 'flex';
    document.getElementById('affiliateFormSection').style.display = 'block';
    document.getElementById('affiliateSuccessSection').style.display = 'none';
    document.getElementById('affiliateEmail').value = '';
}

function closeAffiliateModal() {
    document.getElementById('affiliateModal').style.display = 'none';
}

async function submitAffiliateInterest() {
    const email = document.getElementById('affiliateEmail').value.trim();
    
    if (!email || !email.includes('@')) {
        alert('Por favor, insira um endereço de email válido');
        return;
    }
    
    // Save to localStorage as backup
    const affiliates = JSON.parse(localStorage.getItem('affiliate_interests') || '[]');
    affiliates.push({ email, date: new Date().toISOString() });
    localStorage.setItem('affiliate_interests', JSON.stringify(affiliates));
    
    // Try to send to backend
    try {
        await fetch('https://api.quantummerlin.com/api/affiliate-interest', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email })
        });
    } catch (e) {
        console.log('Affiliate interest saved locally');
    }
    
    // Show success
    document.getElementById('affiliateFormSection').style.display = 'none';
    document.getElementById('affiliateSuccessSection').style.display = 'block';
}

window.showAffiliateModal = showAffiliateModal;
window.closeAffiliateModal = closeAffiliateModal;

// WhatsApp Share Function for Brazilian Market
function shareViaWhatsApp() {
    const url = encodeURIComponent(window.location.href);
    const message = encodeURIComponent("🎵 Transforme sua meditação com Frequências Gênesis! 49 tons sagrados búblicos para cura e despertar espiritual. Experimente grátis!");
    window.open(`https://wa.me/?text=${message}%20${url}`, "_blank");
}

</script>

<!-- Lucide Icons -->

// WhatsApp Share Function for Brazilian Market
function shareViaWhatsApp() {
    const url = encodeURIComponent(window.location.href);
    const message = encodeURIComponent("🎵 Transforme sua meditação com Frequências Gênesis! 49 tons sagrados búblicos para cura e despertar espiritual. Experimente grátis!");
    window.open(`https://wa.me/?text=${message}%20${url}`, "_blank");
}

<script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js" onload="if(typeof lucide !== 'undefined') { lucide.createIcons(); console.log('Lucide icons initialized via onload'); }"></script>

<!-- Floating WhatsApp Button for Brazilian Market -->
<button onclick="shareViaWhatsApp()" style="position: fixed; bottom: 20px; right: 20px; background: linear-gradient(135deg, #25D366, #128C7E); color: white; border-radius: 50%; width: 60px; height: 60px; border: none; box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4); z-index: 9999; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s; font-size: 24px; display: flex; align-items: center; justify-content: center;" 
onmouseover="this.style.transform='scale(1.1)'" 
onmouseout="this.style.transform='scale(1)'">
📱
</button>

</body>
</html>
