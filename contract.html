<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Unconscious Contract Reveal | Quantum Merlin</title>
    <meta name="description" content="Discover the hidden life rules you're unconsciously following that limit your potential. Reveal and break your invisible contracts.">
    <meta name="keywords" content="unconscious contracts, limiting beliefs, self-sabotage, inner work, quantum merlin">
    <meta name="author" content="Quantum Merlin">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://quantummerlin.com/contract">
    
    <!-- PWA -->
    <meta name="theme-color" content="#9333ea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Favicon -->
    <link rel="icon" href="https://quantummerlin.com/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="https://quantummerlin.com/apple-touch-icon.png">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Unconscious Contract Reveal - Find Your Hidden Rules">
    <meta property="og:description" content="Discover the invisible agreements limiting your potential and learn to break free.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://quantummerlin.com/contract">
    <meta property="og:site_name" content="Quantum Merlin">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Unconscious Contract Reveal | Quantum Merlin">
    <meta name="twitter:description" content="Discover your hidden life rules and break free.">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VW4LGE7L1T"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-VW4LGE7L1T');
    </script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Exo+2:wght@300;400;500;600;700&family=Cinzel:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ========================================
           QUANTUM INTRO ANIMATION - INLINE
           ======================================== */
        #intro-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, #1a0033 0%, #0a0015 70%, #000000 100%);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        #lines-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .emoji-layer {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .intro-emoji {
            position: absolute;
            font-size: 80px;
            opacity: 0;
            filter: drop-shadow(0 0 20px currentColor);
        }

        #singularity {
            position: absolute;
            width: 400px;
            height: 400px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(147, 51, 234, 0.8) 0%, transparent 70%);
            opacity: 0;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        #intro-title {
            font-family: 'Orbitron', monospace;
            font-size: clamp(2rem, 8vw, 5rem);
            font-weight: 900;
            background: linear-gradient(135deg, #00f5ff 0%, #ff00ff 50%, #ffd700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0;
            letter-spacing: 8px;
            text-align: center;
            z-index: 10;
            position: relative;
        }

        .skip-intro {
            position: absolute;
            bottom: 40px;
            right: 40px;
            padding: 12px 30px;
            background: rgba(147, 51, 234, 0.3);
            border: 2px solid rgba(147, 51, 234, 0.5);
            color: #c4b5fd;
            font-family: 'Orbitron', monospace;
            font-size: 14px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .skip-intro:hover {
            background: rgba(147, 51, 234, 0.5);
            border-color: #9333ea;
        }

        #app-content {
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        #app-content.visible {
            opacity: 1;
        }

        /* ========================================
           CORE STYLES
           ======================================== */
        *, *::before, *::after {
            box-sizing: border-box;
        }
        
        html {
            overflow-x: hidden;
            max-width: 100vw;
            scroll-behavior: smooth;
        }
        
        body {
            background: #0a0a0f;
            color: #fff;
            overflow-x: hidden;
            max-width: 100vw;
            width: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Exo 2', sans-serif;
            line-height: 1.6;
        }

        /* ========================================
           FLOATING PARTICLES
           ======================================== */
        .particles-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, rgba(147, 51, 234, 0.8), transparent);
            border-radius: 50%;
            animation: floatParticle 15s infinite linear;
        }

        @keyframes floatParticle {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulseGlow {
            0%, 100% { 
                opacity: 1; 
                transform: scale(1); 
            }
            50% { 
                opacity: 0.8; 
                transform: scale(1.05); 
            }
        }

        @keyframes contractReveal {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        /* ========================================
           HEADER
           ======================================== */
        .qm-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 18px 40px;
            background: rgba(10, 10, 15, 0.92);
            backdrop-filter: blur(25px) saturate(180%);
            border-bottom: 1px solid rgba(0, 245, 255, 0.15);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.4);
        }

        .qm-header-inner {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1600px;
            margin: 0 auto;
        }

        .qm-logo {
            display: flex;
            align-items: center;
            gap: 16px;
            text-decoration: none;
        }

        .qm-logo-icon {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #00f5ff 0%, #9d00ff 100%);
            border-radius: 14px;
            font-size: 1.8rem;
            box-shadow: 0 0 25px rgba(0, 245, 255, 0.5);
            animation: logoGlow 3s ease-in-out infinite;
        }

        @keyframes logoGlow {
            0%, 100% { box-shadow: 0 0 25px rgba(0, 245, 255, 0.5); }
            50% { box-shadow: 0 0 35px rgba(0, 245, 255, 0.7); }
        }

        .qm-logo-text {
            font-family: 'Orbitron', monospace;
            font-size: 1.4rem;
            font-weight: 800;
            background: linear-gradient(135deg, #00f5ff 0%, #ff00ff 50%, #ffd700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .qm-coffee-btn {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #FFDD00, #FFA500);
            color: #000;
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            border-radius: 14px;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 221, 0, 0.3);
        }

        .qm-coffee-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(255, 221, 0, 0.5);
            background: linear-gradient(135deg, #FFE44D, #FFB84D);
        }

        /* ========================================
           MAIN CONTENT
           ======================================== */
        main {
            padding: 120px 20px 60px;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        h1 {
            font-family: 'Orbitron', monospace;
            font-size: clamp(1.8rem, 5vw, 3.8rem);
            text-align: center;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #9333ea, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeInUp 0.8s ease-out;
            padding: 0 15px;
            word-wrap: break-word;
        }

        .flagship-badge {
            display: inline-block;
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            color: #000;
            padding: 10px 24px;
            border-radius: 30px;
            font-size: 0.85em;
            font-weight: 800;
            font-family: 'Orbitron', monospace;
            box-shadow: 0 5px 25px rgba(255, 215, 0, 0.4);
            animation: fadeInUp 0.8s ease-out 0.1s backwards;
            margin-bottom: 20px;
        }

        .subtitle {
            text-align: center;
            color: rgba(196, 181, 253, 0.9);
            margin-bottom: 50px;
            font-size: 1.3rem;
            animation: fadeInUp 0.8s ease-out 0.15s backwards;
        }

        .intro-section {
            background: linear-gradient(145deg, rgba(147, 51, 234, 0.15), rgba(236, 72, 153, 0.1));
            border: 2px solid rgba(147, 51, 234, 0.4);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 50px;
            line-height: 1.9;
            color: #c4b5fd;
            animation: fadeInUp 0.8s ease-out 0.2s backwards;
            position: relative;
            overflow: hidden;
        }

        .intro-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #9333ea, #ec4899, #ffd700);
        }

        .intro-section p {
            margin-bottom: 15px;
            font-size: clamp(1em, 2.5vw, 1.1em);
            text-align: center;
        }

        .intro-section strong {
            color: #ec4899;
        }

        .intro-section ul {
            margin: 15px auto;
            color: #c4b5fd;
            max-width: 500px;
            list-style-position: inside;
            text-align: center;
        }

        .intro-section ul li {
            margin-bottom: 10px;
            font-style: italic;
        }

        .question-section {
            background: linear-gradient(145deg, rgba(30, 25, 45, 0.9), rgba(20, 20, 30, 0.8));
            border: 2px solid rgba(147, 51, 234, 0.3);
            border-radius: 20px;
            padding: 25px 20px;
            margin-bottom: 25px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            animation: fadeInUp 0.6s ease-out backwards;
            text-align: center;
            display: none; /* Hide old style */
        }

        /* Progress Bar */
        .progress-container {
            background: rgba(147, 51, 234, 0.1);
            border: 1px solid rgba(147, 51, 234, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .progress-bar {
            height: 8px;
            background: rgba(147, 51, 234, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #9333ea, #ec4899);
            border-radius: 10px;
            transition: width 0.4s ease;
            width: 0%;
        }

        .progress-text {
            text-align: center;
            color: #c4b5fd;
            font-size: 0.9em;
            font-family: 'Orbitron', monospace;
        }

        /* Accordion Questions */
        .questions-accordion {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .question-accordion-item {
            background: linear-gradient(145deg, rgba(30, 25, 45, 0.9), rgba(20, 20, 30, 0.8));
            border: 2px solid rgba(147, 51, 234, 0.3);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .question-accordion-item:hover {
            border-color: rgba(147, 51, 234, 0.5);
        }

        .question-accordion-item.active {
            border-color: #9333ea;
            box-shadow: 0 5px 25px rgba(147, 51, 234, 0.3);
        }

        .question-accordion-item.answered {
            border-color: rgba(52, 211, 153, 0.5);
        }

        .question-accordion-item.answered .question-header {
            background: rgba(52, 211, 153, 0.1);
        }

        .question-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 18px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            gap: 15px;
        }

        .question-header:hover {
            background: rgba(147, 51, 234, 0.1);
        }

        .question-header-left {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
            min-width: 0;
        }

        .question-num {
            background: linear-gradient(135deg, #9333ea, #7c3aed);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9em;
            flex-shrink: 0;
        }

        .question-accordion-item.answered .question-num {
            background: linear-gradient(135deg, #10b981, #34d399);
        }

        .question-preview {
            color: #c4b5fd;
            font-size: 0.95em;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .question-accordion-item.answered .question-preview {
            color: #34d399;
        }

        .accordion-icon {
            color: #9333ea;
            font-size: 1.2em;
            transition: transform 0.3s ease;
            flex-shrink: 0;
        }

        .question-accordion-item.active .accordion-icon {
            transform: rotate(180deg);
        }

        .question-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, padding 0.3s ease;
            padding: 0 20px;
        }

        .question-accordion-item.active .question-body {
            max-height: 400px;
            padding: 0 20px 25px;
        }

        .question-full-text {
            font-size: clamp(1.1em, 3vw, 1.3em);
            color: #e0d4f7;
            margin-bottom: 20px;
            line-height: 1.5;
            font-family: 'Cinzel', serif;
            text-align: center;
            padding-top: 5px;
        }

        .question-section:hover {
            border-color: #9333ea;
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(147, 51, 234, 0.2);
        }

        .question-section:nth-child(1) { animation-delay: 0.3s; }
        .question-section:nth-child(2) { animation-delay: 0.35s; }
        .question-section:nth-child(3) { animation-delay: 0.4s; }
        .question-section:nth-child(4) { animation-delay: 0.45s; }

        .question-number {
            color: #9333ea;
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 15px;
            font-family: 'Orbitron', monospace;
            text-align: center;
        }

        .question-text {
            font-size: clamp(1.1em, 3.5vw, 1.4em);
            color: #e0d4f7;
            margin-bottom: 25px;
            line-height: 1.6;
            font-family: 'Cinzel', serif;
            text-align: center;
            padding: 0 10px;
        }

        .scale-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 12px;
            width: 100%;
        }

        .scale-label {
            font-size: 0.95em;
            color: #ec4899;
            text-align: center;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            letter-spacing: 0.5px;
            width: 100%;
        }

        .scale-options {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 6px;
            width: 100%;
            max-width: 280px;
        }

        .scale-option {
            aspect-ratio: 1;
            max-width: 38px;
            width: 100%;
            border: 2px solid rgba(147, 51, 234, 0.3);
            border-radius: 12px;
            background: rgba(147, 51, 234, 0.1);
            color: #c4b5fd;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            flex-shrink: 0;
        }

        .scale-option:hover {
            border-color: #9333ea;
            background: rgba(147, 51, 234, 0.2);
            transform: translateY(-3px) scale(1.05);
        }

        .scale-option.selected {
            background: linear-gradient(135deg, #9333ea 0%, #ec4899 100%);
            border-color: transparent;
            color: white;
            transform: scale(1.15);
            box-shadow: 0 8px 30px rgba(147, 51, 234, 0.6);
        }

        .submit-btn {
            width: 100%;
            max-width: 500px;
            display: block;
            margin: 40px auto;
            padding: 20px;
            background: linear-gradient(135deg, #9333ea 0%, #ec4899 100%);
            color: white;
            border: none;
            border-radius: 35px;
            font-size: 1.4em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-family: 'Orbitron', monospace;
            box-shadow: 0 10px 35px rgba(147, 51, 234, 0.4);
            position: relative;
            overflow: hidden;
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .submit-btn:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 50px rgba(147, 51, 234, 0.6);
        }

        .submit-btn:hover::before {
            left: 100%;
        }

        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .submit-btn:disabled:hover {
            transform: none;
            box-shadow: 0 10px 35px rgba(147, 51, 234, 0.4);
        }

        /* ========================================
           RESULTS SECTION
           ======================================== */
        .results-section {
            display: none;
            animation: fadeInUp 0.8s ease-out;
        }

        .results-section.active {
            display: block;
        }

        .result-title {
            font-size: 2.5em;
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            margin-bottom: 40px;
            font-family: 'Orbitron', monospace;
            animation: contractReveal 0.8s ease-out;
        }

        .contract-reveal {
            background: linear-gradient(145deg, rgba(236, 72, 153, 0.15), rgba(147, 51, 234, 0.1));
            border: 3px solid #ec4899;
            border-radius: 25px;
            padding: 50px 40px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
            animation: contractReveal 1s ease-out 0.2s backwards;
        }

        .contract-reveal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ec4899, #ffd700, #ec4899);
        }

        .contract-text {
            font-size: 1.8em;
            color: #ec4899;
            text-align: center;
            font-style: italic;
            line-height: 1.6;
            margin-bottom: 25px;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            text-shadow: 0 2px 10px rgba(236, 72, 153, 0.3);
        }

        .contract-subtext {
            text-align: center;
            color: #c4b5fd;
            font-size: 1.1em;
        }

        .insight-box {
            background: linear-gradient(145deg, rgba(147, 51, 234, 0.15), rgba(236, 72, 153, 0.1));
            border: 2px solid rgba(147, 51, 234, 0.4);
            border-radius: 20px;
            padding: 35px;
            margin: 30px 0;
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.6s ease-out backwards;
        }

        .insight-box:nth-of-type(1) { animation-delay: 0.4s; }
        .insight-box:nth-of-type(2) { animation-delay: 0.5s; }
        .insight-box:nth-of-type(3) { animation-delay: 0.6s; }
        .insight-box:nth-of-type(4) { animation-delay: 0.7s; }

        .insight-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #9333ea, #ec4899, #ffd700);
        }

        .insight-title {
            font-size: 1.6em;
            color: #9333ea;
            margin-bottom: 20px;
            font-family: 'Orbitron', monospace;
            text-align: center;
        }

        .insight-text {
            color: #c4b5fd;
            line-height: 1.9;
            font-size: 1.1em;
            text-align: center;
        }

        .insight-text strong {
            color: #ec4899;
        }

        .action-buttons {
            display: flex;
            gap: 20px;
            margin-top: 40px;
            flex-wrap: wrap;
            justify-content: center;
            animation: fadeInUp 0.6s ease-out 0.8s backwards;
        }

        .action-btn {
            flex: 1;
            min-width: 200px;
            padding: 18px 35px;
            border-radius: 30px;
            border: 2px solid rgba(147, 51, 234, 0.4);
            background: rgba(147, 51, 234, 0.15);
            color: #c4b5fd;
            text-decoration: none;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            font-weight: 600;
            font-size: 1.05em;
            display: inline-block;
        }

        .action-btn:hover {
            background: rgba(147, 51, 234, 0.3);
            border-color: #9333ea;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(147, 51, 234, 0.4);
        }

        /* ========================================
           SCROLL TO TOP BUTTON
           ======================================== */
        #scrollTopBtn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #9333ea, #ec4899);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 1000;
            box-shadow: 0 5px 25px rgba(147, 51, 234, 0.4);
        }

        #scrollTopBtn.visible {
            opacity: 1;
            visibility: visible;
        }

        #scrollTopBtn:hover {
            transform: scale(1.1) translateY(-3px);
        }

        /* ========================================
           MOBILE RESPONSIVE
           ======================================== */
        @media (max-width: 768px) {
            .qm-header {
                padding: 15px 20px;
            }

            .qm-logo-text {
                font-size: 1rem;
            }

            h1 {
                font-size: 1.6rem;
                padding: 0 10px;
            }

            .subtitle {
                font-size: 1rem;
                padding: 0 15px;
            }

            .intro-section {
                padding: 20px 15px;
            }

            .question-section {
                padding: 20px 15px;
            }

            .scale-option {
                width: 48px;
                height: 48px;
                font-size: 1.2em;
            }

            .action-buttons {
                flex-direction: column;
            }

            .action-btn {
                min-width: 100%;
            }

            .skip-intro {
                bottom: 20px;
                right: 20px;
                font-size: 12px;
                padding: 10px 20px;
            }

            #intro-title {
                font-size: 2rem;
                letter-spacing: 4px;
            }

            .contract-text {
                font-size: 1.3em;
                padding: 0 10px;
            }

            .contract-reveal {
                padding: 25px 15px;
            }

            .insight-box {
                padding: 25px 15px;
            }

            .insight-title {
                font-size: 1.3em;
                text-align: center;
            }

            .insight-text {
                font-size: 1em;
                text-align: center;
            }

            main {
                padding: 100px 15px 40px;
            }
        }

        /* ========================================
           LOADING STATE
           ======================================== */
        .loading-pulse {
            animation: pulseGlow 1.5s infinite;
        }
    </style>
</head>
<body>
    <!-- ========================================
         QUANTUM INTRO ANIMATION
         ======================================== -->
    <div id="intro-container">
        <canvas id="lines-canvas"></canvas>
        <div class="emoji-layer">
            <div class="intro-emoji" id="intro-quantum">‚öõÔ∏è</div>
            <div class="intro-emoji" id="intro-wizard">üßô‚Äç‚ôÇÔ∏è</div>
            <div class="intro-emoji" id="intro-rose">üåπ</div>
        </div>
        <div id="singularity"></div>
        <div id="intro-title">QUANTUM MERLIN</div>
        <button class="skip-intro" onclick="skipIntro()">Skip Intro</button>
    </div>
    
    <div id="app-content">
        <!-- Floating Particles Background -->
        <div class="particles-bg" id="particlesBg"></div>

        <!-- Header -->
        <header class="qm-header">
            <div class="qm-header-inner">
                <a href="/index.html" class="qm-logo" target="_blank">
                    <div class="qm-logo-icon">üßô‚Äç‚ôÇÔ∏è</div>
                    <div class="qm-logo-text">Quantum Merlin</div>
                </a>
                <a href="https://buymeacoffee.com/quantummerlin" target="_blank" class="qm-coffee-btn" title="Buy Me a Coffee">
                    <span style="font-size: 1.8rem;">‚òï</span>
                </a>
            </div>
        </header>

        <!-- Main Content -->
        <main>
            <h1>Unconscious Contract Reveal</h1>
            <div style="text-align: center;">
                <span class="flagship-badge">üèÜ FLAGSHIP TOOL</span>
            </div>
            <p class="subtitle">Discover the hidden life rules you're unconsciously following</p>

            <div class="intro-section">
                <p><strong>What if you're living by rules you never consciously agreed to?</strong></p>
                <p>Most people operate under unconscious contracts‚Äîinvisible agreements they made with themselves, often in childhood, that now limit their potential. These contracts sound like:</p>
                <ul>
                    <li>"I am allowed stability, but not expansion"</li>
                    <li>"I can be successful, but not happy"</li>
                    <li>"I can have love, but not freedom"</li>
                    <li>"I can be visible, but not powerful"</li>
                </ul>
                <p><strong>Answer 4 simple questions to reveal your unconscious contract.</strong></p>
            </div>

            <div id="questionsContainer">
                <!-- Progress Bar -->
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text"><span id="answeredCount">0</span> of 4 questions answered</div>
                </div>

                <div class="questions-accordion">
                    <div class="question-accordion-item active" data-question="q1">
                        <div class="question-header" onclick="toggleAccordion('q1')">
                            <div class="question-header-left">
                                <div class="question-num">1</div>
                                <div class="question-preview">Permission to pursue what I want</div>
                            </div>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="question-body">
                            <div class="question-full-text">I feel I have permission to pursue what I truly want</div>
                            <div class="scale-container">
                                <span class="scale-label">&#9664; Not at all</span>
                                <div class="scale-options">
                                    <div class="scale-option" onclick="selectAnswer('q1', 0)">0</div>
                                    <div class="scale-option" onclick="selectAnswer('q1', 1)">1</div>
                                    <div class="scale-option" onclick="selectAnswer('q1', 2)">2</div>
                                    <div class="scale-option" onclick="selectAnswer('q1', 3)">3</div>
                                    <div class="scale-option" onclick="selectAnswer('q1', 4)">4</div>
                                    <div class="scale-option" onclick="selectAnswer('q1', 5)">5</div>
                                </div>
                                <span class="scale-label">Completely &#9654;</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-accordion-item" data-question="q2">
                        <div class="question-header" onclick="toggleAccordion('q2')">
                            <div class="question-header-left">
                                <div class="question-num">2</div>
                                <div class="question-preview">Good things lasting</div>
                            </div>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="question-body">
                            <div class="question-full-text">When good things happen, I expect them to last</div>
                            <div class="scale-container">
                                <span class="scale-label">&#9664; Not at all</span>
                                <div class="scale-options">
                                    <div class="scale-option" onclick="selectAnswer('q2', 0)">0</div>
                                    <div class="scale-option" onclick="selectAnswer('q2', 1)">1</div>
                                    <div class="scale-option" onclick="selectAnswer('q2', 2)">2</div>
                                    <div class="scale-option" onclick="selectAnswer('q2', 3)">3</div>
                                    <div class="scale-option" onclick="selectAnswer('q2', 4)">4</div>
                                    <div class="scale-option" onclick="selectAnswer('q2', 5)">5</div>
                                </div>
                                <span class="scale-label">Completely &#9654;</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-accordion-item" data-question="q3">
                        <div class="question-header" onclick="toggleAccordion('q3')">
                            <div class="question-header-left">
                                <div class="question-num">3</div>
                                <div class="question-preview">Multiple good things at once</div>
                            </div>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="question-body">
                            <div class="question-full-text">I believe I can have multiple good things at once (success AND happiness, love AND freedom)</div>
                            <div class="scale-container">
                                <span class="scale-label">&#9664; Not at all</span>
                                <div class="scale-options">
                                    <div class="scale-option" onclick="selectAnswer('q3', 0)">0</div>
                                    <div class="scale-option" onclick="selectAnswer('q3', 1)">1</div>
                                    <div class="scale-option" onclick="selectAnswer('q3', 2)">2</div>
                                    <div class="scale-option" onclick="selectAnswer('q3', 3)">3</div>
                                    <div class="scale-option" onclick="selectAnswer('q3', 4)">4</div>
                                    <div class="scale-option" onclick="selectAnswer('q3', 5)">5</div>
                                </div>
                                <span class="scale-label">Completely &#9654;</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-accordion-item" data-question="q4">
                        <div class="question-header" onclick="toggleAccordion('q4')">
                            <div class="question-header-left">
                                <div class="question-num">4</div>
                                <div class="question-preview">Safe being powerful and visible</div>
                            </div>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="question-body">
                            <div class="question-full-text">I feel safe being fully powerful and visible</div>
                            <div class="scale-container">
                                <span class="scale-label">&#9664; Not at all</span>
                                <div class="scale-options">
                                    <div class="scale-option" onclick="selectAnswer('q4', 0)">0</div>
                                    <div class="scale-option" onclick="selectAnswer('q4', 1)">1</div>
                                    <div class="scale-option" onclick="selectAnswer('q4', 2)">2</div>
                                    <div class="scale-option" onclick="selectAnswer('q4', 3)">3</div>
                                    <div class="scale-option" onclick="selectAnswer('q4', 4)">4</div>
                                    <div class="scale-option" onclick="selectAnswer('q4', 5)">5</div>
                                </div>
                                <span class="scale-label">Completely &#9654;</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <button class="submit-btn" id="submitBtn" onclick="generateResults()" disabled>
                üìú Reveal Your Unconscious Contract
            </button>

            <div class="results-section" id="resultsSection">
                <!-- Results will be generated here -->
            </div>
        </main>

        <!-- Footer -->
        <footer style="text-align: center; padding: 40px 20px; margin-top: 60px; border-top: 1px solid rgba(147, 51, 234, 0.15); position: relative; z-index: 1;">
            <p style="color: rgba(255, 255, 255, 0.7);">&copy; 2024 Quantum Merlin. Bridging ancient wisdom with quantum possibilities.</p>
            <p style="margin-top: 15px;">
                <a href="./genesis/privacy.html" target="_blank" style="color: #9333ea; text-decoration: none; margin: 0 15px;">Privacy Policy</a>
                <a href="./genesis/terms.html" target="_blank" style="color: #9333ea; text-decoration: none; margin: 0 15px;">Terms of Service</a>
                <a href="./genesis/disclaimer.html" target="_blank" style="color: #9333ea; text-decoration: none; margin: 0 15px;">Disclaimer</a>
            </p>
            <p style="margin-top: 15px;">
                <a href="https://buymeacoffee.com/quantummerlin" target="_blank" style="color: #9333ea; text-decoration: none;">‚òï Support This Project</a>
            </p>
        </footer>
    </div>
    
    <!-- Scroll to Top Button -->
    <button id="scrollTopBtn">‚Üë</button>

    <script>
        // ========================================
        // QUANTUM INTRO ANIMATION
        // ========================================
        function skipIntro() {
            localStorage.setItem('qm_intro_watched', 'true');
            document.getElementById('intro-container').style.display = 'none';
            document.getElementById('app-content').classList.add('visible');
        }

        (function initIntro() {
            const introWatched = localStorage.getItem('qm_intro_watched');
            
            if (introWatched === 'true') {
                document.getElementById('intro-container').style.display = 'none';
                document.getElementById('app-content').classList.add('visible');
                return;
            }

            const canvas = document.getElementById('lines-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const quantum = document.getElementById('intro-quantum');
            const wizard = document.getElementById('intro-wizard');
            const rose = document.getElementById('intro-rose');
            const singularity = document.getElementById('singularity');
            const title = document.getElementById('intro-title');

            const timeline = [
                { t: 0, action: () => { quantum.style.cssText = 'top: 50%; left: 50%; transform: translate(-50%, -50%); opacity: 1;'; } },
                { t: 1000, action: () => { wizard.style.cssText = 'top: 50%; left: 30%; transform: translate(-50%, -50%); opacity: 1;'; } },
                { t: 2000, action: () => { rose.style.cssText = 'top: 50%; left: 70%; transform: translate(-50%, -50%); opacity: 1;'; } },
                { t: 3000, action: () => { quantum.style.cssText += 'transition: all 1s ease; top: 40%; left: 50%;'; } },
                { t: 3500, action: () => { wizard.style.cssText += 'transition: all 1s ease; top: 55%; left: 35%;'; } },
                { t: 4000, action: () => { rose.style.cssText += 'transition: all 1s ease; top: 55%; left: 65%;'; } },
                { t: 5000, action: () => { singularity.style.opacity = '1'; } },
                { t: 6000, action: () => { 
                    quantum.style.cssText += 'transform: translate(-50%, -50%) scale(0); opacity: 0;';
                    wizard.style.cssText += 'transform: translate(-50%, -50%) scale(0); opacity: 0;';
                    rose.style.cssText += 'transform: translate(-50%, -50%) scale(0); opacity: 0;';
                } },
                { t: 7500, action: () => { title.style.cssText = 'opacity: 1; transform: scale(1);'; } },
                { t: 11000, action: () => { skipIntro(); } }
            ];

            timeline.forEach(({ t, action }) => setTimeout(action, t));

            let particles = [];
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2
                });
            }

            function animate() {
                ctx.fillStyle = 'rgba(10, 0, 21, 0.1)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(147, 51, 234, 0.5)';
                    ctx.fill();

                    particles.forEach(p2 => {
                        const dist = Math.hypot(p.x - p2.x, p.y - p2.y);
                        if (dist < 100) {
                            ctx.beginPath();
                            ctx.moveTo(p.x, p.y);
                            ctx.lineTo(p2.x, p2.y);
                            ctx.strokeStyle = `rgba(147, 51, 234, ${0.15 * (1 - dist / 100)})`;
                            ctx.stroke();
                        }
                    });
                });

                requestAnimationFrame(animate);
            }
            animate();
        })();

        // ========================================
        // FLOATING PARTICLES SYSTEM
        // ========================================
        function createParticles() {
            const container = document.getElementById('particlesBg');
            if (!container) return;
            
            const particleCount = 30;
            const colors = ['rgba(147, 51, 234, 0.6)', 'rgba(236, 72, 153, 0.5)', 'rgba(255, 215, 0, 0.4)'];
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particle.style.width = (Math.random() * 4 + 2) + 'px';
                particle.style.height = particle.style.width;
                particle.style.background = `radial-gradient(circle, ${colors[Math.floor(Math.random() * colors.length)]}, transparent)`;
                container.appendChild(particle);
            }
        }
        createParticles();

        // ========================================
        // SCROLL TO TOP BUTTON
        // ========================================
        const scrollBtn = document.getElementById('scrollTopBtn');
        
        scrollBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        window.addEventListener('scroll', () => {
            if (window.scrollY > 500) {
                scrollBtn.classList.add('visible');
            } else {
                scrollBtn.classList.remove('visible');
            }
        });

        // ========================================
        // UNCONSCIOUS CONTRACT ASSESSMENT
        // ========================================
        let answers = {};
        const totalQuestions = 4;

        function toggleAccordion(questionId) {
            const allItems = document.querySelectorAll('.question-accordion-item');
            const clickedItem = document.querySelector(`[data-question="${questionId}"]`);
            
            allItems.forEach(item => {
                if (item !== clickedItem) {
                    item.classList.remove('active');
                }
            });
            
            clickedItem.classList.toggle('active');
        }

        function updateProgress() {
            const answered = Object.keys(answers).length;
            const percentage = (answered / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('answeredCount').textContent = answered;
        }

        function selectAnswer(question, value) {
            answers[question] = value;
            
            // Update scale options
            const accordionItem = document.querySelector(`[data-question="${question}"]`);
            accordionItem.querySelectorAll('.scale-option').forEach((option, index) => {
                option.classList.toggle('selected', index === value);
            });
            
            // Mark as answered
            accordionItem.classList.add('answered');
            
            // Update progress
            updateProgress();
            
            // Auto-advance to next question after short delay
            setTimeout(() => {
                const nextQ = 'q' + (parseInt(question.replace('q', '')) + 1);
                const nextItem = document.querySelector(`[data-question="${nextQ}"]`);
                if (nextItem && !nextItem.classList.contains('answered')) {
                    toggleAccordion(nextQ);
                } else if (Object.keys(answers).length === totalQuestions) {
                    // All answered - close accordion and highlight submit
                    accordionItem.classList.remove('active');
                }
            }, 400);
            
            // Enable submit button when all questions answered
            if (Object.keys(answers).length === totalQuestions) {
                document.getElementById('submitBtn').disabled = false;
            }

            // Track in analytics
            if (typeof gtag !== 'undefined') {
                gtag('event', 'question_answered', {
                    question_id: question,
                    value: value
                });
            }
        }

        function generateResults() {
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.textContent = 'üîÆ Analyzing Your Contract...';
            submitBtn.disabled = true;
            submitBtn.classList.add('loading-pulse');
            
            // Track in analytics
            if (typeof gtag !== 'undefined') {
                gtag('event', 'assessment_completed', {
                    total_questions: 4
                });
            }
            
            setTimeout(() => {
                const q1 = answers.q1; // Permission
                const q2 = answers.q2; // Permanence
                const q3 = answers.q3; // Abundance
                const q4 = answers.q4; // Power/Visibility

                // Determine contract type
                let contract = determineContract(q1, q2, q3, q4);
                
                // Generate results
                const resultsHTML = `
                    <div class="result-title">Your Unconscious Contract Revealed</div>
                    
                    <div class="contract-reveal">
                        <div class="contract-text">"${contract.statement}"</div>
                        <p class="contract-subtext">
                            This is the invisible agreement limiting your potential
                        </p>
                    </div>

                    <div class="insight-box">
                        <div class="insight-title">üéØ What This Means</div>
                        <div class="insight-text">${contract.meaning}</div>
                    </div>

                    <div class="insight-box">
                        <div class="insight-title">üåü How It Shows Up</div>
                        <div class="insight-text">${contract.manifestation}</div>
                    </div>

                    <div class="insight-box">
                        <div class="insight-title">üîì Breaking Free</div>
                        <div class="insight-text">${contract.liberation}</div>
                    </div>

                    <div class="insight-box">
                        <div class="insight-title">üí´ Your New Permission</div>
                        <div class="insight-text">${contract.newPermission}</div>
                    </div>

                    <div class="action-buttons">
                        <button class="action-btn" onclick="saveToLibrary()">üíæ Save to Library</button>
                        <a href="/library.html" target="_blank" class="action-btn">üìö View Library</a>
                    </div>
                    
                    ${getPersonalizedRecommendation(q1, q2, q3, q4)}
                    
                    <div class="next-tools-section" style="margin-top: 40px; padding: 30px; background: rgba(147, 51, 234, 0.1); border: 2px solid rgba(147, 51, 234, 0.3); border-radius: 20px;">
                        <h3 style="color: #9333ea; text-align: center; margin-bottom: 20px; font-family: 'Orbitron', monospace;">Continue Your Journey</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <a href="/energyleak.html" target="_blank" style="display: block; padding: 20px; background: rgba(147, 51, 234, 0.15); border: 1px solid rgba(147, 51, 234, 0.3); border-radius: 12px; text-decoration: none; text-align: center; transition: all 0.3s ease;" onmouseover="this.style.borderColor='#9333ea'; this.style.transform='translateY(-3px)'" onmouseout="this.style.borderColor='rgba(147, 51, 234, 0.3)'; this.style.transform='translateY(0)'">
                                <div style="font-size: 2em; margin-bottom: 8px;">üîã</div>
                                <div style="color: #c4b5fd; font-weight: 600;">Energy Leak Locator</div>
                                <div style="color: #a78bfa; font-size: 0.85em; margin-top: 5px;">Find where your energy drains</div>
                            </a>
                            <a href="/manifest.html" target="_blank" style="display: block; padding: 20px; background: rgba(147, 51, 234, 0.15); border: 1px solid rgba(147, 51, 234, 0.3); border-radius: 12px; text-decoration: none; text-align: center; transition: all 0.3s ease;" onmouseover="this.style.borderColor='#9333ea'; this.style.transform='translateY(-3px)'" onmouseout="this.style.borderColor='rgba(147, 51, 234, 0.3)'; this.style.transform='translateY(0)'">
                                <div style="font-size: 2em; margin-bottom: 8px;">üéØ</div>
                                <div style="color: #c4b5fd; font-weight: 600;">Manifestation Readiness</div>
                                <div style="color: #a78bfa; font-size: 0.85em; margin-top: 5px;">Are you ready for change?</div>
                            </a>
                            <a href="/forecasts" target="_blank" style="display: block; padding: 20px; background: rgba(147, 51, 234, 0.15); border: 1px solid rgba(147, 51, 234, 0.3); border-radius: 12px; text-decoration: none; text-align: center; transition: all 0.3s ease;" onmouseover="this.style.borderColor='#9333ea'; this.style.transform='translateY(-3px)'" onmouseout="this.style.borderColor='rgba(147, 51, 234, 0.3)'; this.style.transform='translateY(0)'">
                                <div style="font-size: 2em; margin-bottom: 8px;">üîÆ</div>
                                <div style="color: #c4b5fd; font-weight: 600;">Quantum Forecaster</div>
                                <div style="color: #a78bfa; font-size: 0.85em; margin-top: 5px;">Best timing for transformation</div>
                            </a>
                        </div>
                    </div>
                `;

                document.getElementById('resultsSection').innerHTML = resultsHTML;
                document.getElementById('resultsSection').classList.add('active');
                
                submitBtn.textContent = '‚úÖ Contract Revealed';
                submitBtn.classList.remove('loading-pulse');
                
                // Auto-save to library
                saveToLibraryAuto(contract, q1, q2, q3, q4);
                
                // Smooth scroll to results
                setTimeout(() => {
                    document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 300);
            }, 1500);
        }

        function determineContract(q1, q2, q3, q4) {
            const avgScore = (q1 + q2 + q3 + q4) / 4;
            
            // Low permission, low permanence
            if (q1 <= 2 && q2 <= 2) {
                return {
                    statement: "I am allowed to survive, but not to thrive",
                    meaning: "You've unconsciously agreed that basic stability is acceptable, but expansion beyond your current state feels forbidden or dangerous. This contract keeps you in a perpetual state of 'just enough.'",
                    manifestation: "You find yourself repeatedly hitting invisible ceilings. When opportunities for growth appear, you unconsciously sabotage them or find reasons why 'now isn't the right time.' You're comfortable with maintenance but uncomfortable with momentum.",
                    liberation: "Begin by giving yourself permission to want more without justification. Practice saying 'I want this' without immediately following it with 'but.' Start with small expansions‚Äîorder the meal you actually want, not the cheapest one. Take the scenic route. Buy the nicer version. Train your nervous system that expansion is safe.",
                    newPermission: "I am allowed to thrive, expand, and claim more of what I desire. My growth does not threaten my stability‚Äîit enhances it."
                };
            }
            
            // Low abundance (can't have multiple good things)
            if (q3 <= 2) {
                return {
                    statement: "I can have success OR happiness, but not both",
                    meaning: "You operate under a scarcity contract that says good things are mutually exclusive. If you're successful, you must sacrifice happiness. If you're happy, you can't be ambitious. This either/or thinking creates constant internal conflict.",
                    manifestation: "You notice patterns of compensation‚Äîwhen work goes well, relationships suffer. When you're happy, you feel guilty about not being productive. You unconsciously balance the scales, never allowing yourself to have 'too much' good at once.",
                    liberation: "Challenge the either/or narrative. Look for evidence of people who have both. Start small: Can you be productive AND enjoy the process? Can you be successful AND kind? Practice 'and' thinking instead of 'or' thinking. Your nervous system needs proof that having multiple good things won't trigger punishment.",
                    newPermission: "I am allowed to have success AND happiness, love AND freedom, power AND peace. Abundance in one area amplifies abundance in others."
                };
            }
            
            // Low power/visibility
            if (q4 <= 2) {
                return {
                    statement: "I am allowed to be capable, but not powerful",
                    meaning: "You've learned that being fully visible and powerful is dangerous. Perhaps you witnessed someone being punished for their power, or you were shamed for standing out. Now you unconsciously dim your light to stay safe.",
                    manifestation: "You're competent but invisible. You do the work but let others take credit. You have insights but don't share them. When opportunities for visibility arise, you feel intense discomfort‚Äîalmost like you're breaking a sacred rule. You're the secret weapon, never the leader.",
                    liberation: "Start with micro-visibility. Share one insight in a meeting. Post one authentic thought online. Sign your name to your work. Notice the discomfort but do it anyway. Your nervous system expects punishment for visibility, but when it doesn't come, the contract begins to dissolve. Practice taking up space without apologizing.",
                    newPermission: "I am allowed to be fully visible, powerful, and seen. My light does not threaten others‚Äîit gives them permission to shine too."
                };
            }
            
            // Low permanence (good things don't last)
            if (q2 <= 2) {
                return {
                    statement: "I am allowed temporary joy, but not lasting fulfillment",
                    meaning: "You've internalized the belief that good things are fleeting. Perhaps you experienced sudden loss or instability in childhood. Now you unconsciously expect good things to end, which creates a self-fulfilling prophecy.",
                    manifestation: "You can't fully enjoy good moments because you're waiting for the other shoe to drop. When things go well, you feel anxious rather than celebratory. You might even sabotage good situations to regain control over the inevitable ending. You're always braced for loss.",
                    liberation: "Practice staying present with good feelings for 10 seconds longer than comfortable. When something good happens, resist the urge to immediately think about when it will end. Build evidence that good things can last by tracking positive patterns. Your nervous system needs proof that permanence is possible.",
                    newPermission: "I am allowed to build lasting fulfillment. Good things in my life are not temporary accidents‚Äîthey are the natural result of my alignment and worthiness."
                };
            }
            
            // Moderate scores - mixed contract
            if (avgScore >= 2.5 && avgScore <= 3.5) {
                return {
                    statement: "I am allowed progress, but not completion",
                    meaning: "You've unconsciously agreed that you can move forward, but never fully arrive. This keeps you in perpetual striving mode‚Äîalways improving, never satisfied. The finish line keeps moving.",
                    manifestation: "You're productive but never feel 'done.' You achieve goals but immediately set new ones without celebrating. You can start projects but struggle to complete them. There's always one more thing to fix, improve, or optimize before you can rest.",
                    liberation: "Practice completion. Finish one small thing and declare it done‚Äînot perfect, just done. Celebrate milestones before moving to the next goal. Give yourself permission to rest without earning it through productivity. Your worth is not determined by your progress.",
                    newPermission: "I am allowed to complete, arrive, and rest. My value exists independent of my productivity. I can be whole without being perfect."
                };
            }
            
            // High scores - subtle contract
            return {
                statement: "I am allowed everything, but not ease",
                meaning: "You have permission to achieve and succeed, but you've unconsciously agreed it must be hard. Struggle has become your identity. If something comes easily, it doesn't count or feel legitimate.",
                manifestation: "You create unnecessary complexity. You choose the hard path even when easier options exist. You feel guilty when things flow naturally. You might even sabotage ease because it doesn't match your self-concept as someone who 'earns' everything through struggle.",
                liberation: "Practice receiving without earning. Accept compliments without deflecting. Let someone help you. Choose the easier option and notice the discomfort. Your worth is not determined by how hard you work. Ease is not laziness‚Äîit's alignment.",
                newPermission: "I am allowed to have everything I desire with ease and flow. Struggle is not a prerequisite for worthiness. I can receive without suffering first."
            };
        }

        function saveToLibraryAuto(contract, q1, q2, q3, q4) {
            try {
                const result = {
                    id: Date.now(),
                    type: 'unconscious-contract',
                    name: 'Unconscious Contract Reveal',
                    timestamp: Date.now(),
                    savedAt: new Date().toISOString(),
                    data: {
                        contract: contract.statement,
                        scores: { permission: q1, permanence: q2, abundance: q3, power: q4 },
                        answers: answers
                    },
                    title: `Unconscious Contract: ${contract.statement}`,
                    description: contract.meaning,
                    content: `Your Unconscious Contract:\n"${contract.statement}"\n\nMeaning:\n${contract.meaning}\n\nHow It Shows Up:\n${contract.manifestation}\n\nBreaking Free:\n${contract.liberation}\n\nNew Permission:\n${contract.newPermission}`
                };

                let library = localStorage.getItem('qm_library');
                library = library ? JSON.parse(library) : [];
                library.unshift(result);
                localStorage.setItem('qm_library', JSON.stringify(library));
                
                console.log('‚úÖ Results auto-saved to library');
                
                // Track in analytics
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'saved_to_library', {
                        tool: 'unconscious-contract-reveal',
                        contract_type: contract.statement
                    });
                }
            } catch (error) {
                console.error('Error saving to library:', error);
            }
        }

        function saveToLibrary() {
            // Show confirmation
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = '‚úÖ Saved!';
            btn.style.background = 'linear-gradient(135deg, #22c55e, #16a34a)';
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = '';
            }, 2000);
        }

        // ========================================
        // PERSONALIZED RECOMMENDATIONS
        // ========================================
        function getPersonalizedRecommendation(q1, q2, q3, q4) {
            let rec = { icon: '', tool: '', link: '', reason: '' };
            
            // Low power/visibility - recommend Birth Sigil to reclaim cosmic identity
            if (q4 <= 2) {
                rec = { icon: 'üåô', tool: 'Birth Sigil Generator', link: '/birth-sigil.html', reason: 'Your power score suggests you may have dimmed your light. Generating your Birth Sigil can help you reconnect with your inherent cosmic identity and the power you were born with.' };
            }
            // Low permanence - recommend Forecaster for timing
            else if (q2 <= 2) {
                rec = { icon: 'üîÆ', tool: 'Quantum Forecaster', link: '/forecasts', reason: 'Your permanence score suggests anxiety about things lasting. The Quantum Forecaster can help you understand cosmic timing and build trust that good things are meant to stay.' };
            }
            // Low abundance - recommend Energy Leak to find blocks
            else if (q3 <= 2) {
                rec = { icon: 'üîã', tool: 'Energy Leak Locator', link: '/energyleak.html', reason: 'Your abundance score suggests energy is being diverted. Finding your energy leaks can reveal what\'s blocking the flow of multiple good things into your life.' };
            }
            // Low permission - recommend Manifestation Readiness
            else if (q1 <= 2) {
                rec = { icon: 'üéØ', tool: 'Manifestation Readiness', link: '/manifest.html', reason: 'Your permission score is low. The Manifestation Readiness assessment can help you understand what\'s needed before you can fully receive what you want.' };
            }
            // General recommendation
            else {
                rec = { icon: 'üí´', tool: 'Compatibility Calculator', link: '/compatibility.html', reason: 'Your scores suggest you\'re ready to explore how your energy interacts with others. Understanding relationship dynamics can accelerate your growth.' };
            }
            
            return `
                <div class="insight-box" style="border-left-color: #ec4899;">
                    <div class="insight-title">‚ö° Personalized Recommendation</div>
                    <div class="insight-text">
                        <strong>Based on your contract:</strong> ${rec.reason}
                        <div style="margin-top: 20px; text-align: center;">
                            <a href="${rec.link}" target="_blank" style="display: inline-flex; align-items: center; gap: 10px; padding: 15px 30px; background: linear-gradient(135deg, #9333ea, #ec4899); color: white; text-decoration: none; border-radius: 25px; font-weight: 600; transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 25px rgba(147, 51, 234, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                <span style="font-size: 1.3em;">${rec.icon}</span> Try ${rec.tool}
                            </a>
                        </div>
                    </div>
                </div>
            `;
        }

        // ========================================
        // KEYBOARD SHORTCUTS
        // ========================================
        document.addEventListener('keydown', (e) => {
            // Press 'h' to go home
            if (e.key === 'h' && !e.ctrlKey && !e.metaKey) {
                if (!document.activeElement || document.activeElement.tagName !== 'INPUT') {
                    window.open('/index.html', '_blank');
                }
            }

            // Press 'l' to go to library
            if (e.key === 'l' && !e.ctrlKey && !e.metaKey) {
                if (!document.activeElement || document.activeElement.tagName !== 'INPUT') {
                    window.open('/library.html', '_blank');
                }
            }
        });
    </script>
</body>
</html>


